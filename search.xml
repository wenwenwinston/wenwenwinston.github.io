<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>SpringCloud基础篇</title>
      <link href="/2023/03/26/59401.html"/>
      <url>/2023/03/26/59401.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> SpringCloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot基础篇</title>
      <link href="/2023/03/21/14375.html"/>
      <url>/2023/03/21/14375.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatis基础篇</title>
      <link href="/2023/03/16/54676.html"/>
      <url>/2023/03/16/54676.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC基础篇</title>
      <link href="/2023/03/06/51847.html"/>
      <url>/2023/03/06/51847.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> SpringMVC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring基础篇</title>
      <link href="/2023/03/01/63124.html"/>
      <url>/2023/03/01/63124.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python高级语法</title>
      <link href="/2023/02/18/33390.html"/>
      <url>/2023/02/18/33390.html</url>
      
        <content type="html"><![CDATA[<h1 id="类的定义和使用"><a href="#类的定义和使用" class="headerlink" title="类的定义和使用"></a>类的定义和使用</h1><p>类的定义语法格式如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ClassName</span>:</span><br><span class="line">    类的属性，即定义在类中的变量（成员变量</span><br><span class="line">    </span><br><span class="line">    类的行为，即定义在类中的函数（成员方法）</span><br></pre></td></tr></table></figure><p>类实例化后，可以使用其属性，实际上，创建一个类之后，可以通过类名访问其属性。</p><p>创建类对象的语法：<code>对象 = 类名称()</code>。</p><hr><h1 id="成员变量和成员方法"><a href="#成员变量和成员方法" class="headerlink" title="成员变量和成员方法"></a>成员变量和成员方法</h1><p>类中定义的属性（变量），称之为：成员变量。<br>类中定义的行为（函数），称之为：成员方法。</p><p>在类的内部，使用<code>def</code>关键字来定义一个方法，与定义在类外的一般函数不同，类方法必须包含参数<code>self</code>，且为第一个参数，<code>self</code>代表的是类的实例。但是<code>self</code>不是python关键字，把它换成<code>a</code>也是可以正常执行的。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">类名称</span>:</span><br><span class="line">    成员变量</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">成员方法</span>(<span class="params">self ,参数列表</span>):</span><br><span class="line">        成员方法体</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">对象 = 类名称()</span><br><span class="line">对象.成员变量 = 值</span><br><span class="line">对象.成员方法(参数列表)</span><br></pre></td></tr></table></figure><p>self的作用：</p><ul><li>表示类对象本身的意思</li><li>只有通过self，成员方法才能访问类的成员变量</li><li>self出现在形参列表中，但是不占用参数位置，无需理会</li></ul><hr><h1 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h1><p>Python类可以使用<code>__init__()</code>方法，称之为构造方法。<br>可以实现：</p><ul><li>在创建类对象（构造类）的时候，会自动执行。</li><li>在创建类对象（构造类）的时候，将传入参数自动传递给<code>__init__</code>方法使用，借此特性可以给成员变量赋值。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="comment"># name = None # 可以省略</span></span><br><span class="line">    <span class="comment"># age = None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, phone</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.phone = phone</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">say</span>(<span class="params">a</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;大家好，我叫<span class="subst">&#123;a.name&#125;</span>，今年<span class="subst">&#123;a.age&#125;</span>岁。&quot;</span>)</span><br><span class="line"></span><br><span class="line">student = Student(<span class="string">&#x27;张三&#x27;</span>, <span class="number">23</span>, <span class="number">110</span>)</span><br><span class="line">student.say()  <span class="comment"># 大家好，我叫张三，今年23岁。</span></span><br></pre></td></tr></table></figure><p>构造方法注意事项：</p><ul><li>构造方法名称：<code>__init__</code>。</li><li>构造方法也是成员方法，在参数列表中需提供<code>self</code>。</li><li>在构造方法内定义成员变量，需要使用<code>self</code>，这是因为变量是定义在构造方法内部，如果要成为成员变量，需要用<code>self</code>来表示。</li></ul><hr><h1 id="常用的内置方法"><a href="#常用的内置方法" class="headerlink" title="常用的内置方法"></a>常用的内置方法</h1><p><code>__init__</code>构造方法，是Python类内置的方法之一。<br>这些双下划线<code>__</code>包起来的内置的类方法，各自有各自特殊的功能，这些内置方法可称之为：魔术方法</p><h2 id="str字符串方法"><a href="#str字符串方法" class="headerlink" title="str字符串方法"></a>str字符串方法</h2><p>当打印类对象或类对象被转换为字符串时，会输出对象的内存地址，如<code>&lt;__main__.Student object at 0x00000158C73BFC90&gt;</code>。<br>内存地址没有多大作用，可通过<code>__str__</code>方法，控制印类对象或类转换为字符串的行为。</p><ul><li>方法名：<code>__str__</code></li><li>返回值：字符串</li><li>内容：自行定义</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, phone</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.phone = phone</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;Student对象的name属性值<span class="subst">&#123;self.name&#125;</span>，age属性值<span class="subst">&#123;self.age&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">student = Student(<span class="string">&#x27;张三&#x27;</span>, <span class="number">23</span>, <span class="number">110</span>)</span><br><span class="line"><span class="built_in">print</span>(student)  <span class="comment"># Student对象的name属性值张三，age属性值23</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>(student))  <span class="comment"># Student对象的name属性值张三，age属性值23</span></span><br></pre></td></tr></table></figure><h2 id="lt小于符号比较方法"><a href="#lt小于符号比较方法" class="headerlink" title="lt小于符号比较方法"></a>lt小于符号比较方法</h2><p>直接对两个对象进行比较是不可以的，但可在类中实现<code>__lt__</code>方法，即可同时完成小于符号和大于符号两种比较。</p><ul><li>方法名：<code>__lt__</code></li><li>传入参数：other，另一个类对象</li><li>返回值：True 或 False</li><li>内容：自行定义</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, phone</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.phone = phone</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__lt__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> self.age &lt; other.age</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">student1 = Student(<span class="string">&#x27;张三&#x27;</span>, <span class="number">23</span>, <span class="number">110</span>)</span><br><span class="line">student2 = Student(<span class="string">&#x27;李四&#x27;</span>, <span class="number">24</span>, <span class="number">120</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(student1 &lt; student2)  <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(student1 &gt; student2)  <span class="comment"># False</span></span><br></pre></td></tr></table></figure><hr><h2 id="le小于等于比较符号方法"><a href="#le小于等于比较符号方法" class="headerlink" title="le小于等于比较符号方法"></a>le小于等于比较符号方法</h2><p><code>__le__</code>可用于：小于等于符号和大于等于符号两种比较运算符上。</p><ul><li>方法名：<code>__le__</code></li><li>传入参数：other，另一个类对象</li><li>返回值：True 或 False</li><li>内容：自行定义</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, phone</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.phone = phone</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__le__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> self.age &lt;= other.age</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">student1 = Student(<span class="string">&#x27;张三&#x27;</span>, <span class="number">23</span>, <span class="number">110</span>)</span><br><span class="line">student2 = Student(<span class="string">&#x27;李四&#x27;</span>, <span class="number">24</span>, <span class="number">120</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(student1 &lt;= student2)  <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(student1 &gt;= student2)  <span class="comment"># False</span></span><br></pre></td></tr></table></figure><h2 id="eq比较运算符实现方法"><a href="#eq比较运算符实现方法" class="headerlink" title="eq比较运算符实现方法"></a>eq比较运算符实现方法</h2><p>不实现<code>__eq__</code>方法，对象之间可以比较，但是是比较内存地址，也即是：<code>对象 == 另一个对象</code>比较一定是False结果。</p><p>实现了<code>__eq__</code>方法，就可以按照自行定义的内容来决定两个对象是否相等。</p><ul><li>方法名：<code>__eq__</code></li><li>传入参数：other，另一个类对象</li><li>返回值：True 或 False</li><li>内容：自行定义</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, phone</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.phone = phone</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__eq__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> self.age == other.age</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">student1 = Student(<span class="string">&#x27;张三&#x27;</span>, <span class="number">23</span>, <span class="number">110</span>)</span><br><span class="line">student2 = Student(<span class="string">&#x27;李四&#x27;</span>, <span class="number">24</span>, <span class="number">120</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(student1 == student2)  <span class="comment"># False</span></span><br></pre></td></tr></table></figure><h1 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h1><p>把客观事物封装成抽象的类，并且类可以把自己的数据和方法只让可信的类或者对象操作，对不可信的进行信息隐藏。<br>封装是面向对象的特征之一，是对象和类概念的主要特性。</p><h2 id="私有成员"><a href="#私有成员" class="headerlink" title="私有成员"></a>私有成员</h2><p>定义私有成员：</p><ul><li>私有成员变量：变量名以<code>__</code>（2个下划线）开头。</li><li>私有成员方法：方法名以<code>__</code>（2个下划线）开头。</li></ul><p>使用私有成员：</p><ul><li>私有变量无法赋值，也无法获取值。</li><li>私有方法无法直接被类对象使用。</li><li>私有成员无法被类对象使用，但是可以被其它的成员使用。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="comment"># 私有成员变量</span></span><br><span class="line">    __luck = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">today</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span>的今天幸运值为<span class="subst">&#123;self.__check_luck()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 私有成员方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__check_luck</span>(<span class="params">self</span>):</span><br><span class="line">        self.__luck = random.randint(<span class="number">1</span>, <span class="number">100</span>)</span><br><span class="line">        <span class="keyword">return</span> self.__luck</span><br><span class="line"></span><br><span class="line">student1 = Student(<span class="string">&#x27;张三&#x27;</span>, <span class="number">23</span>, <span class="number">110</span>)</span><br><span class="line">student1.today()  <span class="comment"># 张三的今天幸运值为6</span></span><br></pre></td></tr></table></figure><h1 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h1><p>继承是指可以让某个类型的对象获得另一个类型的对象的成员变量和成员方法（不含私有）。<br>继承可使用现有类的所有功能，并在无需重新编写原来类的情况下对这些功能进行扩展。<br>通过继承创建的新类称为“子类”或“派生类”，被继承的类称为“基类”、“父类”或“超类”。<br>子类构建的类对象，可以有自己的成员变量和成员方法，也可使用父类的成员变量和成员方法。</p><p>继承分为：单继承和多继承</p><ul><li>单继承：一个类继承另一个类</li><li>多继承：一个类继承多个类，按照顺序从左向右依次继承</li><li>多继承中，如果父类有同名方法或属性，先继承的优先级高于后继承，即先继承的保留，后继承的被覆盖</li></ul><p>继承的语句如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CPU</span>:</span><br><span class="line">    producer = <span class="string">&quot;amd&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;cpu工作中&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Disk</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computer</span>(CPU, Disk):</span><br><span class="line">   <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p><code>pass</code>关键字是占位语句，用来保证函数（方法）或类定义的完整性，表示无内容，空的意思。</p><h2 id="复写和使用父类成员"><a href="#复写和使用父类成员" class="headerlink" title="复写和使用父类成员"></a>复写和使用父类成员</h2><p>子类继承父类的成员属性和成员方法后，如果对其“不满意”，那么可以进行复写，即在子类中重新定义同名的属性或方法即可。<br>一旦复写父类成员，那么类对象调用成员的时候，就会调用复写后的新成员，如果需要使用被复写的父类的成员，需要特殊的调用方式。<br>只能在子类内调用父类的同名成员，子类的类对象直接调用会调用子类复写的成员。</p><ul><li>使用父类名调用父类成员<ul><li>使用成员变量：<code>父类名.成员变量</code></li><li>使用成员方法：<code>父类名.成员方法(self)</code></li></ul></li><li>使用<code>super()</code>调用父类成员<ul><li>使用成员变量：<code>super().成员变量</code></li><li>使用成员方法：<code>super().成员方法()</code></li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CPU</span>:</span><br><span class="line">    producer = <span class="string">&quot;amd&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;cpu工作中&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Memory</span>:</span><br><span class="line">    producer = <span class="string">&quot;intel&quot;</span></span><br><span class="line">    size = <span class="string">&quot;16G&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Disk</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computer</span>(CPU, Memory, Disk):</span><br><span class="line">    producer = <span class="string">&quot;laptop&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;父类品牌是：<span class="subst">&#123;Memory.producer&#125;</span>&quot;</span>)  <span class="comment"># 父类品牌是：intel</span></span><br><span class="line">        CPU.run(self)  <span class="comment"># cpu工作中</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;父类品牌是：<span class="subst">&#123;<span class="built_in">super</span>().producer&#125;</span>&quot;</span>)  <span class="comment"># 父类品牌是：amd</span></span><br><span class="line">        <span class="built_in">super</span>().run()  <span class="comment"># cpu工作中</span></span><br><span class="line"></span><br><span class="line">computer = Computer()</span><br><span class="line">computer.run()</span><br></pre></td></tr></table></figure><hr><h1 id="类型注解"><a href="#类型注解" class="headerlink" title="类型注解"></a>类型注解</h1><p>Python在3.5版本的时候引入了类型注解，用于在代码中涉及数据交互之时，对数据类型进行显式的说明。<br>类型注解只是提示性的，并非决定性的。数据类型和注解类型无法对应也不会导致错误。</p><p>主要功能：</p><ul><li>帮助第三方IDE工具（如PyCharm）对代码进行类型推断，协助做代码提示</li><li>帮助开发者自身对变量进行类型注释</li></ul><p>支持：</p><ul><li>变量的类型注解</li><li>函数（方法）形参列表和返回值的类型注解</li></ul><h2 id="变量的类型注解"><a href="#变量的类型注解" class="headerlink" title="变量的类型注解"></a>变量的类型注解</h2><p>显式的变量定义，一般无需注解，因为就算不写注解，也明确的知晓变量的类型。<br>一般，无法直接看出变量类型之时会添加变量的类型注解。</p><ol><li>语法1： <code>变量: 类型</code></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基础数据类型注解</span></span><br><span class="line">var_1: <span class="built_in">int</span> = <span class="number">10</span></span><br><span class="line">var_2: <span class="built_in">float</span> = <span class="number">3.14</span></span><br><span class="line">var_3: <span class="built_in">str</span> = <span class="string">&quot;Hello&quot;</span></span><br><span class="line"><span class="comment"># 类对象类型注解</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">stu: Student = Student()</span><br><span class="line"><span class="comment"># 基础容器类型注解</span></span><br><span class="line">my_list: <span class="built_in">list</span> = [<span class="string">&quot;1&quot;</span>, <span class="number">2</span>]</span><br><span class="line">my_tuple: <span class="built_in">tuple</span> = (<span class="string">&quot;1&quot;</span>, <span class="number">2</span>)</span><br><span class="line">my_dict: <span class="built_in">dict</span> = &#123;<span class="string">&quot;key&quot;</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="comment"># 容器类型详细注解</span></span><br><span class="line">my_list: <span class="built_in">list</span>[<span class="built_in">int</span>] = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">my_tuple: <span class="built_in">tuple</span>[<span class="built_in">str</span>, <span class="built_in">int</span>] = (<span class="string">&quot;1&quot;</span>, <span class="number">2</span>) <span class="comment"># 元组类型设置类型详细注解，需将每个元素都标记出来</span></span><br><span class="line">my_dict: <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="built_in">int</span>] = &#123;<span class="string">&quot;key&quot;</span>: <span class="number">2</span>&#125; <span class="comment"># 字典类型设置类型详细注解，需两个类型，第一个是key第二个是value</span></span><br></pre></td></tr></table></figure><ol start="2"><li>语法2： 在注释中，<code># type: 类型</code></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基础数据类型注解</span></span><br><span class="line">var_1 = <span class="number">10</span>  <span class="comment"># type: <span class="built_in">int</span></span></span><br><span class="line">var_2 = <span class="number">3.14</span>  <span class="comment"># type: <span class="built_in">float</span></span></span><br><span class="line">var_3 = <span class="string">&quot;Hello&quot;</span>  <span class="comment"># type: <span class="built_in">str</span></span></span><br><span class="line"><span class="comment"># 类对象类型注解</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fun_1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;方法执行&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fun_2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">s = Student()  <span class="comment"># type: Student</span></span><br><span class="line">var_f1 = s.fun_1()  <span class="comment"># type: <span class="literal">None</span></span></span><br><span class="line">var_f2 = s.fun_2()  <span class="comment"># type: <span class="built_in">int</span></span></span><br></pre></td></tr></table></figure><h2 id="函数（方法）形参的类型注解"><a href="#函数（方法）形参的类型注解" class="headerlink" title="函数（方法）形参的类型注解"></a>函数（方法）形参的类型注解</h2><p>函数和方法的形参类型注解语法如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">函数方法名</span>(<span class="params">形参名: 类型, 形参名: 类型,..., 形参名: 类型</span>):</span><br><span class="line">    方法体</span><br></pre></td></tr></table></figure><h2 id="函数（方法）返回值的类型注解"><a href="#函数（方法）返回值的类型注解" class="headerlink" title="函数（方法）返回值的类型注解"></a>函数（方法）返回值的类型注解</h2><p>函数和方法的返回值类型注解语法如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">函数方法名</span>(<span class="params">形参名: 类型, 形参名: 类型,..., 形参名: 类型</span>)-&gt;返回值类型:</span><br><span class="line">    方法体</span><br></pre></td></tr></table></figure><h2 id="联合类型注解"><a href="#联合类型注解" class="headerlink" title="联合类型注解"></a>联合类型注解</h2><p>使用<code>Union[类型, ......, 类型]</code>，可以定义联合类型注解。</p><p>Union的使用方式：</p><ul><li>导包：<code>from typing import Union</code></li><li>使用：<code>Union[类型, ......, 类型]</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">my_list: <span class="built_in">list</span>[<span class="type">Union</span>[<span class="built_in">int</span>, <span class="built_in">str</span>]] = [<span class="string">&#x27;0&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>]</span><br><span class="line">my_tuple: <span class="built_in">tuple</span>[<span class="type">Union</span>[<span class="built_in">int</span>, <span class="built_in">str</span>]] = (<span class="string">&quot;1&quot;</span>, <span class="number">2</span>, <span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">my_dict: <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="type">Union</span>[<span class="built_in">int</span>, <span class="built_in">str</span>]] = &#123;<span class="string">&quot;id&quot;</span>: <span class="number">2</span>, <span class="string">&#x27;password&#x27;</span>: <span class="string">&#x27;abcd&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">data: <span class="type">Union</span>[<span class="built_in">int</span>,<span class="built_in">str</span>]</span>) -&gt; <span class="type">Union</span>[<span class="built_in">int</span>, <span class="built_in">str</span>]:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><hr><h1 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h1><p>多态指的是：多种状态，即完成同一个行为，使用不同的对象获得不同的状态。<br>如，定义函数（方法），通过类型注解声明需要父类对象，实际传入子类对象进行工作，从而获得不同的工作状态。</p><p>多态常作用在继承关系上。<br>比如：</p><ul><li>函数（方法）形参声明接收父类对象</li><li>实际传入父类的子类对象进行工作</li></ul><p>即：以父类做定义声明，以子类做实际工作，用以获得同一行为，不同状态。</p><h2 id="抽象类（接口）"><a href="#抽象类（接口）" class="headerlink" title="抽象类（接口）"></a>抽象类（接口）</h2><p>父类用来确定有哪些方法，具体的方法实现由子类自行决定，这种写法，就叫做抽象类（也可以称之为接口）。<br>包含抽象方法的类，称之为抽象类。<br>抽象方法是指：没有具体实现的方法<code>（pass）</code>称之为抽象方法。</p><p>抽象类的作用：</p><ul><li>多用于做顶层设计（设计标准），以便子类做具体实现。</li><li>也是对子类的一种软性约束，要求子类必须复写（实现）父类的一些方法并配合多态使用，获得不同的工作状态。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">talk</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Harmony</span>(<span class="title class_ inherited__">Phone</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">talk</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;我用鸿蒙打电话&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IOS</span>(<span class="title class_ inherited__">Phone</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">talk</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;我要苹果打电话&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">talk</span>(<span class="params">phone: Phone</span>):</span><br><span class="line">    phone.talk()</span><br><span class="line"></span><br><span class="line">harmony = Harmony</span><br><span class="line">harmony.talk(harmony)</span><br><span class="line">ios = IOS</span><br><span class="line">ios.talk(ios)</span><br></pre></td></tr></table></figure><hr><h1 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h1><p>定义双层嵌套函数， 内层函数可以访问外层函数的变量<br>将内存函数作为外层函数的返回，此内层函数就是闭包函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 外部函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">args1</span>):</span><br><span class="line">    <span class="comment"># 內部函数</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">args2</span>):</span><br><span class="line">        <span class="keyword">nonlocal</span> args1</span><br><span class="line">        args1 += <span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;args1&#125;</span>--<span class="subst">&#123;args2&#125;</span>&quot;</span>)  <span class="comment"># 2--参数2</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner  <span class="comment"># 返回内部函数</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">f1 = outer(<span class="number">1</span>)  <span class="comment"># f1为返回的inner方法</span></span><br><span class="line">f1(<span class="string">&quot;参数2&quot;</span>)</span><br></pre></td></tr></table></figure><p>闭包的优点：</p><ul><li>不定义全局变量，也可以让函数持续访问和修改一个外部变量</li><li>闭包函数引用的外部变量，是外层函数的内部变量。作用域封闭难以被误操作修改</li></ul><p>闭包的缺点：</p><ul><li>由于内部函数持续引用外部函数的值，所以会导致这一部分内存空间不被释放，一直占用内存</li></ul><p><code>nonlocal</code>关键字的作用：</p><p>在闭包函数（内部函数中）想要修改外部函数的变量值，需要用<code>nonlocal</code>声明该外部变量</p><hr><h1 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h1><p>装饰器就是使用创建一个闭包函数，在闭包函数内调用目标函数。<br>可以达到不改动目标函数的同时，增加额外的功能。</p><p>装饰器的一般写法（闭包写法）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sleep</span>():</span><br><span class="line">    <span class="keyword">import</span> random</span><br><span class="line">    <span class="keyword">import</span> time</span><br><span class="line">    randint = random.randint(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;睡<span class="subst">&#123;randint&#125;</span>秒&quot;</span>)</span><br><span class="line">    time.sleep(randint)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">func</span>) :</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;睡前&quot;</span>)</span><br><span class="line">        func()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;睡后&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line">f = outer(sleep)</span><br><span class="line">f()</span><br></pre></td></tr></table></figure><p>装饰器的语法糖写法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">outer1</span>(<span class="params">func</span>) :</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;睡前&quot;</span>)</span><br><span class="line">        func()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;睡后&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="meta">@outer1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sleep</span>():</span><br><span class="line">    <span class="keyword">import</span> random</span><br><span class="line">    <span class="keyword">import</span> time</span><br><span class="line">    randint = random.randint(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;睡<span class="subst">&#123;randint&#125;</span>秒&quot;</span>)</span><br><span class="line">    time.sleep(randint)</span><br><span class="line"></span><br><span class="line">sleep()</span><br></pre></td></tr></table></figure><hr><h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h1><p>设计模式就是一种编程套路，使用特定的套路得到特定的效果。</p><h2 id="单例设计模式"><a href="#单例设计模式" class="headerlink" title="单例设计模式"></a>单例设计模式</h2><p>单例模式的主要目的是确保某一个类只有一个实例存在。</p><ul><li>节省内存</li><li>节省创建对象的开销</li></ul><p>在一个文件中定义</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StrTools</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line">str_tool = StrTools()</span><br></pre></td></tr></table></figure><p>另一个文件中使用</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> test <span class="keyword">import</span> str_tool</span><br><span class="line">s1 = str_tool</span><br><span class="line">s2 = str_tool</span><br><span class="line"><span class="built_in">print</span>(s1)  <span class="comment"># &lt;test.StrTools object at 0x000001F06612F810&gt;</span></span><br><span class="line"><span class="built_in">print</span>(s2)  <span class="comment"># &lt;test.StrTools object at 0x000001F06612F810&gt;</span></span><br></pre></td></tr></table></figure><h2 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h2><p>将对象的创建由使用原生类本身创建转换到由特定的工厂方法来创建</p><p>优点：</p><ul><li>大批量创建对象的时候有统一的入口，易于代码维护</li><li>当发生修改，仅修改工厂类的创建方法即可</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Man</span>(<span class="title class_ inherited__">Person</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Woman</span>(<span class="title class_ inherited__">Person</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Factory</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_person</span>(<span class="params">self,p_type</span>):</span><br><span class="line">        <span class="keyword">if</span> p_type==<span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> Woman()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> Man()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">factory = Factory()</span><br><span class="line">w = factory.get_person(<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">h = factory.get_person(<span class="string">&#x27;h&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(w)  <span class="comment"># &lt;__main__.Woman object at 0x00000239DDECD490&gt;</span></span><br><span class="line"><span class="built_in">print</span>(h)  <span class="comment"># &lt;__main__.Man object at 0x00000239DDECD610&gt;</span></span><br></pre></td></tr></table></figure><hr><h1 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h1><p>进程： 一个程序，运行在系统之上，则称该程序为一个运行进程，并分配进程ID方便系统管理。<br>线程：线程是归属于进程的，一个进程可以开启多个线程，执行不同的工作，是进程的实际工作最小单位。<br>操作系统中可以运行多个进程，即多任务运行，而一个进程内可以运行多个线程，即多线程运行。</p><p>进程之间是内存隔离的， 即不同的进程拥有各自的内存空间。<br>线程之间是内存共享的，线程是属于进程的，一个进程内的多个线程之间是共享这个进程所拥有的内存空间的。</p><p>并行执行指的是同一时间做不同的工作。<br>多个进程同时在运行，即不同的程序同时运行，称之为：多任务并行执行<br>一个进程内的多个线程同时在运行，称之为：多线程并行执行</p><p>Python的多线程可以通过threading模块来实现。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sing</span>():</span><br><span class="line">    <span class="comment"># 获取当前线程</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;当前线程为&quot;</span>, threading.current_thread())  <span class="comment"># 当前线程为 &lt;_MainThread(MainThread, started 12120)&gt;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;唱歌&quot;</span>)</span><br><span class="line">        sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dance</span>(<span class="params">msg</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;当前线程为&quot;</span>, threading.current_thread())  <span class="comment"># 当前线程为 &lt;_MainThread(MainThread, started 12120)&gt;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;msg&#125;</span>在跳舞&quot;</span>)</span><br><span class="line">        sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">group：暂时无用，未来功能的预置参数</span></span><br><span class="line"><span class="string">target：执行的目标任务名</span></span><br><span class="line"><span class="string">args：以元组的形式给执行任务传参</span></span><br><span class="line"><span class="string">kwargs：以字典形式给执行任务传参</span></span><br><span class="line"><span class="string">name：线程名，一般不用设置</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">thread1_1 = threading.Thread(target=dance, args=(<span class="string">&quot;张三&quot;</span>,))</span><br><span class="line">thread1_2 = threading.Thread(target=dance, kwargs=&#123;<span class="string">&quot;msg&quot;</span>: <span class="string">&quot;李四&quot;</span>&#125;)</span><br><span class="line">thread2 = threading.Thread(group=<span class="literal">None</span>, target=sing, name=<span class="number">2</span>, args=(), kwargs=<span class="literal">None</span>, daemon=<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># 启动线程</span></span><br><span class="line">thread1_1.start()</span><br><span class="line">thread1_2.start()</span><br><span class="line">thread2.start()</span><br></pre></td></tr></table></figure><hr><h1 id="网络编程"><a href="#网络编程" class="headerlink" title="网络编程"></a>网络编程</h1><p>socket（套接字）是进程之间通信一个工具，进程之间想要进行网络通信需要socket。</p><h2 id="Socket服务端"><a href="#Socket服务端" class="headerlink" title="Socket服务端"></a>Socket服务端</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="comment"># 创建socket对象</span></span><br><span class="line">server = socket.socket()</span><br><span class="line"><span class="comment"># 绑定socket_server到指定地址（host,port）,以元组（host,port）的形式表示地址</span></span><br><span class="line">server.bind((<span class="string">&#x27;localhost&#x27;</span>, <span class="number">8088</span>))</span><br><span class="line"><span class="comment"># 服务端开始监听端口，backlog为int，表示允许连接的数量，超出的会等待</span></span><br><span class="line">server.listen(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 接收客户端连接，获得连接对象，返回元组信息(sock,addr)</span></span><br><span class="line">sock, addr = server.accept()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;接收到的消息来自：<span class="subst">&#123;addr&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># 客户端连接后，通过recv方法，接收客户端发送的消息</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># recv参数为字节，返回值为字节数组Bytes，可通过decode使用UTF-8编码转为字符串</span></span><br><span class="line">    data = sock.recv(<span class="number">1024</span>).decode(<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;接收到的消息是：<span class="subst">&#123;data&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> data == <span class="string">&#x27;bye&#x27;</span>:</span><br><span class="line">        sock.close()</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="comment"># 通过conn（客户端当次连接对象），调用send方法可以回复消息</span></span><br><span class="line">    sock.send(<span class="built_in">input</span>(<span class="string">&quot;输入：&quot;</span>).encode(<span class="string">&quot;UTF-8&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭连接</span></span><br><span class="line">sock.close()</span><br><span class="line">server.close()</span><br></pre></td></tr></table></figure><h2 id="Socket客户端"><a href="#Socket客户端" class="headerlink" title="Socket客户端"></a>Socket客户端</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="comment"># 创建socket对象</span></span><br><span class="line">client = socket.socket()</span><br><span class="line"><span class="comment"># 连接服务端到指定地址（host,port）,以元组（host,port）的形式表示地址</span></span><br><span class="line">client.connect((<span class="string">&#x27;localhost&#x27;</span>, <span class="number">8088</span>))</span><br><span class="line"><span class="comment"># 发送消息</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    data = <span class="built_in">input</span>(<span class="string">&quot;输入：&quot;</span>).encode(<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> data == <span class="string">&#x27;bye&#x27;</span>:</span><br><span class="line">        client.close()</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    client.send(data)</span><br><span class="line">    recv = client.recv(<span class="number">1024</span>).decode(<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;接收到服务端消息是：<span class="subst">&#123;recv&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭连接</span></span><br><span class="line">client.close()</span><br></pre></td></tr></table></figure><hr><h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><p>正则表达式，又称规则表达式（Regular Expression），是使用单个字符串来描述、匹配某个句法规则的字符串，常被用来检索、替换那些符合某个模式（规则）的文本。</p><h2 id="基本匹配"><a href="#基本匹配" class="headerlink" title="基本匹配"></a>基本匹配</h2><p>Python正则表达式，使用re模块，并基于re模块中三个基础方法来做正则匹配。<br>分别是：<code>match</code>、<code>search</code>、<code>findall</code>三个基础方法。</p><ul><li>re.match(匹配规则， 被匹配字符串，标志位)<ul><li>从被匹配字符串开头进行匹配， 匹配成功返回匹配对象（包含匹配的信息），匹配不成功返回空None。</li></ul></li><li>search(匹配规则， 被匹配字符串，标志位)<ul><li>搜索整个字符串，找出匹配的。从前向后，找到第一个后，就停止，不会继续向后，整个字符串都找不到，返回None</li></ul></li><li>findall(匹配规则， 被匹配字符串，标志位)<ul><li>匹配整个字符串，找出全部匹配项，找不到返回空list: []</li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="built_in">str</span> = <span class="string">&quot;hello world!!!&quot;</span></span><br><span class="line">result1 = re.<span class="keyword">match</span>(<span class="string">&quot;hello world&quot;</span>, <span class="built_in">str</span>, re.I <span class="keyword">or</span> re.L)</span><br><span class="line"><span class="built_in">print</span>(result1)  <span class="comment"># &lt;re.Match object; span=(0, 11), match=&#x27;hello world&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(result1.span())  <span class="comment"># (0, 11)</span></span><br><span class="line"><span class="built_in">print</span>(result1.group())  <span class="comment"># hello world</span></span><br><span class="line"></span><br><span class="line">result2 = re.search(<span class="string">&quot;o&quot;</span>, <span class="built_in">str</span>)</span><br><span class="line"><span class="built_in">print</span>(result2)  <span class="comment"># &lt;re.Match object; span=(4, 5), match=&#x27;o&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(result2.span())  <span class="comment"># (4, 5)</span></span><br><span class="line"><span class="built_in">print</span>(result2.group())  <span class="comment"># o</span></span><br><span class="line"></span><br><span class="line">result3 = re.findall(<span class="string">&quot;l&quot;</span>, <span class="built_in">str</span>)</span><br><span class="line"><span class="built_in">print</span>(result3)  <span class="comment"># [&#x27;l&#x27;, &#x27;l&#x27;, &#x27;l&#x27;]</span></span><br></pre></td></tr></table></figure><p>正则表达式可以包含一些可选标志修饰符来控制匹配的模式。修饰符被指定为一个可选的标志。多个标志可以通过<code>按位or(|)</code> 来指定。</p><table><thead><tr><th align="center">标志位修饰符</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">re.I</td><td align="center">使匹配对大小写不敏感</td></tr><tr><td align="center">re.L</td><td align="center">做本地化识别（locale-aware）匹配</td></tr><tr><td align="center">re.M</td><td align="center">多行匹配，影响^和$</td></tr><tr><td align="center">re.S</td><td align="center">使.匹配包括换行在内的所有字符</td></tr><tr><td align="center">re.U</td><td align="center">根据Unicode字符集解析字符。这个标志影响\w,\W,\b,\B.</td></tr></tbody></table><h2 id="元字符匹配"><a href="#元字符匹配" class="headerlink" title="元字符匹配"></a>元字符匹配</h2><p>单字符匹配：</p><table><thead><tr><th align="center">字符</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">.</td><td align="center">匹配任意字符，除了换行符</td></tr><tr><td align="center">[…]</td><td align="center">用来表示一组字符</td></tr><tr><td align="center">[^…]</td><td align="center">不在[]中的字符</td></tr><tr><td align="center">\d</td><td align="center">匹配任意数字，等价于 [0-9]</td></tr><tr><td align="center">\D</td><td align="center">匹配任意非数字</td></tr><tr><td align="center">\s</td><td align="center">匹配任意空白字符，等价于 [\t\n\r\f]</td></tr><tr><td align="center">\S</td><td align="center">匹配任意非空字符</td></tr><tr><td align="center">\w</td><td align="center">匹配数字字母下划线</td></tr><tr><td align="center">\W</td><td align="center">匹配非数字字母下划线</td></tr></tbody></table><p>数量匹配：</p><table><thead><tr><th align="center">字符</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">*</td><td align="center">匹配0个或多个的表达式</td></tr><tr><td align="center">+</td><td align="center">匹配1个或多个的表达式</td></tr><tr><td align="center">?</td><td align="center">匹配0个或1个由前面的正则表达式定义的片段，非贪婪方式</td></tr><tr><td align="center">{n}</td><td align="center">匹配n个前面表达式</td></tr><tr><td align="center">{n,}</td><td align="center">精确匹配n个前面表达式</td></tr><tr><td align="center">{n, m}</td><td align="center">匹配n到m次由前面的正则表达式定义的片段，贪婪方式</td></tr></tbody></table><p>边界匹配：</p><table><thead><tr><th align="center">字符</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">^</td><td align="center">匹配字符串的开头</td></tr><tr><td align="center">$</td><td align="center">匹配字符串的末尾</td></tr><tr><td align="center">\b</td><td align="center">匹配一个单词边界，指单词和空格间的位置</td></tr><tr><td align="center">\B</td><td align="center">匹配非单词边界</td></tr></tbody></table><p>分组匹配：</p><table><thead><tr><th align="center">字符</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">a|b</td><td align="center">匹配a或b任意一个表达式</td></tr><tr><td align="center">（）</td><td align="center">匹配括号内的表达式，也表示一个组</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配账户 只能有数字或者英文字母组成 长度6-16位</span></span><br><span class="line">rule = <span class="string">&#x27;^[0-9a-zA-z]&#123;6,16&#125;$&#x27;</span></span><br><span class="line"><span class="built_in">str</span> = <span class="string">&quot;1234abcd&quot;</span></span><br><span class="line">result = re.<span class="keyword">match</span>(rule, <span class="built_in">str</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;匹配结果&quot;</span>, result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配QQ号 要求5~10位数字 第一位不是0</span></span><br><span class="line">rule = <span class="string">&#x27;^[1-9][0-9]&#123;4,9&#125;$&#x27;</span>  <span class="comment"># 第一位数字1-9，剩余数字0-9并且长度是9</span></span><br><span class="line"><span class="built_in">str</span> = <span class="string">&quot;12345&quot;</span></span><br><span class="line">result = re.<span class="keyword">match</span>(rule, <span class="built_in">str</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;匹配结果&quot;</span>, result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配邮箱地址  5~10位数字 + @ + qq或者163 + .com</span></span><br><span class="line">rule = <span class="string">&#x27;^[0-9]&#123;5,10&#125;[@](qq|163)&#123;1&#125;(.com)&#123;1&#125;$&#x27;</span></span><br><span class="line"><span class="built_in">str</span> = <span class="string">&quot;1234567890@qq.com&quot;</span></span><br><span class="line">result = re.<span class="keyword">match</span>(rule, <span class="built_in">str</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;匹配结果&quot;</span>, result)</span><br></pre></td></tr></table></figure><hr><h1 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h1><p>递归： 即方法（函数）自己调用自己的一种特殊编程写法。</p><p>注意：</p><ul><li>注意退出的条件，否则容易变成无限递归</li><li>注意返回值的传递，确保从最内层，层层传递到最外层</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_os</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;演示os模块的3个基础方法&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(os.listdir(<span class="string">&quot;D:/test&quot;</span>))        <span class="comment"># 列出路径下的内容</span></span><br><span class="line">    <span class="comment"># print(os.path.isdir(&quot;D:/test/a&quot;))   # 判断指定路径是不是文件夹</span></span><br><span class="line">    <span class="comment"># print(os.path.exists(&quot;D:/test&quot;))    # 判断指定路径是否存在</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_files_recursion_from_dir</span>(<span class="params">path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    从指定的文件夹中使用递归的方式，获取全部的文件列表</span></span><br><span class="line"><span class="string">    :param path: 被判断的文件夹</span></span><br><span class="line"><span class="string">    :return: list，包含全部的文件，如果目录不存在或者无文件就返回一个空list</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;当前判断的文件夹是：<span class="subst">&#123;path&#125;</span>&quot;</span>)</span><br><span class="line">    file_list = []</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(path):</span><br><span class="line">        <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(path):</span><br><span class="line">            new_path = path + <span class="string">&quot;/&quot;</span> + f</span><br><span class="line">            <span class="keyword">if</span> os.path.isdir(new_path):</span><br><span class="line">                <span class="comment"># 进入到这里，表明这个目录是文件夹不是文件</span></span><br><span class="line">                file_list += get_files_recursion_from_dir(new_path)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">               file_list.append(new_path)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;指定的目录<span class="subst">&#123;path&#125;</span>，不存在&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> file_list</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(get_files_recursion_from_dir(<span class="string">&quot;D:/app&quot;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python数据可视化</title>
      <link href="/2023/02/17/36704.html"/>
      <url>/2023/02/17/36704.html</url>
      
        <content type="html"><![CDATA[<h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><h2 id="json简介"><a href="#json简介" class="headerlink" title="json简介"></a>json简介</h2><p>JSON是一种轻量级的数据交换格式。采用完全独立于编程语言的文本格式来存储和表示数据。<br>JSON本质上是一个带有特定格式的字符串。<br>JSON就是一种在各个编程语言中流通的数据格式，负责不同编程语言中的数据传递和交互。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JSON对象</span></span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;admin&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">18</span><span class="punctuation">&#125;</span> </span><br><span class="line"><span class="comment">//JSON数组</span></span><br><span class="line"><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;admin&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">18</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;root&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">16</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;张三&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">20</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line"><span class="comment">//组合使用</span></span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;sites&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;A&quot;</span><span class="punctuation">,</span><span class="attr">&quot;url&quot;</span><span class="punctuation">:</span><span class="string">&quot;A.com&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;B&quot;</span><span class="punctuation">,</span><span class="attr">&quot;url&quot;</span><span class="punctuation">:</span><span class="string">&quot;B.com&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="json格式数据转化"><a href="#json格式数据转化" class="headerlink" title="json格式数据转化"></a>json格式数据转化</h2><p>使用JSON函数需要导入 json 库：<code>import json</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入json模块 </span></span><br><span class="line"><span class="keyword">import</span> json </span><br><span class="line"></span><br><span class="line"><span class="comment"># 准备符合格式json格式要求的python数据 </span></span><br><span class="line">data = [&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;张三&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">23</span>&#125;, &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;李四&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">24</span>&#125;]</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 通过json.dumps(data)方法将python数据转化为json数据 </span></span><br><span class="line"><span class="comment"># 中文可以使用ensure_ascii=False参数来确保中文正常转换</span></span><br><span class="line">data = json.dumps(data, ensure_ascii=<span class="literal">False</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过json.loads(data)方法把josn数据转化为python列表或字典 </span></span><br><span class="line">data = json.loads(data)</span><br></pre></td></tr></table></figure><hr><h1 id="pyecharts模块介绍"><a href="#pyecharts模块介绍" class="headerlink" title="pyecharts模块介绍"></a>pyecharts模块介绍</h1><p>Echarts是由百度开源的数据可视化图表库。</p><p><a href="https://pyecharts.org/#/" title="pyecharts官网">pyecharts</a>是一款将python与echarts结合的强大的数据可视化工具。</p><p>使用pyecharts可以生成独立的网页。</p><p>可使用pip安装pyecharts模块，语法如下：<code>pip install pyecharts</code>。</p><hr><h1 id="pyecharts快速入门"><a href="#pyecharts快速入门" class="headerlink" title="pyecharts快速入门"></a>pyecharts快速入门</h1><h2 id="pyecharts模块配置选项"><a href="#pyecharts模块配置选项" class="headerlink" title="pyecharts模块配置选项"></a>pyecharts模块配置选项</h2><p>pyecharts模块中有很多的配置选项, 常用到2个类别的选项：</p><ul><li>全局配置选项</li><li>系列配置选项</li></ul><p>全局配置项可配置图表的标题、配置图例、配置鼠标移动效果、配置工具栏等整体配置项。<br>全局配置选项可以通过<code>set_global_opts</code>方法来进行配置，相应的选项和选项的功能如下：</p><img src="/2023/02/17/36704/image-20230217231725413.png" class="" title="全局配置选项配置说明"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包，导入Line功能构建折线图对象</span></span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Line</span><br><span class="line"><span class="comment">#导包，导入全局配置组件</span></span><br><span class="line"><span class="keyword">from</span> pyecharts.options <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment"># 得到折线图对象</span></span><br><span class="line">line = Line()</span><br><span class="line"><span class="comment"># 全局配置选项</span></span><br><span class="line">line.set_global_opts(</span><br><span class="line">    title_opts=TitleOpts(title=<span class="string">&quot;天气&quot;</span>,pos_left=<span class="string">&#x27;center&#x27;</span>,pos_bottom=<span class="string">&#x27;1%&#x27;</span>),</span><br><span class="line">    legend_opts=LegendOpts(is_show=<span class="literal">True</span>),</span><br><span class="line">    toolbox_opts=ToolboxOpts(is_show=<span class="literal">True</span>),</span><br><span class="line">    visualmap_opts=VisualMapOpts(is_show=<span class="literal">True</span>),</span><br><span class="line">    tooltip_opts=TitleOpts(is_show=<span class="literal">True</span>)</span><br><span class="line">)</span><br><span class="line"><span class="comment"># 添加x轴数据</span></span><br><span class="line">line.add_xaxis([<span class="string">&quot;第一天&quot;</span>, <span class="string">&quot;第二天&quot;</span>, <span class="string">&quot;第三天&quot;</span>])</span><br><span class="line"><span class="comment"># 添加y轴数据</span></span><br><span class="line">line.add_yaxis(<span class="string">&quot;气温&quot;</span>, [<span class="number">23</span>, <span class="number">33</span>, <span class="number">11</span>])</span><br><span class="line">line.add_yaxis(<span class="string">&quot;湿度&quot;</span>, [<span class="number">60</span>, <span class="number">33</span>, <span class="number">22</span>])</span><br><span class="line"><span class="comment"># 生成图表</span></span><br><span class="line">line.render()</span><br></pre></td></tr></table></figure><img src="/2023/02/17/36704/image-20230217225838125.png" class="" title="全局配置选项后的基础折线图"><h2 id="折线图可视化"><a href="#折线图可视化" class="headerlink" title="折线图可视化"></a>折线图可视化</h2><h3 id="基础折线图"><a href="#基础折线图" class="headerlink" title="基础折线图"></a>基础折线图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包，导入Line功能构建折线图对象</span></span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Line</span><br><span class="line"></span><br><span class="line"><span class="comment"># 得到折线图对象</span></span><br><span class="line">line = Line()</span><br><span class="line"><span class="comment"># 添加x轴数据</span></span><br><span class="line">line.add_xaxis([<span class="string">&quot;第一天&quot;</span>, <span class="string">&quot;第二天&quot;</span>, <span class="string">&quot;第三天&quot;</span>])</span><br><span class="line"><span class="comment"># 添加y轴数据</span></span><br><span class="line">line.add_yaxis(<span class="string">&quot;气温&quot;</span>, [<span class="number">23</span>, <span class="number">33</span>, <span class="number">11</span>])</span><br><span class="line"><span class="comment"># 生成图表</span></span><br><span class="line">line.render()</span><br></pre></td></tr></table></figure><img src="/2023/02/17/36704/image-20230217223735633.png" class="" title="基础折线图"><h2 id="地图可视化"><a href="#地图可视化" class="headerlink" title="地图可视化"></a>地图可视化</h2><h3 id="全国地图可视化"><a href="#全国地图可视化" class="headerlink" title="全国地图可视化"></a>全国地图可视化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包，导入Map功能构建地图对象和配置组件</span></span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Map</span><br><span class="line"><span class="keyword">from</span> pyecharts.options <span class="keyword">import</span> VisualMapOpts</span><br><span class="line"></span><br><span class="line"><span class="comment"># 得到地图对象</span></span><br><span class="line"><span class="built_in">map</span> = Map()</span><br><span class="line"><span class="comment"># 准备数据</span></span><br><span class="line">province = [<span class="string">&quot;北京市&quot;</span>,<span class="string">&quot;上海市&quot;</span>,<span class="string">&quot;广东省&quot;</span>]</span><br><span class="line">value = [<span class="number">987</span>,<span class="number">654</span>,<span class="number">321</span>]</span><br><span class="line">data = <span class="built_in">list</span>(<span class="built_in">zip</span>(province,value)) <span class="comment"># 打包为一个个元组的列表 [(&quot;北京市&quot;, 987),(&quot;上海市&quot;, 654),(&quot;广东省&quot;, 321)]</span></span><br><span class="line"><span class="comment"># 添加数据</span></span><br><span class="line"><span class="built_in">map</span>.add(<span class="string">&quot;中国地图&quot;</span>, data, <span class="string">&quot;china&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置全局选项</span></span><br><span class="line"><span class="built_in">map</span>.set_global_opts(</span><br><span class="line">    visualmap_opts=VisualMapOpts(</span><br><span class="line">        is_show=<span class="literal">True</span>, <span class="comment"># 是否显示视觉映射配置(左下角)</span></span><br><span class="line">        is_piecewise=<span class="literal">True</span>, <span class="comment"># 是否分段</span></span><br><span class="line">        pieces=[ <span class="comment"># 自定义的每一段的范围</span></span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>: <span class="number">1</span>, <span class="string">&quot;max&quot;</span>: <span class="number">333</span>, <span class="string">&quot;label&quot;</span>: <span class="string">&quot;1-333&quot;</span>, <span class="string">&quot;color&quot;</span>: <span class="string">&quot;#0000FF&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>: <span class="number">334</span>, <span class="string">&quot;max&quot;</span>: <span class="number">666</span>, <span class="string">&quot;label&quot;</span>: <span class="string">&quot;334-666&quot;</span>, <span class="string">&quot;color&quot;</span>: <span class="string">&quot;#00FF00&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>: <span class="number">667</span>, <span class="string">&quot;max&quot;</span>: <span class="number">999</span>, <span class="string">&quot;label&quot;</span>: <span class="string">&quot;667-999&quot;</span>, <span class="string">&quot;color&quot;</span>: <span class="string">&quot;#FF0000&quot;</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line"><span class="built_in">map</span>.render(<span class="string">&quot;全国地图.html&quot;</span>)</span><br></pre></td></tr></table></figure><img src="/2023/02/17/36704/image-20230217232221002.png" class="" title="全国地图"><h3 id="省级地图可视化"><a href="#省级地图可视化" class="headerlink" title="省级地图可视化"></a>省级地图可视化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包，导入Map功能构建地图对象和配置组件</span></span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Map</span><br><span class="line"><span class="keyword">from</span> pyecharts.options <span class="keyword">import</span> VisualMapOpts</span><br><span class="line"></span><br><span class="line"><span class="comment"># 准备地图对象</span></span><br><span class="line"><span class="built_in">map</span> = Map()</span><br><span class="line"><span class="comment"># 准备数据</span></span><br><span class="line">city = [<span class="string">&quot;西安市&quot;</span>,<span class="string">&quot;宝鸡市&quot;</span>,<span class="string">&quot;榆林市&quot;</span>]</span><br><span class="line">value = [<span class="number">1</span>,<span class="number">11</span>,<span class="number">111</span>]</span><br><span class="line">data = [<span class="built_in">list</span>(z) <span class="keyword">for</span> z <span class="keyword">in</span> <span class="built_in">zip</span>(city,value)]</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># [[&#x27;西安市&#x27;, 1], [&#x27;宝鸡市&#x27;, 11], [&#x27;榆林市&#x27;, 111]]</span></span><br><span class="line"><span class="comment"># 添加数据</span></span><br><span class="line"><span class="built_in">map</span>.add(<span class="string">&quot;陕西地图&quot;</span>, data, <span class="string">&quot;陕西&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置全局选项</span></span><br><span class="line"><span class="built_in">map</span>.set_global_opts(</span><br><span class="line">    visualmap_opts=VisualMapOpts(</span><br><span class="line">        is_show=<span class="literal">True</span>,</span><br><span class="line">        is_piecewise=<span class="literal">True</span>,</span><br><span class="line">        pieces=[</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>: <span class="number">1</span>, <span class="string">&quot;max&quot;</span>: <span class="number">9</span>, <span class="string">&quot;label&quot;</span>: <span class="string">&quot;1-9&quot;</span>, <span class="string">&quot;color&quot;</span>: <span class="string">&quot;#CCFFFF&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>: <span class="number">10</span>, <span class="string">&quot;max&quot;</span>: <span class="number">99</span>, <span class="string">&quot;label&quot;</span>: <span class="string">&quot;10-99&quot;</span>, <span class="string">&quot;color&quot;</span>: <span class="string">&quot;#FF6666&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>: <span class="number">100</span>, <span class="string">&quot;max&quot;</span>: <span class="number">500</span>, <span class="string">&quot;label&quot;</span>: <span class="string">&quot;100-500&quot;</span>, <span class="string">&quot;color&quot;</span>: <span class="string">&quot;#990033&quot;</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line"><span class="built_in">map</span>.render(<span class="string">&quot;陕西地图.html&quot;</span>)</span><br></pre></td></tr></table></figure><img src="/2023/02/17/36704/image-20230217232222001.png" class="" title="省级地图"><h3 id="市级地图可视化"><a href="#市级地图可视化" class="headerlink" title="市级地图可视化"></a>市级地图可视化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包，导入Map功能构建地图对象和配置组件</span></span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Map</span><br><span class="line"><span class="keyword">from</span> pyecharts.options <span class="keyword">import</span> VisualMapOpts</span><br><span class="line"></span><br><span class="line"><span class="comment"># 准备地图对象</span></span><br><span class="line"><span class="built_in">map</span> = Map()</span><br><span class="line"><span class="comment"># 准备数据</span></span><br><span class="line">data = [</span><br><span class="line">    (<span class="string">&quot;榆阳区&quot;</span>, <span class="number">99</span>),</span><br><span class="line">    (<span class="string">&quot;靖边县&quot;</span>, <span class="number">199</span>),</span><br><span class="line">    (<span class="string">&quot;定边县&quot;</span>, <span class="number">299</span>)</span><br><span class="line">]</span><br><span class="line"><span class="comment"># 添加数据</span></span><br><span class="line"><span class="built_in">map</span>.add(<span class="string">&quot;榆林地图&quot;</span>, data, <span class="string">&quot;榆林&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置全局选项</span></span><br><span class="line"><span class="built_in">map</span>.set_global_opts(</span><br><span class="line">    visualmap_opts=VisualMapOpts(</span><br><span class="line">        is_show=<span class="literal">True</span>,</span><br><span class="line">        is_piecewise=<span class="literal">True</span>,</span><br><span class="line">        pieces=[</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>: <span class="number">1</span>, <span class="string">&quot;max&quot;</span>: <span class="number">99</span>, <span class="string">&quot;label&quot;</span>: <span class="string">&quot;1-99&quot;</span>, <span class="string">&quot;color&quot;</span>: <span class="string">&quot;#CCFFFF&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>: <span class="number">100</span>, <span class="string">&quot;max&quot;</span>: <span class="number">199</span>, <span class="string">&quot;label&quot;</span>: <span class="string">&quot;100-199&quot;</span>, <span class="string">&quot;color&quot;</span>: <span class="string">&quot;#FF6666&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>: <span class="number">200</span>, <span class="string">&quot;max&quot;</span>: <span class="number">500</span>, <span class="string">&quot;label&quot;</span>: <span class="string">&quot;200-500&quot;</span>, <span class="string">&quot;color&quot;</span>: <span class="string">&quot;#990033&quot;</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line"><span class="built_in">map</span>.render(<span class="string">&quot;榆林地图.html&quot;</span>)</span><br></pre></td></tr></table></figure><img src="/2023/02/17/36704/image-20230217232223005.png" class="" title="市级地图"><h2 id="动态柱状图"><a href="#动态柱状图" class="headerlink" title="动态柱状图"></a>动态柱状图</h2><h3 id="基础柱状图"><a href="#基础柱状图" class="headerlink" title="基础柱状图"></a>基础柱状图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包，导入Bar功能构建柱状图对象和配置组件</span></span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Bar</span><br><span class="line"><span class="keyword">from</span> pyecharts <span class="keyword">import</span> options <span class="keyword">as</span> opts</span><br><span class="line"><span class="comment"># 使用Bar构建基础柱状图</span></span><br><span class="line">bar = Bar()</span><br><span class="line"><span class="comment"># 添加x轴的数据</span></span><br><span class="line">bar.add_xaxis([<span class="string">&quot;中国&quot;</span>, <span class="string">&quot;美国&quot;</span>, <span class="string">&quot;英国&quot;</span>])</span><br><span class="line"><span class="comment"># 添加y轴数据，设置数值标签在右侧</span></span><br><span class="line">bar.add_yaxis(<span class="string">&quot;GDP&quot;</span>, [<span class="number">30</span>, <span class="number">20</span>, <span class="number">10</span>], label_opts=opts.LabelOpts(position=<span class="string">&quot;right&quot;</span>))</span><br><span class="line"><span class="comment"># 反转x和y轴</span></span><br><span class="line">bar.reversal_axis()</span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">bar.render(<span class="string">&quot;基础柱状图.html&quot;</span>)</span><br></pre></td></tr></table></figure><img src="/2023/02/17/36704/image-20230217232621015.png" class="" title="基础柱状图"><h3 id="基础时间线柱状图"><a href="#基础时间线柱状图" class="headerlink" title="基础时间线柱状图"></a>基础时间线柱状图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包，导入Bar功能构建柱状图对象和配置组件</span></span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Bar, Timeline</span><br><span class="line"><span class="keyword">from</span> pyecharts.options <span class="keyword">import</span> LabelOpts</span><br><span class="line"><span class="keyword">from</span> pyecharts.<span class="built_in">globals</span> <span class="keyword">import</span> ThemeType</span><br><span class="line"></span><br><span class="line">bar1 = Bar()</span><br><span class="line">bar1.add_xaxis([<span class="string">&quot;中国&quot;</span>, <span class="string">&quot;美国&quot;</span>, <span class="string">&quot;英国&quot;</span>])</span><br><span class="line">bar1.add_yaxis(<span class="string">&quot;GDP&quot;</span>, [<span class="number">30</span>, <span class="number">20</span>, <span class="number">10</span>], label_opts=LabelOpts(position=<span class="string">&quot;right&quot;</span>))</span><br><span class="line">bar1.reversal_axis()</span><br><span class="line"></span><br><span class="line">bar2 = Bar()</span><br><span class="line">bar2.add_xaxis([<span class="string">&quot;中国&quot;</span>, <span class="string">&quot;美国&quot;</span>, <span class="string">&quot;英国&quot;</span>])</span><br><span class="line">bar2.add_yaxis(<span class="string">&quot;GDP&quot;</span>, [<span class="number">50</span>, <span class="number">40</span>, <span class="number">30</span>], label_opts=LabelOpts(position=<span class="string">&quot;right&quot;</span>))</span><br><span class="line">bar2.reversal_axis()</span><br><span class="line"></span><br><span class="line">bar3 = Bar()</span><br><span class="line">bar3.add_xaxis([<span class="string">&quot;中国&quot;</span>, <span class="string">&quot;美国&quot;</span>, <span class="string">&quot;英国&quot;</span>])</span><br><span class="line">bar3.add_yaxis(<span class="string">&quot;GDP&quot;</span>, [<span class="number">70</span>, <span class="number">60</span>, <span class="number">60</span>], label_opts=LabelOpts(position=<span class="string">&quot;right&quot;</span>))</span><br><span class="line">bar3.reversal_axis()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建时间线对象</span></span><br><span class="line">timeline = Timeline(&#123;<span class="string">&quot;theme&quot;</span>: ThemeType.LIGHT&#125;)</span><br><span class="line"><span class="comment"># 在时间线内添加柱状图对象</span></span><br><span class="line">timeline.add(bar1, <span class="string">&quot;时间点1&quot;</span>)</span><br><span class="line">timeline.add(bar2, <span class="string">&quot;时间点2&quot;</span>)</span><br><span class="line">timeline.add(bar3, <span class="string">&quot;时间点3&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自动播放设置</span></span><br><span class="line">timeline.add_schema(</span><br><span class="line">    play_interval=<span class="number">1000</span>,  <span class="comment"># 自动播放时间间隔，单位毫秒</span></span><br><span class="line">    is_timeline_show=<span class="literal">True</span>,  <span class="comment"># 自动播放时，是否显示时间线</span></span><br><span class="line">    is_auto_play=<span class="literal">True</span>,  <span class="comment"># 是否自动播放</span></span><br><span class="line">    is_loop_play=<span class="literal">True</span>  <span class="comment"># 是否自动循环</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用时间线对象绘图，而不是bar对象</span></span><br><span class="line">timeline.render(<span class="string">&quot;基础时间线柱状图.html&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><img src="/2023/02/17/36704/image-20230217233521024.png" class="" title="基础时间线柱状图"><h3 id="GDP动态柱状图"><a href="#GDP动态柱状图" class="headerlink" title="GDP动态柱状图"></a>GDP动态柱状图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Bar, Timeline</span><br><span class="line"><span class="keyword">from</span> pyecharts.options <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> pyecharts.<span class="built_in">globals</span> <span class="keyword">import</span> ThemeType</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据</span></span><br><span class="line">data_lines = [</span><br><span class="line">    <span class="string">&#x27;1960,美国,5.43E+11&#x27;</span>, <span class="string">&#x27;1960,英国,73233967692&#x27;</span>, <span class="string">&#x27;1960,法国,62225478000&#x27;</span>, <span class="string">&#x27;1960,中国,59716467625&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1961,美国,5.63E+11&#x27;</span>, <span class="string">&#x27;1961,中国,50056868957&#x27;</span>, <span class="string">&#x27;1961,英国,7.77E+10&#x27;</span>, <span class="string">&#x27;1961,法国,6.75E+10&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1962,美国,6.05E+11&#x27;</span>, <span class="string">&#x27;1962,中国,6.72E+10&#x27;</span>, <span class="string">&#x27;1962,英国,8.12E+10&#x27;</span>, <span class="string">&#x27;1962,印度,42161481858&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1963,美国,6.39E+11&#x27;</span>, <span class="string">&#x27;1963,中国,5.07E+10&#x27;</span>, <span class="string">&#x27;1963,英国,8.66E+10&#x27;</span>, <span class="string">&#x27;1963,法国,8.48E+10&#x27;</span>,</span><br><span class="line">]</span><br><span class="line"><span class="comment"># 将数据转换为字典存储，格式为：</span></span><br><span class="line"><span class="comment"># &#123; 年份: [ [国家, gdp], [国家,gdp], ......  ], 年份: [ [国家, gdp], [国家,gdp], ......  ], ...... &#125;</span></span><br><span class="line"><span class="comment"># 定义字典对象</span></span><br><span class="line">data_dict = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> data_lines:</span><br><span class="line">    year = <span class="built_in">int</span>(line.split(<span class="string">&quot;,&quot;</span>)[<span class="number">0</span>])  <span class="comment"># 年份</span></span><br><span class="line">    country = line.split(<span class="string">&quot;,&quot;</span>)[<span class="number">1</span>]  <span class="comment"># 国家</span></span><br><span class="line">    gdp = <span class="built_in">float</span>(line.split(<span class="string">&quot;,&quot;</span>)[<span class="number">2</span>])  <span class="comment"># gdp数据</span></span><br><span class="line">    <span class="comment"># 判断字典里是否存在指定的key</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        data_dict[year].append([country, gdp])</span><br><span class="line">    <span class="keyword">except</span> KeyError:</span><br><span class="line">        data_dict[year] = []</span><br><span class="line">        data_dict[year].append([country, gdp])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建时间线对象</span></span><br><span class="line">timeline = Timeline(&#123;<span class="string">&quot;theme&quot;</span>: ThemeType.LIGHT&#125;)</span><br><span class="line"><span class="comment"># 排序年份</span></span><br><span class="line">sorted_year_list = <span class="built_in">sorted</span>(data_dict.keys())</span><br><span class="line"><span class="keyword">for</span> year <span class="keyword">in</span> sorted_year_list:</span><br><span class="line">    data_dict[year].sort(key=<span class="keyword">lambda</span> element: element[<span class="number">1</span>], reverse=<span class="literal">True</span>)  <span class="comment"># 按照GDP降序</span></span><br><span class="line">    <span class="comment"># 取出本年份前3名的国家</span></span><br><span class="line">    year_data = data_dict[year][<span class="number">0</span>:<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">    x_data = []</span><br><span class="line">    y_data = []</span><br><span class="line">    <span class="keyword">for</span> country_gdp <span class="keyword">in</span> year_data:</span><br><span class="line">        x_data.append(country_gdp[<span class="number">0</span>])  <span class="comment"># x轴添加国家</span></span><br><span class="line">        y_data.append(country_gdp[<span class="number">1</span>] / <span class="number">100000000</span>)  <span class="comment"># y轴添加gdp数据，单位：亿</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 构建柱状图</span></span><br><span class="line">    bar = Bar()</span><br><span class="line">    x_data.reverse()</span><br><span class="line">    y_data.reverse()</span><br><span class="line">    bar.add_xaxis(x_data)</span><br><span class="line">    bar.add_yaxis(<span class="string">&quot;GDP(亿)&quot;</span>, y_data, label_opts=LabelOpts(position=<span class="string">&quot;right&quot;</span>))</span><br><span class="line">    <span class="comment"># 反转x轴和y轴</span></span><br><span class="line">    bar.reversal_axis()</span><br><span class="line">    <span class="comment"># 设置每一年的图表的标题</span></span><br><span class="line">    bar.set_global_opts(</span><br><span class="line">        title_opts=TitleOpts(title=<span class="string">f&quot;<span class="subst">&#123;year&#125;</span>年全球前3国家GDP数据&quot;</span>)</span><br><span class="line">    )</span><br><span class="line">    timeline.add(bar, <span class="built_in">str</span>(year))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置时间线自动播放</span></span><br><span class="line">timeline.add_schema(</span><br><span class="line">    play_interval=<span class="number">1000</span>,</span><br><span class="line">    is_timeline_show=<span class="literal">True</span>,</span><br><span class="line">    is_auto_play=<span class="literal">True</span>,</span><br><span class="line">    is_loop_play=<span class="literal">True</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">timeline.render(<span class="string">&quot;1960-1963全球GDP前3国家.html&quot;</span>)</span><br></pre></td></tr></table></figure><img src="/2023/02/17/36704/image-20230217234321024.png" class="" title="基础时间线柱状图">]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python基本语法</title>
      <link href="/2023/02/16/24577.html"/>
      <url>/2023/02/16/24577.html</url>
      
        <content type="html"><![CDATA[<h1 id="字面量"><a href="#字面量" class="headerlink" title="字面量"></a>字面量</h1><p>在代码中，被写下来的的固定的值，称之为字面量</p><table><thead><tr><th align="center">类型</th><th align="center">描述</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">数字（Number）</td><td align="center">整数（int）<br />浮点数（float）<br />复数（complex）<br />布尔（bool）</td><td align="center">整数（int），如：10、-10<br />浮点数（float），如：13.14、-13.14<br />复数（complex），如：4+3j，以j结尾表示复数<br />布尔（bool）表达现实生活中的逻辑，即真和假，True表示真，False表示假。True本质上是一个数字记作1，False记作0</td></tr><tr><td align="center">字符串（String）</td><td align="center">描述文本的一种数据类型</td><td align="center">字符串（string）由任意数量的字符组成，字符串需要用双引号包围起来。</td></tr><tr><td align="center">列表（List）</td><td align="center">有序的可变序列</td><td align="center">Python中使用最频繁的数据类型，可有序记录一堆数据</td></tr><tr><td align="center">元组（Tuple）</td><td align="center">有序的不可变序列</td><td align="center">可有序记录一堆不可变的Python数据集合</td></tr><tr><td align="center">集合（Set）</td><td align="center">无序不重复集合</td><td align="center">可无序记录一堆不重复的Python数据集合</td></tr><tr><td align="center">字典（Dictionary）</td><td align="center">无序Key-Value集合</td><td align="center">可无序记录一堆Key-Value型的Python数据集合</td></tr></tbody></table><p>基于<code>print</code>语句完成各类字面量的输出。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 写一个整数字面量</span></span><br><span class="line"><span class="number">11110000</span></span><br><span class="line"><span class="comment"># print(字面量)，如：</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">10</span>)  <span class="comment"># 输出整数10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">13.14</span>)  <span class="comment"># 输出浮点数13.14</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;人生苦短,我用Python&quot;</span>)  <span class="comment"># 输出字符串：人生苦短,我用Python</span></span><br></pre></td></tr></table></figure><hr><h1 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h1><p>在程序代码中对程序代码进行解释说明的文字。<br>作用：注释不是程序，不能被执行，只是对程序代码进行解释说明，让别人可以看懂程序代码的作用，能够大大增强程序的可读性。<br>注释的分类：</p><ul><li>单行注释：以<code>#</code>开头，<code>#</code>右边的所有文字当作说明。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我是单行注释</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">10</span>) <span class="comment"># 输出整数字面量</span></span><br></pre></td></tr></table></figure><ul><li>多行注释： 以 一对三个双引号<code>&quot;&quot;&quot;注释内容&quot;&quot;&quot;</code>引起来。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">我是多行注释</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="number">109</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">10</span>)</span><br></pre></td></tr></table></figure><hr><h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><p>在程序运行时，能储存计算结果或能表示值的抽象概念，存储的目的是为了重复使用。<br>变量存储的数据，是可以发生改变的。<br><strong>Python 可以同一行显示多条语句，方法是用分号<code> ;</code>分开。</strong><br>Python 中的变量赋值不需要类型声明。<br>每个变量在内存中创建，都包括变量的标识，名称和数据这些信息。<br>每个变量在使用前都必须赋值，变量赋值以后该变量才会被创建。<br>等号<code>=</code>运算符左边是一个变量名，等号<code>=</code>运算符右边是存储在变量中的值。<br>变量的定义格式：<code>变量名称 = 变量的值</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">counter = <span class="number">100</span> <span class="comment"># 赋值整型变量</span></span><br><span class="line">miles = <span class="number">1000.0</span> <span class="comment"># 浮点型</span></span><br><span class="line">name = <span class="string">&quot;John&quot;</span> <span class="comment"># 字符串</span></span><br><span class="line">a = b = c = <span class="number">1</span> <span class="comment"># 创建一个整型对象，值为1，三个变量被分配到相同的内存空间上。</span></span><br><span class="line">d, e, f = <span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;john&quot;</span> <span class="comment"># 两个整型对象 1 和 2 分别分配给变量 d 和 e，字符串对象 &quot;john&quot; 分配给变量 f。</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;整数变量&quot;</span>,counter,<span class="string">&quot;整数变量变换&quot;</span>,counter-<span class="number">15</span>) <span class="comment"># print语句输出多份内容，使用‘，’分隔。</span></span><br><span class="line"><span class="built_in">print</span>(miles)</span><br><span class="line"><span class="built_in">print</span>(name)</span><br><span class="line"><span class="built_in">print</span>(f)</span><br></pre></td></tr></table></figure><hr><h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><p>通过type()语句可得到数据的类型。</p><p>语法：<code>type(被查看类型的数据)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在print语句中，直接输出类型信息</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="string">&quot;这是字符串&quot;</span>)) <span class="comment"># &lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用变量存储type()的结果（返回值）</span></span><br><span class="line">string_type = <span class="built_in">type</span>(<span class="string">&quot;这是字符串&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(string_type) <span class="comment"># &lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过type(变量)，查看变量中存储的数据的类型</span></span><br><span class="line">name = <span class="string">&quot;这是字符串&quot;</span></span><br><span class="line">string_type = <span class="built_in">type</span>(name)</span><br><span class="line"><span class="built_in">print</span>(string_type) <span class="comment"># &lt;class &#x27;str&#x27;&gt;</span></span><br></pre></td></tr></table></figure><hr><h1 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h1><p>字符串有3种不同的定义方式，每种引号的开始与结束必须是相同类型的。</p><ul><li>单引号定义法。</li><li>双引号定义法。</li><li>三引号定义法。<ul><li>使用变量接收它，它就是字符串，不使用变量接收它，就可以作为多行注释使用。</li><li>三引号允许一个字符串跨多行，字符串中可以包含换行符、制表符以及其他特殊字符。</li></ul></li></ul><p>引号的嵌套：</p><ul><li>可以使用转义字符<code>\</code>来进行转义。</li><li>单引号内可以写双引号或双引号内可以写单引号。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 双引号定义法</span></span><br><span class="line">text1 = <span class="string">&quot;字符串&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 单引号定义法</span></span><br><span class="line">text2 = <span class="string">&#x27;字符串&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 三引号定义法，可定义在一行或多行中，打印多行时会换行输出</span></span><br><span class="line">text3 = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">字符串</span></span><br><span class="line"><span class="string">字符串</span></span><br><span class="line"><span class="string">字符串</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 字符串之间的嵌套使用</span></span><br><span class="line"><span class="string">&quot;&#x27;字符串&#x27;&quot;</span></span><br><span class="line"><span class="string">&#x27;&quot;字符串&quot;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 转义字符\来进行转义输出</span></span><br><span class="line"><span class="string">&#x27;\&#x27;字符串&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="字符串拼接"><a href="#字符串拼接" class="headerlink" title="字符串拼接"></a>字符串拼接</h2><p>如果有两个字符串（文本）字面量，可以将其拼接成一个字符串，通过<code>+</code>号即可完成，如<code>“hello+“world”</code>。</p><p>一般，字面量和变量或变量和变量之间会使用拼接，但字符串无法和非字符串变量进行拼接，因为类型不一致，无法接上。如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串拼接字符串变量</span></span><br><span class="line">name = <span class="string">&quot;张三&quot;</span></span><br><span class="line">hobby = <span class="string">&quot;写Python&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;我叫：&quot;</span>+name+<span class="string">&quot;，我会&quot;</span>+hobby+<span class="string">&quot;!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串拼接非字符串变量</span></span><br><span class="line">name = <span class="string">&quot;张三&quot;</span></span><br><span class="line">time = <span class="number">8</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;我叫：&quot;</span>+name+<span class="string">&quot;，现在&quot;</span>+time+<span class="string">&quot;点&quot;</span>) <span class="comment"># TypeError: can only concatenate str (not &quot;int&quot;) to str</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="字符串格式化"><a href="#字符串格式化" class="headerlink" title="字符串格式化"></a>字符串格式化</h2><h3 id="字符串格式化-字符串格式符"><a href="#字符串格式化-字符串格式符" class="headerlink" title="字符串格式化-字符串格式符"></a>字符串格式化-字符串格式符</h3><p>Python 支持格式化字符串的输出 。最基本的用法是将一个值插入到一个有字符串格式符 <code>%s</code>的字符串中。<br>在 Python 中，字符串格式化使用与<code>C</code>中<code>sprintf</code>函数一样的语法。<br>常见的字符串格式化符号有<code>%s格式化字符串</code>、<code>%d格式化整数</code>、<code>%f格式化浮点数字，可指定小数点后的精度</code>等。<br>Python 2.6开始，新增了一种格式化字符串的函数<code>str.format()</code>，它增强了字符串格式化的功能。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># %表示占位符</span></span><br><span class="line"><span class="comment"># s表示将变量变成字符串放入占位的地方，数字也可用%s占位，会将数字转换成了字符串</span></span><br><span class="line"><span class="comment"># .2f代表指定保留两位小数</span></span><br><span class="line">name = <span class="string">&#x27;John&#x27;</span></span><br><span class="line">height = <span class="number">1.8</span></span><br><span class="line">message = <span class="string">&quot;My name is %s and weight is %s kg and height is %.2f m!&quot;</span> % (name,<span class="number">60</span>,height)</span><br><span class="line"><span class="built_in">print</span>(message) <span class="comment"># My name is John and weight is 60 kg and height is 1.80 m!</span></span><br></pre></td></tr></table></figure><p>数字精度控制：<br>可使用辅助符号<code>&quot;m.n&quot;</code>来控制数据的宽度和精度。</p><ul><li><code>m</code>，控制宽度，要求是数字（很少使用），设置的宽度小于数字自身，不生效。</li><li><code>.n</code>，控制小数点精度，要求是数字，会进行小数的四舍五入。</li><li><code>%5d</code>：表示将整数的宽度控制在5位，如数字11被设置后，就会变成：<code>[空格][空格][空格]11</code>，用三个空格补足宽度。</li><li><code>%7.2f</code>：表示将宽度控制为7，将小数点精度设置为2， 小数点和小数部分也算入宽度计算。如数字11.345被设置后，结果是：<code>[空格][空格]11.35</code>。2个空格补足宽度，小数部分限制2位精度后，四舍五入为 .35。</li><li><code>%.2f</code>：表示不限制宽度，只设置小数点精度为2，如11.345被设置后，，结果是11.35。</li></ul><h3 id="字符串格式化-f字符串"><a href="#字符串格式化-f字符串" class="headerlink" title="字符串格式化-f字符串"></a>字符串格式化-f字符串</h3><p>f-字符串格式，也称为“格式化字符串文字”。f-string是格式化字符串的一种很好且简单的方法，适用于Python V 3.6+。</p><p>通过语法：<code>f&quot;内容&#123;变量&#125;&quot;</code>的格式来快速格式化。<br>这种写法不做精度控制，原样输出，也不理会类型，适用于快速格式化字符串。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;John&#x27;</span></span><br><span class="line">weight = <span class="number">60</span></span><br><span class="line">height = <span class="number">1.8</span></span><br><span class="line">message = <span class="string">f&quot;My name is <span class="subst">&#123;name&#125;</span> and weight is <span class="subst">&#123;weight&#125;</span> kg and height is <span class="subst">&#123;height&#125;</span> m!&quot;</span></span><br><span class="line"><span class="built_in">print</span>(message)</span><br></pre></td></tr></table></figure><h3 id="字符串格式化-格式化表达式"><a href="#字符串格式化-格式化表达式" class="headerlink" title="字符串格式化-格式化表达式"></a>字符串格式化-格式化表达式</h3><p>表达式就是一个具有明确结果的代码语句，如<code>1 + 1</code>、<code>type(“字符串”)</code>、<code>3 * 5</code>等。<br>在变量定义的时候，如<code>age = 11 + 11</code>，等号右侧的就是表达式，也就是有具体的结果，将结果赋值给了等号左侧的变量。<br>在无需使用变量进行数据存储的时候，可以直接格式化表达式。<br>通过语法：<code>f&quot;&#123;表达式&#125;&quot;</code>或<code>&quot;%s\%d\%f&quot; %(表达式、表达式、表达式）</code>来格式化表达式。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;1+1=%d&quot;</span> %(<span class="number">1</span>+<span class="number">1</span>)) <span class="comment"># 1+1=2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;2+2=<span class="subst">&#123;<span class="number">2</span>+<span class="number">2</span>&#125;</span>&quot;</span>) <span class="comment"># 2+2=4</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;整数在Python中的类型：%s&quot;</span> %<span class="built_in">type</span>(<span class="number">1</span>)) <span class="comment"># 整数在Python中的类型：&lt;class &#x27;int&#x27;&gt;</span></span><br></pre></td></tr></table></figure><hr><h1 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h1><p>常见的转换语句：</p><table><thead><tr><th align="center">语句(函数)</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>int(x)</code></td><td align="center">将x转换为一个整数</td></tr><tr><td align="center"><code>float(x)</code></td><td align="center">将x转换为一个浮点数</td></tr><tr><td align="center"><code>str(x)</code></td><td align="center">将对象 x 转换为字符串</td></tr></tbody></table><p>这三个语句，都是带有结果的（返回值），可用<code>print</code>直接输出，或用变量存储结果值。</p><p>类型转换不是万能的，需要注意：</p><ol><li>任何类型，都可以通过<code>str()</code>，转换成字符串。</li><li>字符串内必须真的是数字，才可以将字符串转换为数字。</li><li>浮点数转整数会丢失精度，也就是小数部分。</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v_str = <span class="string">&quot;这个不是数字&quot;</span></span><br><span class="line">num = <span class="built_in">int</span>(v_str) <span class="comment"># ValueError: invalid literal for int() with base 10: &#x27;这个不是数字&#x27;</span></span><br></pre></td></tr></table></figure><hr><h1 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h1><p>标识符：是用户在编程的时候所使用的一系列名字，用于给变量、类、方法等命名。<br>Python中，标识符命名的<strong>规则</strong>主要有3类：</p><ul><li>内容限定<ul><li>标识符命名中，只允许出现：<code>英文、中文、数字、下划线（_）</code>这四类元素。其余任何内容都不被允许。</li><li>以单下划线开头<code>_foo</code>的代表不能直接访问的类属性，需通过类提供的接口进行访问，不能用<code>from xxx import *</code> 而导入。</li><li>以双下划线开头的<code>__foo</code>代表类的私有成员，以双下划线开头和结尾的<code>__foo__</code>代表 Python 里特殊方法专用的标识，如<code>__init__()</code>代表类的构造函数。</li><li>不推荐使用中文，<strong>数字不可以开头</strong>。</li></ul></li><li>大小写敏感<ul><li>字母的大写和小写，是完全能够区分的。</li></ul></li><li>不可使用关键字<ul><li>所有Python的关键字除内置常量<code>False、None、True</code>外只包含小写字母。</li><li>可通过下面语句获取在Python中的关键字。这些关键字不能用作常数或变数，或任何其他标识符名称。</li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> keyword</span><br><span class="line"><span class="comment"># [&#x27;False&#x27;, &#x27;None&#x27;, &#x27;True&#x27;, &#x27;and&#x27;, &#x27;as&#x27;, &#x27;assert&#x27;, &#x27;async&#x27;, &#x27;await&#x27;, &#x27;break&#x27;, &#x27;class&#x27;, &#x27;continue&#x27;, &#x27;def&#x27;, &#x27;del&#x27;, &#x27;elif&#x27;, &#x27;else&#x27;, &#x27;except&#x27;, &#x27;finally&#x27;, &#x27;for&#x27;, &#x27;from&#x27;, &#x27;global&#x27;, &#x27;if&#x27;, &#x27;import&#x27;, &#x27;in&#x27;, &#x27;is&#x27;, &#x27;lambda&#x27;, &#x27;nonlocal&#x27;, &#x27;not&#x27;, &#x27;or&#x27;, &#x27;pass&#x27;, &#x27;raise&#x27;, &#x27;return&#x27;, &#x27;try&#x27;, &#x27;while&#x27;, &#x27;with&#x27;, &#x27;yield&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(keyword.kwlist)</span><br><span class="line"><span class="comment"># 35</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(keyword.kwlist))</span><br></pre></td></tr></table></figure><p>标识符的命名<strong>规范</strong>：</p><ul><li>变量的命名规范:<ul><li>见名知意、多个单词组合变量名，要使用下划线做分隔、英文字母全小写。</li></ul></li><li>类的命名规范：</li><li>方法的命名规范：</li></ul><hr><h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><h2 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h2><p>以下假设变量： a=10，b=20：</p><table><thead><tr><th align="center">运算符</th><th align="center">描述</th><th align="center">实例</th></tr></thead><tbody><tr><td align="center"><code>+</code></td><td align="center">加</td><td align="center">两个对象相加 <code>a + b</code> 输出结果 30</td></tr><tr><td align="center"><code>-</code></td><td align="center">减</td><td align="center">得到负数或是一个数减去另一个数 <code>a - b</code> 输出结果 -10</td></tr><tr><td align="center"><code>*</code></td><td align="center">乘</td><td align="center">两个数相乘或是返回一个被重复若干次的字符串 <code>a * b</code> 输出结果 200</td></tr><tr><td align="center"><code>/</code></td><td align="center">除</td><td align="center"><code>b / a</code> 输出结果 2 ，<code>9/2</code> 输出结果 4.5</td></tr><tr><td align="center"><code>//</code></td><td align="center">取整除</td><td align="center">返回商的整数部分<br/> <code>9//2</code> 输出结果 4 , <code>9.0//2.0</code> 输出结果 4.0 ，<code>-9//2</code> 输出结果 -5</td></tr><tr><td align="center"><code>%</code></td><td align="center">取余</td><td align="center">返回除法的余数 <code>b % a</code> 输出结果 0</td></tr><tr><td align="center"><code>**</code></td><td align="center">指数</td><td align="center"><code>a**b</code> 为10的20次方， 输出结果 100000000000000000000</td></tr></tbody></table><h2 id="比较（关系）运算符"><a href="#比较（关系）运算符" class="headerlink" title="比较（关系）运算符"></a>比较（关系）运算符</h2><p>以下假设变量： a=10，b=20：</p><table><thead><tr><th align="center">运算符</th><th align="center">描述</th><th align="center">实例</th></tr></thead><tbody><tr><td align="center"><code>==</code></td><td align="center">等于</td><td align="center"><code>a == b</code> 返回False。</td></tr><tr><td align="center"><code>!=</code></td><td align="center">不等于</td><td align="center"><code>a != b</code> 返回True。</td></tr><tr><td align="center"><code>&lt;&gt;</code></td><td align="center">不等于<br /><strong>python 3 已废弃。</strong></td><td align="center"><code>a &lt;&gt; b</code> 返回 True。</td></tr><tr><td align="center"><code>&gt;</code></td><td align="center">大于</td><td align="center"><code>a &gt; b</code> 返回 False。</td></tr><tr><td align="center"><code>&lt;</code></td><td align="center">小于</td><td align="center"><code>a &lt; b</code> 返回 True。</td></tr><tr><td align="center"><code>&gt;=</code></td><td align="center">大于等于</td><td align="center"><code>a &gt;= b</code> 返回 False。</td></tr><tr><td align="center"><code>&lt;=</code></td><td align="center">小于等于</td><td align="center"><code>a &lt;= b</code> 返回 True。</td></tr></tbody></table><h2 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h2><p>以下假设变量： a=10，b=20：</p><table><thead><tr><th align="center">运算符</th><th align="center">描述</th><th align="center">实例</th></tr></thead><tbody><tr><td align="center"><code>=</code></td><td align="center">简单的赋值运算符</td><td align="center"><code>c = a + b</code> 将 <code>a + b</code> 的运算结果赋值为 c</td></tr><tr><td align="center"><code>+=</code></td><td align="center">加法赋值运算符</td><td align="center"><code>c += a</code> 等效于 <code>c = c + a</code></td></tr><tr><td align="center"><code>-=</code></td><td align="center">减法赋值运算符</td><td align="center"><code>c -= a</code> 等效于 <code>c = c - a</code></td></tr><tr><td align="center"><code>*=</code></td><td align="center">乘法赋值运算符</td><td align="center"><code>c *= a</code> 等效于 <code>c = c * a</code></td></tr><tr><td align="center"><code>/=</code></td><td align="center">除法赋值运算符</td><td align="center"><code>c /= a</code> 等效于 <code>c = c / a</code></td></tr><tr><td align="center"><code>%=</code></td><td align="center">取模赋值运算符</td><td align="center"><code>c %= a</code> 等效于 <code>c = c % a</code></td></tr><tr><td align="center"><code>**=</code></td><td align="center">幂赋值运算符</td><td align="center"><code>c **= a</code> 等效于 <code>c = c ** a</code></td></tr><tr><td align="center"><code>//=</code></td><td align="center">取整除赋值运算符</td><td align="center"><code>c //= a</code> 等效于 <code>c = c // a</code></td></tr></tbody></table><h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><h2 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h2><h2 id="成员运算符"><a href="#成员运算符" class="headerlink" title="成员运算符"></a>成员运算符</h2><h2 id="身份运算符"><a href="#身份运算符" class="headerlink" title="身份运算符"></a>身份运算符</h2><h2 id="运算符优先级"><a href="#运算符优先级" class="headerlink" title="运算符优先级"></a>运算符优先级</h2><hr><h1 id="数据输入"><a href="#数据输入" class="headerlink" title="数据输入"></a>数据输入</h1><p>Python 3中 input() 函数接受一个标准输入数据，返回为 string 类型，input语句，用来获取键盘输入。</p><p>Python 2中<code>input()</code>相等于<code>eval(raw_input(prompt))</code>，用来获取控制台的输入，因为引入了<code>eval()</code>，所以会存在代码注入的风险。<br>Python 2中<code>raw_input()</code>将所有输入作为字符串看待，返回字符串类型。而<code>input()</code>在对待纯数字输入时具有自己的特性，它返回所输入的数字的类型（ int, float ）。</p><p>Python 3 中，将 Python 2 的<code>raw_input()</code>函数保留，重命名为<code>input()</code>，同时移除了 Python 2的<code>input()</code>函数。因此，在 Python 3 中，是不存在<code>input()</code>函数代码注入风险的。</p><p>通过语法：<code>input([prompt])</code>，用以在使用者输入内容之前显示提示信息prompt。</p><p><strong>注意，无论键盘输入什么类型的数据，获取到的数据永远都是字符串类型。</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;输入姓名&quot;</span>)</span><br><span class="line">name = <span class="built_in">input</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;欢迎访问，%s&quot;</span> % name)</span><br><span class="line"><span class="comment"># 简化 input()语句其实是可以在要求使用者输入内容前，输出提示内容</span></span><br><span class="line">name = <span class="built_in">input</span>(<span class="string">&quot;输入姓名&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;欢迎访问，%s&quot;</span> % name)</span><br></pre></td></tr></table></figure><hr><h1 id="判断语句"><a href="#判断语句" class="headerlink" title="判断语句"></a>判断语句</h1><p>Python判断语句是通过一条或多条语句的执行结果（<code>True</code>或者<code>False</code>）来决定执行的代码块。</p><h2 id="布尔类型的字面量"><a href="#布尔类型的字面量" class="headerlink" title="布尔类型的字面量"></a>布尔类型的字面量</h2><p>在Python中，可以表示真假的数据类型是布尔类型</p><ul><li>字面量<code>True</code>表示真。</li><li>字面量<code>False</code>表示假。</li><li>Python程序语言指定<strong>任何非0和非空（null）值</strong>为<code>True</code>，<strong>0 或者 null</strong>为<code>False</code>。</li></ul><p>除了可以定义布尔类型外，还可以通过<strong>比较（关系）运算符</strong>计算得到布尔类型的结果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">boolean = <span class="literal">True</span></span><br><span class="line">result = (<span class="number">1</span>==<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(boolean == result) <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(boolean)) <span class="comment"># &lt;class &#x27;bool&#x27;&gt;</span></span><br></pre></td></tr></table></figure><h2 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h2><p>Python 编程中<code>if</code>语句用于控制程序的执行，基本形式为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 判断条件:</span><br><span class="line">    执行语句……</span><br></pre></td></tr></table></figure><p>其中”判断条件”成立时（非零），则执行后面的语句，而执行内容可以多行，以缩进来区分表示同一范围。</p><p>if语句的注意点：</p><ul><li>判断条件的结果一定要是布尔类型。</li><li>不要忘记判断条件后的<code>:</code>引号。</li><li>归属于if语句的代码块，需在前方填充4个空格缩进，<strong>不要用Tab补全</strong>，Python通过缩进判断代码块的归属关系。</li></ul><h2 id="if-else语句"><a href="#if-else语句" class="headerlink" title="if else语句"></a>if else语句</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 判断条件：</span><br><span class="line">    执行语句……</span><br><span class="line"><span class="keyword">else</span>：</span><br><span class="line">    执行语句……</span><br></pre></td></tr></table></figure><p><code>if</code>和其代码块，条件满足时执行，<code>else</code>搭配<code>if</code>的判断条件，当不满足的时候执行。</p><p>if else语句的注意点：</p><ul><li><code>else</code>不需要判断条件，当<code>if</code>的条件不满足时，<code>else</code>执行。</li><li>和if的代码块一样，else的代码块同样需要4个空格作为缩进。</li></ul><h2 id="if-elif-else语句"><a href="#if-elif-else语句" class="headerlink" title="if elif else语句"></a>if elif else语句</h2><p>当判断条件为多个值时，可以使用以下形式：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 判断条件<span class="number">1</span>:</span><br><span class="line">    执行语句<span class="number">1</span>……</span><br><span class="line"><span class="keyword">elif</span> 判断条件<span class="number">2</span>:</span><br><span class="line">    执行语句<span class="number">2</span>……</span><br><span class="line"><span class="keyword">elif</span> 判断条件<span class="number">3</span>:</span><br><span class="line">    执行语句<span class="number">3</span>……</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    执行语句<span class="number">4</span>……</span><br></pre></td></tr></table></figure><p>判断是互斥且有顺序的。</p><ul><li>满足1，将不会理会2和3和4。</li><li>满足2，将不会理会3和4。</li><li>1、2、3均不满足，进入else。</li><li>else也可省略不写，效果等同3个独立的if判断。</li></ul><p>由于 python 并不支持<code>switch</code>语句，所以多个条件判断，只能用<code>elif</code>来实现，如果判断需要多个条件需同时判断时，可以使用<code>or（或）</code>，表示两个条件有一个成立时判断条件成功；使用<code>and（与）</code>时，表示只有两个条件同时成立的情况下，判断条件才成功。</p><p>可以在条件判断中，直接写input语句，节省代码量。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;欢迎访问本系统&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;输入年龄:&quot;</span>)) &gt;= <span class="number">18</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;年龄符合，可以访问&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> <span class="built_in">input</span>(<span class="string">&quot;输入密码:&quot;</span>) ==<span class="string">&quot;admin&quot;</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;密码正确，admin登录成功&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;条件不符合&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="简单的语句组"><a href="#简单的语句组" class="headerlink" title="简单的语句组"></a>简单的语句组</h2><p>可在同一行的位置上使用<code>if</code>条件判断语句，如下实例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var = <span class="number">100</span></span><br><span class="line"><span class="keyword">if</span> ( var  == <span class="number">100</span> ) : <span class="built_in">print</span>(<span class="string">&quot;变量 var 的值为100&quot;</span>);<span class="built_in">print</span>(<span class="string">&quot;变量 var 的值为200&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Good bye!&quot;</span>)</span><br></pre></td></tr></table></figure><p>判断条件为<code>True</code>时，输出同一行的语句，并且输出最后一条<code>Good bye!</code>语句。<br>判断条件为<code>False</code>时，仅输出最后一条<code>Good bye!</code>语句。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = [1,2,3]</span><br><span class="line">b = a if len(a) != 0 else &quot;&quot;</span><br><span class="line">print(b)</span><br><span class="line"></span><br><span class="line">c=[]</span><br><span class="line">d = c if len(c) != 0 else &quot;c 是一个空列表&quot;</span><br><span class="line">print(d)</span><br></pre></td></tr></table></figure><h2 id="判断语句的嵌套"><a href="#判断语句的嵌套" class="headerlink" title="判断语句的嵌套"></a>判断语句的嵌套</h2><p>嵌套的关键点，在于<code>:</code>空格缩进。<br>通过空格缩进，来决定语句之间的<code>:</code>层次关系。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;欢迎参观博物馆&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;输入年龄:&quot;</span>)) &gt; <span class="number">15</span> : </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;年龄不符合，不可以免费参观&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;如果你有邀请码，可免费参观&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;输入邀请码:&quot;</span>)) == <span class="number">100</span> : </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;邀请码正确，可免费参观&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span> : </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;邀请码错误，掏钱买吧&quot;</span>)</span><br><span class="line"><span class="keyword">else</span> : </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;年龄符合，可以免费参观&quot;</span>)</span><br></pre></td></tr></table></figure><p>当前判断有2层，当外层if满足条件时，才会执行内层if判断；当外层if不满足，直接执行外层esle。</p><hr><h1 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h1><p>Python循环语句用于循环执行程序，即在某条件下，循环执行某段程序，以处理需要重复处理的相同任务。</p><h2 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h2><p>Python 编程中 while 语句用于循环执行程序。</p><h3 id="while循环基本形式"><a href="#while循环基本形式" class="headerlink" title="while循环基本形式"></a>while循环基本形式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> 判断条件(condition):</span><br><span class="line">    执行语句(statements)……</span><br></pre></td></tr></table></figure><p>判断条件可以是任何表达式，任何非零、或非空（null）的值均为true。<br>执行语句可以是单个语句或语句块。<br>当判断条件假 false 时，循环结束。</p><p>while循环注意点：</p><ol><li>while的条件需得到布尔类型，True表示继续循环，False表示结束循环。</li><li>需要设置循环终止的条件，如i += 1配合 i &lt; 100，就能确保100次后停止，否则将无限循环。</li><li>空格缩进和if判断一样，都需要设置。</li></ol><h3 id="循环使用-else-语句"><a href="#循环使用-else-语句" class="headerlink" title="循环使用 else 语句"></a>循环使用 else 语句</h3><p>在 python 中，while … else 在循环条件为 false 时执行 else 语句块：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">5</span>:</span><br><span class="line">    <span class="built_in">print</span>(count, <span class="string">&quot; is  less than 5&quot;</span>)</span><br><span class="line">    count = count + <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(count, <span class="string">&quot; is not less than 5&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="简单语句组"><a href="#简单语句组" class="headerlink" title="简单语句组"></a>简单语句组</h3><p>类似 if 语句的语法，如果 while 循环体中只有一条语句，可将该语句与while写在同一行中， 如下所示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flag = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> (flag): <span class="built_in">print</span>(<span class="string">&#x27;Given flag is really true!&#x27;</span>) <span class="comment"># 条件判断语句永远为 true，循环将会无限的执行下去，可使用 CTRL+C 来中断循环</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Good bye!&quot;</span></span><br></pre></td></tr></table></figure><h3 id="while循环嵌套"><a href="#while循环嵌套" class="headerlink" title="while循环嵌套"></a>while循环嵌套</h3><p>同判断语句的嵌套一样，循环语句的嵌套，要注意空格缩进，基于空格缩进来决定层次关系。<br>注意条件的控制，避免出现无限循环（除非真的需要无限循环）。<br>九九乘法表的案例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义外层循环变量，控制行</span></span><br><span class="line">i = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> i &lt; <span class="number">10</span>:</span><br><span class="line">    <span class="comment"># 定义内层循环变量，控制列</span></span><br><span class="line">    j = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> j &lt;= i:</span><br><span class="line">        <span class="comment"># print语句中，加上 end=&#x27;&#x27;即可输出不换行</span></span><br><span class="line">        <span class="comment"># 制表符\t，效果等同于在键盘上tab键，可让多行字符串进行对齐</span></span><br><span class="line">        <span class="built_in">print</span>(j, <span class="string">&#x27;*&#x27;</span>, i, <span class="string">&#x27;=&#x27;</span>, i * j, end=<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">        j += <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    i += <span class="number">1</span></span><br></pre></td></tr></table></figure><hr><h2 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h2><h3 id="for循环的基础语法"><a href="#for循环的基础语法" class="headerlink" title="for循环的基础语法"></a>for循环的基础语法</h3><p>Python中for循环可以遍历任何序列的项目，如<strong>一个列表或者一个字符串</strong>，for循环也被称之为：遍历循环。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从待处理数据集中逐个取出数据,赋值给临时变量</span></span><br><span class="line"><span class="keyword">for</span> 临时变量 <span class="keyword">in</span> 待处理数据集:</span><br><span class="line">    循环满足条件时执行的代码</span><br></pre></td></tr></table></figure><p>for循环注意点：</p><ul><li><p>同while循环不同，无法定义循环条件，只能从被处理的数据集中，依次取出内容进行处理。</p></li><li><p>要注意，循环内的语句，需要有空格缩进。</p></li></ul><h3 id="循环使用-else-语句-1"><a href="#循环使用-else-语句-1" class="headerlink" title="循环使用 else 语句"></a>循环使用 else 语句</h3><p>在 python 中，for … else 表示，for 中的语句和普通的没有区别，else 中的语句会在循环正常执行完（即 for 不是通过 break 跳出而中断的）的情况下执行。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>,<span class="number">20</span>):  <span class="comment"># 迭代 10 到 20 之间的数字</span></span><br><span class="line">   <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,num): <span class="comment"># 根据因子迭代</span></span><br><span class="line">      <span class="keyword">if</span> num%i == <span class="number">0</span>:      <span class="comment"># 确定第一个因子</span></span><br><span class="line">         j=num/i          <span class="comment"># 计算第二个因子</span></span><br><span class="line">         <span class="built_in">print</span> (<span class="string">&#x27;%d 等于 %d * %d&#x27;</span> % (num,i,j))</span><br><span class="line">         <span class="keyword">break</span>            <span class="comment"># 跳出当前循环</span></span><br><span class="line">   <span class="keyword">else</span>:                  <span class="comment"># 循环的 else 部分</span></span><br><span class="line">      <span class="built_in">print</span> (<span class="string">&#x27;%d 是一个质数&#x27;</span> % num)</span><br></pre></td></tr></table></figure><h3 id="通过序列索引迭代"><a href="#通过序列索引迭代" class="headerlink" title="通过序列索引迭代"></a>通过序列索引迭代</h3><p>另外一种执行循环的遍历方式是通过索引，如下实例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 临时变量 <span class="keyword">in</span> 待处理数据集(可迭代对象): </span><br><span class="line">    循环满足条件时执行的代码</span><br></pre></td></tr></table></figure><p>语法中的<strong>待处理数据集</strong>，严格来说称之为：<strong>可迭代类型</strong>。<br>可迭代类型是指，其内容可以一个个依次取出的一种类型，包括：字符串、列表、元组。<br>通过<code>range</code>语句，获得一个简单的数字序列（可迭代类型的一种）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取一个从0开始，到num结束的数字序列（不含num本身）</span></span><br><span class="line"><span class="comment"># 如range(5)取得的数据是：[0, 1, 2, 3, 4]</span></span><br><span class="line"><span class="built_in">range</span>(num)</span><br><span class="line"><span class="comment"># 获得一个从num1开始，到num2结束的数字序列（不含num2本身）</span></span><br><span class="line"><span class="comment"># 如range(5, 10)取得的数据是：[5, 6, 7, 8, 9]</span></span><br><span class="line"><span class="built_in">range</span>(num1,num2)</span><br><span class="line"><span class="comment"># 获得一个从num1开始，到num2结束的数字序列（不含num2本身）</span></span><br><span class="line"><span class="comment"># 数字之间的步长，以step为准（step默认为1）</span></span><br><span class="line"><span class="comment"># 如range(5, 10, 2)取得的数据是：[5, 7, 9]</span></span><br><span class="line"><span class="built_in">range</span>(num1, num2, step)</span><br><span class="line"></span><br><span class="line"><span class="comment"># for循环处理数字序列</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>): </span><br><span class="line">    <span class="built_in">print</span>(i,end=<span class="string">&#x27;&#x27;</span>)  <span class="comment"># 01234  临时变量i的类型&lt;class &#x27;int&#x27;&gt;</span></span><br></pre></td></tr></table></figure><h3 id="for循环的变量作用域"><a href="#for循环的变量作用域" class="headerlink" title="for循环的变量作用域"></a>for循环的变量作用域</h3><p>for循环的语法中，从数据集（序列）取出的数据赋值给：临时变量。<br>临时变量，在编程规范上，作用范围（作用域），只限定在for循环内部。<br>如果在for循环外部访问临时变量，实际上是可以访问到的。在编程规范上，是不允许、不建议这么做的。<br>如果实在需要在循环外访问循环内的临时变量，可以在循环外预先定义变量<code>i</code>，每一次循环的时候，都会将取出的值赋予变量<code>i</code>，代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">    i = i</span><br><span class="line"><span class="built_in">print</span>(i) <span class="comment"># 9</span></span><br></pre></td></tr></table></figure><h3 id="for循环的嵌套"><a href="#for循环的嵌套" class="headerlink" title="for循环的嵌套"></a>for循环的嵌套</h3><p>同while一样，for循环也支持嵌套使用，和while循环一样，需要注意缩进，通过缩进，确定层次关系。<br>for循环和while循环可以相互嵌套使用。<br>九九乘法表的案例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2层循环，外层控制行，内层控制列，</span></span><br><span class="line"><span class="comment"># 使用range语句来得到数字序列进行for循环</span></span><br><span class="line"><span class="comment"># 内层for循环的range最大范围，取决于当前外层循环的数字</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, i + <span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;j&#125;</span> * <span class="subst">&#123;i&#125;</span> = <span class="subst">&#123;i * j&#125;</span>\t&quot;</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>()</span><br></pre></td></tr></table></figure><hr><h2 id="while循环和for循环的对比"><a href="#while循环和for循环的对比" class="headerlink" title="while循环和for循环的对比"></a>while循环和for循环的对比</h2><ul><li>在循环控制上：<ul><li>while循环可以自定循环条件，并自行控制</li><li>for循环不可以自定循环条件，只可以一个个从容器内取出数据</li></ul></li><li>在无限循环上：<ul><li>while循环可以通过条件控制做到无限循环</li><li>for循环理论上不可以，因为被遍历的容器容量不是无限的</li></ul></li><li>在使用场景上：<ul><li>while循环适用于任何想要循环的场景</li><li>for循环适用于，遍历数据容器的场景或简单的固定次数循环场景</li></ul></li></ul><hr><h2 id="循环中断"><a href="#循环中断" class="headerlink" title="循环中断"></a>循环中断</h2><h3 id="break"><a href="#break" class="headerlink" title="break"></a>break</h3><p><code>break</code>语句用来终止循环语句，即循环条件没有<code>False</code>条件或者序列还没被完全递归完，也会停止执行循环语句。</p><p>break语句用在while和for循环中。</p><p>如果您使用嵌套循环，break语句将停止执行最深层的循环，并开始执行下一行代码。</p><h3 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h3><p><code>continue</code>语句用来告诉Python跳过当前循环的剩余语句，然后继续进行下一轮循环。</p><p><code>continue</code>语句用在while和for循环中。</p><h3 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h3><p>某公司，账户余额有1000元，给20名员工发奖金。<br>员工编号从1到20，从编号1开始，依次领取奖金，每人可领取100元。<br>领奖金时，财务判断员工的绩效分（1-10）（随机生成），如果低于5，不发奖金，换下一位。<br>如果奖金发完了，结束发奖金。<br>continue用于跳过员工，break直接结束发工资。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">money = <span class="number">1000</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">21</span>):</span><br><span class="line">    <span class="keyword">import</span> random</span><br><span class="line">    score = random.randint(<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">if</span> score &lt; <span class="number">5</span> :</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;员工<span class="subst">&#123;i&#125;</span>的绩效分是<span class="subst">&#123;score&#125;</span>，低于5，不发奖金，下一位。&quot;</span>)</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        money -= <span class="number">100</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;向员工<span class="subst">&#123;i&#125;</span>发奖金，账户剩余<span class="subst">&#123;money&#125;</span>元&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> money == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;钱发完了，下次吧&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br></pre></td></tr></table></figure><hr><h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><p>函数：是<strong>组织好的，可重复使用</strong>的，用来实现特定功能的代码段。<br>使用过的：<code>input()、print()、str()、int()</code>等都是Python的内置函数。<br>在Python中，如果将函数定义为class（类）的成员，那么函数会称之为<strong>方法</strong>。</p><p>使用函数的好处是：</p><ul><li>将功能封装在函数内，可供随时随地重复利用。</li><li>提高代码的复用性，减少重复代码，提高开发效率。</li></ul><h2 id="函数的定义和使用"><a href="#函数的定义和使用" class="headerlink" title="函数的定义和使用"></a>函数的定义和使用</h2><p>可定义一个有想要功能的函数，以下是简单的规则：</p><ul><li>函数代码块以<code>def</code>关键词开头，后接函数标识符名称和圆括号()。</li><li>任何传入参数和自变量必须放在圆括号中间。圆括号之间可以用于定义参数。</li><li>函数的第一行语句可以选择性地使用文档字符串—用于存放函数说明。</li><li>函数内容以冒号起始，并且缩进。</li><li><code>return [表达式]</code>结束函数，选择性地返回一个值给调用方。不带表达式的return相当于返回 <code>None</code>。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义一个函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">functionname</span>(<span class="params"> parameters </span>):</span><br><span class="line">    <span class="string">&quot;函数_文档字符串&quot;</span></span><br><span class="line">    function_suite</span><br><span class="line">    <span class="keyword">return</span> [expression]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用一个函数</span></span><br><span class="line">functionname(parameters)</span><br></pre></td></tr></table></figure><p>定义函数的注意事项：</p><ul><li>参数如不需要，可以省略。</li><li>返回值如不需要，可以省略。</li><li>函数必须先定义后使用。</li></ul><p>函数使用步骤：</p><ul><li>先定义函数。</li><li>后调用函数。</li><li>函数可直接使用，不需像方法一样要对象调用。</li></ul><h2 id="函数的参数"><a href="#函数的参数" class="headerlink" title="函数的参数"></a>函数的参数</h2><p>传入参数的功能是：在函数进行计算的时候，接受外部（调用时）提供的数据。</p><ul><li>函数定义中的参数，称之为形式参数。</li><li>函数调用中的参数，称之为实际参数。</li><li>函数的参数数量不限，使用逗号分隔开。</li><li>传入参数的时候，要和形式参数一一对应，逗号隔开。</li></ul><h3 id="函数参数种类"><a href="#函数参数种类" class="headerlink" title="函数参数种类"></a>函数参数种类</h3><p>使用方式上的不同, 函数有4种常见参数使用方式。</p><h4 id="位置参数"><a href="#位置参数" class="headerlink" title="位置参数"></a>位置参数</h4><p>调用函数时根据函数定义的参数位置来传递参数，传递的参数和定义的参数的顺序及个数必须一致</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">functional</span>(<span class="params">name, age</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;姓名：<span class="subst">&#123;name&#125;</span>的年龄是<span class="subst">&#123;age&#125;</span>&quot;</span>)  <span class="comment"># 姓名：张三的年龄是14</span></span><br><span class="line"></span><br><span class="line">functional(<span class="string">&quot;张三&quot;</span>, <span class="number">14</span>)</span><br></pre></td></tr></table></figure><h4 id="关键字参数"><a href="#关键字参数" class="headerlink" title="关键字参数"></a>关键字参数</h4><p>函数调用时通过“键=值”形式传递参数，可以让函数更加清晰、容易使用，同时也清除了参数的顺序需求。<br>函数调用时，如果有位置参数时，位置参数必须在关键字参数的前面，但关键字参数之间不存在先后顺序。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">functional</span>(<span class="params">name, age, gender</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;姓名：<span class="subst">&#123;name&#125;</span>的年龄是<span class="subst">&#123;age&#125;</span>，性别为<span class="subst">&#123;gender&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关键字传参</span></span><br><span class="line">functional(name=<span class="string">&quot;张三&quot;</span>, age=<span class="number">14</span>, gender=<span class="string">&quot;男&quot;</span>)</span><br><span class="line"><span class="comment"># 关键字传参，不按照固定位置传参</span></span><br><span class="line">functional( age=<span class="number">14</span>, name=<span class="string">&quot;张三&quot;</span>, gender=<span class="string">&quot;男&quot;</span>)</span><br><span class="line"><span class="comment">#关键字传参，与位置参数混用，位置参数必须在前，且匹配参数顺序</span></span><br><span class="line">functional(<span class="string">&quot;张三&quot;</span>, age=<span class="number">14</span>, gender=<span class="string">&quot;男&quot;</span>)</span><br><span class="line">functional(<span class="string">&quot;张三&quot;</span>, gender=<span class="string">&quot;男&quot;</span>, age=<span class="number">14</span>)</span><br><span class="line"><span class="comment"># functional(&quot;张三&quot;, &quot;男&quot;, age=14) # TypeError: functional() got multiple values for argument &#x27;age&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="缺省参数"><a href="#缺省参数" class="headerlink" title="缺省参数"></a>缺省参数</h4><p>缺省参数也叫默认参数，用于定义函数，为参数提供默认值。<br>当调用函数时没有传递参数，就会使用默认是用缺省参数对应的值，当调用函数时缺省参数传值，则修改默认参数值。<br>所有位置参数必须出现在默认参数前，包括函数定义和调用）.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">functional</span>(<span class="params">name, age, gender = <span class="string">&#x27;男&#x27;</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;姓名：<span class="subst">&#123;name&#125;</span>的年龄是<span class="subst">&#123;age&#125;</span>，性别为<span class="subst">&#123;gender&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">functional(<span class="string">&quot;张三&quot;</span>, <span class="number">14</span>)  <span class="comment"># 姓名：张三的年龄是14，性别为男</span></span><br><span class="line">functional(<span class="string">&quot;张三&quot;</span>, <span class="number">14</span>, <span class="string">&quot;女&quot;</span>)  <span class="comment"># 姓名：张三的年龄是14，性别为女</span></span><br></pre></td></tr></table></figure><h4 id="不定长参数"><a href="#不定长参数" class="headerlink" title="不定长参数"></a>不定长参数</h4><p>不定长参数也叫可变参数，用于不确定调用的时候会传递多少个参数（不传参也可以）的场景。</p><p>不定长参数的类型：</p><ol><li>位置传递<br>位置不定长传递以<code>*</code>号标记一个形式参数，以元组的形式接受参数，形式参数一般命名为<code>args</code>。</li><li>关键字传递<br>关键字不定长传递以<code>**</code>号标记一个形式参数，以字典的形式接受参数，形式参数一般命名为<code>kwargs</code>。</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不定长参数--位置传递</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">functional1</span>(<span class="params">*args</span>):</span><br><span class="line">    <span class="built_in">print</span>(args)</span><br><span class="line"></span><br><span class="line">functional1(<span class="string">&quot;张三&quot;</span>, <span class="number">14</span>)  <span class="comment"># (&#x27;张三&#x27;, 14)</span></span><br><span class="line">functional1(<span class="string">&quot;张三&quot;</span>, <span class="number">14</span>, <span class="string">&quot;女&quot;</span>)  <span class="comment"># (&#x27;张三&#x27;, 14, &#x27;女&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#不定长参数--关键字传递</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">functional2</span>(<span class="params">**kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(kwargs)</span><br><span class="line"></span><br><span class="line">functional2(name=<span class="string">&quot;张三&quot;</span>, age=<span class="number">14</span>, gender=<span class="string">&quot;女&quot;</span>)  <span class="comment"># &#123;&#x27;name&#x27;: &#x27;张三&#x27;, &#x27;age&#x27;: 14, &#x27;gender&#x27;: &#x27;女&#x27;&#125;</span></span><br><span class="line">functional2(age=<span class="number">14</span>, name=<span class="string">&quot;张三&quot;</span>, gender=<span class="string">&quot;男&quot;</span>)  <span class="comment"># &#123;&#x27;age&#x27;: 14, &#x27;name&#x27;: &#x27;张三&#x27;, &#x27;gender&#x27;: &#x27;男&#x27;&#125;</span></span><br></pre></td></tr></table></figure><h2 id="函数的返回值"><a href="#函数的返回值" class="headerlink" title="函数的返回值"></a>函数的返回值</h2><p>函数在执行完成后，使用关键字<code>return</code>来返回给调用者的结果。</p><p>函数体在遇到return后就结束了，所以写在return后的代码不会执行。</p><p>如果函数没有使用return语句返回数据，那么函数返回了<code>None</code>这个字面量，其类型是：<code>&lt;class &#39;NoneType&#39;&gt;</code>。</p><p>函数返回的None，就表示这个函数没有返回什么有意义的内容，也就是返回了空的意思。</p><p>None可以主动使用return返回<code>return None</code>，效果等同于不写return语句。</p><p>None作为一个特殊的字面量，用于表示：空、无意义，其有非常多的应用场景。</p><ul><li>用在函数无返回值上</li><li>用在if判断上<ul><li>在if判断中，<code>None</code>等同于<code>False</code></li><li>一般用于在函数中主动返回None，配合if判断做相关处理</li></ul></li><li>用于声明无内容的变量上<ul><li>定义变量，但暂时不需要变量有具体值，可以用None来代替</li></ul></li></ul><h2 id="函数多个返回值"><a href="#函数多个返回值" class="headerlink" title="函数多个返回值"></a>函数多个返回值</h2><p>如果一个函数要有多个返回值，按照返回值的顺序，写对应顺序的多个变量接收即可。<br>变量之间用逗号隔开。<br>支持不同类型的数据return。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义一个多返回值的函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">functionname</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"><span class="comment">#调用函数</span></span><br><span class="line">x ,y = functionname()</span><br><span class="line"><span class="built_in">print</span>(x)  <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">print</span>(y)  <span class="comment"># 2</span></span><br></pre></td></tr></table></figure><h2 id="函数说明文档"><a href="#函数说明文档" class="headerlink" title="函数说明文档"></a>函数说明文档</h2><p>可以给函数添加说明文档，辅助理解函数的作用。<br>通过<strong>多行注释</strong>的形式，对函数进行说明解释，内容应写在函数体之前。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义一个函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">functionname</span>(<span class="params">x , y</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    函数说明介绍</span></span><br><span class="line"><span class="string">    :param x 用于解释参数x</span></span><br><span class="line"><span class="string">    :param y 用于解释参数y</span></span><br><span class="line"><span class="string">    :return 用于解释返回值</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    函数体</span><br><span class="line">    <span class="keyword">return</span> 返回值</span><br></pre></td></tr></table></figure><h2 id="函数的嵌套调用"><a href="#函数的嵌套调用" class="headerlink" title="函数的嵌套调用"></a>函数的嵌套调用</h2><p>所谓函数嵌套调用指在一个函数中，调用另外一个函数。<br>函数嵌套调用执行流程是：函数A中执行到调用函数B的语句，会将函数B全部执行完成后，继续执行函数A的剩余内容。</p><h2 id="变量的作用域"><a href="#变量的作用域" class="headerlink" title="变量的作用域"></a>变量的作用域</h2><p>变量作用域指的是变量的作用范围（变量在哪里可用，在哪里不可用）。<br>主要分为两类：局部变量和全局变量。</p><h3 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h3><p>局部变量是定义在函数体内部的变量，即只在函数体内部生效。<br>局部变量的作用：在函数体内部，临时保存数据，即当函数调用完成后则销毁局部变量。<br>变量total是定义在<code>a</code>函数内部的变量，在函数外部访问则立即报错。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">a</span>(<span class="params">arg1 ,arg2</span>):</span><br><span class="line">    total = arg1 + arg2 <span class="comment"># total在这里是局部变量.</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;函数内是局部变量 : &quot;</span>, total) <span class="comment"># 函数内是局部变量 :  5</span></span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line">a(<span class="number">1</span>,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(total) <span class="comment"># NameError: name &#x27;total&#x27; is not defined</span></span><br></pre></td></tr></table></figure><h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><p>全局变量指的是在函数体内、外都能生效的变量。<br>变量total是定义在<code>a</code>函数外的变量，可以在整个程序范围内访问。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义一个全局变量</span></span><br><span class="line">total = <span class="number">0</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">a</span>(<span class="params">arg1 ,arg2</span>):</span><br><span class="line">    total = arg1 + arg2 <span class="comment"># total在这里是局部变量.</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;函数内是局部变量 : &quot;</span>, total) <span class="comment"># 函数内是局部变量 :  5</span></span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line">a(<span class="number">1</span>,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(total) <span class="comment"># 0</span></span><br></pre></td></tr></table></figure><h3 id="global关键字"><a href="#global关键字" class="headerlink" title="global关键字"></a>global关键字</h3><p>使用<code>global关键字</code>可以在函数内部声明变量为全局变量。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">total = <span class="number">0</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">a</span>(<span class="params">arg1 ,arg2</span>):</span><br><span class="line">    <span class="keyword">global</span> total <span class="comment"># 声明变量为全局变量</span></span><br><span class="line">    total = arg1 + arg2 </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;函数内是局部变量 : &quot;</span>, total) <span class="comment"># 函数内是局部变量 :  5</span></span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line">a(<span class="number">1</span>,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(total) <span class="comment"># 5</span></span><br></pre></td></tr></table></figure><h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><h3 id="函数作为参数传递"><a href="#函数作为参数传递" class="headerlink" title="函数作为参数传递"></a>函数作为参数传递</h3><p>函数本身是可以作为参数，传入另一个函数中进行使用的。将函数传入的作用在于传入计算逻辑，而非传入数据。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">functional1</span>(<span class="params">comp</span>):</span><br><span class="line">    comp1 = comp(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(comp1)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">comp</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"></span><br><span class="line">functional1(comp)  <span class="comment"># 3</span></span><br></pre></td></tr></table></figure><h3 id="lambda匿名函数"><a href="#lambda匿名函数" class="headerlink" title="lambda匿名函数"></a>lambda匿名函数</h3><p>匿名函数使用<code>lambda</code>关键字进行定义。<br>匿名函数用于临时构建一个函数，只用一次的场景。<br>匿名函数的定义中，函数体只能写一行代码，如果函数体要写多行代码，不可用<code>lambda</code>匿名函数，应使用<code>def</code>定义带名函数。</p><p>定义语法：<code>lambda 传入参数 :函数体（一行代码）</code></p><ul><li><code>lambda</code>是关键字，表示定义匿名函数</li><li>传入参数表示匿名函数的形式参数，如<code>x, y</code>表示接收2个形式参数</li><li>函数体，就是函数的执行逻辑，要注意：只能写一行，无法写多行代码</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">functional1</span>(<span class="params">comp</span>):</span><br><span class="line">    comp1 = comp(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(comp1)</span><br><span class="line"><span class="comment"># 通过lambda关键字，传入一个一次性使用的lambda匿名函数</span></span><br><span class="line">functional1(<span class="keyword">lambda</span> x , y :x + y)  <span class="comment"># 3</span></span><br></pre></td></tr></table></figure><hr><h1 id="数据容器"><a href="#数据容器" class="headerlink" title="数据容器"></a>数据容器</h1><p>Python中的数据容器指的是，一种可以容纳多份数据的数据类型，容纳的每一份数据称之为一个元素。每一个元素，可以是任意类型的数据，如字符串、数字、布尔等。</p><p>数据容器根据特点的不同，如：<strong>是否支持重复元素、是否可以修改、是否有序</strong>等，分为5类，分别是：<strong>列表（list）、元组（tuple）、字符串（str）、集合（set）、字典（dict）</strong>。</p><h2 id="数据容器：list-列表"><a href="#数据容器：list-列表" class="headerlink" title="数据容器：list(列表)"></a>数据容器：list(列表)</h2><h3 id="列表的定义"><a href="#列表的定义" class="headerlink" title="列表的定义"></a>列表的定义</h3><p>列表是最常用的Python数据类型，列表内的每一个数据，称之为元素，以<code>[]</code>作为标识，列表内每一个元素之间用<code>,</code>逗号隔开。</p><p>创建一个列表，只要把逗号分隔的不同的数据项使用方括号括起来即可。如下所示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字面量</span></span><br><span class="line">[元素<span class="number">1</span>, <span class="string">&#x27;元素2&#x27;</span>, 元素<span class="number">3</span>]</span><br><span class="line"><span class="comment"># 定义变量</span></span><br><span class="line">变量名<span class="number">1</span> = [<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment"># 定义空列表</span></span><br><span class="line">变量名<span class="number">2</span> = []</span><br><span class="line">变量名<span class="number">3</span> = <span class="built_in">list</span>()</span><br><span class="line"><span class="comment"># 嵌套列表</span></span><br><span class="line">变量名<span class="number">4</span> = [[<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>],[<span class="literal">True</span>, <span class="number">2</span>]]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>) <span class="comment"># [&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3]</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">2</span>) <span class="comment"># []</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(变量名<span class="number">3</span>))  <span class="comment"># &lt;class &#x27;list&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">4</span>)  <span class="comment"># [[&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3], [True, 2]]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(变量名<span class="number">4</span>))  <span class="comment"># &lt;class &#x27;list&#x27;&gt;</span></span><br></pre></td></tr></table></figure><p>列表的特点：</p><ul><li>列表可以一次存储多个数据（<strong>2<sup>63</sup> - 1</strong>）</li><li>可以容纳不同类型的元素，支持嵌套。</li><li>数据是有序存储的（有下标序号）</li><li>允许重复数据存在</li><li>可以修改（增加或删除元素等）</li></ul><h3 id="列表的下标"><a href="#列表的下标" class="headerlink" title="列表的下标"></a>列表的下标</h3><p>可使用<code>列表名[下标索引]</code>从列表中取出特定位置的数据，列表中的每一个元素，都有其位置下标索引，同样你可使用方括号的形式截取字符。</p><ul><li>从前向后的方向，编号从0开始递增（0、1、2、3……）</li><li>从后向前的方向，编号从-1开始递减（-1、-2、-3……）</li><li>如果列表是嵌套的列表，同样支持下标索引</li><li>要注意下标索引的取值范围，超出范围无法取出元素，并且会报错<code>IndexError</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = [<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">变量名<span class="number">4</span> = [[<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>],[<span class="literal">True</span>, <span class="number">2</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取正向索引号1的元素</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>[<span class="number">1</span>]) <span class="comment"># 元素2</span></span><br><span class="line"><span class="comment"># 获取反向索引号-1的元素</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>[-<span class="number">1</span>]) <span class="comment"># 4</span></span><br><span class="line"><span class="comment">#截取元素，从1索引开始，截取到3索引，不包含3索引</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;变量名1[1:3]:&quot;</span>, 变量名<span class="number">1</span>[<span class="number">1</span>:<span class="number">3</span>]) <span class="comment"># 变量名1[1:3]: [&#x27;元素2&#x27;, 3]</span></span><br><span class="line"><span class="comment"># 获取内层第一个列表</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">4</span>[<span class="number">0</span>])  <span class="comment"># [&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3]</span></span><br><span class="line"><span class="comment"># 获取内层第一个列表的第一个元素</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">4</span>[<span class="number">0</span>][<span class="number">0</span>]) <span class="comment"># 元素1</span></span><br><span class="line"><span class="comment"># 获取内层第一个列表的第一个元素的类型</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(变量名<span class="number">4</span>[<span class="number">0</span>][<span class="number">0</span>]))  <span class="comment"># &lt;class &#x27;str&#x27;&gt;</span></span><br></pre></td></tr></table></figure><h3 id="列表的常用操作"><a href="#列表的常用操作" class="headerlink" title="列表的常用操作"></a>列表的常用操作</h3><h4 id="列表的查询功能（方法）"><a href="#列表的查询功能（方法）" class="headerlink" title="列表的查询功能（方法）"></a>列表的查询功能（方法）</h4><p>查找指定元素在列表中的下标，如果找不到，报错<code>ValueError</code>。<br>语法：<code>列表名.index(元素)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = [<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">变量名<span class="number">4</span> = [[<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>],[<span class="literal">True</span>, <span class="number">2</span>]]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1.</span>index(<span class="number">3</span>)) <span class="comment"># 2</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">4</span>[<span class="number">0</span>].index(<span class="string">&quot;元素1&quot;</span>)) <span class="comment"># 0</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">4.</span>index(<span class="string">&quot;元素1&quot;</span>)) <span class="comment"># ValueError: &#x27;元素1&#x27; is not in list</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">4.</span>index(<span class="string">&quot;3&quot;</span>)) <span class="comment"># ValueError: &#x27;3&#x27; is not in list</span></span><br></pre></td></tr></table></figure><h4 id="列表的修改功能"><a href="#列表的修改功能" class="headerlink" title="列表的修改功能"></a>列表的修改功能</h4><p>修改特定位置（索引）的元素值：<br>语法：<code>列表名[下标] = 值</code><br>可以使用如上语法，直接对指定下标（正向、反向下标均可）的值进行重新赋值（修改）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = [<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">变量名<span class="number">4</span> = [[<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>],[<span class="literal">True</span>, <span class="number">2</span>]]</span><br><span class="line"></span><br><span class="line">变量名<span class="number">1</span>[<span class="number">1</span>] = <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>) <span class="comment"># [&#x27;元素1&#x27;, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line">变量名<span class="number">4</span>[<span class="number">0</span>][-<span class="number">1</span>] = <span class="string">&#x27;字符3&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">4</span>[<span class="number">0</span>]) <span class="comment"># [&#x27;元素1&#x27;, &#x27;元素2&#x27;, &#x27;字符3&#x27;]</span></span><br></pre></td></tr></table></figure><h4 id="列表的插入功能（方法）"><a href="#列表的插入功能（方法）" class="headerlink" title="列表的插入功能（方法）"></a>列表的插入功能（方法）</h4><p>在指定的下标位置，插入指定的元素<br>语法：<code>列表名.insert(下标, 元素)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = [<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">变量名<span class="number">2</span> = [<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">变量名<span class="number">1.</span>insert(<span class="number">1</span>,<span class="string">&quot;新增元素&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>) <span class="comment"># [&#x27;元素1&#x27;, &#x27;新增元素&#x27;, &#x27;元素2&#x27;, 3, 4]</span></span><br><span class="line">变量名<span class="number">2.</span>insert(<span class="number">1</span>,[<span class="string">&quot;新增元素&quot;</span>,<span class="number">3</span>,<span class="number">5</span>])</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">2</span>) <span class="comment"># [&#x27;元素1&#x27;, [&#x27;新增元素&#x27;, 3, 5], &#x27;元素2&#x27;, 3, 4]</span></span><br></pre></td></tr></table></figure><h4 id="列表的追加功能（方法）"><a href="#列表的追加功能（方法）" class="headerlink" title="列表的追加功能（方法）"></a>列表的追加功能（方法）</h4><p>将指定元素，追加到列表的尾部<br>语法：<code>列表名.append(元素)</code></p><p>将其它数据容器的内容取出，依次追加到列表尾部<br>语法：<code>列表名.extend(其它数据容器)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = [<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">变量名<span class="number">2</span> = [<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">变量名<span class="number">1.</span>append(<span class="string">&quot;新增元素&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>) <span class="comment"># [&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3, 4, &#x27;新增元素&#x27;]</span></span><br><span class="line">变量名<span class="number">2.</span>append([<span class="string">&quot;新增元素&quot;</span>,<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">2</span>) <span class="comment"># [&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3, 4, [&#x27;新增元素&#x27;, 1, 2]]</span></span><br><span class="line"></span><br><span class="line">变量名<span class="number">1.</span>extend(变量名<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>) <span class="comment"># [&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3, 4, &#x27;新增元素&#x27;, &#x27;元素1&#x27;, &#x27;元素2&#x27;, 3, 4, [&#x27;新增元素&#x27;, 1, 2]]</span></span><br></pre></td></tr></table></figure><h4 id="列表的删除功能（方法）"><a href="#列表的删除功能（方法）" class="headerlink" title="列表的删除功能（方法）"></a>列表的删除功能（方法）</h4><p>删除指定的下标位置的元素<br>语法1： <code>del 列表名[下标]</code><br>语法2：<code>列表名.pop(下标)</code></p><p>删除某元素在列表中的第一个匹配项<br>语法：<code>列表名.remove(元素)</code></p><p>清空列表内容<br>语法：<code>列表名.clear()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = [<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]]</span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> 变量名<span class="number">1</span>[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># [&#x27;元素2&#x27;, 3, 4, 5, [1, 3, 5]]</span></span><br><span class="line">变量名<span class="number">1.</span>pop(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># [3, 4, 5, [1, 3, 5]]</span></span><br><span class="line">变量名<span class="number">1.</span>remove(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># [3, 4, [1, 3, 5]]</span></span><br><span class="line">变量名<span class="number">1.</span>clear()</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># []</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="列表的统计功能（方法）"><a href="#列表的统计功能（方法）" class="headerlink" title="列表的统计功能（方法）"></a>列表的统计功能（方法）</h4><p>统计某元素在列表内的数量<br>语法：<code>列表名.count(元素)</code></p><p>统计列表内，有多少元素<br>语法：<code>len(列表名)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = [<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">变量名<span class="number">2</span> = [<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="comment"># 变量名1.append(变量名2) # [&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3, 4, [&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3, 4]]</span></span><br><span class="line">变量名<span class="number">1.</span>extend(变量名<span class="number">2</span>) <span class="comment"># [&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3, 4, &#x27;元素1&#x27;, &#x27;元素2&#x27;, 3, 4]</span></span><br><span class="line">变量名<span class="number">3</span> = [<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>,[<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>) <span class="comment"># [&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3, 4, &#x27;元素1&#x27;, &#x27;元素2&#x27;, 3, 4]</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">3</span>) <span class="comment"># [&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3, 4, [&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3, 4]]</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1.</span>count(<span class="number">3</span>))  <span class="comment"># 2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(变量名<span class="number">1</span>))  <span class="comment"># 8</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">3.</span>count(<span class="number">3</span>))  <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(变量名<span class="number">3</span>))  <span class="comment"># 5</span></span><br></pre></td></tr></table></figure><h3 id="列表的遍历"><a href="#列表的遍历" class="headerlink" title="列表的遍历"></a>列表的遍历</h3><p>将容器内的元素依次取出，并处理，称之为遍历操作。<br>可以使用while或for循环遍历列表的元素。</p><h4 id="while循环，遍历列表元素"><a href="#while循环，遍历列表元素" class="headerlink" title="while循环，遍历列表元素"></a>while循环，遍历列表元素</h4><p>使用while循环，通过<code>列表名[下标]</code>的方式取出列表的元素。</p><ul><li>定义一个变量表示下标，从0开始</li><li>循环条件为<code>下标值 &lt; 列表的元素数量</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">index = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> index &lt; <span class="built_in">len</span>(<span class="built_in">list</span>):</span><br><span class="line">    元素 = <span class="built_in">list</span>[index]</span><br><span class="line">    <span class="built_in">print</span>(元素)</span><br><span class="line">    index += <span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="for循环，遍历列表元素"><a href="#for循环，遍历列表元素" class="headerlink" title="for循环，遍历列表元素"></a>for循环，遍历列表元素</h4><p>对比while，for循环更加适合对列表等数据容器进行遍历。</p><ul><li>从容器内，依次取出元素并赋值到临时变量上。</li><li>在每一次的循环中，可对临时变量（元素）进行处理。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">list</span>:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><hr><h2 id="数据容器：tuple-元组"><a href="#数据容器：tuple-元组" class="headerlink" title="数据容器：tuple(元组)"></a>数据容器：tuple(元组)</h2><h3 id="元组的定义"><a href="#元组的定义" class="headerlink" title="元组的定义"></a>元组的定义</h3><p>定义元组使用小括号，且使用逗号隔开各个数据，数据可以是不同的数据类型。<br>元组也支持嵌套。<br>元组只有一个数据，这个数据后面要添加逗号，否则不是元组类型。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字面量</span></span><br><span class="line">(元素<span class="number">1</span>, <span class="string">&#x27;元素2&#x27;</span>, 元素<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 定义变量</span></span><br><span class="line">变量名<span class="number">1</span> = (<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># 定义空元组</span></span><br><span class="line">变量名<span class="number">2</span> = ()</span><br><span class="line">变量名<span class="number">3</span> = <span class="built_in">tuple</span>()</span><br><span class="line"><span class="comment"># 嵌套元组</span></span><br><span class="line">变量名<span class="number">4</span> = ((<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>),(<span class="literal">True</span>, <span class="number">2</span>))</span><br><span class="line">变量名<span class="number">5</span> = (<span class="string">&#x27;元素1&#x27;</span>)</span><br><span class="line">变量名<span class="number">6</span> = (<span class="string">&#x27;元素1&#x27;</span>,)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>) <span class="comment"># (&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3)</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">2</span>) <span class="comment"># ()</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(变量名<span class="number">3</span>))  <span class="comment"># &lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">4</span>)  <span class="comment"># ((&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3), (True, 2))</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">4</span>[<span class="number">0</span>][<span class="number">0</span>]) <span class="comment"># 元素1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(变量名<span class="number">4</span>))  <span class="comment"># &lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(变量名<span class="number">5</span>))  <span class="comment"># &lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(变量名<span class="number">6</span>))  <span class="comment"># &lt;class &#x27;tuple&#x27;&gt;</span></span><br></pre></td></tr></table></figure><p>元组的特点：</p><ul><li>可以容纳多个数据</li><li>可以容纳不同类型的数据</li><li>数据是有序存储的（下标索引）</li><li>允许重复数据存在</li><li>不可以修改（增加或删除元素等）</li><li>支持for循环</li></ul><h3 id="元组的下标"><a href="#元组的下标" class="headerlink" title="元组的下标"></a>元组的下标</h3><p>可使用<code>元组名[下标索引]</code>从元组中取出特定位置的数据，元组中的每一个元素，都有其位置下标索引，同样你可使用方括号的形式截取字符。</p><ul><li>从前向后的方向，编号从0开始递增（0、1、2、3……）</li><li>从后向前的方向，编号从-1开始递减（-1、-2、-3……）</li><li>如果元组是嵌套的元组，同样支持下标索引</li><li>要注意下标索引的取值范围，超出范围无法取出元素，并且会报错<code>IndexError</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = (<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">变量名<span class="number">4</span> = [[<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>],[<span class="literal">True</span>, <span class="number">2</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取正向索引号1的元素</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>[<span class="number">1</span>]) <span class="comment"># 元素2</span></span><br><span class="line"><span class="comment"># 获取反向索引号-1的元素</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>[-<span class="number">1</span>]) <span class="comment"># 4</span></span><br></pre></td></tr></table></figure><h3 id="元组的相关操作"><a href="#元组的相关操作" class="headerlink" title="元组的相关操作"></a>元组的相关操作</h3><p>元组由于不可修改的特性，所以其操作方法非常少。</p><h4 id="元组的查询功能（方法）"><a href="#元组的查询功能（方法）" class="headerlink" title="元组的查询功能（方法）"></a>元组的查询功能（方法）</h4><p>查找指定元素在元组中的下标，如果找不到，报错<code>ValueError</code>。<br>语法：<code>列表名.index(元素)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = (<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">变量名<span class="number">4</span> = ((<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>),(<span class="literal">True</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1.</span>index(<span class="number">3</span>)) <span class="comment"># 2</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">4</span>[<span class="number">0</span>].index(<span class="string">&quot;元素1&quot;</span>)) <span class="comment"># 0</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">4.</span>index(<span class="string">&quot;元素1&quot;</span>)) <span class="comment"># ValueError: tuple.index(x): x not in tuple</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">4.</span>index(<span class="string">&quot;3&quot;</span>)) <span class="comment"># ValueError: tuple.index(x): x not in tuple</span></span><br></pre></td></tr></table></figure><h4 id="元组的统计功能（方法）"><a href="#元组的统计功能（方法）" class="headerlink" title="元组的统计功能（方法）"></a>元组的统计功能（方法）</h4><p>统计某元素在元组内的数量<br>语法：<code>元组名.count(元素)</code></p><p>统计元组内，有多少元素<br>语法：<code>len(元组名)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = (<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>, (<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line">变量名<span class="number">2</span> = (<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1.</span>count(<span class="number">3</span>))  <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(变量名<span class="number">1</span>))  <span class="comment"># 5</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">2.</span>count(<span class="number">3</span>))  <span class="comment"># 2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(变量名<span class="number">2</span>))  <span class="comment"># 8</span></span><br></pre></td></tr></table></figure><h4 id="元组的修改操作"><a href="#元组的修改操作" class="headerlink" title="元组的修改操作"></a>元组的修改操作</h4><ul><li>不可以修改元组的内容，否则会直接报错`TypeError</li><li>可以修改元组内的list的内容（修改元素、增加、删除、反转等），但不可以替换list为其它list或其它类型</li></ul><h3 id="元组的遍历"><a href="#元组的遍历" class="headerlink" title="元组的遍历"></a>元组的遍历</h3><p>可以使用while或for循环遍历元组的元素。</p><h4 id="while循环，遍历元组元素"><a href="#while循环，遍历元组元素" class="headerlink" title="while循环，遍历元组元素"></a>while循环，遍历元组元素</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tup = (<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">index = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> index &lt; <span class="built_in">len</span>(tup):</span><br><span class="line">    元素 = tup[index]</span><br><span class="line">    <span class="built_in">print</span>(元素)</span><br><span class="line">    index += <span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="for循环，遍历元组元素"><a href="#for循环，遍历元组元素" class="headerlink" title="for循环，遍历元组元素"></a>for循环，遍历元组元素</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tup = (<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> tup:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><hr><h2 id="数据容器：str-字符串"><a href="#数据容器：str-字符串" class="headerlink" title="数据容器：str(字符串)"></a>数据容器：str(字符串)</h2><p>字符串是字符的容器，一个字符串可以存放任意数量的字符。</p><p>作为数据容器，字符串有如下特点：</p><ul><li>只可以存储字符串</li><li>长度任意（取决于内存大小）</li><li>支持下标索引</li><li>允许重复字符串存在</li><li>不可以修改（增加或删除元素等）</li><li>支持for循环</li></ul><h3 id="字符串的下标"><a href="#字符串的下标" class="headerlink" title="字符串的下标"></a>字符串的下标</h3><p>和其它容器一样，字符串也可以通过下标进行访问。</p><ul><li>从前向后，下标从0开始</li><li>从后向前，下标从-1开始</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&#x27;hello,world&#x27;</span></span><br><span class="line"><span class="comment"># str1[1] =1 # TypeError: &#x27;str&#x27; object does not support item assignment</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(str1[<span class="number">1</span>])  <span class="comment"># e</span></span><br><span class="line"><span class="built_in">print</span>(str1[-<span class="number">1</span>])  <span class="comment"># d</span></span><br></pre></td></tr></table></figure><h3 id="字符串的常用操作"><a href="#字符串的常用操作" class="headerlink" title="字符串的常用操作"></a>字符串的常用操作</h3><h4 id="字符串的查询功能（方法）"><a href="#字符串的查询功能（方法）" class="headerlink" title="字符串的查询功能（方法）"></a>字符串的查询功能（方法）</h4><p>查找指定元素在列表中的下标，如果找不到，报错<code>ValueError</code>。<br>语法：<code>字符串.index(元素)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&#x27;111&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(str1.index(<span class="string">&quot;1&quot;</span>)) <span class="comment"># 0</span></span><br><span class="line"><span class="built_in">print</span>(str1.index(<span class="string">&quot;2&quot;</span>)) <span class="comment"># ValueError: substring not found</span></span><br></pre></td></tr></table></figure><h4 id="字符串的比较功能"><a href="#字符串的比较功能" class="headerlink" title="字符串的比较功能"></a>字符串的比较功能</h4><ul><li>从头到尾，一位位进行比较，其中一位大，后面就无需比较。</li><li>单个字符之间通过ASCII码表，确定字符对应的码值数字来确定大小。</li></ul><h4 id="字符串的替换功能（方法）"><a href="#字符串的替换功能（方法）" class="headerlink" title="字符串的替换功能（方法）"></a>字符串的替换功能（方法）</h4><p>将字符串内的全部：<code>字符串1</code>替换为<code>字符串2</code>，不是修改字符串本身，而是得到了一个新字符串。<br>语法：<code>字符串.replace(字符串1，字符串2）</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&#x27;hello,world&#x27;</span></span><br><span class="line">str2 = str1.replace(<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(str1) <span class="comment"># hello,world</span></span><br><span class="line"><span class="built_in">print</span>(str2) <span class="comment"># hewwo,worwd</span></span><br></pre></td></tr></table></figure><h4 id="字符串的分割功能（方法）"><a href="#字符串的分割功能（方法）" class="headerlink" title="字符串的分割功能（方法）"></a>字符串的分割功能（方法）</h4><p>按照指定的分隔符字符串，将字符串划分为多个字符串，并存入列表对象中，字符串本身不变，而是得到了一个列表对象。<br>语法：<code>字符串.split(分隔符字符串）</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&#x27;hello,world&#x27;</span></span><br><span class="line"><span class="built_in">list</span> = str1.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(str1)  <span class="comment"># hello,world</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)  <span class="comment"># [&#x27;hello&#x27;, &#x27;world&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="built_in">list</span>))  <span class="comment"># &lt;class &#x27;list&#x27;&gt;</span></span><br></pre></td></tr></table></figure><h4 id="字符串的规整功能（方法）"><a href="#字符串的规整功能（方法）" class="headerlink" title="字符串的规整功能（方法）"></a>字符串的规整功能（方法）</h4><p>去前后空格。<br>语法：<code>字符串.strip()</code></p><p>去除前后指定字符串，若传入的是<code>&#39;12&#39;</code> ，其实就是：<code>&#39;1&#39;</code>和<code>&#39;2&#39;</code>都会移除，是按照单个字符处理。<br>语法：<code>字符串.strip(字符串)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&#x27;    hello,world     &#x27;</span></span><br><span class="line">str2 = <span class="string">&#x27;-!hello,world--&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(str1.strip())  <span class="comment"># hello,world</span></span><br><span class="line"><span class="built_in">print</span>(str2.strip(<span class="string">&quot;-!&quot;</span>))  <span class="comment"># hello,world</span></span><br></pre></td></tr></table></figure><h4 id="字符串的统计功能（方法）"><a href="#字符串的统计功能（方法）" class="headerlink" title="字符串的统计功能（方法）"></a>字符串的统计功能（方法）</h4><p>统计字符串中某字符串的出现次数<br>语法：<code>字符串.count(字符串)</code></p><p>统计字符串的长度<br>语法：<code>len(字符串)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&#x27;    hello,world     &#x27;</span> <span class="comment"># 左边四个空格，右边五个空格</span></span><br><span class="line">str2 = <span class="string">&#x27;123 !@# qwe QWE 中文&#x27;</span> <span class="comment"># 数字、字母、符号、空格、中文均算作1个字符</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(str1.count(<span class="string">&#x27; &#x27;</span>))  <span class="comment"># 9</span></span><br><span class="line"><span class="built_in">print</span>(str1.count(<span class="string">&#x27;  &#x27;</span>))  <span class="comment"># 4</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(str2))  <span class="comment"># 18</span></span><br></pre></td></tr></table></figure><h3 id="字符串的遍历"><a href="#字符串的遍历" class="headerlink" title="字符串的遍历"></a>字符串的遍历</h3><p>可以使用while或for循环遍历字符串的元素。</p><h4 id="while循环，遍历字符串"><a href="#while循环，遍历字符串" class="headerlink" title="while循环，遍历字符串"></a>while循环，遍历字符串</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&#x27;hello,world&#x27;</span></span><br><span class="line">index = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> index &lt; <span class="built_in">len</span>(str1):</span><br><span class="line">    元素 = str1[index]</span><br><span class="line">    <span class="built_in">print</span>(元素)</span><br><span class="line">    index += <span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="for循环，遍历字符串"><a href="#for循环，遍历字符串" class="headerlink" title="for循环，遍历字符串"></a>for循环，遍历字符串</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&#x27;hello,world&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> str1:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><hr><h2 id="数据容器（序列）的切片"><a href="#数据容器（序列）的切片" class="headerlink" title="数据容器（序列）的切片"></a>数据容器（序列）的切片</h2><h3 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h3><p>序列是指：内容连续、有序，可使用下标索引的一类数据容器。<br>列表、元组、字符串，均可以可以视为序列。</p><h3 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h3><p>切片：从一个序列中，取出一个子序列。<br>序列支持切片，即：列表、元组、字符串，均支持进行切片操作。<br>语法：<code>序列[起始下标:结束下标:步长]</code><br>表示在序列中，从指定位置开始，依次取出元素，到指定位置结束，此操作<strong>不会影响序列本身，而是会得到一个新序列</strong>。</p><ul><li>起始下标表示从何处开始，可以留空，留空视作从头开始。</li><li>结束下标（不含）表示何处结束，可以留空，留空视作截取到结尾。</li><li>步长表示，依次取元素的间隔。<ul><li>步长1表示，一个个取元素。</li><li>步长2表示，每次跳过1个元素取。</li><li>步长N表示，每次跳过N-1个元素取。</li><li>步长为负数表示，反向取（注意，起始下标和结束下标也要反向标记）</li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">new_list1 = my_list[<span class="number">1</span>:<span class="number">4</span>]  <span class="comment"># 下标1开始，下标4（不含）结束，步长1</span></span><br><span class="line"><span class="built_in">print</span>(new_list1)  <span class="comment"># [2, 3, 4]</span></span><br><span class="line">new_list2 = my_list[:-<span class="number">2</span>]  <span class="comment"># 下标0开始，下标倒数第二个（不含）结束，步长1</span></span><br><span class="line"><span class="built_in">print</span>(new_list2)  <span class="comment"># [1, 2, 3]</span></span><br><span class="line">my_tuple = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">new_tuple = my_tuple[:]  <span class="comment"># 从头开始，到最后结束，步长1</span></span><br><span class="line"><span class="built_in">print</span>(new_tuple)  <span class="comment"># (1, 2, 3, 4, 5)</span></span><br><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">new_list = my_list[::<span class="number">2</span>]  <span class="comment"># 从头开始，到最后结束，步长2</span></span><br><span class="line"><span class="built_in">print</span>(new_list)  <span class="comment"># [1, 3, 5]</span></span><br><span class="line">my_str = <span class="string">&quot;12345&quot;</span></span><br><span class="line">new_str = my_str[:<span class="number">4</span>:<span class="number">2</span>]  <span class="comment"># 从头开始，到下标4（不含）结束，步长2</span></span><br><span class="line"><span class="built_in">print</span>(new_str)  <span class="comment"># 13</span></span><br><span class="line"></span><br><span class="line">my_str = <span class="string">&quot;12345&quot;</span></span><br><span class="line">new_str = my_str[::-<span class="number">1</span>]  <span class="comment"># 从头（最后）开始，到尾结束，步长-1（倒序）</span></span><br><span class="line"><span class="built_in">print</span>(new_str)  <span class="comment"># 54321</span></span><br><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">new_list = my_list[<span class="number">3</span>:<span class="number">1</span>:-<span class="number">1</span>]  <span class="comment"># 从下标3开始，到下标1（不含）结束，步长-1（倒序）</span></span><br><span class="line"><span class="built_in">print</span>(new_list)  <span class="comment"># [4, 3]</span></span><br><span class="line">my_tuple = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">new_tuple = my_tuple[:<span class="number">1</span>:-<span class="number">2</span>]  <span class="comment"># 从头（最后）开始，到下标1(不含)结束，步长-2（倒序）</span></span><br><span class="line"><span class="built_in">print</span>(new_tuple)  <span class="comment"># (5, 3)</span></span><br></pre></td></tr></table></figure><h2 id="数据容器：set-集合"><a href="#数据容器：set-集合" class="headerlink" title="数据容器：set(集合)"></a>数据容器：set(集合)</h2><h3 id="集合的定义"><a href="#集合的定义" class="headerlink" title="集合的定义"></a>集合的定义</h3><p>定义集合使用大括号，且使用逗号隔开各个数据，数据可以是不同的数据类型。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字面量</span></span><br><span class="line">&#123;元素<span class="number">1</span>, <span class="string">&#x27;元素2&#x27;</span>, 元素<span class="number">3</span>&#125;</span><br><span class="line"><span class="comment"># 定义变量</span></span><br><span class="line">变量名<span class="number">1</span> = &#123;<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="comment"># 定义空集合</span></span><br><span class="line">变量名<span class="number">2</span> =  <span class="built_in">set</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>) <span class="comment"># &#123;3, &#x27;元素1&#x27;, &#x27;元素2&#x27;&#125;</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">2</span>) <span class="comment"># set()</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(变量名<span class="number">2</span>))  <span class="comment"># &lt;class &#x27;set&#x27;&gt;</span></span><br></pre></td></tr></table></figure><p>集合的特点：</p><ul><li>可以容纳多个数据</li><li>可以容纳不同类型的数据</li><li>数据是无序存储的（不支持下标索引）</li><li>不允许重复数据存在</li><li>可以修改（增加或删除元素等）</li><li>支持for循环</li></ul><h3 id="集合的常用操作"><a href="#集合的常用操作" class="headerlink" title="集合的常用操作"></a>集合的常用操作</h3><h4 id="集合的插入功能（方法）"><a href="#集合的插入功能（方法）" class="headerlink" title="集合的插入功能（方法）"></a>集合的插入功能（方法）</h4><p>将指定元素，添加到集合内<br>语法：<code>集合.add(元素)</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = &#123;<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line">变量名<span class="number">1.</span>add(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># &#123;&#x27;元素2&#x27;, 1, 3, &#x27;元素1&#x27;&#125;</span></span><br></pre></td></tr></table></figure><h4 id="集合的修改功能（方法）"><a href="#集合的修改功能（方法）" class="headerlink" title="集合的修改功能（方法）"></a>集合的修改功能（方法）</h4><p>取出集合1和集合2的差集（集合1有而集合2没有的），将得到一个新集合，集合1和集合2不变。<br>语法：<code>集合1.difference(集合2)</code></p><p>对比集合1和集合2，在集合1内，删除和集合2相同的元素，集合1被修改，集合2不变。<br>语法：<code>集合1.difference_update(集合2)</code></p><p>将集合1和集合2组合成新集合，得到新集合，集合1和集合2不变<br>语法：<code>集合1.union(集合2)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = &#123;<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>&#125;</span><br><span class="line">变量名<span class="number">2</span> = &#123;<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">4</span>&#125;</span><br><span class="line"></span><br><span class="line">difference = 变量名<span class="number">1.</span>difference(变量名<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># &#123;&#x27;元素1&#x27;, &#x27;元素2&#x27;, 3&#125;</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">2</span>)  <span class="comment"># &#123;&#x27;元素2&#x27;, &#x27;元素1&#x27;, 4&#125;</span></span><br><span class="line"><span class="built_in">print</span>(difference)  <span class="comment"># &#123;3&#125;</span></span><br><span class="line"></span><br><span class="line">变量名<span class="number">1.</span>difference_update(变量名<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># &#123;3&#125;</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">2</span>)  <span class="comment"># &#123;&#x27;元素1&#x27;, &#x27;元素2&#x27;, 4&#125;</span></span><br><span class="line"></span><br><span class="line">union = 变量名<span class="number">1.</span>union(变量名<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(union)  <span class="comment"># &#123;&#x27;元素1&#x27;, 3, &#x27;元素2&#x27;, 4&#125;</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># &#123;3&#125;</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">2</span>)  <span class="comment"># &#123;&#x27;元素2&#x27;, 4, &#x27;元素1&#x27;&#125;</span></span><br></pre></td></tr></table></figure><h4 id="集合的删除功能（方法）"><a href="#集合的删除功能（方法）" class="headerlink" title="集合的删除功能（方法）"></a>集合的删除功能（方法）</h4><p>将指定元素，从集合内移除，集合本身被修改，移除了元素<br>语法：<code>集合.remove(元素)</code></p><p>从集合中随机取出一个元素，会得到一个元素的结果。同时集合本身被修改，元素被移除<br>语法：<code>集合.pop()</code></p><p>清空集合，集合本身将被清空<br>语法：<code>集合.clear()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = &#123;<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 变量名1.remove(1)  # KeyError: 1</span></span><br><span class="line">变量名<span class="number">1.</span>remove(<span class="number">3</span>)</span><br><span class="line">pop = 变量名<span class="number">1.</span>pop()</span><br><span class="line"><span class="built_in">print</span>(pop)  <span class="comment"># 元素1</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># &#123;&#x27;元素2&#x27;&#125;</span></span><br><span class="line">变量名<span class="number">1.</span>clear()</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># set()</span></span><br><span class="line">pop = 变量名<span class="number">1.</span>pop()</span><br><span class="line"><span class="built_in">print</span>(pop)  <span class="comment"># KeyError: &#x27;pop from an empty set&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="集合的统计功能（方法）"><a href="#集合的统计功能（方法）" class="headerlink" title="集合的统计功能（方法）"></a>集合的统计功能（方法）</h4><p>统计集合内有多少元素，得到一个整数结果<br>语法：<code>len(集合)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = &#123;<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(变量名<span class="number">1</span>))  <span class="comment"># 3</span></span><br></pre></td></tr></table></figure><h3 id="集合的遍历"><a href="#集合的遍历" class="headerlink" title="集合的遍历"></a>集合的遍历</h3><p>集合同样支持使用for循环遍历，但因为集合不支持下标索引，所以不支持使用while循环。</p><h4 id="for循环，遍历集合"><a href="#for循环，遍历集合" class="headerlink" title="for循环，遍历集合"></a>for循环，遍历集合</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = &#123;<span class="string">&#x27;元素1&#x27;</span>, <span class="string">&#x27;元素2&#x27;</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 变量名<span class="number">1</span>:</span><br><span class="line">    <span class="built_in">print</span>(i)    </span><br></pre></td></tr></table></figure><hr><h2 id="数据容器：dict-字典"><a href="#数据容器：dict-字典" class="headerlink" title="数据容器：dict(字典)"></a>数据容器：dict(字典)</h2><h3 id="字典的定义"><a href="#字典的定义" class="headerlink" title="字典的定义"></a>字典的定义</h3><p>字典的每个键值对<code>key:value</code>用冒号<code>:</code>分割，每个键值对之间用逗号<code>,</code>分割，整个字典包括在花括号<code>&#123;&#125;</code> 中，字典可嵌套，字典的Key和Value可以是任意数据类型（Key不可为字典），格式如下所示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字面量</span></span><br><span class="line">&#123;key : value , key : value , ... , key : value&#125;</span><br><span class="line"><span class="comment"># 定义变量</span></span><br><span class="line">变量名<span class="number">1</span> = &#123;key : value , key : value , ... , key : value&#125;</span><br><span class="line"><span class="comment"># 定义空字典</span></span><br><span class="line">变量名<span class="number">2</span> = &#123;&#125;</span><br><span class="line">变量名<span class="number">3</span> = <span class="built_in">dict</span>()</span><br><span class="line"><span class="comment"># 定义字典嵌套</span></span><br><span class="line">变量名<span class="number">1</span> = &#123;</span><br><span class="line">key : &#123;key : value , key : value , ... , key : value&#125; ,</span><br><span class="line">key : &#123;key : value , key : value , ... , key : value&#125; , </span><br><span class="line">key : &#123;key : value , key : value , ... , key : value&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">2</span>) <span class="comment"># &#123;&#125;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(变量名<span class="number">2</span>))  <span class="comment"># &lt;class &#x27;dict&#x27;&gt;</span></span><br></pre></td></tr></table></figure><p>字典的特点：</p><ul><li>可以容纳多个数据</li><li>可以容纳不同类型的数据</li><li>每一份数据是KeyValue键值对</li><li>可以通过Key获取到Value，Key不可重复（重复会覆盖）</li><li>不支持下标索引</li><li>可以修改（增加或删除更新元素等）</li><li>支持for循环，不支持while循环</li></ul><h3 id="字典的常用操作"><a href="#字典的常用操作" class="headerlink" title="字典的常用操作"></a>字典的常用操作</h3><h4 id="字典数据的获取功能"><a href="#字典数据的获取功能" class="headerlink" title="字典数据的获取功能"></a>字典数据的获取功能</h4><p>字典同集合一样，不可以使用下标索引，但是字典可以通过Key值来取得对应的Value<br>语法：<code>字典名[key]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = &#123;<span class="string">&quot;key&quot;</span>: <span class="string">&quot;value&quot;</span>, <span class="number">1</span>: <span class="number">111</span>, <span class="number">2</span>: [<span class="string">&quot;value1&quot;</span>, <span class="string">&quot;value2&quot;</span>]&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>[<span class="string">&quot;key&quot;</span>])  <span class="comment"># value</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>[<span class="number">2</span>])  <span class="comment"># [&#x27;value1&#x27;, &#x27;value2&#x27;]</span></span><br></pre></td></tr></table></figure><h4 id="字典的新增元素功能"><a href="#字典的新增元素功能" class="headerlink" title="字典的新增元素功能"></a>字典的新增元素功能</h4><p>新增元素，字典被修改<br>语法：<code>字典[Key] = Value</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = &#123;<span class="string">&quot;key&quot;</span>: <span class="string">&quot;value&quot;</span>, <span class="number">1</span>: <span class="number">111</span>, <span class="number">2</span>: [<span class="string">&quot;value1&quot;</span>, <span class="string">&quot;value2&quot;</span>]&#125;</span><br><span class="line">变量名<span class="number">1</span>[<span class="number">3</span>] = <span class="string">&#x27;新数据&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>[<span class="number">3</span>])  <span class="comment"># 新数据</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># &#123;&#x27;key&#x27;: &#x27;value&#x27;, 1: 111, 2: [&#x27;value1&#x27;, &#x27;value2&#x27;], 3: &#x27;新数据&#x27;&#125;</span></span><br></pre></td></tr></table></figure><h4 id="字典的更新元素功能"><a href="#字典的更新元素功能" class="headerlink" title="字典的更新元素功能"></a>字典的更新元素功能</h4><p>元素被更新，字典被修改。<br>注意：字典Key不可以重复，所以对已存在的Key执行上述操作，就是更新Value值<br>语法：字典<code>[Key] = Value</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = &#123;<span class="string">&quot;key&quot;</span>: <span class="string">&quot;value&quot;</span>, <span class="number">1</span>: <span class="number">111</span>, <span class="number">2</span>: [<span class="string">&quot;value1&quot;</span>, <span class="string">&quot;value2&quot;</span>]&#125;</span><br><span class="line">变量名<span class="number">1</span>[<span class="number">1</span>] = <span class="string">&#x27;修改后数据&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>[<span class="number">1</span>])  <span class="comment"># 修改后数据</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># &#123;&#x27;key&#x27;: &#x27;value&#x27;, 1: &#x27;修改后数据&#x27;, 2: [&#x27;value1&#x27;, &#x27;value2&#x27;]&#125;</span></span><br></pre></td></tr></table></figure><h4 id="字典的删除功能（方法）"><a href="#字典的删除功能（方法）" class="headerlink" title="字典的删除功能（方法）"></a>字典的删除功能（方法）</h4><p>删除元素，返回指定Key的Value，同时字典被修改，指定Key的数据被删除<br>语法：<code>字典.pop(Key)</code></p><p>字典被修改，元素被清空<br>语法：<code>字典.clear()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = &#123;<span class="string">&quot;key&quot;</span>: <span class="string">&quot;value&quot;</span>, <span class="number">1</span>: <span class="number">111</span>, <span class="number">2</span>: [<span class="string">&quot;value1&quot;</span>, <span class="string">&quot;value2&quot;</span>]&#125;</span><br><span class="line">pop = 变量名<span class="number">1.</span>pop(<span class="string">&quot;key&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(pop)  <span class="comment"># value</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># &#123;1: 111, 2: [&#x27;value1&#x27;, &#x27;value2&#x27;]&#125;</span></span><br><span class="line"></span><br><span class="line">变量名<span class="number">1.</span>clear()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># &#123;&#125;</span></span><br></pre></td></tr></table></figure><h4 id="字典的获取功能（方法）"><a href="#字典的获取功能（方法）" class="headerlink" title="字典的获取功能（方法）"></a>字典的获取功能（方法）</h4><p>得到字典中的全部Key<br>语法：<code>字典.keys()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = &#123;<span class="string">&quot;key&quot;</span>: <span class="string">&quot;value&quot;</span>, <span class="number">1</span>: <span class="number">111</span>, <span class="number">2</span>: [<span class="string">&quot;value1&quot;</span>, <span class="string">&quot;value2&quot;</span>]&#125;</span><br><span class="line">keys = 变量名<span class="number">1.</span>keys()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(keys)  <span class="comment"># dict_keys([&#x27;key&#x27;, 1, 2])</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># &#123;&#x27;key&#x27;: &#x27;value&#x27;, 1: 111, 2: [&#x27;value1&#x27;, &#x27;value2&#x27;]&#125;</span></span><br></pre></td></tr></table></figure><h4 id="字典的统计功能（方法）"><a href="#字典的统计功能（方法）" class="headerlink" title="字典的统计功能（方法）"></a>字典的统计功能（方法）</h4><p>计算字典内的全部元素（键值对）数量，得到一个整数，表示字典内元素（键值对）的数量<br>语法：<code>len(字典)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = &#123;<span class="string">&quot;key&quot;</span>: <span class="string">&quot;value&quot;</span>, <span class="number">1</span>: <span class="number">111</span>, <span class="number">2</span>: [<span class="string">&quot;value1&quot;</span>, <span class="string">&quot;value2&quot;</span>]&#125;</span><br><span class="line">i = <span class="built_in">len</span>(变量名<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(i)  <span class="comment"># 3</span></span><br><span class="line"><span class="built_in">print</span>(变量名<span class="number">1</span>)  <span class="comment"># &#123;&#x27;key&#x27;: &#x27;value&#x27;, 1: 111, 2: [&#x27;value1&#x27;, &#x27;value2&#x27;]&#125;</span></span><br></pre></td></tr></table></figure><h3 id="字典的遍历"><a href="#字典的遍历" class="headerlink" title="字典的遍历"></a>字典的遍历</h3><p>字典同样支持使用for循环遍历，可通过获取字典中所有key进行遍历，但因为字典不支持下标索引，所以不支持使用while循环。</p><h4 id="for循环，遍历集合-1"><a href="#for循环，遍历集合-1" class="headerlink" title="for循环，遍历集合"></a>for循环，遍历集合</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">变量名<span class="number">1</span> = &#123;<span class="string">&quot;key&quot;</span>: <span class="string">&quot;value&quot;</span>, <span class="number">1</span>: <span class="number">111</span>, <span class="number">2</span>: [<span class="string">&quot;value1&quot;</span>, <span class="string">&quot;value2&quot;</span>]&#125;</span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> 变量名<span class="number">1.</span>keys():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;键：<span class="subst">&#123;key&#125;</span>,值：<span class="subst">&#123;变量名<span class="number">1</span>[key]&#125;</span>&quot;</span>) </span><br></pre></td></tr></table></figure><hr><h2 id="数据容器特点对比"><a href="#数据容器特点对比" class="headerlink" title="数据容器特点对比"></a>数据容器特点对比</h2><table><thead><tr><th align="center"></th><th align="center">列表</th><th align="center">元组</th><th align="center">字符串</th><th align="center">集合</th><th align="center">字典</th></tr></thead><tbody><tr><td align="center">元素数量</td><td align="center">支持多个</td><td align="center">支持多个</td><td align="center">支持多个</td><td align="center">支持多个</td><td align="center">支持多个</td></tr><tr><td align="center">元素类型</td><td align="center">任意</td><td align="center">任意</td><td align="center">仅字符</td><td align="center">任意</td><td align="center">Key：Value</td></tr><tr><td align="center">下标索引</td><td align="center">支持</td><td align="center">支持</td><td align="center">支持</td><td align="center">不支持</td><td align="center">不支持</td></tr><tr><td align="center">重复元素</td><td align="center">支持</td><td align="center">支持</td><td align="center">支持</td><td align="center">不支持</td><td align="center">不支持</td></tr><tr><td align="center">可修改性</td><td align="center">支持</td><td align="center">不支持</td><td align="center">不支持</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center">数据有序</td><td align="center">是</td><td align="center">是</td><td align="center">是</td><td align="center">是</td><td align="center">是</td></tr><tr><td align="center">使用场景</td><td align="center">可修改、可重复的一批数据记录场景</td><td align="center">不可修改、可重复的一批数据记录场景</td><td align="center">一串字符的记录场景</td><td align="center">不可重复的数据记录场景</td><td align="center">以Key检索Value的数据记录场景</td></tr></tbody></table><h2 id="数据容器的通用操作"><a href="#数据容器的通用操作" class="headerlink" title="数据容器的通用操作"></a>数据容器的通用操作</h2><p>数据容器尽管各自有各自的特点，但是它们也有通用的一些操作。</p><h3 id="数据容器的通用遍历操作"><a href="#数据容器的通用遍历操作" class="headerlink" title="数据容器的通用遍历操作"></a>数据容器的通用遍历操作</h3><p>在遍历上：</p><ul><li>5类数据容器都支持for循环遍历</li><li>列表、元组、字符串支持while循环，集合、字典不支持（无法下标索引）</li></ul><h3 id="数据容器的通用统计功能"><a href="#数据容器的通用统计功能" class="headerlink" title="数据容器的通用统计功能"></a>数据容器的通用统计功能</h3><p>数据容器可以通用非常多的功能方法</p><ul><li>统计容器的元素个数，方法<code>len(容器)</code></li><li>统计容器的最大元素，方法<code>max(容器)</code></li><li>统计容器的最小元素，方法<code>min(容器)</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">my_tuple = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">my_str = <span class="string">&quot;helle,world&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(my_list))  <span class="comment"># 3</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(my_tuple))  <span class="comment"># 5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(my_str))  <span class="comment"># 11</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">max</span>(my_list))  <span class="comment"># 3</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">max</span>(my_tuple))  <span class="comment"># 5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">max</span>(my_str))  <span class="comment"># w</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">min</span>(my_list))  <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">min</span>(my_tuple))  <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">min</span>(my_str))  <span class="comment"># ,</span></span><br></pre></td></tr></table></figure><h3 id="数据容器的通用转换功能"><a href="#数据容器的通用转换功能" class="headerlink" title="数据容器的通用转换功能"></a>数据容器的通用转换功能</h3><p>除了下标索引这个共性外，还可以通用类型转换</p><ul><li>将给定容器转换为列表，方法<code>list(容器)</code></li><li>将给定容器转换为字符串，方法<code>str(容器)</code></li><li>将给定容器转换为元组，方法<code>tuple(容器)</code></li><li>将给定容器转换为集合，方法<code>set(容器)</code></li></ul><h3 id="数据容器的通用排序功能"><a href="#数据容器的通用排序功能" class="headerlink" title="数据容器的通用排序功能"></a>数据容器的通用排序功能</h3><p>排序后都会得到列表（list）对象。</p><ul><li>将给定容器进行排序，方法<code>sorted(容器, [reverse=True])</code>，<code>reverse=True</code>表示降序。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">my_list = [[<span class="string">&quot;a&quot;</span>, <span class="number">33</span>], [<span class="string">&quot;b&quot;</span>, <span class="number">55</span>], [<span class="string">&quot;c&quot;</span>, <span class="number">11</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 排序，基于带名函数</span></span><br><span class="line"><span class="comment"># def choose_sort_key(element):</span></span><br><span class="line"><span class="comment">#     return element[1]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># my_list.sort(key=choose_sort_key, reverse=True)</span></span><br><span class="line"><span class="comment"># 排序，基于lambda匿名函数</span></span><br><span class="line">my_list.sort(key=<span class="keyword">lambda</span> element: element[<span class="number">1</span>], reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(my_list) <span class="comment"># [[&#x27;b&#x27;, 55], [&#x27;a&#x27;, 33], [&#x27;c&#x27;, 11]]</span></span><br></pre></td></tr></table></figure><hr><h1 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h1><h2 id="文件的打开"><a href="#文件的打开" class="headerlink" title="文件的打开"></a>文件的打开</h2><p>在Python，使用<code>open</code>函数，可以打开一个已经存在的文件，或者创建一个新文件，语法如下:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># open()函数常用形式是接收三个参数：文件名(file)、模式(mode)、字符编码(encoding)。</span></span><br><span class="line"><span class="built_in">open</span>(name, mode, encoding)</span><br><span class="line"><span class="comment"># open()函数完整的语法格式</span></span><br><span class="line"><span class="built_in">open</span>(file, mode=<span class="string">&#x27;r&#x27;</span>, buffering=-<span class="number">1</span>, encoding=<span class="literal">None</span>, errors=<span class="literal">None</span>, newline=<span class="literal">None</span>, closefd=<span class="literal">True</span>, opener=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><p>参数说明：</p><ul><li>file：必需，文件路径（相对或者绝对路径）。</li><li>mode：可选，文件打开模式，常用的模式有：<ul><li>只读<code>r</code>，以只读方式打开文件。文件的指针将会放在文件的开头，文件若不存在，会提示<code>FileNotFoundError</code>异常。这是默认模式。</li><li>写入<code>w</code>，打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，原有内容会被删除。如果该文件不存在，创建新文件。</li><li>追加<code>a</code>，打开一个文件用于追加。如果该文件已存在，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</li></ul></li><li>buffering：设置缓冲。</li><li>encoding：编码格式，一般使用utf8。</li><li>errors：报错级别。</li><li>newline：区分换行符。</li><li>closefd：传入的file参数类型。</li><li>opener：设置自定义开启器，开启器的返回值必须是一个打开的文件描述符。</li></ul><p>示例代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding的顺序不是第三位，所以不能用位置参数，用关键字参数直接指定</span></span><br><span class="line">file_1 = <span class="built_in">open</span>(<span class="string">&#x27;python.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;UTF-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用open()方法一定要保证关闭文件对象，即调用close()方法。</span></span><br><span class="line">file_1.close()</span><br></pre></td></tr></table></figure><p>with open语法</p><ul><li>通过在<code>with open</code>的语句块中对文件进行操作</li><li>可以在操作完成后自动关闭close文件，避免遗忘掉close方法</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;python.txt&quot;</span>, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> file_1:</span><br><span class="line">    file_1.readlines()</span><br></pre></td></tr></table></figure><h2 id="文件的读取"><a href="#文件的读取" class="headerlink" title="文件的读取"></a>文件的读取</h2><p>从文件读取指定的字节数，如果未给定或为负则读取所有。<br>语法：<code>文件对象.read([size])</code></p><p>读取所有行并返回列表，其中每一行的数据为一个元素。若给定sizeint&gt;0，则是设置一次读多少字节，这是为了减轻读取压力。<br>语法：<code>文件对象.readlines([sizeint])</code></p><p>读取整行，包括 “\n” 字符。<br>语法：<code>文件对象.readline([size])</code></p><p>for循环读取文件行。<br>语法：<code>for line in 文件对象</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">file_1 = <span class="built_in">open</span>(<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;UTF-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># read = file_1.read(15)</span></span><br><span class="line"><span class="comment"># print(read)  # Hello World!\n你好  </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># readline = file_1.readlines()</span></span><br><span class="line"><span class="comment"># print(readline)  # [&#x27;Hello World!\n&#x27;, &#x27;你好世界！&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># content = file_1.readline()</span></span><br><span class="line"><span class="comment"># print(f&#x27;第一行：&#123;content&#125;&#x27;)  # 第一行：Hello World!</span></span><br><span class="line"><span class="comment"># content = file_1.readline()</span></span><br><span class="line"><span class="comment"># print(f&#x27;第二行：&#123;content&#125;&#x27;)  # 第二行：你好世界！</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">file_1.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># for循环读取文件行，每一个line临时变量，就记录了文件的一行数据</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">open</span>(<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;UTF-8&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(line)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="文件的关闭"><a href="#文件的关闭" class="headerlink" title="文件的关闭"></a>文件的关闭</h2><p>关闭文件。关闭后文件不能再进行读写操作。如果不调用close，同时程序没有停止运行，那么这个文件将一直被Python程序占用。<br>语法：<code>文件对象.close()</code></p><h2 id="文件的写入"><a href="#文件的写入" class="headerlink" title="文件的写入"></a>文件的写入</h2><p>将字符串写入文件，返回的是写入的字符长度。<br>语法：<code>文件对象.write(str)</code></p><p>刷新文件内部缓冲，直接把内部缓冲区的数据立刻写入文件, 而不是被动的等待输出缓冲区写入。<br>语法：<code>文件对象.flush()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 打开文件</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;python.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="comment"># 2.文件写入</span></span><br><span class="line">f.write(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"><span class="comment"># 3. 内容刷新</span></span><br><span class="line">f.flush()</span><br><span class="line"><span class="comment"># 4. 关闭文件，close()方法带有flush()方法的功能</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><p>注意事项：</p><ul><li>可以使用<code>\n</code>来写出换行符。</li><li>直接调用write，内容并未真正写入文件，而是会积攒在程序的内存中，称之为缓冲区。</li><li>当调用flush的时候，内容会真正写入文件。</li><li>这样做是避免频繁的操作硬盘，导致效率下降（内存中缓存数据，一次性写入磁盘）。</li></ul><h2 id="文件的追加"><a href="#文件的追加" class="headerlink" title="文件的追加"></a>文件的追加</h2><p>追加写入文件使用<code>open</code>函数的<code>a</code>模式进行写入<br>追加写入的方法有：</p><ul><li><code>wirte()</code>，写入内容</li><li><code>flush()</code>，刷新内容到硬盘中</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 打开文件，通过a模式打开即可</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;python.txt&#x27;</span>, <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"><span class="comment"># 2.文件写入</span></span><br><span class="line">f.write(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"><span class="comment"># 3. 内容刷新</span></span><br><span class="line">f.flush()</span><br><span class="line"><span class="comment"># 4. 关闭文件，close()方法带有flush()方法的功能</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><hr><h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><p>异常即是一个事件，该事件会在程序执行过程中发生，影响了程序的正常执行。<br>一般情况下，在Python无法正常处理程序时就会发生一个异常。<br>当Python脚本发生异常时需捕获处理它，否则程序会终止执行。</p><h2 id="异常的捕获方法"><a href="#异常的捕获方法" class="headerlink" title="异常的捕获方法"></a>异常的捕获方法</h2><p>在可能发生异常的地方，进行捕获。<br>当异常出现的时候，提供解决方式，而不是任由其导致程序无法运行。<br>捕捉异常可以使用<code>try/except</code>语句。<br><code>try/except</code>语句用来检测try语句块中的错误，从而让except语句捕获异常信息并处理。</p><h3 id="捕获常规异常"><a href="#捕获常规异常" class="headerlink" title="捕获常规异常"></a>捕获常规异常</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    可能发生错误的代码</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    如果出现异常执行的代码</span><br></pre></td></tr></table></figure><h3 id="捕获指定异常"><a href="#捕获指定异常" class="headerlink" title="捕获指定异常"></a>捕获指定异常</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line"><span class="keyword">except</span> NameError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;name变量名称未定义错误&#x27;</span>)</span><br></pre></td></tr></table></figure><p>注意：</p><ul><li>如果尝试执行的代码的异常类型和要捕获的异常类型不一致，则无法捕获异常。</li><li>一般try下方只放一行尝试执行的代码。</li></ul><h3 id="捕获多个异常"><a href="#捕获多个异常" class="headerlink" title="捕获多个异常"></a>捕获多个异常</h3><p>当捕获多个异常时，可以把要捕获的异常类型的名字，放到except 后，并使用元组的方式进行书写。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>/<span class="number">0</span>)</span><br><span class="line"><span class="keyword">except</span> (NameError, ZeroDivisionError):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ZeroDivision错误...&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="捕获异常并输出描述信息"><a href="#捕获异常并输出描述信息" class="headerlink" title="捕获异常并输出描述信息"></a>捕获异常并输出描述信息</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line"><span class="keyword">except</span> (NameError, ZeroDivisionError) <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure><h3 id="捕获所有异常"><a href="#捕获所有异常" class="headerlink" title="捕获所有异常"></a>捕获所有异常</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure><h3 id="异常else"><a href="#异常else" class="headerlink" title="异常else"></a>异常else</h3><p>else表示的是如果没有异常要执行的代码。<br>如果在try子句执行时没有发生异常，python将执行else语句后的语句（如果有else的话），然后控制流通过整个try语句。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;我是else，是没有异常的时候执行的代码&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="异常的finally"><a href="#异常的finally" class="headerlink" title="异常的finally"></a>异常的finally</h3><p>finally表示的是无论是否异常都要执行的代码，例如关闭文件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;没有异常，真开心&#x27;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure><h2 id="异常的传递"><a href="#异常的传递" class="headerlink" title="异常的传递"></a>异常的传递</h2><p>异常是具有传递性的。<br>当<strong>函数a</strong>中发生异常，并且没有捕获处理这个异常的时候， 异常会传递到<strong>函数b</strong>，当<strong>函数b</strong>也没有捕获处理这个异常的时候，<strong>main函数</strong>会捕获这个异常， 这就是异常的传递性。<br>当所有函数都没有捕获异常的时候， 程序就会报错。<br>利用异常具有传递性的特点，当想要保证程序不会因为异常崩溃的时候，就可以在<strong>main函数</strong>中设置异常捕获， 由于无论在整个程序哪里发生异常， 最终都会传递到<strong>main</strong>函数中， 这样就可以确保所有的异常都会被捕获。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">a</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>/<span class="number">0</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">b</span>():</span><br><span class="line">    a()</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        b()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e :</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">main() <span class="comment"># division by zero</span></span><br></pre></td></tr></table></figure><hr><h1 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h1><p>Python 模块（Module），是一个Python文件，以<code>.py</code>结尾，模块能定义函数，类和变量，模块里也能包含可执行的代码。一般情况下，模块的名字就是文件名（不包括扩展名.py）。<br>Python中有很多各种不同的模块,，每一个模块都可以帮助快速的实现一些功能，比如实现和时间相关的功能就可以使用<code>time</code>模块。<br>可以认为一个模块就是一个工具包，每一个工具包中都有各种不同的工具供程序使用进而实现各种不同的功能。</p><h2 id="模块的导入"><a href="#模块的导入" class="headerlink" title="模块的导入"></a>模块的导入</h2><p>模块在使用前需要先导入，导入的语法如下：</p><p><code>[from 模块名] import [模块 | 类 | 变量 | 函数 | *] [as 别名]</code></p><p>一个模块只会被导入一次，不管执行了多少次import。这样可以防止导入模块被一遍又一遍地执行。<br>当导入多个模块的时候，且模块内有同名功能， 当调用这个同名功能的时候，调用到的是后面导入的模块的功能。</p><p>常用的组合形式如：</p><ul><li><code>import 模块名</code></li><li><code>from 模块名 import 类、变量、方法等</code></li><li><code>from 模块名 import *</code></li><li><code>import 模块名 as 别名</code></li><li><code>from 模块名 import 功能名 as 别名</code></li></ul><h3 id="import-语句"><a href="#import-语句" class="headerlink" title="import 语句"></a>import 语句</h3><p>模块定义好后，可以使用<code>import</code>语句来引入模块，语法如下：</p><p><code>import module1[, module2[,... moduleN]]</code></p><p>比如要引用模块<code>time</code>，就可以在文件最开始的地方用<code>import time</code>来引入。在调用<code>time</code>模块中的函数时，必须这样引用<code>time.函数名()</code>。</p><h3 id="from…import-语句"><a href="#from…import-语句" class="headerlink" title="from…import 语句"></a>from…import 语句</h3><p>from 语句可从模块中导入一个指定的部分到当前命名空间中。语法如下：</p><p><code>from modname import name1[, name2[, ... nameN]]</code></p><p>比如要导入<code>time</code>模块中的<code>sleep</code>方法，就可以在文件最开始的地方用<code>from time import sleep</code>来引入。这个声明不会把整个<code>time</code>模块导入到当前的命名空间中，它只会将<code>time</code>里的 <code>sleep</code>单个引入到执行这个声明的模块的全局符号表。在调用<code>time</code>模块中的<code>sleep</code>函数时，可直接引用<code>sleep()</code>。</p><h3 id="from-模块名-import"><a href="#from-模块名-import" class="headerlink" title="from 模块名 import *"></a>from 模块名 import *</h3><p>把一个模块的所有内容全都导入到当前的命名空间也是可行的，只需使用如下声明：</p><p><code>from modname import *</code></p><p>比如要导入<code>time</code>模块中所有的方法，就可以在文件最开始的地方用<code>from time import *</code>来引入。在调用<code>time</code>模块中的<code>sleep</code>函数时，可直接引用<code>sleep()</code>。</p><h3 id="as定义别名"><a href="#as定义别名" class="headerlink" title="as定义别名"></a>as定义别名</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 模块定义别名</span></span><br><span class="line"><span class="keyword">import</span> 模块名 <span class="keyword">as</span> 别名</span><br><span class="line">别名.函数名()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 功能定义别名</span></span><br><span class="line"><span class="keyword">from</span> 模块名 <span class="keyword">import</span> 功能 <span class="keyword">as</span> 别名</span><br><span class="line">别名()</span><br></pre></td></tr></table></figure><h2 id="自定义模块"><a href="#自定义模块" class="headerlink" title="自定义模块"></a>自定义模块</h2><p>每个Python文件都可以作为一个模块，模块的名字就是文件的名字。也就是说自定义模块名必须要符合标识符命名规则。</p><p>创建<code>my_module1.py</code>文件，自定义my_module1模块，并定义<code>test</code>函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="built_in">print</span>(a + b)</span><br></pre></td></tr></table></figure><p>测试类中引入自定义my_module1模块，并测试<code>test</code>函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> my_module1</span><br><span class="line"></span><br><span class="line">my_module1.test(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="name变量"><a href="#name变量" class="headerlink" title="name变量"></a>name变量</h3><p>当在模块文件<code>my_module1.py</code>文件中添加测试代码<code>test(1,1)</code>，会导致无论是当前文件，还是其他已经导入了该模块的文件，在运行的时候都会自动执行<code>test</code>函数的调用。<br>可使用<code>__main__</code>处理模块的重复调用。</p><p>修改<code>my_module1.py</code>文件，使用if进行判断。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="built_in">print</span>(a + b)</span><br><span class="line"><span class="comment"># 全局变量__name__存放的就是模块的名字，如&#x27;my_module1&#x27;</span></span><br><span class="line"><span class="comment"># 当一个模块作为脚本执行时，__name__的值不再是模块名，而是字符串&#x27;__main__&#x27;</span></span><br><span class="line"><span class="comment"># if判断表示，只有当程序是直接执行的才会进入if内部，如果是被导入的，则if无法进入</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    test(<span class="number">1</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><h3 id="all-变量"><a href="#all-变量" class="headerlink" title="__all__变量"></a>__all__变量</h3><p>如果一个模块文件中有<code>__all__</code>变量，当使用<code>from xxx import *</code>导入时，只能导入这个列表中的元素。</p><p>修改<code>my_module1.py</code>文件，设置<code>__all__</code>变量，当其他类使用<code>from xxx import *</code>导入<code>my_module1</code>模块时，仅能导入<code>__all__</code>这个变量中定义的方法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">__all__ = [<span class="string">&#x27;test1&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test1</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="built_in">print</span>(a + b</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test2</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="built_in">print</span>(a + b)</span><br></pre></td></tr></table></figure><hr><h1 id="包"><a href="#包" class="headerlink" title="包"></a>包</h1><p>包是一个分层次的文件目录结构，它定义了一个由模块及子包，和子包下的子包等组成的Python的应用环境。</p><p>简单来说，包就是文件夹，但该文件夹下必须存在<code>__init__.py</code>文件，该文件的内容可以为空。<code>__init__.py</code>用于标识当前文件夹是一个包。</p><p>当模块文件越来越多时，包可以帮助管理这些模块。包的作用就是包含多个模块，但包的本质依然是模块。</p><h2 id="包的创建"><a href="#包的创建" class="headerlink" title="包的创建"></a>包的创建</h2><p>新建包([New]-&gt;[Python Package])后，包内部会自动创建<code>__init__.py</code>文件，这个文件控制着包的导入行为。<br>新建包<code>package_mod</code>，包下包含<code>mod1.py</code>、<code>mod2.py</code>两个模块，<code>__init__.py</code>文件为新建包后自动生成的文件，<code>test.py</code> 为测试调用包的代码，目录结构如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">test.py</span><br><span class="line">package_mod</span><br><span class="line">|-- __init__.py</span><br><span class="line">|-- mod1.py</span><br><span class="line">|-- mod2.py</span><br></pre></td></tr></table></figure><h2 id="导入包"><a href="#导入包" class="headerlink" title="导入包"></a>导入包</h2><h3 id="使用import导入"><a href="#使用import导入" class="headerlink" title="使用import导入"></a>使用import导入</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> 包名.模块名</span><br><span class="line"></span><br><span class="line">包名.模块名.目标</span><br></pre></td></tr></table></figure><h3 id="使用from导入"><a href="#使用from导入" class="headerlink" title="使用from导入"></a>使用from导入</h3><p>必须在<code>__init__.py</code>文件中添加<code>__all__ = []</code>，控制允许导入的模块列表。<br><code>__all__</code>针对的是 <code>from ... import * </code>这种方式，对<code>import xxx</code>这种方式无效。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> 包名 <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">模块名.目标</span><br></pre></td></tr></table></figure><h2 id="安装第三方包"><a href="#安装第三方包" class="headerlink" title="安装第三方包"></a>安装第三方包</h2><p>在Python程序的生态中，有许多非常多的第三方包（非Python官方），可以极大的提高开发效率，如：</p><ul><li>科学计算中常用的：numpy包</li><li>数据分析中常用的：pandas包</li><li>大数据计算中常用的：pyspark、apache-flink包</li><li>图形可视化常用的：matplotlib、pyecharts</li><li>人工智能常用的：tensorflow</li></ul><p>但是由于是第三方，所以Python没有内置，所以需要安装它们才可以导入使用。</p><h4 id="安装第三方包-pip"><a href="#安装第三方包-pip" class="headerlink" title="安装第三方包 - pip"></a>安装第三方包 - pip</h4><p>只需要使用Python内置的pip程序即可。在命令提示符程序里面输入<code>pip install 包名称</code>，即可通过网络快速安装第三方包。</p><p>由于pip是连接的国外的网站进行包的下载，所以有的时候会速度很慢。</p><p>使用pip的时候加参数<code>-i</code>，可以临时使用国内镜像，让其连接国内的网站进行包的安装，<code>pip install -i 国内镜像 包名称</code>。<br>如使用清华大学的镜像<code>https://pypi.tuna.tsinghua.edu.cn/simple</code>、阿里云的镜像<code>http://mirrors.aliyun.com/pypi/simple</code>来加快下载速度。</p><h4 id="安装第三方包-PyCharm"><a href="#安装第三方包-PyCharm" class="headerlink" title="安装第三方包 - PyCharm"></a>安装第三方包 - PyCharm</h4><ol><li>打开Python Interpreter。在Pycharm 右下角点击<code>Interpreter Setting</code>或者在<code>Settings</code>-&gt;<code>Project:项目名</code>-&gt;<code>Python Interpreter</code></li><li>打开Available Packages。点击<code>Install</code>或使用快捷键<code>Alt + Insert</code></li><li>输入要安装的第三方报名，进行安装</li></ol><p>若搜索下载超时，需配置PyCharm底部的工具窗口栏中的<code>Python Packages</code>中的<code>Manage repositories</code>，设置国内镜像。</p><hr>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python简介与环境搭建</title>
      <link href="/2023/02/15/62582.html"/>
      <url>/2023/02/15/62582.html</url>
      
        <content type="html"><![CDATA[<h1 id="初识Python"><a href="#初识Python" class="headerlink" title="初识Python"></a>初识Python</h1><h2 id="Python简介"><a href="#Python简介" class="headerlink" title="Python简介"></a>Python简介</h2><p>Python是一个高层次的结合了解释性、编译性、互动性和面向对象的脚本语言。</p><ul><li>Python是一种解释型语言： 这意味着开发过程中没有了编译这个环节。类似于PHP和Perl语言。</li><li>Python是交互式语言： 这意味着，可在一个Python提示符<code>&gt;&gt;&gt;</code>后直接执行代码。</li><li>Python是面向对象语言：这意味着Python支持面向对象的风格或代码封装在对象的编程技术。</li></ul><h2 id="Python发展历史"><a href="#Python发展历史" class="headerlink" title="Python发展历史"></a>Python发展历史</h2><p>Python的创始人为荷兰人吉多·范·罗苏姆（Guido van Rossum），于1989年开发，并于1991年发布。</p><p>Python 2.7被确定为最后一个Python 2.x版本，它除了支持Python 2.x语法外，还支持部分Python 3.1语法。</p><h2 id="Python-特点"><a href="#Python-特点" class="headerlink" title="Python 特点"></a>Python 特点</h2><ol><li>易于学习：Python有相对较少的关键字，结构简单，和一个明确定义的语法，学习起来更加简单。</li><li>易于阅读：Python代码定义的更清晰。</li><li>易于维护：Python的成功在于它的源代码是相当容易维护的。</li><li>一个广泛的标准库：Python的最大的优势之一是丰富的库，跨平台的，在UNIX，Windows和Macintosh兼容很好。</li><li>可移植：基于其开放源代码的特性，Python已经被移植（也就是使其工作）到许多平台。</li></ol><hr><h1 id="Python环境搭建"><a href="#Python环境搭建" class="headerlink" title="Python环境搭建"></a>Python环境搭建</h1><p>Python可应用于多平台包括Linux和Mac OS X。<br>可通过终端窗口输入<code>python</code>命令来查看本地是否已经安装Python以及Python的安装版本。<br>Python官网：<a href="https://www.python.org/" title="Python官网">https://www.python.org/</a>。</p><hr><h2 id="Window平台安装Python"><a href="#Window平台安装Python" class="headerlink" title="Window平台安装Python"></a>Window平台安装Python</h2><p>安装包文件中后缀的说明：</p><ul><li>embeddable zip file ：表示**.zip**格式的绿色免安装版本，可以直接嵌入（集成）到其它的应用程序中。</li><li>executable installer ：表示**.exe**格式的可执行程序，这是完整的离线安装包，一般选择这个即可。</li><li>web-based installer ：表示通过网络安装的，也就是说下载到的是一个空壳，安装过程中还需联网。</li></ul><p>optional features（可选功能）设置：</p><table><thead><tr><th align="center">选项</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><code>Documentation</code></td><td align="center">安装Python官方文档</td></tr><tr><td align="center"><code>Pip</code></td><td align="center">安装Python包管理器，可下载安装Python包</td></tr><tr><td align="center"><code>tcl/tk and IDLE</code></td><td align="center">安装TK库和IDLE编辑器（开发环境）</td></tr><tr><td align="center"><code>Python test suite</code></td><td align="center">安装标准库和测试套件</td></tr><tr><td align="center"><code>Py launcher</code></td><td align="center">py 尾缀文件都以python解释器执行</td></tr><tr><td align="center"><code>For all users</code></td><td align="center">所有用户都可使用</td></tr></tbody></table><p>advanced options（高级选项）设置：</p><table><thead><tr><th align="center">选项</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><code>Install for all users</code></td><td align="center">所有用户都可使用</td></tr><tr><td align="center"><code>Associate files with Python (requires the py launcher)</code></td><td align="center">将py文件和python关联（需要python启动器）</td></tr><tr><td align="center"><code>Create shortcuts for installed application</code></td><td align="center">为应用程序创建快捷方式</td></tr><tr><td align="center"><code>Add Python to envirounment variables</code></td><td align="center">添加Python到虚拟环境</td></tr><tr><td align="center"><code>Precompile standard library</code></td><td align="center">预编译标准库</td></tr><tr><td align="center"><code>Download Debug相关工具</code></td><td align="center">有pycharm这个IDE就不需要了</td></tr></tbody></table><p>验证安装：<br>在命令提示符<code>CMD</code>程序内，输入<code>python</code>并回车，显示Python版本号并出现交互式解释器即为安装成功。</p><hr><h2 id="Linux平台安装Python"><a href="#Linux平台安装Python" class="headerlink" title="Linux平台安装Python"></a>Linux平台安装Python</h2><p>在Linux上安装Python需要先安装前置依赖程序。</p><p>在Linux系统中，使用yum程序进行依赖程序安装，执行如下命令：<code>yum install wget zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc make zlib zlib-devel libffi-devel -y</code>。</p><p>复制安装包文件<code>Python-3.X.X.tgz</code>的下载链接，使用<code>wget</code>命令下载安装包。下载完成后，使用<code>tar</code>命令解压安装包。切换目录到解压后的Python安装文件夹，配置<code>./configure --prefix=/usr/local/python3</code>，编译<code>make &amp;&amp; make install</code>。</p><p>编译完成后，可以删除系统自带的老版本（Python2）的软链接配置软链接，<code>rm -f /usr/bin/python</code>，创建新版本（Python3）软链接，<code>ln -s /usr/local/python3/bin/python3.X /usr/bin/python</code>，方便快速使用Python。</p><p>执行<code>python</code>并回车，显示Python版本号并出现交互式解释器即为安装成功。</p><p>创建软链接后，会破坏yum程序的正常使用（只能使用系统自带的python2）。需修改2个文件：<code>/usr/bin/yum</code>和<code>/usr/libexec/urlgrabber-ext-down</code>，使用vi编辑器，将这2个文件的第一行，从<code>#!/usr/bin/python</code>修改为：<code>#!/usr/bin/python2</code>。</p><hr><h2 id="Mac平台安装Python"><a href="#Mac平台安装Python" class="headerlink" title="Mac平台安装Python"></a>Mac平台安装Python</h2><p>MAC系统一般都自带有<code>Python2.x</code>版本的环境，官网下载<code>python-3.X.X-macos.pkg</code>安装包，安装后终端中输入<code>python3</code>验证是否安装成功。</p><p>如果想要使用python命令，而非python3命令执行python，可设置环境变量来解决，在终端中执行如下代码，<code>echo &#39;alias python=python3&#39; &gt;&gt; .bash_profile</code>，退出且重新打开终端，然后执行<code>python</code>并回车，显示Python版本号并出现交互式解释器即为安装成功。</p><p>若执行完修改命令后未生效，在终端输入<code>source ~/.zshrc</code>使之生效。</p><p>通过在终端中输入以下命令验证是否配置成功：</p><ul><li><code>python --version</code>，输出结果为<code>Python 3.X.X</code>版本号。</li><li><code>python2 --version</code>，输出结果为<code>Python 2.7.X</code>版本号。</li></ul><hr><h1 id="Python2-x与3-x版本主要区别"><a href="#Python2-x与3-x版本主要区别" class="headerlink" title="Python2.x与3.x版本主要区别"></a>Python2.x与3.x版本主要区别</h1><h2 id="print函数"><a href="#print函数" class="headerlink" title="print函数"></a>print函数</h2><p>print 语句没有了，取而代之的是 print() 函数。 Python 2.6 与 Python 2.7 部分地支持这种形式的 print 语法。在 Python 2.6 与Python 2.7 里面，以下三种形式是等价的：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span> <span class="string">&quot;fish&quot;</span></span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;fish&quot;</span>) <span class="comment"># 注意print后面有个空格</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;fish&quot;</span>) <span class="comment"># print()不能带有任何其它参数</span></span><br></pre></td></tr></table></figure><h2 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h2><p>Python 2有 ASCII str() 类型，unicode()是单独的，不是byte类型。</p><p>现在，在Python 3，有了Unicode（utf-8）字符串，以及一个字节类：byte和bytearrays。</p><p>由于 Python3.x 源码文件默认使用 utf-8 编码，所以使用中文就更加方便了。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python 3.x</span></span><br><span class="line">中国 = <span class="string">&#x27;我爱北京天安门&#x27;</span> </span><br><span class="line"><span class="built_in">print</span>(中国)  <span class="comment"># 我爱北京天安门</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Python 2.x</span></span><br><span class="line"><span class="built_in">str</span> = <span class="string">&quot;我爱北京天安门&quot;</span> <span class="comment"># &#x27;\xe6\x88\x91\xe7\x88\xb1\xe5\x8c\x97\xe4\xba\xac\xe5\xa4\xa9\xe5\xae\x89\xe9\x97\xa8&#x27;</span></span><br><span class="line"><span class="built_in">str</span> = <span class="string">u&quot;我爱北京天安门&quot;</span> <span class="comment"># u&#x27;\u6211\u7231\u5317\u4eac\u5929\u5b89\u95e8&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="除法运算"><a href="#除法运算" class="headerlink" title="除法运算"></a>除法运算</h2><p>Python 中的除法有两个运算符，<code>/ </code>和<code>//</code>。</p><p>首先来说<code>/</code>除法:</p><p>在 Python 2.x 中<code>/</code>除法就跟我们熟悉的大多数语言，比如 Java 和 C ，整数相除的结果是一个整数，把小数部分完全忽略掉，浮点数除法会保留小数点的部分得到一个浮点数的结果。</p><p>在 Python 3.x 中<code>/</code>除法不再这么做了，对于整数之间的相除，结果也会是浮点数。</p><p>而对于<code>//</code>除法，这种除法叫做 floor 除法，会对除法的结果自动进行一个 floor 操作（向下取整），在 Python 2.x 和 Python 3.x 中是一致的。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python 3.x</span></span><br><span class="line"><span class="number">1</span> / <span class="number">2</span> <span class="comment"># 0.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Python 2.x</span></span><br><span class="line"><span class="number">1</span> / <span class="number">2</span> <span class="comment"># 0</span></span><br><span class="line"><span class="number">1.0</span> / <span class="number">2.0</span> <span class="comment"># 0.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Python 2.x &amp; Python 3.x</span></span><br><span class="line">-<span class="number">1</span> // <span class="number">2</span> <span class="comment"># -1</span></span><br><span class="line"><span class="number">1</span> // <span class="number">2</span> <span class="comment"># 0</span></span><br></pre></td></tr></table></figure><h2 id="不等运算符"><a href="#不等运算符" class="headerlink" title="不等运算符"></a>不等运算符</h2><p>Python 2.x中不等于有两种写法<code> !=</code>和<code> &lt;&gt;</code>。</p><p>Python 3.x中去掉了<code>&lt;&gt;</code>, 只有<code>!=</code>一种写法。</p><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>Python 3.x去除了<code>long</code>类型，现在只有一种整型<code>int</code>，但它的行为就像2.X版本的<code>long</code>。</p><p>Python 3.x新增了<code>bytes</code>类型，对应于Python 2.x版本的八位串，str对象和bytes对象可以使用<code> .encode()</code>(str -&gt; bytes) 或<code>.decode()</code>(bytes -&gt; str)方法相互转化。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义一个bytes字面量</span></span><br><span class="line">b = <span class="string">b&#x27;china&#x27;</span> </span><br><span class="line"><span class="built_in">type</span>(b) <span class="comment"># &lt;type &#x27;bytes&#x27;&gt;</span></span><br><span class="line"><span class="comment"># bytes -&gt; str</span></span><br><span class="line">s = b.decode()</span><br><span class="line">s <span class="comment"># china</span></span><br><span class="line"><span class="comment">#str -&gt; bytes</span></span><br><span class="line">b1 = s.encode()</span><br><span class="line">b1 <span class="comment"># b&#x27;china&#x27; </span></span><br></pre></td></tr></table></figure><h1 id="运行Python"><a href="#运行Python" class="headerlink" title="运行Python"></a>运行Python</h1><p>有三种方式可以运行Python：</p><h2 id="交互式解释器"><a href="#交互式解释器" class="headerlink" title="交互式解释器"></a>交互式解释器</h2><p>可通过命令行窗口进入Python，并在交互式解释器中开始编写Python代码。可在 Unix、DOS 或任何其他提供了命令行或者shell的系统进行Python编码工作。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">python <span class="comment"># Unix/Linux</span></span></span><br><span class="line">或</span><br><span class="line">C:&gt;python # Windows/DOS</span><br></pre></td></tr></table></figure><hr><h2 id="命令行脚本"><a href="#命令行脚本" class="headerlink" title="命令行脚本"></a>命令行脚本</h2><p>在应用程序中通过引入解释器可以在命令行中执行Python脚本<code>.py</code>文件，如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">python script.py <span class="comment"># Unix/Linux</span></span></span><br><span class="line">或</span><br><span class="line">C:&gt;python script.py # Windows/DOS</span><br></pre></td></tr></table></figure><hr><h2 id="集成开发环境"><a href="#集成开发环境" class="headerlink" title="集成开发环境"></a>集成开发环境</h2><p>集成开发环境IDE（Integrated Development Environment)，常见的有<a href="https://www.jetbrains.com/pycharm/" title="PyCharm官网">PyCharm</a>、<a href="https://code.visualstudio.com/" title="VSCode官网">VSCode</a>、IDLE（Python自带的IDE）等。</p><hr><h1 id="Python程序初体验"><a href="#Python程序初体验" class="headerlink" title="Python程序初体验"></a>Python程序初体验</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(“Hello World!”)</span><br></pre></td></tr></table></figure><hr><h1 id="Python解释器"><a href="#Python解释器" class="headerlink" title="Python解释器"></a>Python解释器</h1><p>Python解释器，是一个计算机程序，用来翻译Python代码，并提交给计算机执行。<br>解释器在Windows系统的存放路径：<code>&lt;Python安装目录&gt;/python.exe</code>。<br>作用：</p><ol><li>将Python代码翻译成计算机认识的0和1并提交计算机执行.</li><li>在解释器环境内可以一行行的执行我们输入的代码。</li><li>也可以使用解释器程序，去执行<code>.py</code>代码文件，<code>.py</code>文件是python语言的代码文件，里面记录了python的代码。</li></ol><hr>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker的使用</title>
      <link href="/2023/02/11/50597.html"/>
      <url>/2023/02/11/50597.html</url>
      
        <content type="html"><![CDATA[<h1 id="Docker概述"><a href="#Docker概述" class="headerlink" title="Docker概述"></a>Docker概述</h1><p>Docker是一个开源的应用容器引擎，将应用的Libs（函数库）、Deps（依赖）、配置与应用一起打包到一个可移植的容器中，然后发布到任何流行的Linux或Windows操作系统的机器上，也可以实现虚拟化，容器是完全使用沙箱机制，相互之间不会有任何接口。</p><hr><h1 id="Docker安装与配置"><a href="#Docker安装与配置" class="headerlink" title="Docker安装与配置"></a>Docker安装与配置</h1><p>官方网站上有提供了各种环境下的<a href="https://docs.docker.com/engine/install/">安装指南</a>，以CentOS进行举例。</p><h2 id="卸载（可选）"><a href="#卸载（可选）" class="headerlink" title="卸载（可选）"></a>卸载（可选）</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-selinux docker-engine-selinux docker-engine docker-ce</span><br></pre></td></tr></table></figure><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>设置Docker的存储库并安装 </p><h3 id="安装必要的系统工具"><a href="#安装必要的系统工具" class="headerlink" title="安装必要的系统工具"></a>安装必要的系统工具</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2 --skip-broken</span><br></pre></td></tr></table></figure><h3 id="添加软件源信息"><a href="#添加软件源信息" class="headerlink" title="添加软件源信息"></a>添加软件源信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><h3 id="加入镜像源地址"><a href="#加入镜像源地址" class="headerlink" title="加入镜像源地址"></a>加入镜像源地址</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;s/download.docker.com/mirrors.aliyun.com\/docker-ce/g&#x27; /etc/yum.repos.d/docker-ce.repo</span><br></pre></td></tr></table></figure><h3 id="更新索引缓存"><a href="#更新索引缓存" class="headerlink" title="更新索引缓存"></a>更新索引缓存</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum makecache fast</span><br></pre></td></tr></table></figure><h3 id="安装docker-ce"><a href="#安装docker-ce" class="headerlink" title="安装docker-ce"></a>安装docker-ce</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y docker-ce</span><br></pre></td></tr></table></figure><h3 id="校验软件版本"><a href="#校验软件版本" class="headerlink" title="校验软件版本"></a>校验软件版本</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker -v</span><br></pre></td></tr></table></figure><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><p>Docker应用需要用到各种端口，需逐一去修改防火墙设置，也可直接关闭防火墙。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld  # 关闭防火墙</span><br><span class="line">systemctl disable firewalld  # 禁止开机启动防火墙</span><br><span class="line"></span><br><span class="line">systemctl start docker  # 启动docker服务</span><br><span class="line">systemctl stop docker  # 停止docker服务</span><br><span class="line">systemctl restart docker  # 重启docker服务</span><br></pre></td></tr></table></figure><h2 id="配置镜像加速"><a href="#配置镜像加速" class="headerlink" title="配置镜像加速"></a>配置镜像加速</h2><h3 id="安装／升级Docker客户端"><a href="#安装／升级Docker客户端" class="headerlink" title="安装／升级Docker客户端"></a>安装／升级Docker客户端</h3><p>推荐安装1.10.0以上版本的Docker客户端，参考文档<a href="https://yq.aliyun.com/articles/110806">docker-ce</a></p><h3 id="配置镜像加速器"><a href="#配置镜像加速器" class="headerlink" title="配置镜像加速器"></a>配置镜像加速器</h3><p>通过修改daemon配置文件<code>/etc/docker/daemon.json</code>来使用加速器。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://vix1fn6e.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure><h2 id="安装DockerCompose"><a href="#安装DockerCompose" class="headerlink" title="安装DockerCompose"></a>安装DockerCompose</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载安装</span></span><br><span class="line">curl -L https://github.com/docker/compose/releases/download/1.23.1/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><h3 id="修改文件权限"><a href="#修改文件权限" class="headerlink" title="修改文件权限"></a>修改文件权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><h3 id="Base自动补全命令"><a href="#Base自动补全命令" class="headerlink" title="Base自动补全命令"></a>Base自动补全命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">补全命令</span></span><br><span class="line">curl -L https://raw.githubusercontent.com/docker/compose/1.29.1/contrib/completion/bash/docker-compose &gt; /etc/bash_completion.d/docker-compose</span><br></pre></td></tr></table></figure><p>如果这里出现错误，需修改hosts文件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;199.232.68.133 raw.githubusercontent.com&quot;</span> &gt;&gt; /etc/hosts</span><br></pre></td></tr></table></figure><h2 id="Docker镜像仓库"><a href="#Docker镜像仓库" class="headerlink" title="Docker镜像仓库"></a>Docker镜像仓库</h2><p>搭建镜像仓库可以基于Docker官方提供的DockerRegistry来实现。</p><p>官网地址：<a href="https://hub-stage.docker.com/_/registry">registry</a></p><h3 id="简化版镜像仓库"><a href="#简化版镜像仓库" class="headerlink" title="简化版镜像仓库"></a>简化版镜像仓库</h3><p>Docker官方的Docker Registry是一个基础版本的Docker镜像仓库，具备仓库管理的完整功能，但是没有图形化界面。搭建方式比较简单，命令如下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --restart=always --name registry -p 5000:5000 -v registry-data:/var/lib/registry registry</span><br></pre></td></tr></table></figure><p>命令中挂载了一个数据卷registry-data到容器内的<code>/var/lib/registry</code>目录，这是私有镜像库存放数据的目录。</p><p>访问<a href="http://ip:5000/v2/_catalog%E5%8F%AF%E4%BB%A5%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%A7%81%E6%9C%89%E9%95%9C%E5%83%8F%E6%9C%8D%E5%8A%A1%E4%B8%AD%E5%8C%85%E5%90%AB%E7%9A%84%E9%95%9C%E5%83%8F%E3%80%82">http://ip:5000/v2/_catalog可以查看当前私有镜像服务中包含的镜像。</a></p><h3 id="带有图形化界面版本"><a href="#带有图形化界面版本" class="headerlink" title="带有图形化界面版本"></a>带有图形化界面版本</h3><p>使用DockerCompose部署带有图形化界面的DockerRegistry，命令如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.0&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">registry:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">registry</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./registry-data:/var/lib/registry</span></span><br><span class="line">  <span class="attr">ui:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">joxit/docker-registry-ui:static</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8080</span><span class="string">:80</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">REGISTRY_TITLE=私有仓库</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">REGISTRY_URL=http://registry:5000</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">registry</span></span><br></pre></td></tr></table></figure><h3 id="配置Docker信任地址"><a href="#配置Docker信任地址" class="headerlink" title="配置Docker信任地址"></a>配置Docker信任地址</h3><p>私服采用的是http协议，默认不被Docker信任，需要做一个配置：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开要修改的文件</span></span><br><span class="line">vi /etc/docker/daemon.json</span><br><span class="line"><span class="comment"># 添加内容：</span></span><br><span class="line"><span class="string">&quot;insecure-registries&quot;</span>:[<span class="string">&quot;http://ip地址:8080&quot;</span>]</span><br><span class="line"><span class="comment"># 重加载</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line"><span class="comment"># 重启docker</span></span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><h3 id="推送、拉取镜像"><a href="#推送、拉取镜像" class="headerlink" title="推送、拉取镜像"></a>推送、拉取镜像</h3><p>推送镜像到私有镜像服务必须先tag，步骤如下：</p><ol><li>重新tag本地镜像，名称前缀为私有仓库的地址：ip地址:8080/</li></ol> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag nginx:latest ip地址:8080/nginx:1.0 </span><br></pre></td></tr></table></figure><ol start="2"><li>推送镜像</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push ip地址:8080/nginx:1.0 </span><br></pre></td></tr></table></figure><ol start="3"><li>拉取镜像</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ip地址:8080/nginx:1.0 </span><br></pre></td></tr></table></figure><hr><h1 id="Docker架构"><a href="#Docker架构" class="headerlink" title="Docker架构"></a>Docker架构</h1><h2 id="镜像和容器"><a href="#镜像和容器" class="headerlink" title="镜像和容器"></a>镜像和容器</h2><p><strong>镜像（Image）</strong>：Docker将应用程序及其所需的依赖、函数库、环境、配置等文件打包在一起，称为镜像。</p><p><strong>容器（Container）</strong>：镜像中的应用程序运行后形成的进程就是<strong>容器</strong>，Docker会给容器进程做隔离，对外不可见。</p><h2 id="DockerHub"><a href="#DockerHub" class="headerlink" title="DockerHub"></a>DockerHub</h2><p><a href="https://hub-stage.docker.com/">DockerHub</a>是一个官方的Docker镜像的托管平台。这样的平台称为Docker Registry。</p><p>一方面可以将自己的镜像共享到DockerHub，另一方面也可以从DockerHub拉取镜像。</p><h2 id="Docker结构"><a href="#Docker结构" class="headerlink" title="Docker结构"></a>Docker结构</h2><p>Docker是一个CS架构的程序，由两部分组成：</p><ul><li>服务端（server）：Docker守护进程，负责处理Docker指令，管理镜像、容器等</li><li>客户端（client）：通过命令或RestAPI向Docker服务端发送指令。可以在本地或远程向服务端发送指令。</li></ul><hr><h1 id="Docker基本操作"><a href="#Docker基本操作" class="headerlink" title="Docker基本操作"></a>Docker基本操作</h1><h2 id="镜像操作"><a href="#镜像操作" class="headerlink" title="镜像操作"></a>镜像操作</h2><h3 id="镜像名称"><a href="#镜像名称" class="headerlink" title="镜像名称"></a>镜像名称</h3><p>镜像的名称组成：</p><ul><li>镜名称一般分两部分组成：[repository]:[tag]。</li><li>在没有指定tag时，默认是latest，代表最新版本的镜像。<ul><li><code>mysql:5.7</code>，mysql就是repository，5.7就是tag，合一起就是镜像名称，代表5.7版本的MySQL镜像。</li></ul></li></ul><h3 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h3><p>常见的镜像操作命令如图：</p><img src="/2023/02/11/50597/image-20230211112233001.png" class="" title="镜像命令"><p>命令演示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">从DockerHub中拉取一个nginx镜像</span></span><br><span class="line">docker pull nginx</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看镜像</span></span><br><span class="line">docker images</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将镜像导出磁盘  docker save -o [保存的目标文件名称] [镜像名称]</span></span><br><span class="line">docker save -o nginx.tar nginx:latest</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除本地的nginx镜像</span></span><br><span class="line">docker rmi nginx:latest</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">加载本地文件</span></span><br><span class="line">docker load -i nginx.tar</span><br></pre></td></tr></table></figure><h2 id="容器操作"><a href="#容器操作" class="headerlink" title="容器操作"></a>容器操作</h2><h3 id="容器相关命令"><a href="#容器相关命令" class="headerlink" title="容器相关命令"></a>容器相关命令</h3><p>容器操作的命令如图：</p><img src="/2023/02/11/50597/image-20230211112233002.png" class="" title="容器命令"><p>容器的三个状态：</p><ul><li>运行：进程正常运行</li><li>暂停：进程暂停，CPU不再运行，并不释放内存</li><li>停止：进程终止，回收进程占用的内存、CPU等资源</li></ul><p>其中：</p><ul><li>docker run：创建并运行一个容器，处于运行状态</li><li>docker pause：让一个运行的容器暂停</li><li>docker unpause：让一个容器从暂停状态恢复运行</li><li>docker stop：停止一个运行的容器</li><li>docker start：让一个停止的容器再次运行</li><li>docker rm：删除一个容器</li></ul><p>命令演示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建并运行nginx容器</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker run ：创建并运行一个容器</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--name : 给容器起一个名字，比如叫做nginx01</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-p ：将宿主机端口与容器端口映射，冒号左侧是宿主机端口，右侧是容器端口</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-d：后台运行容器</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">nginx：镜像名称，例如nginx</span></span><br><span class="line">docker run --name containerName -p 80:80 -d nginx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入Nginx容器，修改HTML文件内容</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker <span class="built_in">exec</span> ：进入容器内部，执行一个命令</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-it : 给当前进入的容器创建一个标准输入、输出终端，允许与容器交互</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">nginx01 ：要进入的容器的名称</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">bash：进入容器后执行的命令，bash是一个linux终端交互命令</span></span><br><span class="line">docker exec -it nginx01 bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入nginx的HTML所在目录 /usr/share/nginx/html</span></span><br><span class="line">cd /usr/share/nginx/html</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">容器内没有vi命令，无法直接修改，可用下面的命令来修改</span></span><br><span class="line">sed -i -e &#x27;s#Welcome to nginx#欢迎欢迎#g&#x27; -e &#x27;s#&lt;head&gt;#&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;#g&#x27; index.html</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看nginx01容器日志的命令 -f参数可以持续查看日志</span></span><br><span class="line">docker logs -f nginx01 </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看所有容器，包括已经停止的</span></span><br><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><h2 id="数据卷（容器数据管理）"><a href="#数据卷（容器数据管理）" class="headerlink" title="数据卷（容器数据管理）"></a>数据卷（容器数据管理）</h2><p>数据卷（volume）是一个虚拟目录，指向宿主机文件系统中的某个目录。</p><p>一旦完成数据卷挂载，对容器的一切操作都会作用在数据卷对应的宿主机目录上。</p><p>可将容器与数据分离，解耦合，方便操作容器内数据，保证数据安全。</p><h3 id="数据集操作命令"><a href="#数据集操作命令" class="headerlink" title="数据集操作命令"></a>数据集操作命令</h3><p>数据卷操作的基本语法如下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume [COMMAND]</span><br></pre></td></tr></table></figure><p>docker volume命令是数据卷操作，根据命令后跟随的command来确定下一步的操作：</p><ul><li>create创建一个volume</li><li>inspect显示一个或多个volume的信息</li><li>ls列出所有的volume</li><li>prune删除未使用的volume</li><li>rm删除一个或多个指定的volume</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建数据卷</span></span><br><span class="line">docker volume create html</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看所有数据卷</span></span><br><span class="line">docker volume ls</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看数据卷详细信息</span></span><br><span class="line">docker volume inspect html</span><br></pre></td></tr></table></figure><h3 id="挂载数据卷"><a href="#挂载数据卷" class="headerlink" title="挂载数据卷"></a>挂载数据卷</h3><p>在创建容器时，可以通过<code>-v</code>参数来挂载一个数据卷到某个容器内目录，命令格式如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mn -v html:/root/html -p 8080:80 nginx </span><br></pre></td></tr></table></figure><p>这里的-v就是挂载数据卷的命令：</p><ul><li><code>-v html:/root/htm</code> ：将html数据卷挂载到容器内的/root/html目录中</li></ul><h3 id="挂载本地目录"><a href="#挂载本地目录" class="headerlink" title="挂载本地目录"></a>挂载本地目录</h3><p>容器不仅仅可以挂载数据卷，也可以直接挂载到宿主机目录上。</p><p>语法：</p><p>目录挂载与数据卷挂载的语法是类似的：</p><ul><li>-v [宿主机目录]:[容器内目录]</li><li>-v [宿主机文件]:[容器内文件]</li></ul><p>数据卷挂载与目录直接挂载的区别</p><ul><li>数据卷挂载耦合度低，由docker来管理目录，但是目录较深，不易查找</li><li>目录挂载耦合度高，需要自己管理目录，不过目录容易寻找查看</li></ul><hr><h1 id="Dockerfile自定义镜像"><a href="#Dockerfile自定义镜像" class="headerlink" title="Dockerfile自定义镜像"></a>Dockerfile自定义镜像</h1><h2 id="镜像结构"><a href="#镜像结构" class="headerlink" title="镜像结构"></a>镜像结构</h2><p>镜像是将应用程序及其需要的系统函数库、环境、配置、依赖打包而成。</p><p>简单来说，镜像就是在系统函数库、运行环境基础上，添加应用程序文件、配置文件、依赖文件等组合，然后编写好启动脚本打包在一起形成的文件。</p><h2 id="Dockerfile语法"><a href="#Dockerfile语法" class="headerlink" title="Dockerfile语法"></a>Dockerfile语法</h2><p>Dockerfile就是一个文本文件，其中包含一个个的指令(Instruction)，用指令来说明要执行什么操作来构建镜像。每一个指令都会形成一层Layer。</p><p>Dockerfile的第一行必须是FROM，从一个基础镜像来构建。</p><table><thead><tr><th align="center">指令</th><th align="center">说明</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center">FROM</td><td align="center">指定基础镜像</td><td align="center">FROM centos:6</td></tr><tr><td align="center">ENV</td><td align="center">设置环境变量，可在后面指令使用</td><td align="center">ENV key value</td></tr><tr><td align="center">COPY</td><td align="center">拷贝本地文件到镜像的指定目录</td><td align="center">COPY ./mysql-5.7.rpm /tmp</td></tr><tr><td align="center">RUN</td><td align="center">执行Linux的shell命令，一般是安装过程的命令</td><td align="center">RUN yum install gcc</td></tr><tr><td align="center">EXPOSE</td><td align="center">指定容器运行时监听的端口，是给镜像使用者看的</td><td align="center">EXPOSE 8080</td></tr><tr><td align="center">ENTRYPOINT</td><td align="center">镜像中应用的启动命令，容器运行时调用</td><td align="center">ENTRYPOINT java -jar xx.jar</td></tr></tbody></table><p>更新详细语法说明，请参考官网文档： <a href="https://docs.docker.com/engine/reference/builder" title="Dockerfile 参考">https://docs.docker.com/engine/reference/builder</a></p><h2 id="构建Java项目"><a href="#构建Java项目" class="headerlink" title="构建Java项目"></a>构建Java项目</h2><h3 id="基于Ubuntu构建Java项目"><a href="#基于Ubuntu构建Java项目" class="headerlink" title="基于Ubuntu构建Java项目"></a>基于Ubuntu构建Java项目</h3><p>Dockerfile文件内容：</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">16.04</span></span><br><span class="line"><span class="comment"># 配置环境变量，JDK的安装目录</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_DIR=/usr/local</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 拷贝jdk和java项目的包</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./jdk8.tar.gz <span class="variable">$JAVA_DIR</span>/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./docker-demo.jar /tmp/app.jar</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># 安装JDK</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">cd</span> <span class="variable">$JAVA_DIR</span> \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; tar -xf ./jdk8.tar.gz \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; <span class="built_in">mv</span> ./jdk1.8.0_144 ./java8</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># 配置环境变量</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_HOME=$JAVA_DIR/java8</span><br><span class="line"><span class="keyword">ENV</span> PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 暴露端口</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8090</span></span><br><span class="line"><span class="comment"># 入口，java项目的启动命令</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> java -jar /tmp/app.jar</span></span><br></pre></td></tr></table></figure><p>使用docker build命令构建镜像，<code>-t</code>为指定构建镜像的名字和版本：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t javaweb:1.0 .</span><br></pre></td></tr></table></figure><p>使用docker run创建容器并运行。</p><p>最后访问<a href="http://ip:8090/%E3%80%82">http://ip:8090/。</a></p><h3 id="基于java8构建Java项目"><a href="#基于java8构建Java项目" class="headerlink" title="基于java8构建Java项目"></a>基于java8构建Java项目</h3><p>基于java:8-alpine镜像，将一个Java项目构建为镜像。</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基于java:8-alpine作为基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> java:<span class="number">8</span>-alpine</span><br><span class="line"><span class="comment"># 将app.jar拷贝到镜像中</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./app.jar /tmp/app.jar</span></span><br><span class="line"><span class="comment"># 暴露端口</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8090</span></span><br><span class="line"><span class="comment"># 编写入口ENTRYPOINT</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> java -jar /tmp/app.jar</span></span><br></pre></td></tr></table></figure><p>使用docker build命令构建镜像。</p><p>使用docker run创建容器并运行。</p><p>最后访问<a href="http://ip:8090/%E3%80%82">http://ip:8090/。</a></p><hr><h1 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker-Compose"></a>Docker-Compose</h1><p>Docker Compose可以基于Compose文件快速的部署分布式应用，而无需手动一个个创建和运行容器。</p><h2 id="初识DockerCompose"><a href="#初识DockerCompose" class="headerlink" title="初识DockerCompose"></a>初识DockerCompose</h2><p>Compose文件是一个文本文件，通过指令定义集群中的每个容器如何运行。格式如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">nacos:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nacos/nacos-server</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MODE:</span> <span class="string">standalone</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8848:8848&quot;</span></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.7.25</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;$PWD/mysql/data:/var/lib/mysql&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;$PWD/mysql/conf:/etc/mysql/conf.d/&quot;</span></span><br><span class="line">  <span class="attr">userservice:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./user-service</span></span><br><span class="line">  <span class="attr">orderservice:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./order-service</span></span><br><span class="line">  <span class="attr">gateway:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./gateway</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;10010:10010&quot;</span></span><br></pre></td></tr></table></figure><p>其中包含5个service服务：</p><ul><li><code>nacos</code>：作为注册中心和配置中心<ul><li><code>image: nacos/nacos-server</code>： 基于nacos/nacos-server镜像构建</li><li><code>environment</code>：环境变量<ul><li><code>MODE: standalone</code>：单点模式启动</li></ul></li><li><code>ports</code>：端口映射，这里暴露了8848端口</li></ul></li><li><code>mysql</code>：数据库<ul><li><code>image: mysql:5.7.25</code>：镜像版本是mysql:5.7.25</li><li><code>environment</code>：环境变量<ul><li><code>MYSQL_ROOT_PASSWORD: 123</code>：设置数据库root账户的密码为root</li></ul></li><li><code>volumes</code>：数据卷挂载，挂载了mysql的data、conf目录</li></ul></li><li><code>userservice</code>、<code>orderservice</code>、<code>gateway</code>：都是基于Dockerfile临时构建的</li><li>docker容器之间互联不是通过IP地址，而是通过容器名。将order-service、user-service、gateway项目中的的mysql、nacos地址都修改为基于容器名的访问，如yml文件中的<code>url: jdbc:mysql://mysql:3306/cloud_order?useSSL=false</code>。</li></ul><p>DockerCompose的详细语法参考官网：<a href="https://docs.docker.com/compose/compose-file/" title="DockerCompose">https://docs.docker.com/compose/compose-file/</a></p><p>其实DockerCompose文件可以看做是将多个docker run命令写到一个文件，只是语法稍有差异。</p><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">后台的方式运行容器</span></span><br><span class="line">docker-compose up -d</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">停止运行的容器，并删除已停止的容器以及已创建的所有网络，添加-v参数可以删除所有卷。</span></span><br><span class="line">docker-compose down</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重启容器</span></span><br><span class="line">docker restart</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">停止容器</span></span><br><span class="line">docker-compose stop</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动容器</span></span><br><span class="line">docker-compose start</span><br></pre></td></tr></table></figure><p>注意事项：</p><ul><li><code>docker-compose up -d</code> 会停止并删除原有的镜像，并使用系统中原有的镜像，结合docker-compose.yml中的新配置来生成一个新的镜像，提供服务。</li><li><code>docker restart</code>，对容器进行重启。之前在docker容器中的临时修改，不会消失。docker会使用修改后的代码提供服务。但是，这种方式没有办法修改docker-compose中暴露的端口号，没有办法进行数据卷映射等操作。</li></ul><h2 id="常用例子"><a href="#常用例子" class="headerlink" title="常用例子"></a>常用例子</h2><div class="tabs" id="compose例子"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#compose例子-1">redis</button></li><li class="tab"><button type="button" data-href="#compose例子-2">rabbitmq</button></li><li class="tab"><button type="button" data-href="#compose例子-3">mysql</button></li><li class="tab"><button type="button" data-href="#compose例子-4">nacos</button></li><li class="tab"><button type="button" data-href="#compose例子-5">elasticsearch&kibana</button></li><li class="tab"><button type="button" data-href="#compose例子-6">xxl-job-admin</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="compose例子-1"><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis:5.0.7</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">redis</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">TZ=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">volumes:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/etc/localtime:/etc/localtime:ro&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;$PWD/conf/redis.conf:/usr/local/etc/redis/redis.conf:rw&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;$PWD/data:/data:rw&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">6379</span><span class="string">:6379</span></span><br><span class="line">    <span class="comment">#appendonly yes 开启redis 持久化 (配置文件中已配置)</span></span><br><span class="line">    <span class="comment">#command: redis-server /usr/local/etc/redis/redis.conf --appendonly yes</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">redis-server</span> <span class="string">/usr/local/etc/redis/redis.conf</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">mynet</span></span><br><span class="line"><span class="attr">networks:</span> </span><br><span class="line">  <span class="attr">mynet:</span></span><br><span class="line">  <span class="comment">#external：如果设置为 true，则指定此配置已 创建。Docker 不会尝试创建它，如果它不存在，则会发生错误。</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="compose例子-2"><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.7&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">rabbitmq1:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">rabbitmq:3.8.34-management</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">rabbitmq1</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">rabbitmq1</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">RABBITMQ_DEFAULT_USER=root</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">RABBITMQ_DEFAULT_PASS=root</span></span><br><span class="line">    <span class="attr">volumes:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/etc/localtime:/etc/localtime:ro&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">5672</span><span class="string">:5672</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">15672</span><span class="string">:15672</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">mynet</span></span><br><span class="line"><span class="attr">networks:</span> </span><br><span class="line">  <span class="attr">mynet:</span></span><br><span class="line">  <span class="comment">#external：如果设置为 true，则指定此配置已 创建。Docker 不会尝试创建它，如果它不存在，则会发生错误。</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="compose例子-3"><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;$PWD/data:/var/lib/mysql&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;$PWD/conf:/etc/mysql/conf.d/&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/etc/localtime:/etc/localtime:ro&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;3306:3306&quot;</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">mynet</span></span><br><span class="line"><span class="attr">networks:</span> </span><br><span class="line">  <span class="attr">mynet:</span></span><br><span class="line">  <span class="comment">#external：如果设置为 true，则指定此配置已 创建。Docker 不会尝试创建它，如果它不存在，则会发生错误。</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="compose例子-4"><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.7&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">nacos:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nacos/nacos-server</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">nacos-server</span></span><br><span class="line">    <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">JVM_XMS=256m</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">JVM_XMX=256m</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MODE=standalone</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">PREFER_HOST_MODE=hostname</span></span><br><span class="line">    <span class="attr">volumes:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/etc/localtime:/etc/localtime:ro&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$PWD/logs:/home/nacos/logs</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$PWD/conf/application.properties:/home/nacos/conf/application.properties</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8848</span><span class="string">:8848</span></span><br><span class="line">    <span class="attr">networks:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">mynet</span></span><br><span class="line"><span class="attr">networks:</span> </span><br><span class="line">  <span class="attr">mynet:</span></span><br><span class="line">  <span class="comment">#external：如果设置为 true，则指定此配置已 创建。Docker 不会尝试创建它，如果它不存在，则会发生错误。</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="compose例子-5"><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.7&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">elasticsearch:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">elasticsearch:7.12.1</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">elasticsearch</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">bootstrap.memory_lock=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">http.cors.enabled=true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">http.cors.allow-origin=*</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;discovery.type=single-node&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span></span><br><span class="line">    <span class="attr">ulimits:</span></span><br><span class="line">      <span class="attr">memlock:</span></span><br><span class="line">        <span class="attr">soft:</span> <span class="number">-1</span></span><br><span class="line">        <span class="attr">hard:</span> <span class="number">-1</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$PWD/plugins:/usr/share/elasticsearch/plugins</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/etc/localtime:/etc/localtime:ro&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">9200</span><span class="string">:9200</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">9300</span><span class="string">:9300</span></span><br><span class="line">    <span class="attr">networks:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">mynet</span></span><br><span class="line">  <span class="attr">kibana:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">kibana:7.12.1</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">kibana</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">SERVER_NAME=kibana</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ELASTICSEARCH_URL=http://elasticsearch:9200</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">XPACK_MONITORING_ENABLED=true</span></span><br><span class="line">    <span class="attr">volumes:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/etc/localtime:/etc/localtime:ro&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">5601</span><span class="string">:5601</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">elasticsearch</span></span><br><span class="line">    <span class="attr">external_links:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">elasticsearch</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">mynet</span></span><br><span class="line"><span class="attr">networks:</span> </span><br><span class="line">  <span class="attr">mynet:</span></span><br><span class="line">  <span class="comment">#external：如果设置为 true，则指定此配置已 创建。Docker 不会尝试创建它，如果它不存在，则会发生错误。</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="compose例子-6"><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">xxl-job-admin:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">xuxueli/xxl-job-admin:2.3.1</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">xxl-job-admin</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">PARAMS:</span> <span class="string">&quot;--spring.config.loation=/application.properties&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8088:8080&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/etc/localtime:/etc/localtime:ro&quot;</span></span><br><span class="line">    <span class="comment">#$PWD/  $PWD是一个变量,它是系统自定义的变量,他的值是当下的绝对路径</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;$PWD/application.properties:/application.properties&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;$PWD/applogs:/data/applogs&quot;</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">mynet</span></span><br><span class="line"><span class="attr">networks:</span> </span><br><span class="line">  <span class="attr">mynet:</span></span><br><span class="line">  <span class="comment">#external：如果设置为 true，则指定此配置已 创建。Docker 不会尝试创建它，如果它不存在，则会发生错误。</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git的使用</title>
      <link href="/2023/02/08/6724.html"/>
      <url>/2023/02/08/6724.html</url>
      
        <content type="html"><![CDATA[<h1 id="版本控制器"><a href="#版本控制器" class="headerlink" title="版本控制器"></a>版本控制器</h1><h2 id="集中式版本控制工具"><a href="#集中式版本控制工具" class="headerlink" title="集中式版本控制工具"></a>集中式版本控制工具</h2><p>集中式版本控制工具，版本库是集中存放在中央服务器的，团队里每个人工作时从中央服务器下载代码，是必须联网才能工作，包括局域网或互联网。个人修改后提交到中央版本库。<br>常见的有SVN和CVS。</p><h2 id="分布式版本控制工具"><a href="#分布式版本控制工具" class="headerlink" title="分布式版本控制工具"></a>分布式版本控制工具</h2><p>分布式版本控制系统没有中央服务器，每个人的电脑上都是一个完整的版本库，工作的时候，无需要联网，因为版本库就在个人的电脑上。多人协作只需要将各自的修改推送给对方，即可互相看到对方的修改内容。<br>常见的有Git。</p><h1 id="Git介绍"><a href="#Git介绍" class="headerlink" title="Git介绍"></a>Git介绍</h1><p>Git是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理。</p><p>下图为Git工作流程图：</p><img src="/2023/02/08/6724/image-20230208231034408.png" class="" title="Git工作流程图"><p>命令如下：</p><table><thead><tr><th align="center">命令</th><th align="center">功能</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>clone</code></td><td align="center">克隆</td><td align="center">从远程仓库中克隆代码到本地仓库</td></tr><tr><td align="center"><code>checkout</code></td><td align="center">检出</td><td align="center">从本地仓库中检出一个仓库分支然后进行修订</td></tr><tr><td align="center"><code>add</code></td><td align="center">添加</td><td align="center">在提交前先将代码提交到暂存区</td></tr><tr><td align="center"><code>commit</code></td><td align="center">提交</td><td align="center">提交到本地仓库。本地仓库中保存修改的各个历史版本</td></tr><tr><td align="center"><code>fetch </code></td><td align="center">抓取</td><td align="center">从远程库抓取到本地库，不进行任何的合并动作，一般操作比较少。</td></tr><tr><td align="center"><code>pull </code></td><td align="center">拉取</td><td align="center">从远程库拉拉取本地库，自动进行合并（merge），然后放到工作区。<br/>相当于 <code>fetch+merge</code></td></tr><tr><td align="center"><code>push</code></td><td align="center">推送</td><td align="center">修改完成后，将代码推送到远程仓库</td></tr></tbody></table><h1 id="Git安装与常用命令"><a href="#Git安装与常用命令" class="headerlink" title="Git安装与常用命令"></a>Git安装与常用命令</h1><h2 id="下载与安装"><a href="#下载与安装" class="headerlink" title="下载与安装"></a>下载与安装</h2><p>下载地址：<a href="https://git-scm.com/downloads" title="git下载地址">https://git-scm.com/downloads</a></p><p>下载完成后可以得到安装文件，双击下载的安装文件，安装Git。</p><p>安装完成后在电脑桌面（也可以是其他目录）点击右键，如果能够看到如下两个菜单则说明Git安装成功</p><ul><li><code>Git GUI Here</code>：Git提供的图形界面工具</li><li><code>Git Bash Here</code>：Git提供的命令行工具</li></ul><h2 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h2><p>在使用 Git 管理文件系统的时候，需要进行一些配置，比如用户信息的配置（每次Git提交都会使用该用户信息）。<br>Git管理文件系统主要分为三个层次，优先级<strong>local&gt;global&gt;system</strong>，也就是说当对一个仓库同时设置了global和local，那么采用local配置的信息。</p><ol><li>设置用户信息</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &#x27;your_name &#x27; </span><br><span class="line">git config --global user.email &#x27;your_email@domain.com&#x27;</span><br></pre></td></tr></table></figure><ol start="2"><li>查看配置信息</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看指定配置信息</span></span><br><span class="line">git config --global user.name </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看所有配置信息</span></span><br><span class="line">git config --list</span><br><span class="line">git config --list --global</span><br></pre></td></tr></table></figure><ol start="3"><li>清除配置信息</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --unset --local user.name</span><br><span class="line">git config --unset --global user.name</span><br></pre></td></tr></table></figure><h2 id="常用指令配置别名"><a href="#常用指令配置别名" class="headerlink" title="常用指令配置别名"></a>常用指令配置别名</h2><p>有些常用的指令参数非常多，每次都需输入好多参数，可以为指令配置别名。</p><ol><li><p>打开用户目录，创建<code>.bashrc</code>文件（打开Git Bash，执行<code>touch ~/.bashrc</code>）</p></li><li><p>在 <code>.bashrc</code>文件中输入如下内容</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#用于输出git提交日志</span></span><br><span class="line"><span class="built_in">alias</span> git-log=<span class="string">&#x27;git log --pretty=oneline --all --graph --abbrev-commit&#x27;</span></span><br><span class="line"><span class="comment">#用于输出当前目录所有文件及基本信息</span></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">&#x27;ls -al&#x27;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>打开Git Bash，执行<code>source ~/.bashrc</code></li></ol><h2 id="解决Git-Bash乱码问题"><a href="#解决Git-Bash乱码问题" class="headerlink" title="解决Git Bash乱码问题"></a>解决Git Bash乱码问题</h2><ol><li>打开Git Bash执行下面命令</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.quotepath false</span><br></pre></td></tr></table></figure><ol start="2"><li><code>$&#123;git_home&#125;/etc/bash.bashrc</code>文件最后加入下面两行</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> LANG=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line"><span class="built_in">export</span> LC_ALL=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br></pre></td></tr></table></figure><h2 id="获取本地仓库"><a href="#获取本地仓库" class="headerlink" title="获取本地仓库"></a>获取本地仓库</h2><p>要使用Git对代码进行版本控制，首先需获得本地仓库</p><ol><li>在电脑的任意位置创建一个空目录作为本地Git仓库</li><li>进入这个目录中，点击右键打开Git Bash窗口</li><li>执行命令<code>git init</code></li><li>如果创建成功后可在文件夹下看到隐藏的.git目录</li></ol><h2 id="基础操作指令"><a href="#基础操作指令" class="headerlink" title="基础操作指令"></a>基础操作指令</h2><p>Git工作目录下对于文件的修改（增加、删除、更新）会存在几个状态，这些修改的状态会随着执行Git的命令而发生变化。</p><img src="/2023/02/08/6724/image-20230208232038541.png" class="" title="Git状态"><h3 id="查看修改的状态"><a href="#查看修改的状态" class="headerlink" title="查看修改的状态"></a>查看修改的状态</h3><p>作用：查看修改的状态（暂存区、工作区）<br>命令形式：<code>git status</code></p><h3 id="添加工作区到暂存区"><a href="#添加工作区到暂存区" class="headerlink" title="添加工作区到暂存区"></a>添加工作区到暂存区</h3><p>作用：添加工作区一个或多个文件的修改到暂存区<br>命令形式：<code>git add 单个文件名|通配符</code><br>如将所有修改加入暂存区：<code>git add .</code></p><h3 id="提交暂存区到本地仓库"><a href="#提交暂存区到本地仓库" class="headerlink" title="提交暂存区到本地仓库"></a>提交暂存区到本地仓库</h3><p>作用：提交暂存区内容到本地仓库的当前分支<br>命令形式：<code>git commit -m &#39;注释内容&#39;</code></p><h3 id="查看提交日志"><a href="#查看提交日志" class="headerlink" title="查看提交日志"></a>查看提交日志</h3><p>作用：查看提交记录<br>命令形式：<code>git log [option]</code><br>完整命令：<code>git log --pretty=oneline --all --graph --abbrev-commit</code><br>可用的options参数</p><ul><li><code>--all</code>显示所有分支</li><li><code>--pretty=oneline</code>将提交信息显示为一行</li><li><code>--abbrev-commit</code>使得输出的commitId更简短</li><li><code>--graph</code>以图的形式显示</li></ul><h3 id="版本回退"><a href="#版本回退" class="headerlink" title="版本回退"></a>版本回退</h3><p>作用：版本切换<br>命令形式：<code>git reset --hard commitID</code><br><code>commitID</code>可以使用git日志指令查看</p><h3 id="误删恢复"><a href="#误删恢复" class="headerlink" title="误删恢复"></a>误删恢复</h3><p>作用：查看所有分支的所有操作记录（包括已经被删除的 commit 记录和 reset 的操作）<br>命令形式：<code>git reflog</code><br>这个指令可以看到已经删除的提交记录</p><h3 id="添加文件至忽略列表"><a href="#添加文件至忽略列表" class="headerlink" title="添加文件至忽略列表"></a>添加文件至忽略列表</h3><p>一般会有些文件无需纳入Git的管理，也不希望它们总出现在未跟踪文件列表。 </p><p>通常都是些自动生成的文件，比如日志文件，或者编译过程中创建的临时文件等。 </p><p>在这种情况下，可在工作目录中创建一个名为<code>.gitignore </code>的文件（文件名称固定），列出要忽略的文件模式。</p><p>下面是一个示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># no .a files 忽略所有以.a结尾的文件</span><br><span class="line">*.a</span><br><span class="line"></span><br><span class="line"># but do track lib.a, even though you&#x27;re ignoring .a files above</span><br><span class="line"># 仍然会追踪lib.a文件，即使上面的设置是忽略.a结尾的文件</span><br><span class="line">!lib.a</span><br><span class="line"></span><br><span class="line"># only ignore the TODO file in the current directory, not subdir/TODO</span><br><span class="line">#只忽略当前目录的TODO文件，不会影响/TODO这样的子目录</span><br><span class="line">/TODO</span><br><span class="line"></span><br><span class="line"># ignore all files in the build/ directory 忽略所有在build目录中的文件</span><br><span class="line">build/</span><br><span class="line"></span><br><span class="line"># ignore doc/notes.txt, but not doc/server/arch.txt</span><br><span class="line">#表示会忽略doc目录下的所有.txt结尾的文件，但是不会忽略doc目录子目录中的.txt文件</span><br><span class="line">doc/*.txt</span><br><span class="line"></span><br><span class="line"># ignore all .pdf files in the doc/ directory</span><br><span class="line"># 忽略所有doc目录下的.pdf结尾的文件</span><br><span class="line">doc/**/*.pdf</span><br></pre></td></tr></table></figure><h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><p>几乎所有的版本控制系统都以某种形式支持分支。 使用分支意味着可以把工作从开发主线上分离开，进行重大的Bug修改、开发新的功能，以免影响开发主线。</p><h3 id="查看本地分支"><a href="#查看本地分支" class="headerlink" title="查看本地分支"></a>查看本地分支</h3><p>命令：<code>git branch</code></p><h3 id="创建本地分支"><a href="#创建本地分支" class="headerlink" title="创建本地分支"></a>创建本地分支</h3><p>命令：<code>git branch 分支名</code></p><h3 id="切换分支"><a href="#切换分支" class="headerlink" title="切换分支"></a>切换分支</h3><p>命令：<code>git checkout 分支名</code><br>还可以直接切换到一个不存在的分支（创建并切换）<br>命令：<code>git checkout -b 分支名</code></p><h3 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h3><p>一个分支上的提交可以合并到另一个分支<br>命令：<code>git merge 分支名称</code></p><h3 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h3><p>不能删除当前分支，只能删除其他分支<br><code>git branch -d b1</code>删除分支时，需要做各种检查<br><code>git branch -D b1</code>不做任何检查，强制删除</p><h3 id="解决冲突"><a href="#解决冲突" class="headerlink" title="解决冲突"></a>解决冲突</h3><p>当两个分支对文件的修改可能会存在冲突，例如同时修改了同一个文件的同一行，这时就需要手动解决冲突，解决冲突步骤如下：</p><ol><li>处理文件中冲突的地方</li><li>将解决完冲突的文件加入暂存区（add）</li><li>提交到仓库（commit）</li></ol><h3 id="开发中分支使用原则与流程"><a href="#开发中分支使用原则与流程" class="headerlink" title="开发中分支使用原则与流程"></a>开发中分支使用原则与流程</h3><p>在开发中，一般有如下分支使用原则与流程：</p><ul><li>master（生产）分支<ul><li>线上分支，主分支，中小规模项目作为线上运行的应用对应的分支</li></ul></li><li>develop（开发）分支<ul><li>是从master创建的分支，一般作为开发部门的主要开发分支，如果没有其他并行开发不同期上线要求，都可以在此版本进行开发，阶段开发完成后，需要是合并到master分支，准备上线。</li></ul></li><li>feature/xxxx分支<ul><li>从develop创建的分支，一般是同期并行开发，但不同期上线时创建的分支，分支上的研发任务完成后合到develop分支。</li></ul></li><li>hotfix/xxxx分支<ul><li>从master派生的分支，一般作为线上bug修复使用，修复完成后需要合并到master、test、develop分支。</li></ul></li><li>还有一些其他分支，例如test分支（用于代码测试）、pre分支（预上线分支）等。</li></ul><h1 id="Git远程仓库"><a href="#Git远程仓库" class="headerlink" title="Git远程仓库"></a>Git远程仓库</h1><h2 id="常用的托管服务-远程仓库"><a href="#常用的托管服务-远程仓库" class="headerlink" title="常用的托管服务[远程仓库]"></a>常用的托管服务[远程仓库]</h2><p>可以借助互联网上提供的一些代码托管服务来实现仓库，其中比较常用的有GitHub、Gitee、GitLab等。</p><p><a href="https://github.com/" title="GitHub地址">GitHub</a>是一个面向开源及私有软件项目的托管平台，因为只支持Git作为唯一的版本库格式进行托管，故名GitHub。<br><a href="https://gitee.com/" title="Gitee地址">Gitee</a>是国内的一个代码托管平台，也叫码云，由于服务器在国内，所以相比于GitHub，码云速度会更快。<br><a href="https://about.gitlab.com/" title="GitLab地址">GitLab</a>是一个用于仓库管理系统的开源项目，使用Git作为代码管理工具，并在此基础上搭建起来的web服务，一般用于在企业、学校等内部网络搭建git私服。</p><h2 id="配置SSH公钥"><a href="#配置SSH公钥" class="headerlink" title="配置SSH公钥"></a>配置SSH公钥</h2><h3 id="生成SSH公钥"><a href="#生成SSH公钥" class="headerlink" title="生成SSH公钥"></a>生成SSH公钥</h3><p>终端中输入以下命令生成私钥和公钥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在~/.ssh/目录下生成两个文件，不指定文件名和密钥类型的时候，默认生成的两个文件是：id_rsa和id_rsa.pub</span></span><br><span class="line">ssh-keygen -t rsa -C &#x27;注释内容&#x27;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">也可指定密钥文件的文件名</span></span><br><span class="line">ssh-keygen -t rsa -C &#x27;注释内容&#x27; -f ~/.ssh/github_id_rsa</span><br></pre></td></tr></table></figure><p>其中一个带有 <code>.pub</code> 扩展名， <code>.pub</code> 文件是公钥，另一个则是与之对应的私钥。如果公钥已经存在，则自动覆盖。</p><blockquote><p>默认情况下，GitHub 支持的公钥的文件名为以下文件名之一。</p><blockquote><p>id_rsa.pub<br>id_ecdsa.pub<br>id_ed25519.pub</p></blockquote></blockquote><p>如果使用其他名称创建了密钥，或者要添加具有不同名称的现有密钥，需将密钥添加到ssh代理以管理密钥。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">start the ssh-agent <span class="keyword">in</span> the background</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">eval</span> <span class="string">&quot;<span class="subst">$(ssh-agent -s)</span>&quot;</span></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Agent pid 59566</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ssh-add ~/.ssh/id_ed25519</span></span><br></pre></td></tr></table></figure><h3 id="设置账户共公钥"><a href="#设置账户共公钥" class="headerlink" title="设置账户共公钥"></a>设置账户共公钥</h3><p>若要将帐户配置为新的（或现有）SSH 密钥，还需要将密钥添加到帐户。<br>打开GitHub账户头像–&gt;Settings–&gt;SSH and GPG keys–&gt;点击【New SSH Key】。<br>将生成的public key添加到当前账户中。</p><h3 id="验证是否配置成功"><a href="#验证是否配置成功" class="headerlink" title="验证是否配置成功"></a>验证是否配置成功</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ssh -T git@github.com</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Hi xxx! You<span class="string">&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span></span></span><br></pre></td></tr></table></figure><h2 id="操作远程仓库"><a href="#操作远程仓库" class="headerlink" title="操作远程仓库"></a>操作远程仓库</h2><h3 id="添加远程仓库"><a href="#添加远程仓库" class="headerlink" title="添加远程仓库"></a>添加远程仓库</h3><p>此操作是先初始化本地库，然后与已创建的远程库进行对接。<br>命令： git remote add &lt;远端名称&gt; &lt;仓库路径&gt;</p><ul><li>远端名称，默认是origin，取决于远端服务器设置</li><li>仓库路径，从远端服务器获取此URL</li><li>例如：<code>git remote add origin git@github.com:wenwenmidgard/test.git</code></li></ul><h3 id="查看远程仓库"><a href="#查看远程仓库" class="headerlink" title="查看远程仓库"></a>查看远程仓库</h3><p>命令：git remote</p><h3 id="推送到远程仓库"><a href="#推送到远程仓库" class="headerlink" title="推送到远程仓库"></a>推送到远程仓库</h3><p>命令：git push [-f] [–set-upstream] [远端名称 [本地分支名][:远端分支名] ]</p><ul><li>如果远程分支名和本地分支名称相同，则可以只写本地分支<ul><li><code>git push origin master</code></li></ul></li><li><code>-f</code>表示强制覆盖</li><li><code>--set-upstream</code>推送到远端的同时并且建立起和远端分支的关联关系。<ul><li><code>git push --set-upstream origin master</code></li></ul></li><li>如果当前分支已经和远端分支关联，则可以省略分支名和远端名。<ul><li>git push </li></ul></li></ul><h3 id="本地分支与远程分支的关联关系"><a href="#本地分支与远程分支的关联关系" class="headerlink" title="本地分支与远程分支的关联关系"></a>本地分支与远程分支的关联关系</h3><p>查看关联关系可使用<code>git branch -vv</code>命令</p><h3 id="从远程仓库克隆"><a href="#从远程仓库克隆" class="headerlink" title="从远程仓库克隆"></a>从远程仓库克隆</h3><p>如果已经有一个远端仓库，可直接clone到本地。<br>命令: git clone &lt;仓库路径&gt; [本地目录]</p><ul><li>本地目录可以省略，会自动生成一个目录</li></ul><h3 id="从远程仓库中抓取和拉取"><a href="#从远程仓库中抓取和拉取" class="headerlink" title="从远程仓库中抓取和拉取"></a>从远程仓库中抓取和拉取</h3><p>远程分支和本地的分支一样，可进行merge操作，只是需要先把远端仓库里的更新都下载到本地，再进行操作。</p><p>抓取命令：git fetch [remote name] [branch name]</p><ul><li>抓取指令就是将仓库里的更新都抓取到本地，不会进行合并</li><li>如果不指定远端名称和分支名，则抓取所有分支。</li></ul><p>拉取命令：git pull [remote name] [branch name]</p><ul><li>拉取指令就是将远端仓库的修改拉到本地并自动进行合并，等同于fetch+merge</li><li>如果不指定远端名称和分支名，则抓取所有并更新当前分支。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven高级篇</title>
      <link href="/2023/02/06/54939.html"/>
      <url>/2023/02/06/54939.html</url>
      
        <content type="html"><![CDATA[<h1 id="分模块开发与设计"><a href="#分模块开发与设计" class="headerlink" title="分模块开发与设计"></a>分模块开发与设计</h1><p>将项目按功能或模块进行拆分，分模块对项目进行开发。</p><p>好处：降低耦合，方便团队协作</p><p>分模块开发注意事项</p><ul><li>模块中仅包含当前模块对应的功能类与配置文件</li><li>spring核心配置根据模块功能不同进行独立制作</li><li>当前模块所依赖的模块通过导入坐标的形式引入</li><li>web.xml需要加载所有的spring核心配置文件</li></ul><hr><h1 id="聚合"><a href="#聚合" class="headerlink" title="聚合"></a>聚合</h1><p>作用：聚合用于快速构建maven工程，一次性构建多个项目/模块。</p><p>制作方式：</p><ul><li>创建一个空模块，打包类型定义为<code>pom</code></li><li>定义当前模块进行构建操作时关联的其他模块名称</li></ul><p>注意事项：参与聚合操作的模块最终执行顺序与模块间的依赖关系有关，与配置顺序无关</p><p>完整pom文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xxx<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--定义该工程用于进行构建管理--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--管理的工程列表--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--具体的工程名称--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>../ssm_controller<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>../ssm_service<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>../ssm_dao<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>../ssm_pojo<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h1 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h1><p>作用：通过继承可以实现子工程使用父工程中的配置</p><p>创建方式：</p><ul><li>在父工程中定义依赖管理</li><li>在所有子工程中定义依赖的父类工程坐标与位置</li><li>在子工程中定义依赖关系，无需声明依赖版本，版本参照父工程中依赖的版本</li></ul><p>部分父pom文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xxx<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--定义该工程用于进行构建管理--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--管理的工程列表--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--具体的工程名称--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>../ssm_controller<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--声明此处进行依赖管理--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--具体的依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--spring环境--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>部分子pom文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--定义该工程的父工程--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xxx<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--填写父工程的pom文件--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../ssm/pom.xml<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xxx<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_controller<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring环境--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>可继承的父类资源</p><table><thead><tr><th align="center">名称</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center"><code>groupId</code></td><td align="center">项目组ID，项目坐标的核心元素</td></tr><tr><td align="center"><strong><code>version</code></strong></td><td align="center">项目版本，项目坐标的核心因素</td></tr><tr><td align="center"><code>description</code></td><td align="center">项目的描述信息</td></tr><tr><td align="center"><code>organization</code></td><td align="center">项目的组织信息</td></tr><tr><td align="center"><code>inceptionYear</code></td><td align="center">项目的创始年份</td></tr><tr><td align="center"><code>url</code></td><td align="center">项目的URL地址</td></tr><tr><td align="center"><code>developers</code></td><td align="center">项目的开发者信息</td></tr><tr><td align="center"><code>contributors</code></td><td align="center">项目的贡献者信息</td></tr><tr><td align="center"><code>distributionManagement</code></td><td align="center">项目的部署配置</td></tr><tr><td align="center"><code>issueManagement</code></td><td align="center">项目的缺陷跟踪系统信息</td></tr><tr><td align="center"><code>ciManagement</code></td><td align="center">项目的持续集成系统信息</td></tr><tr><td align="center"><code>scm</code></td><td align="center">项目的版本控制系统西溪</td></tr><tr><td align="center"><code>malilingLists</code></td><td align="center">项目的邮件列表信息</td></tr><tr><td align="center"><code>properties</code></td><td align="center">自定义的Maven属性</td></tr><tr><td align="center"><code>dependencies</code></td><td align="center">项目的依赖配置</td></tr><tr><td align="center"><strong><code>dependencyManagement</code></strong></td><td align="center">项目的依赖管理配置</td></tr><tr><td align="center"><code>repositories</code></td><td align="center">项目的仓库配置</td></tr><tr><td align="center"><code>build</code></td><td align="center">包括项目的源码目录配置、输出目录配置、插件配置、插件管理配置等</td></tr><tr><td align="center"><code>reporting</code></td><td align="center">包括项目的报告输出目录配置、报告插件配置等</td></tr></tbody></table><hr><h1 id="继承与聚合的区别"><a href="#继承与聚合的区别" class="headerlink" title="继承与聚合的区别"></a>继承与聚合的区别</h1><p>作用：</p><ul><li>聚合：用于快速构建项目</li><li>继承：用于快速配置项目</li></ul><p>相同点：</p><ul><li>聚合与继承的pom.xml文件打包方式均为pom，可以将两种关系制作到同一个pom.xml文件中</li><li>聚合与继承均属于设计型模块，并无实际的模块内容</li></ul><p>不同点：</p><ul><li>聚合是在当前模块中配置关系，聚合可以感知参与聚合的模块有哪些</li><li>继承是在子模块中配置关系，父模块无法感知哪些子模块继承了自己</li></ul><hr><h1 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h1><p>属性分类5大类：</p><ul><li>自定义属性</li><li>内置属性</li><li>Setting属性</li><li>Java系统属性</li><li>环境变量属性</li></ul><h2 id="自定义属性"><a href="#自定义属性" class="headerlink" title="自定义属性"></a>自定义属性</h2><p>作用：等同于定义变量，方便统一维护</p><p>定义格式：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--定义自定义属性--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">junit.version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">junit.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><p>调用格式：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="内置属性"><a href="#内置属性" class="headerlink" title="内置属性"></a>内置属性</h2><p>作用：使用maven内置属性，快速配置</p><p>调用格式：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$&#123;basedir&#125;或 $&#123;object.basedir&#125;：读取基础路径</span><br><span class="line">$&#123;version&#125; 或 $&#123;object.version&#125; = $&#123;project.version&#125;：读取当前工程版本信息</span><br></pre></td></tr></table></figure><h2 id="Setting属性"><a href="#Setting属性" class="headerlink" title="Setting属性"></a>Setting属性</h2><p>作用：使用Maven配置文件setting.xml中的标签属性，用于动态配置</p><p>调用格式：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;settings.localRepository&#125;</span><br></pre></td></tr></table></figure><h2 id="Java系统属性"><a href="#Java系统属性" class="headerlink" title="Java系统属性"></a>Java系统属性</h2><p>作用：读取Java系统属性</p><p>调用格式：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;user.home&#125;</span><br></pre></td></tr></table></figure><p>系统属性查询方式：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn help:system</span><br></pre></td></tr></table></figure><h2 id="环境变量属性"><a href="#环境变量属性" class="headerlink" title="环境变量属性"></a>环境变量属性</h2><p>作用：读取操作系统中的环境变量</p><p>调用格式：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;env.JAVA_HOME&#125;</span><br></pre></td></tr></table></figure><p>环境变量属性查询方式：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn help:system </span><br></pre></td></tr></table></figure><hr><h1 id="版本管理"><a href="#版本管理" class="headerlink" title="版本管理"></a>版本管理</h1><ul><li>SNAPSHOT（快照版本）：开发中的版本，或测试版本。</li><li>RELEASE（发布版本）：已经开发完上线的版本。</li></ul><p>工程版本号约定规范：</p><ul><li>主版本.次版本.增量版本.里程碑版本<ul><li>主版本：项目重大架构的变更</li><li>次版本：较大功能的增加和变化，或者全面修复系统漏洞</li><li>增量版本：表示有重大漏洞修复</li><li>里程碑版本：表名一个版本的里程碑（版本内部）。这一的版本同下一个正式版本相比，相对很不稳定，有待更多的测试。</li></ul></li><li>示例：6.0.7.RELEASE</li></ul><hr><h1 id="多配置文件统一管理"><a href="#多配置文件统一管理" class="headerlink" title="多配置文件统一管理"></a>多配置文件统一管理</h1><p>作用：在任意配置文件中加载pom文件中定义的属性</p><p>配置方式：</p><ol><li>在pom文件中设定配置文件路径</li><li>开启加载pom属性过滤功能</li><li>在pom文件中设定属性</li><li>在任意配置文件中使用<code>$&#123;xxx.属性&#125;</code>格式引用pom属性</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">junit.version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">junit.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jdbc.url</span>&gt;</span>jdbc:mysql://127.0.0.1:3306/ssm_db<span class="tag">&lt;/<span class="name">jdbc.url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置资源文件对应的信息--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--设定配置文件对应的位置目录，支持使用属性动态设定路径--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;project.basedir&#125;/src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--开启对配置文件的资源加载过滤--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在<code>/src/main/resources/jdbc.properties</code>文件中引入pom属性</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">$&#123;jdbc.url&#125;</span></span><br></pre></td></tr></table></figure><hr><h1 id="多环境开发配置"><a href="#多环境开发配置" class="headerlink" title="多环境开发配置"></a>多环境开发配置</h1><h2 id="多环境配置"><a href="#多环境配置" class="headerlink" title="多环境配置"></a>多环境配置</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--创建多环境--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--定义具体的环境：生产环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--定义环境对应的唯一名称--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>production_env<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--定义环境中专用的属性值--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jdbc.url</span>&gt;</span>jdbc:mysql://127.1.1.1:3306/ssm_db<span class="tag">&lt;/<span class="name">jdbc.url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--定义具体的环境：开发环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>development_env<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        ……</span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--定义具体的环境：测试环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>testing_env<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        ……</span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="加载指定环境"><a href="#加载指定环境" class="headerlink" title="加载指定环境"></a>加载指定环境</h2><p>作用：加载指定环境配置</p><p>调用格式</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">格式</span></span><br><span class="line">mvn 指令 -P 环境定义id</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">范例</span></span><br><span class="line">mvn install -P development_env</span><br></pre></td></tr></table></figure><h2 id="设置默认启动环境"><a href="#设置默认启动环境" class="headerlink" title="设置默认启动环境"></a>设置默认启动环境</h2><p>设置默认启动，若当前环境为常用环境，可以将其设置为默认启动项，这样，在执行命令的时候就无需指定环境</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 某个环境 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置默认启动--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h1 id="跳过测试"><a href="#跳过测试" class="headerlink" title="跳过测试"></a>跳过测试</h1><h2 id="跳过测试环节的应用场景"><a href="#跳过测试环节的应用场景" class="headerlink" title="跳过测试环节的应用场景"></a>跳过测试环节的应用场景</h2><ul><li>整体模块功能未开发</li><li>模块中某个功能未开发完毕</li><li>单个功能更新调试导致其他功能失败</li><li>快速打包</li></ul><h2 id="使用命令跳过测试"><a href="#使用命令跳过测试" class="headerlink" title="使用命令跳过测试"></a>使用命令跳过测试</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn install -D skipTests</span><br></pre></td></tr></table></figure><p>注意事项：执行的指令生命周期必须包含测试环节</p><h2 id="使用配置跳过测试"><a href="#使用配置跳过测试" class="headerlink" title="使用配置跳过测试"></a>使用配置跳过测试</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">skipTests</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skipTests</span>&gt;</span><span class="comment">&lt;!--设置跳过测试--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span> <span class="comment">&lt;!--包含指定的测试用例--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/User*Test.java<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">excludes</span>&gt;</span><span class="comment">&lt;!--排除指定的测试用例--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/User*TestCase.java<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="使用IDEA跳过测试"><a href="#使用IDEA跳过测试" class="headerlink" title="使用IDEA跳过测试"></a>使用IDEA跳过测试</h2><img src="/2023/02/06/54939/image-20230425123456231.png" class="" title="使用IDEA跳过测试"><hr><h1 id="私服"><a href="#私服" class="headerlink" title="私服"></a>私服</h1><h2 id="Nexus私服"><a href="#Nexus私服" class="headerlink" title="Nexus私服"></a>Nexus私服</h2><p>Nexus是Sonatype公司的一款maven私服。</p><p>下载地址：<a href="https://help.sonatype.com/repomanager3/product-information/download" title="Nexus下载地址">https://help.sonatype.com/repomanager3/product-information/download</a></p><h2 id="Nexus安装、启动和配置"><a href="#Nexus安装、启动和配置" class="headerlink" title="Nexus安装、启动和配置"></a>Nexus安装、启动和配置</h2><p>启动服务器（终端命令）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nexus.exe /run nexus</span><br></pre></td></tr></table></figure><p>访问服务器：<a href="http://localhost:8081/">http://localhost:8081</a></p><p>修改基础配置信息：</p><ul><li>安装目录下<code>etc/nexus-default.properties</code>文件中修改，比如端口号。</li></ul><p>修改服务器运行配置信息：</p><ul><li>安装目录下<code>bin/nexus.vmoptions</code>文件中保存有nexus服务器启动对应的配置信息，例如占用内存空间。</li></ul><h2 id="仓库分类"><a href="#仓库分类" class="headerlink" title="仓库分类"></a>仓库分类</h2><ul><li>宿主仓库hosted<ul><li>保存无法从中央仓库获取的资源<ul><li>自主研发</li><li>第三方非开源项目</li></ul></li></ul></li><li>代理仓库proxy<ul><li>代理远程仓库，通过nexus访问其他公共仓库，例如中央仓库</li></ul></li><li>仓库组group<ul><li>将若干个仓库组成一个群组，简化配置</li><li>仓库组不能保存资源，属于设计型仓库</li></ul></li></ul><h2 id="访问私服与组件上传"><a href="#访问私服与组件上传" class="headerlink" title="访问私服与组件上传"></a>访问私服与组件上传</h2><h3 id="本地仓库访问私服配置"><a href="#本地仓库访问私服配置" class="headerlink" title="本地仓库访问私服配置"></a>本地仓库访问私服配置</h3><p>配置本地仓库访问私服的权限（setting.xml）</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置本地仓库访问私服的权限 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>私服中的仓库名<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">username</span>&gt;</span>私服账号<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">password</span>&gt;</span>私服密码<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">servers</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">&lt;!-- 配置本地仓库资源来源 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>私服中的仓库名<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8081/repository/maven-public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="组件上传"><a href="#组件上传" class="headerlink" title="组件上传"></a>组件上传</h3><p>配置当前项目访问私服上传资源的保存位置（pom.xml）</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 发布配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">disttributionManagement</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 发布版上传配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>私服中的仓库名<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 上传的发布版私服仓库地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8081/resipotry/仓库名<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 开发版上传配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>私服中的仓库名<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 上传的私服开发版仓库地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8081/resipotry/仓库名<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">disttributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><p>上传方式：</p><ul><li>发布资源到私服命令<code>mvn deploy</code></li></ul><hr>]]></content>
      
      
      <categories>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven基础篇</title>
      <link href="/2023/02/05/34208.html"/>
      <url>/2023/02/05/34208.html</url>
      
        <content type="html"><![CDATA[<h1 id="Maven简介"><a href="#Maven简介" class="headerlink" title="Maven简介"></a>Maven简介</h1><ul><li>Maven的本质是一个项目管理工具，将项目开发和管理过程抽象成一个项目对象模型（POM）</li><li>POM（Project Object Model）：项目对象模型，将一个项目以对象的形式进行管理</li></ul><hr><h1 id="Maven的作用"><a href="#Maven的作用" class="headerlink" title="Maven的作用"></a>Maven的作用</h1><ul><li>项目构建：提供标准的、跨平台的自动化的项目构建方式</li><li>依赖管理：方便快捷的管理项目依赖的资源（jar包），避免资源间的版本冲突问题</li><li>统一开发结构：提供标准的、统一的项目结构</li></ul><img src="/2023/02/05/34208/image-20230225192701791.png" class="" title="maven项目结构图"><p>各目录存放资源类型说明：</p><ul><li><code>src/main/java</code>：项目java源码</li><li><code>src/main/resources</code>：项目的相关配置文件（比如mybatis配置，xml映射配置，自定义配置文件等）</li><li><code>src/main/webapp</code>：web资源（比如html，css，js等）</li><li><code>src/test/java</code>：测试代码</li><li><code>src/test/resources</code>：测试相关配置文件</li><li><code>target</code> ：项目输出位置，编译后的class文件会输出到此目录</li><li><code>pom.xml</code>：项目pom文件</li></ul><hr><h1 id="Maven的下载与安装"><a href="#Maven的下载与安装" class="headerlink" title="Maven的下载与安装"></a>Maven的下载与安装</h1><h2 id="Maven的下载"><a href="#Maven的下载" class="headerlink" title="Maven的下载"></a>Maven的下载</h2><p>官网：<a href="http://maven.apache.org/" title="Maven官网">http://maven.apache.org/</a></p><p>下载链接：<a href="http://maven.apache.org/download.cgi" title="maven下载地址">http://maven.apache.org/download.cgi</a></p><h2 id="Maven的安装"><a href="#Maven的安装" class="headerlink" title="Maven的安装"></a>Maven的安装</h2><p>Maven属于绿色版软件，解压即安装，</p><p>Maven解压后目录结构如下：</p><ul><li><code>bin</code>：存放了maven的命令</li><li><code>boot</code>：存放了maven本身的引导程序，如类加载器等 </li><li><code>conf</code>：存放了maven的配置文件，如setting.xml文件 </li><li><code>lib</code>：存放了maven本身运行所需的jar包</li></ul><h2 id="Maven的环境变量配置"><a href="#Maven的环境变量配置" class="headerlink" title="Maven的环境变量配置"></a>Maven的环境变量配置</h2><p>Maven的运行需要java的环境，需要配置<code>JAVA_HOME</code>的环境变量，之后新建<code>MAVEN_HOME</code>，值为Maven安装的目录（bin目录之前的一级目录）。</p><p>环境变量配置好之后需要测试环境配置结果，在终端命令窗口输入<code>mvn -v</code>命令，如果能够看到输出的Maven的版本信息代表配置成功。</p><hr><h1 id="Maven基础概念"><a href="#Maven基础概念" class="headerlink" title="Maven基础概念"></a>Maven基础概念</h1><h2 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h2><p>仓库：仓库用于存储资源，包含各种jar包。</p><img src="/2023/02/05/34208/image-20230225192811853.png" class="" title="Maven基础概念之仓库"><p>仓库分类：</p><ul><li>本地仓库：自己电脑上存储资源的仓库，连接远程仓库获取资源</li><li>远程仓库：非本机电脑上的仓库，为本地仓库提供资源<ul><li>中央仓库：由Maven团队维护，存储所有资源的仓库，服务于整个互联网，Maven中内置一个远程仓库地址<a href="https://repo.maven.apache.org/maven2/" title="maven远程仓库地址">https://repo.maven.apache.org/maven2/</a></li><li>私服：部门/公司范围内存储资源的仓库</li></ul></li></ul><p>私服的作用：</p><ul><li>保存具有版权的资源，包含购买或自主研发的jar。<ul><li>中央仓库的jar都是开源的，不能存储具有版权的资源。</li></ul></li><li>一定范围内共享资源，仅对内部开放，不对外共享。</li></ul><h2 id="坐标"><a href="#坐标" class="headerlink" title="坐标"></a>坐标</h2><p>坐标：描述仓库中资源的位置。</p><p>坐标的主要组成：</p><ul><li>groupId（组织ID）：定义当前maven项目所属组织名称（通常是域名的反写，例如：org.mybatis）</li><li>artifactId（项目ID）：定义当前maven项目名称（通常是模块名称，例如CRM、SMS）</li><li>version（版本号）：定义当前项目版本号</li><li>packaging：定义当前项目打包方式。这不是maven的组成部分，但是需要使用，取值一般有如下三种<ul><li>jar：该资源打成jar包，默认是jar</li><li>war：该资源打成war包</li><li>pom：该资源是一个父资源（表明使用maven分模块管理），打包时只生成一个pom.xml不生成jar或其他包结构</li></ul></li></ul><p>Maven坐标的作用：</p><ul><li>使用唯一标识，唯一性定位资源位置，通过该标识可以将资源的识别与下载工作交由机器完成。</li></ul><p>如果要查询maven某一个资源的坐标，通常可以去maven的仓库进行查询，在<a href="https://mvnrepository.com/" title="mvnrepository地址">https://mvnrepository.com</a>网站中可搜索想要的资源，然后得到该资源的坐标。</p><h2 id="pom基本配置"><a href="#pom基本配置" class="headerlink" title="pom基本配置"></a>pom基本配置</h2><p>pom.xml是Maven项目的核心配置文件，位于每个工程的根目录，基本配置如下：</p><table><thead><tr><th align="center">标签</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>&lt;project&gt;</code></td><td align="center">文件的根节点</td></tr><tr><td align="center"><code>&lt;modelversion&gt;</code></td><td align="center">pom.xml使用的对象模型版本</td></tr><tr><td align="center"><code>&lt;groupId&gt;</code></td><td align="center">项目名称，一般写项目的域名</td></tr><tr><td align="center"><code>&lt;artifactId&gt;</code></td><td align="center">模块名称，子项目名或模块名称</td></tr><tr><td align="center"><code>&lt;version&gt;</code></td><td align="center">产品的版本号</td></tr><tr><td align="center"><code>&lt;packaging&gt;</code></td><td align="center">打包类型，一般有jar、war、pom等</td></tr><tr><td align="center"><code>&lt;name&gt;</code></td><td align="center">项目的显示名，常用于Maven生成的文档</td></tr><tr><td align="center"><code>&lt;description&gt;</code></td><td align="center">项目描述，常用于Maven生成的文档</td></tr><tr><td align="center"><code>&lt;dependencies&gt;</code></td><td align="center">项目依赖构件配置，配置项目依赖构件的坐标</td></tr><tr><td align="center"><code>&lt;build&gt;</code></td><td align="center">项目构建配置，配置编译、运行插件等。</td></tr></tbody></table><h2 id="本地仓库配置"><a href="#本地仓库配置" class="headerlink" title="本地仓库配置"></a>本地仓库配置</h2><p>Maven启动后，会自动保存下载的资源到本地仓库。</p><p>在<code>%MAVEN_HOME%/conf/settings.xml</code>文件中配置本地仓库位置</p><ul><li>默认位置<ul><li><code>&lt;localRepository&gt;$&#123;user.home&#125;/.m2/repository&lt;/localRepository&gt;</code></li><li>路径为<code>C:\用户\用户名\.m2\repository</code></li></ul></li><li>自定义位置<ul><li><code>&lt;localRepository&gt;D:\maven\repository&lt;/localRepository&gt;</code></li><li>路径为<code>D:\maven\repository</code></li></ul></li></ul><h2 id="远程仓库配置"><a href="#远程仓库配置" class="headerlink" title="远程仓库配置"></a>远程仓库配置</h2><p>在安装目录下的<code>conf/settings.xml</code>文件中找到<code>&lt;mirrors&gt;</code>标签，在标签内添加以下内容</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置镜像地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 镜像的唯一标识符，用来区分不同的mirror元素 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 对哪种仓库进行镜像，也就是代替哪个仓库 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 镜像名称 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 镜像url --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="全局配置和用户配置"><a href="#全局配置和用户配置" class="headerlink" title="全局配置和用户配置"></a>全局配置和用户配置</h2><p>maven仓库地址、私服等配置信息需要在setting.xml文件中配置，分为全局配置和用户配置</p><ul><li>全局配置，定义了当前计算机中maven的公共配置，对任何版本的maven都生效。<ul><li>在 maven安装目录下的<code>conf/setting.xml</code>文件，此文件用于maven的所有project项目，它作为maven 的全局配置。</li></ul></li><li>用户配置，定义了当前用户的配置。<ul><li>用户配置的setting.xml文件默认的位置在：<code>$&#123;user.dir&#125;/.m2/settings.xml</code>目录中，<code>$&#123;user.dir&#125;</code>指windows中的用户目录。</li></ul></li><li>maven会先找用户配置，如果找到则以用户配置文件为准，否则使用全局配置文件。</li></ul><hr><h1 id="Maven项目构建命令"><a href="#Maven项目构建命令" class="headerlink" title="Maven项目构建命令"></a>Maven项目构建命令</h1><p>maven的构建命令以<code>mvn</code>开头，后面添加功能参数，可以一次性执行多个命令，用空格分离</p><table><thead><tr><th align="center">命令</th><th align="center">功能</th><th align="left">说明</th></tr></thead><tbody><tr><td align="center"><code>mvn compile</code></td><td align="center">编译</td><td align="left">作用是将<code>src/main/java</code>下的文件编译为class文件输出到<code>target</code>目录下</td></tr><tr><td align="center"><code>mvn clean</code></td><td align="center">清理</td><td align="left">作用是删除<code>target</code>目录及内容</td></tr><tr><td align="center"><code>mvn test</code></td><td align="center">测试</td><td align="left">作用是执行src/test/java 下的单元测试类</td></tr><tr><td align="center"><code>mvn package</code></td><td align="center">打包</td><td align="left">作用是将java工程执行package打成jar包，对于web工程打成war包</td></tr><tr><td align="center"><code>mvn install</code></td><td align="center">安装到本地仓库</td><td align="left">作用是将maven打成jar包或war包发布到本地仓库。</td></tr></tbody></table><h1 id="Maven项目构建生命周期"><a href="#Maven项目构建生命周期" class="headerlink" title="Maven项目构建生命周期"></a>Maven项目构建生命周期</h1><p>maven对项目构建的生命周期划分为三套相互独立的生命周期，分别是：</p><ul><li><p> Clean Lifecycle：在进行真正的构建之前进行一些清理工作</p></li><li><p>Default Lifecycle：构建的核心部分，编译，测试，打包，部署等</p></li><li><p>Site Lifecycle：生成项目报告，站点，发布站点</p></li></ul><h2 id="clean生命周期"><a href="#clean生命周期" class="headerlink" title="clean生命周期"></a>clean生命周期</h2><table><thead><tr><th align="center">命令</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center"><code>pre-clean</code></td><td align="center">执行一些需要在clean之前完成的工作</td></tr><tr><td align="center"><code>clean</code></td><td align="center">移除所有上一次构建生成的文件</td></tr><tr><td align="center"><code>post-clean</code></td><td align="center">执行一些需要在clean之后立刻完成的工作</td></tr></tbody></table><h2 id="default生命周期"><a href="#default生命周期" class="headerlink" title="default生命周期"></a>default生命周期</h2><table><thead><tr><th align="center">命令</th><th align="center">功能</th><th align="left">说明</th></tr></thead><tbody><tr><td align="center"><code>validate</code></td><td align="center">校验</td><td align="left">校验项目是否正确并且所有必要的信息可以完成项目的构建过程。</td></tr><tr><td align="center"><code>initialize</code></td><td align="center">初始化</td><td align="left">初始化构建状态，比如设置属性值。</td></tr><tr><td align="center"><code>generate-sources</code></td><td align="center">生成源代码</td><td align="left">生成包含在编译阶段中的任何源代码。</td></tr><tr><td align="center"><code>process-sources</code></td><td align="center">处理源代码</td><td align="left">处理源代码，比如说，过滤任意值。</td></tr><tr><td align="center"><code>generate-resources</code></td><td align="center">生成资源文件</td><td align="left">生成将会包含在项目包中的资源文件。</td></tr><tr><td align="center"><code>process-resources </code></td><td align="center">处理资源文件</td><td align="left">复制和处理资源到目标目录，为打包阶段最好准备。</td></tr><tr><td align="center"><strong><code>compile</code></strong></td><td align="center">编译</td><td align="left">编译项目的源代码。</td></tr><tr><td align="center"><code>process-classes</code></td><td align="center">处理类文件</td><td align="left">处理编译生成的文件，比如说对Java class文件做字节码改善优化。</td></tr><tr><td align="center"><code>generate-test-sources</code></td><td align="center">生成测试源代码</td><td align="left">生成包含在编译阶段中的任何测试源代码。</td></tr><tr><td align="center"><code>process-test-sources</code></td><td align="center">处理测试源代码</td><td align="left">处理测试源代码，比如说，过滤任意值。</td></tr><tr><td align="center"><code>generate-test-resources</code></td><td align="center">生成测试资源文件</td><td align="left">为测试创建资源文件。</td></tr><tr><td align="center"><code>process-test-resources</code></td><td align="center">处理测试资源文件</td><td align="left">复制和处理测试资源到目标目录。</td></tr><tr><td align="center"><strong><code>test-compile</code></strong></td><td align="center">编译测试源码</td><td align="left">编译测试源代码到测试目标目录。</td></tr><tr><td align="center"><code>process-test-classes</code></td><td align="center">处理测试类文件</td><td align="left">处理测试源码编译生成的文件。</td></tr><tr><td align="center"><strong><code>test</code></strong></td><td align="center">测试</td><td align="left">使用合适的单元测试框架运行测试（Juint是其中之一）。</td></tr><tr><td align="center"><code>prepare-package</code></td><td align="center">准备打包</td><td align="left">在实际打包之前，执行任何的必要的操作为打包做准备。</td></tr><tr><td align="center"><strong><code>package</code></strong></td><td align="center">打包</td><td align="left">将编译后的代码打包成可分发格式的文件，比如JAR、WAR或者EAR文件。</td></tr><tr><td align="center"><code>pre-integration-test</code></td><td align="center">集成测试前</td><td align="left">在执行集成测试前进行必要的动作。比如说，搭建需要的环境。</td></tr><tr><td align="center"><code>integration-test</code></td><td align="center">集成测试</td><td align="left">处理和部署项目到可以运行集成测试环境中。</td></tr><tr><td align="center"><code>post-integration-test</code></td><td align="center">集成测试后</td><td align="left">在执行集成测试完成后进行必要的动作。比如说，清理集成测试环境。</td></tr><tr><td align="center"><code>verify </code></td><td align="center">验证</td><td align="left">运行任意的检查来验证项目包有效且达到质量标准。</td></tr><tr><td align="center"><strong><code>install</code></strong></td><td align="center">安装</td><td align="left">安装项目包到本地仓库，这样项目包可以用作其他本地项目的依赖。</td></tr><tr><td align="center"><code>deploy</code></td><td align="center">部署</td><td align="left">将最终的项目包复制到远程仓库中与其他开发者和项目共享。</td></tr></tbody></table><h2 id="site生命周期"><a href="#site生命周期" class="headerlink" title="site生命周期"></a>site生命周期</h2><table><thead><tr><th align="center">命令</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center"><code>pre-site</code></td><td align="center">执行一些需要在生成站点文档之前完成的工作</td></tr><tr><td align="center"><code>site</code></td><td align="center">生成项目的站点文档</td></tr><tr><td align="center"><code>post-site</code></td><td align="center">执行一些需要在生成站点文档之后完成的工作，并且为部署做准备</td></tr><tr><td align="center"><code>site-deploy</code></td><td align="center">将生成的站点文档部署到特定的服务器上</td></tr></tbody></table><hr><h1 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h1><ul><li>插件与生命周期内各阶段的指令绑定，在执行相应命令的时候其实就是运行的插件。</li><li>maven默认在各个生命周期上都绑定有预设的功能。</li><li>也可以通过插件自定义功能。</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 构建，配置插件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 设置插件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 具体插件配置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 插件仓库坐标配置 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 生命周期配置 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 具体生命周期配置 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 打包方式 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- 具体打包方式 --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 执行的声明周期 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>test<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="Maven概念模型"><a href="#Maven概念模型" class="headerlink" title="Maven概念模型"></a>Maven概念模型</h1><p>Maven包含了一个项目对象模型（Project Object Model），一组标准集合，一个项目生命周期（Project  Lifecycle），一个依赖管理系统（Dependency Management System），和用来运行定义在生命周期阶段 （phase）中插件（plugin）、目标（goal）的逻辑。</p><img src="/2023/02/05/34208/image-20230225212121666.png" class="" title="Maven概念模型"><ul><li>项目对象模型（Project Object Model）<ul><li>一个maven工程都有一个pom.xml文件，通过pom.xml文件定义项目的坐标、项目依赖、项目信息、插件目标等</li></ul></li><li>依赖管理系统（Dependency Management System）<ul><li>通过maven的依赖管理对项目所依赖的jar包进行统一管理</li></ul></li><li>一个项目生命周期（Project Lifecycle）<ul><li>使用maven完成项目的构建，项目构建包括：清理、编译、测试、部署等过程，maven将这些过程规范为一个生命周期</li><li>maven通过执行一些简单命令即可实现生命周期的各个过程，比如执行<code>mvn compile</code>执行编译、 执行 <code>mvn clean</code>执行清理</li></ul></li><li>一组标准集合<ul><li>maven将整个项目管理过程定义一组标准，比如通过maven构建工程，有标准的目录结构，有标准的生命周期阶段、依赖管理有标准的坐标定义等</li></ul></li><li>插件（plugin）、目标（goal）<ul><li>maven管理项目生命周期过程都是基于插件完成的</li></ul></li></ul><h1 id="依赖管理"><a href="#依赖管理" class="headerlink" title="依赖管理"></a>依赖管理</h1><h2 id="依赖配置"><a href="#依赖配置" class="headerlink" title="依赖配置"></a>依赖配置</h2><p>依赖指在当前项目运行所需的jar，一个项目可设置多个依赖</p><p>格式：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 设置当前项目的所有依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 设置具体的依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">denpendency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">denpendency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="依赖传递"><a href="#依赖传递" class="headerlink" title="依赖传递"></a>依赖传递</h2><p>依赖具有传递性（相当于继承性）：</p><ul><li>直接依赖：在当前项目中通过依赖配置建立的依赖关系。</li><li>间接依赖：被依赖的资源如果依赖其他的资源，即当前项目间接依赖其他资源</li></ul><p>依赖冲突问题</p><ul><li>当前项目和被依赖的项目中存在相同的依赖时，会存在冲突，比如版本不同。</li><li>当出现冲突时，会根据优先级选择使用哪个依赖。<ul><li>路径优先：依赖层级越深，优先级越低。即直接依赖优先级高于间接依赖。</li><li>声明优先：在maven中声明靠前的会覆盖靠后的。</li><li>特殊优先：在同级配置中，相同资源的不同版本，声明靠后的会覆盖靠前的。</li></ul></li></ul><h2 id="可选依赖"><a href="#可选依赖" class="headerlink" title="可选依赖"></a>可选依赖</h2><p>可选依赖是指对外隐藏当前所依赖的资源</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">denpendency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 隐藏依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">denpendency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="排除依赖"><a href="#排除依赖" class="headerlink" title="排除依赖"></a>排除依赖</h2><p>排除依赖是指主动断开依赖的资源，被排除的依赖无需指定版本</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">denpendency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 排除依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">denpendency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="依赖范围"><a href="#依赖范围" class="headerlink" title="依赖范围"></a>依赖范围</h2><p>依赖的jar默认情况可以在任何地方使用，可以通过<code>scope</code>标签设定其作用范围<br>作用范围：</p><ul><li>主程序范围有效（main文件夹范围内）</li><li>测试程序范围有效（test文件夹范围内）</li><li>是否参与打包（package指令范围内）</li></ul><table><thead><tr><th align="center">scope</th><th align="center">主代码</th><th align="center">测试代码</th><th align="center">打包</th><th align="center">范例</th></tr></thead><tbody><tr><td align="center">compile（默认）</td><td align="center">Y</td><td align="center">Y</td><td align="center">Y</td><td align="center">log4j</td></tr><tr><td align="center">provided</td><td align="center">Y</td><td align="center">Y</td><td align="center"></td><td align="center">servlet-api</td></tr><tr><td align="center">runtime</td><td align="center"></td><td align="center"></td><td align="center">Y</td><td align="center">jdbc</td></tr><tr><td align="center">test</td><td align="center"></td><td align="center">Y</td><td align="center"></td><td align="center">junit</td></tr></tbody></table><p>依赖范围的传递性：</p><ul><li><p>带有依赖范围的资源在进行传递时，作用范围将受到影响</p></li><li><p>依赖范围由强到弱的顺序是：compile&gt;provided&gt;runtime&gt;test</p></li><li><p>假如当前项目为A和B，A依赖于B（需要在 A 的pom.xml文件中添加 B 的坐标），其依赖范围如下：</p></li></ul><table><thead><tr><th align="center"></th><th align="center">compile</th><th align="center">provided</th><th align="center">test</th><th align="center">runtime</th></tr></thead><tbody><tr><td align="center"><strong>compile</strong></td><td align="center">compile</td><td align="center">provided</td><td align="center">test</td><td align="center">runtime</td></tr><tr><td align="center"><strong>provided</strong></td><td align="center"></td><td align="center">provided</td><td align="center"></td><td align="center"></td></tr><tr><td align="center"><strong>runtime</strong></td><td align="center">runtime</td><td align="center">provided</td><td align="center">test</td><td align="center">runtime</td></tr><tr><td align="center"><strong>test</strong></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><p>表格的第一行是直接依赖，即A项目中配置的，第一列是间接依赖，即B项目中配置的，交叉的格子是B在A中的依赖范围</p>]]></content>
      
      
      <categories>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux操作系统的使用</title>
      <link href="/2023/02/01/6348.html"/>
      <url>/2023/02/01/6348.html</url>
      
        <content type="html"><![CDATA[<h1 id="Linux目录结构"><a href="#Linux目录结构" class="headerlink" title="Linux目录结构"></a>Linux目录结构</h1><p>Linux的目录结构是一个树型结构。Windows 系统可以拥有多个盘符， 如 C盘、D盘。Linux没有盘符这个概念， 只有一个根目录<code>/</code>， 所有文件都在它下面。在Linux系统中，路径之间的层级关系，使用：<code>/</code> 来表示，在Windows系统中，路径之间的层级关系，使用：<code>\</code>来表示。</p><img src="/2023/02/01/6348/Snipaste_2023-03-25_11-33-31.jpg" class="" title="Linux目录结构"><table><thead><tr><th align="center">目录</th><th align="center">作用</th></tr></thead><tbody><tr><td align="center">/bin</td><td align="center">bin 是二进制文件的缩写，这个目录存放着最经常使用的命令。</td></tr><tr><td align="center">/boot</td><td align="center">这里存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件。</td></tr><tr><td align="center">/dev</td><td align="center">dev 是 Device(设备) 的缩写， 该目录下存放的是 Linux 的外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的。</td></tr><tr><td align="center">/etc</td><td align="center">etc 是 Etcetera(其他) 的缩写，这个目录用来存放所有的系统管理所需要的配置文件和子目录。</td></tr><tr><td align="center">/home</td><td align="center">用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名以用户的账号命名。</td></tr><tr><td align="center">/root</td><td align="center">该目录为系统管理员，也称作超级权限者的用户主目录。</td></tr><tr><td align="center">/lib</td><td align="center">lib 是 Library(库) 的缩写，这个目录里存放着系统最基本的动态连接共享库。</td></tr><tr><td align="center">/media</td><td align="center">linux 系统会自动识别一些设备，例如U盘、光驱等，当识别后，Linux 会把识别的设备挂载到这个目录下。</td></tr><tr><td align="center">/mnt</td><td align="center">该目录是为了让用户临时挂载别的文件系统的，可将光驱挂载在 /mnt/ 上，然后进入该目录就可以查看光驱里的内容。</td></tr><tr><td align="center">/opt</td><td align="center">opt 是 optional(可选) 的缩写，这是给主机额外安装软件所摆放的目录。比如安装数据库则就可以放到这个目录下。默认是空的。</td></tr><tr><td align="center">/sbin</td><td align="center">s 就是 Super User 的意思，是 Superuser Binaries (超级用户的二进制文件) 的缩写，这里存放的是系统管理员使用的系统管理程序。</td></tr><tr><td align="center">/tmp</td><td align="center">tmp 是 temporary(临时) 的缩写这个目录是用来存放一些临时文件的。</td></tr><tr><td align="center">/usr</td><td align="center">usr 是 unix shared resources(共享资源) 的缩写，这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。</td></tr><tr><td align="center">/usr/bin</td><td align="center">系统用户使用的应用程序。</td></tr><tr><td align="center">/usr/sbin</td><td align="center">超级用户使用的比较高级的管理程序和系统守护程序。</td></tr><tr><td align="center">/var</td><td align="center">var 是 variable(变量) 的缩写，这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。</td></tr><tr><td align="center">/run</td><td align="center">是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。如果你的系统上有 /var/run 目录，应该让它指向 run。</td></tr></tbody></table><hr><h1 id="Linux环境变量"><a href="#Linux环境变量" class="headerlink" title="Linux环境变量"></a>Linux环境变量</h1><p>环境变量是操作系统（Windows、Linux、Mac）在运行的时候，记录的一些关键性信息，用以辅助系统运行。<br>在Linux系统中执行<code>env</code>命令即可查看当前系统中记录的环境变量。<br>环境变量是一种KeyValue型结构，即名称和值。</p><h2 id="PATH"><a href="#PATH" class="headerlink" title="PATH"></a>PATH</h2><p>环境变量<code>PATH</code>会记录一组目录，目录之间用<code>:</code>隔开。这里记录的是命令的搜索路径，当执行命令会从记录中记录的目录中挨个搜索要执行的命令并执行。<br>可以通过修改这个项目的值，加入自定义的命令搜索路径。</p><h2 id="PATH变量值获取"><a href="#PATH变量值获取" class="headerlink" title="PATH变量值获取"></a>PATH变量值获取</h2><ul><li>通过<code>env</code>命令可以查看环境变量信息，<code>env | grep PATH</code>。</li><li>通过<code>$</code>符号，可以取出环境变量的值，<code>echo $PATH</code>。</li></ul><h2 id="PATH变量值设置"><a href="#PATH变量值设置" class="headerlink" title="PATH变量值设置"></a>PATH变量值设置</h2><p>Linux环境变量可以用户自行设置，其中分为：</p><ul><li>临时生效，<code>export PATH=$PATH:自定义路径</code>。</li><li>永久生效：<ul><li>针对用户：<code>~/.bashrc</code>文件中配置。</li><li>针对全部用户：<code>/etc/profile</code>文件中配置。</li><li>配置完成，可以通过<code>source</code>命令立刻生效。</li></ul></li></ul><hr><h1 id="Linux路径"><a href="#Linux路径" class="headerlink" title="Linux路径"></a>Linux路径</h1><h2 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a>绝对路径</h2><p>绝对路径：以根目录为起点，描述路径的一种写法，路径描述以/开头。如<code>cd /etc</code>。</p><hr><h2 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h2><p>相对路径：以当前目录为起点，描述路径的一种写法，路径描述无需以/开头。如<code>cd Desktop</code>。</p><hr><h2 id="特殊路径符"><a href="#特殊路径符" class="headerlink" title="特殊路径符"></a>特殊路径符</h2><ul><li><code>.</code>表示当前目录，比如 <code>cd ./Desktop</code> 表示切换到当前目录下的Desktop目录内，和<code>cd Desktop</code>效果一致。</li><li><code>..</code>表示上一级目录，比如：<code>cd ..</code>即可切换到上一级目录，<code>cd ../..</code>切换到上二级的目录。</li><li><code>~</code>表示HOME目录，比如：<code>cd ~</code>  即可切换到HOME目录或<code>cd ~/Desktop</code>，切换到HOME内的Desktop目录。</li><li></li></ul><hr><h1 id="用户、用户组"><a href="#用户、用户组" class="headerlink" title="用户、用户组"></a>用户、用户组</h1><p>Linux系统中可以：</p><ul><li>配置多个用户。</li><li>配置多个用户组。</li><li>用户可以加入多个用户组中。</li></ul><p>Linux中关于权限的管控级别有2个级别，分别是：</p><ul><li>针对用户的权限控制。</li><li>针对用户组的权限控制。</li></ul><p>比如，针对某文件，可以控制用户的权限，也可以控制用户组的权限。</p><hr><h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><p>用户账号的管理工作主要涉及到用户账号的添加、修改和删除。</p><p>添加用户账号就是在系统中创建一个新账号，然后为新账号分配用户号、用户组、主目录和登录Shell等资源。刚添加的账号是被锁定的，无法使用。</p><p>增加用户账号就是在<code>/etc/passwd</code>文件中为新用户增加一条记录，同时更新其他系统文件如<code>/etc/shadow</code>, <code>/etc/group</code>等。Linux提供了集成的系统管理工具userconf，它可以用来对用户账号进行统一管理。</p><p><strong>以下命令需root用户执行。</strong></p><table><thead><tr><th align="center">命令</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><code>useradd</code></td><td align="center">创建用户</td></tr><tr><td align="center"><code>userdel</code></td><td align="center">删除用户</td></tr><tr><td align="center"><code>usermod</code></td><td align="center">修改帐号</td></tr></tbody></table><hr><h2 id="用户组管理"><a href="#用户组管理" class="headerlink" title="用户组管理"></a>用户组管理</h2><p>用户组的管理涉及用户组的添加、删除和修改。</p><p>组的增加、删除和修改实际上就是对<code>/etc/group</code>文件的更新。</p><p><strong>以下命令需root用户执行。</strong></p><table><thead><tr><th align="center">命令</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><code>groupadd</code></td><td align="center">创建用户组</td></tr><tr><td align="center"><code>groupdel</code></td><td align="center">删除用户组</td></tr><tr><td align="center"><code>groupmod</code></td><td align="center">修改用户组</td></tr><tr><td align="center"><code>newgrp</code></td><td align="center">用户组之间切换</td></tr></tbody></table><hr><h2 id="超级管理员"><a href="#超级管理员" class="headerlink" title="超级管理员"></a>超级管理员</h2><p>无论是Windows、MacOS、Linux均采用多用户的管理模式进行权限管理。在Linux系统中，拥有最大权限的账户名为：root（超级管理员）。</p><p>root用户拥有最大的系统操作权限，而普通用户在许多地方的权限是受限的。</p><ul><li>普通用户的权限，一般在其HOME目录内是不受限的。</li><li>一旦出了HOME目录，大多数地方，普通用户仅有只读和执行权限，无修改权限。</li><li>显示当前用户的命令为 <code>whoami</code> 。</li><li>切换用户，<code>su root</code>，此种方式不会将工作目录变更为<code>/root</code>目录。</li><li>切换用户，改变环境变量，<code>su - root</code>，此种方式会将工作目录变更为<code>/root</code>目录。</li></ul><hr><h1 id="Linux-文件基本属性"><a href="#Linux-文件基本属性" class="headerlink" title="Linux 文件基本属性"></a>Linux 文件基本属性</h1><p>Linux 系统是一种典型的多用户系统，不同的用户处于不同的地位，拥有不同的权限。</p><p>为了保护系统的安全性，Linux 系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。</p><p>在 Linux 中我们可以使用<code>ll</code>或者<code>ls –l</code>命令来显示一个文件的属性以及文件所属的用户和组，如：</p><img src="/2023/02/01/6348/image-20230410011559429.png" class="" title="文件权限"><ul><li>序号1，表示文件、文件夹的权限控制信息，可使用<code>chmod</code>命令修改权限控制信息。<ul><li>从左至右用0-9这些数字来表示。第0位确定文件类型，第1-3位确定属主（该文件的所有者）拥有该文件的权限。第4-6位确定属组（所有者的同组用户）拥有该文件的权限，第7-9位确定其他用户拥有该文件的权限。</li><li>第0位第一个字符代表这个文件是目录、文件或链接文件等等，当为<code>d</code>则是目录，当为<code>-</code>则是文件，当为<code>l</code>则表示为链接文档；</li><li>文件的权限表示，均为 rwx 的三个参数的组合。其中，<code>r</code>代表可读、<code>w</code>代表可写、<code>x</code>代表可执行。这三个权限的位置不会改变，如果没有权限，就会使用减号<code>-</code>表示。</li><li><code>r</code>，针对文件可以查看文件内容，针对文件夹，可以查看文件夹内容，如<code>ls</code>命令。</li><li><code>w</code>，针对文件表示可以修改此文件，针对文件夹，可以在文件夹内：创建、删除、改名等操作。</li><li><code>x</code>，针对文件表示可以将文件作为程序执行，针对文件夹，表示可以更改工作目录到此文件夹，即<code>cd</code>进入。</li></ul></li><li>序号2，表示文件、文件夹所属用户，可使用<code>chown</code>命令修改所属用户。</li><li>序号3，表示文件、文件夹所属用户组，可使用<code>chown</code>命令修改所属用户组。</li></ul><hr><h1 id="Linux命令"><a href="#Linux命令" class="headerlink" title="Linux命令"></a>Linux命令</h1><h2 id="Linux命令基础格式"><a href="#Linux命令基础格式" class="headerlink" title="Linux命令基础格式"></a>Linux命令基础格式</h2><p>无论是什么命令，用于什么用途，在Linux中，命令有其通用的格式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command [-option][arguments]</span><br></pre></td></tr></table></figure><ul><li>command： 命令本身</li><li>-options：[可选，非必填]命令的一些选项，可以通过选项控制命令的行为细节</li><li>arguments：[可选，非必填]命令的参数，多数用于命令的指向目标等</li></ul><hr><h2 id="磁盘管理"><a href="#磁盘管理" class="headerlink" title="磁盘管理"></a>磁盘管理</h2><h3 id="df命令"><a href="#df命令" class="headerlink" title="df命令"></a>df命令</h3><p>df（英文全拼：disk free）命令用于显示目前在 Linux 系统上的文件系统磁盘使用情况统计。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df [选项]... [FILE]...</span><br></pre></td></tr></table></figure><ul><li>选项：<code>-h</code>，以更加人性化的单位显示。</li></ul><hr><h3 id="du命令"><a href="#du命令" class="headerlink" title="du命令"></a>du命令</h3><p>du（英文全拼：disk usage）命令用于显示目录或文件的大小。du 会显示指定的目录或文件所占用的磁盘空间。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df [选项]... [FILE]...</span><br><span class="line">du [-ah][--max-depth=&lt;目录层数&gt;][目录或文件]</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>选项：<code>-a</code>，显示目录中个别文件的大小。</li><li>选项：<code>-h</code>，以更加人性化的单位显示。</li><li>选项：<code>--max-depth=&lt;目录层数&gt;</code>，超过指定层数的目录后，予以忽略。</li><li>查看根目录<code>/</code>下各个文件占用情况，<code>du -ah --max-depth=1 /</code>。</li></ul><hr><h3 id="ls命令"><a href="#ls命令" class="headerlink" title="ls命令"></a>ls命令</h3><p>ls命令的作用是列出目录下的内容，语法细节如下：</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls [-l -h -a] [Linux路径]</span><br></pre></td></tr></table></figure><ul><li>Linux路径：被查看的文件夹，不提供该参数，表示查看当前工作目录。</li><li>-l，表示：以列表（竖向排列）的形式展示内容，并展示更多信息</li><li>-h，表示以易于阅读的形式，列出文件大小，如K、M、G，<code>-h</code>选项必须要搭配<code> -l</code> 一起使用。</li><li>-a，表示：all的意思，即列出全部文件（包含隐藏的文件/文件夹）。在Linux中以<code>.</code>开头的，均是隐藏的。默认不显示出来。</li><li></li></ul><hr><h3 id="cd命令"><a href="#cd命令" class="headerlink" title="cd命令"></a>cd命令</h3><p>当Linux终端（命令行）打开的时候，会默认以用户的HOME目录作为当前的工作目录，可以通过cd命令，更改当前所在的工作目录。 cd命令来自英文：Change Directory。<br>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd [dirName]</span><br></pre></td></tr></table></figure><ul><li>cd命令无需选项，只有参数，表示要切换到哪个目录下</li><li>cd命令直接执行，不写参数，表示回到用户的HOME目录</li></ul><hr><h3 id="pwd命令"><a href="#pwd命令" class="headerlink" title="pwd命令"></a>pwd命令</h3><p>pwd命令来自：Print Work Directory，命令用于显示工作目录。执行 pwd 指令可立刻得知目前所在的工作目录的绝对路径名称。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pwd [--help][--version]</span><br></pre></td></tr></table></figure><ul><li>pwd命令，一般无选项，无参数，直接输入pwd即可</li></ul><hr><h3 id="mkdir命令"><a href="#mkdir命令" class="headerlink" title="mkdir命令"></a>mkdir命令</h3><p>mkdir（英文全拼：make directory）命令用于创建目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir [-p] dirName</span><br></pre></td></tr></table></figure><ul><li>参数必填，表示Linux路径，即要创建的文件夹的路径，相对路径或绝对路径均可。</li><li><code>-p</code>选项可选，表示自动创建不存在的父目录，适用于创建连续多层级的目录。如<code>mkdir -p runoob2/test</code>，本例若不加<code>-p</code> 参数，且原本 runoob2 目录不存在，则产生错误。</li></ul><hr><h2 id="文件管理"><a href="#文件管理" class="headerlink" title="文件管理"></a>文件管理</h2><h3 id="touch命令"><a href="#touch命令" class="headerlink" title="touch命令"></a>touch命令</h3><p>可通过touch命令创建一个新的空白文件。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch 文件或目录</span><br></pre></td></tr></table></figure><ul><li>touch命令一般无选项，参数必填，表示要创建的文件路径，相对、绝对、特殊路径符均可以使用。</li></ul><hr><h3 id="cat命令"><a href="#cat命令" class="headerlink" title="cat命令"></a>cat命令</h3><p>cat（英文全拼：concatenate）命令用于连接文件并打印到标准输出设备上。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat fileName</span><br></pre></td></tr></table></figure><ul><li>cat命令一般无选项，参数必填，参数表示被查看的文件路径，相对、绝对、特殊路径符都可以使用。</li><li>清空 /etc/test.txt 文档内容，<code>cat /dev/null &gt; /etc/test.txt</code>，常用于清空日志文件。</li><li>把textfile1的文档内容加上行号后输入 textfile2 这个文档里，<code>cat -n textfile1 &gt; textfile2</code>。</li><li>把textfile1和textfile2的文档内容加上行号（空白行不加）之后将内容附加 textfile3文档里，<code>cat -b textfile1 textfile2 &gt;&gt; textfile3</code>。</li></ul><hr><h3 id="split命令"><a href="#split命令" class="headerlink" title="split命令"></a>split命令</h3><p>split命令用于将一个文件分割成数个。该指令将大文件分割成较小的文件，在默认情况下将按照每1000行切割成一个小文件。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">split [-&lt;行数&gt;][-b &lt;字节&gt;][-C &lt;字节&gt;][-l &lt;行数&gt;][要切割的文件][输出文件名]</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>选项：<code>-&lt;行数&gt;</code>，指定每多少行切成一个小文件。</li><li>选项：<code>-b&lt;字节&gt;</code>，指定每多少字节切成一个小文件。</li><li>选项：<code>-C&lt;字节&gt;</code>，与参数<code>-b</code>相似，但是在切割时将尽量维持每行的完整性。</li><li>选项：<code>-d</code>，指定数字形式的文件后缀。</li><li>选项：<code>[输出文件名]</code>，设置切割后文件的前置文件名， split会自动在前置文件名后再加上编号。</li><li>拆分大文件<code>1.log</code>，以<code>200m</code>为单位，输出目录为<code>xxx文件夹</code>下，文件以<code>a_数字</code>格式输出，<code>split -d -b 200m 1.log XXX/a_</code>。</li><li>合并文件，<code>cat XXX/a_* &gt; 1.log</code>。</li></ul><hr><h3 id="more命令"><a href="#more命令" class="headerlink" title="more命令"></a>more命令</h3><p>more 命令类似 cat ，不过会以一页一页的形式显示，更方便使用者逐页阅读，而最基本的指令就是按空白键（space）就往下一页显示，按 b 键就会往回（back）一页显示，而且还有搜寻字串的功能（与 vi 相似），通过q退出查看 。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more fileName</span><br></pre></td></tr></table></figure><ul><li>more命令一般无选项，只有必填参数，参数表示：被查看的文件路径，相对、绝对、特殊路径符都可以使用。</li></ul><hr><h3 id="chmod命令"><a href="#chmod命令" class="headerlink" title="chmod命令"></a>chmod命令</h3><p>chmod（英文全拼：change mode）命令是控制用户对文件的权限的命令。<strong>注意，只有文件、文件夹的所属用户或root用户可以修改。</strong>chmod命令可以使用八进制数来指定权限。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod [-R] mode file...</span><br></pre></td></tr></table></figure><ul><li>选项：<code>-R</code>，对文件夹内的全部内容应用同样的操作。</li><li>参数：<code>file...</code> ，要设置的文件路径，可包含多个。</li><li>参数：<code>mode</code> ，权限设定字串，格式如下 :<code>[ugoa...][[+-=][rwxX]...][,...]</code>。<ul><li><code>u</code>表示该文件的拥有者，<code>g</code>表示与该文件的拥有者属于同一个群体(group)者，<code>o</code>表示其他以外的人，<code>a</code>表示这三者皆是。</li><li><code>+</code>表示增加权限、<code>-</code>表示取消权限、<code>=</code>表示唯一设定权限。</li><li><code>r</code>表示可读取，<code>w</code>表示可写入，<code>x</code>表示可执行。</li><li>权限也可以用3位数字来代表，第一位数字表示用户权限，第二位表示用户组权限，第三位表示其它用户权限。</li></ul></li><li>为ex1.py文件拥有者增加可执行权限，<code>chmod u+x ex1.py</code>。</li><li>将目前目录下的所有文件与子目录皆设为任何人可读取，<code>chmod -R a+r *</code>。</li><li>为file文件拥有者增加读写可执行权限和其他人可执行权限，<code>chmod ug=rwx,o=x file</code>等效于<code>chmod 771 file</code>。</li></ul><table><thead><tr><th align="center">权限数字</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><code>0</code></td><td align="center">无任何权限，即<code>---</code></td></tr><tr><td align="center"><code>1</code></td><td align="center">仅有<code>x</code>权限，即<code>--x</code></td></tr><tr><td align="center"><code>2</code></td><td align="center">仅有<code>w</code>权限，即<code>-w-</code></td></tr><tr><td align="center"><code>3</code></td><td align="center">有<code>w</code>和<code>x</code>权限，即<code>-wx</code></td></tr><tr><td align="center"><code>4</code></td><td align="center">仅有<code>r</code>权限，即<code>r--</code></td></tr><tr><td align="center"><code>5</code></td><td align="center">有<code>r</code>和<code>x</code>权限，即<code>r-x</code></td></tr><tr><td align="center"><code>6</code></td><td align="center">有<code>r</code>和<code>w</code>权限，即<code>rw-</code></td></tr><tr><td align="center"><code>7</code></td><td align="center">有全部权限，即<code>rwx</code></td></tr></tbody></table><hr><h3 id="chown命令"><a href="#chown命令" class="headerlink" title="chown命令"></a>chown命令</h3><p>chown（英文全拼：change owner）命令用于设置文件所有者和文件关联组的命令。<strong>普通用户无法修改所属为其它用户或组，所以此命令只适用于root用户执行。</strong></p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown [-R] 用户[:group] file...</span><br></pre></td></tr></table></figure><ul><li>选项，<code>-R</code>，对文件夹内全部内容应用相同规则。</li><li>选项，用户，修改所属用户。</li><li>选项，用户组，修改所属用户组。</li><li><code>:</code>用于分隔用户和用户组。</li><li>将hello.txt所属用户修改为root，<code>chown root hello.txt</code>。</li><li>将hello.txt所属用户组修改为root，<code>chown :root hello.txt</code>。</li><li>将hello.txt所属用户修改为root，用户组修改为root，<code>chown root:root hello.txt</code>。</li><li>将文件夹test的所属用户修改为root并对文件夹内全部内容应用同样规则。<code>chown -R root test</code>。</li></ul><hr><h3 id="cp命令"><a href="#cp命令" class="headerlink" title="cp命令"></a>cp命令</h3><p>cp（英文全拼：copy）命令主要用于复制文件或目录。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp [-options] 参数1 参数2</span><br></pre></td></tr></table></figure><ul><li><code>-r</code>选项，可选，用于复制文件夹使用，表示递归。</li><li><code>-f</code>选项，可选，覆盖已经存在的目标文件而不给出提示。</li><li>参数1，Linux路径，表示被复制的文件或文件夹。</li><li>参数2，Linux路径，表示要复制去的地方。</li><li>将一个文件夹复制到另一个文件夹下，以下实例 packageA 文件及其任意层的结构会拷贝到 packageB 中，<code>cp -r /home/packageA /home/packageB</code></li><li>将 packageA 下的所有文件（不包含 packageA 文件）拷贝到 packageB 中，<code>cp -r /home/packageA/* /home/cp/packageB/</code></li></ul><hr><h3 id="scp命令"><a href="#scp命令" class="headerlink" title="scp命令"></a>scp命令</h3><p>scp 命令用于Linux之间复制文件和目录。scp 是secure copy的缩写, scp是linux系统下基于ssh登陆进行安全的远程文件拷贝命令。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp [可选参数] 参数1 参数2 </span><br></pre></td></tr></table></figure><ul><li><code>-r</code>选项，可选，用于复制文件夹使用，表示递归。</li><li><code>-P</code>选项， port是指定数据传输用到的端口号。</li><li>参数1，Linux路径，表示被复制的文件或文件夹。</li><li>参数2，Linux路径，表示要复制去的地方。</li><li>拉取，将异地服务器上/home/lk/目录下所有的文件全部复制到本地的/root目录下，<code>scp -r root@异地服务器ip:/home/lk /root</code>。</li><li>推送，在本地服务器上将/root/lk目录下所有的文件传输到异地的/home/lk/cpfile目录下，<code>scp -r /root/lk root@异地服务器ip:/home/lk/cpfile</code>。</li><li>如果远程服务器防火墙有为scp命令设置了指定的端口，需使用<code>-P</code>参数来设置命令的端口号，<code>scp -P 10001 local_file remote_ip:remote_file</code>。</li><li>参数1或参数2中指定了用户名，命令执行后需再输入密码；若未指定用户名，命令执行后需输入用户名和密码。</li></ul><hr><h3 id="mv命令"><a href="#mv命令" class="headerlink" title="mv命令"></a>mv命令</h3><p>mv（英文全拼：move）命令用来为文件或目录改名、或将文件或目录移入其它位置。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv [options] 参数1 参数2</span><br></pre></td></tr></table></figure><ul><li><code>-b</code>: 当目标文件或目录存在时，在执行覆盖前，会为其创建一个备份。</li><li><code>-f</code>: 如果指定移动的源目录或文件与目标的目录或文件同名，不会询问，直接覆盖旧文件。</li><li>参数1，Linux路径，表示被移动的文件或文件夹。</li><li>参数2，Linux路径，表示要移动去的地方，如果目标不存在，则进行改名，确保目标存在。</li><li>将源文件名 source_file 改为目标文件名 dest_file，效果是仅重命名，<code>mv a/source_file(文件) a/dest_file(文件)</code>。</li><li> 将源文件名 source_file 改为移动到目标文件夹b中并改目标文件名 dest_file，效果是：移动 + 重命名。<code>mv a/source_file(文件) a/b/dest_file(文件)</code>。</li><li>将文件 source_file 移动到目标目录 dest_directory 中，<code>mv source_file(文件) dest_directory(目录)</code>。</li><li>目录名 dest_directory 已存在，将 source_directory 移动到目录名 dest_directory 中；目录名 dest_directory 不存在则 source_directory 改名为目录名 dest_directory，<code>mv source_directory(目录) dest_directory(目录)</code>。</li><li>出错，<code>mv source_directory(目录) dest_file(文件)</code>。</li><li>将 /usr/runoob 下的所有文件和目录移到当前目录下，<code>mv /usr/runoob/* .</code>。</li></ul><hr><h3 id="rm命令"><a href="#rm命令" class="headerlink" title="rm命令"></a>rm命令</h3><p>rm（英文全拼：remove）命令用于删除一个文件或者目录。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm [-options] 参数1 参数2 ...... 参数N</span><br></pre></td></tr></table></figure><ul><li><code>-r</code>选项用于删除文件夹，将目录及以下之档案亦逐一删除。</li><li><code>-f</code>表示force，强制删除（不会弹出提示确认信息）。</li><li>参数1、参数2、……、参数N 表示要删除的文件或文件夹路径，按照空格隔开。</li><li>参数也支持通配符 <code>*</code>，即匹配任意内容（包含空），用以做模糊匹配。<code>test*</code>，表示匹配任何以test开头的内容，<code>*test</code>，表示匹配任何以test结尾的内容，<code>*test*</code>，表示匹配任何包含test的内容。</li><li>删除当前目录下的所有文件及目录，<code>rm -rf *</code>。</li><li>删除目录 test，不管该目录下是否有子目录或文件，都直接删除，<code>rm -rf test/</code>。</li><li><strong>注意</strong>：以下操作会删除Linux根目录下的所有文件，直接导致服务器瘫痪，<code>rm -rf /*</code>或<code>rm -rf /</code>，删库跑路。</li></ul><hr><h3 id="which命令"><a href="#which命令" class="headerlink" title="which命令"></a>which命令</h3><p>which命令用于查找文件。which指令会在环境变量$PATH设置的目录里查找符合条件的文件。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which [文件...]</span><br></pre></td></tr></table></figure><ul><li>可以通过which命令，查看所使用的一系列命令的程序文件存放在哪里，<code>which bash</code></li></ul><hr><h3 id="find命令"><a href="#find命令" class="headerlink" title="find命令"></a>find命令</h3><p>find 命令用于在指定目录下查找文件和目录。它可以使用不同的选项来过滤和限制查找的结果。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find [path] [expression]</span><br></pre></td></tr></table></figure><ul><li>path 是要查找的目录路径，可以是一个目录或文件名，也可以是多个路径，多个路径之间用空格分隔，如果未指定路径，则默认为当前目录。</li><li>expression 是可选参数，用于指定查找的条件，可以是文件名、文件类型、文件大小等等。<ul><li><code>-name pattern</code>：按文件名查找，支持使用通配符 * 和 ?。</li><li><code>-type type</code>：按文件类型查找，可以是 f（普通文件）、d（目录）、l（符号链接）等。</li><li><code>-size [+-]size[cwbkMG]</code>：按文件大小查找，支持使用 + 或 - 表示大于或小于指定大小，单位可以是 c（字节）、w（字数）、b（块数）、k（KB）、M（MB）或 G（GB）。</li></ul></li><li>查找当前目录下名为 file.txt 的文件，<code>find . -name file.txt</code>。</li><li>将当前目录及其子目录下所有文件后缀为 .c 的文件列出来，<code>find . -name &quot;*.c&quot;</code></li><li>查找 /home 目录下大于 1MB 的文件，<code>find /home -size +1M</code>。</li><li>find指令为找出500M以上的文件，print0和xargs -0配合使用，用来解决文件名中有空格或特殊字符问题。du -m是查看这些文件的大小，并以m为单位显示。最后sort -nr是按照数字反向排序（大的文件在前），<code>find / -size +500M -print0|xargs -0 du -m|sort -nr</code>。</li></ul><hr><h3 id="ln命令"><a href="#ln命令" class="headerlink" title="ln命令"></a>ln命令</h3><p>ln（英文全拼：link files）命令是一个非常重要命令，它的功能是为某一个文件在另外一个位置建立一个同步的链接。</p><p>链接又可分为两种 : 硬链接(hard link)与软链接(symbolic link)，硬链接的意思是一个档案可以有多个名称，而软链接的方式则是产生一个特殊的档案，该档案的内容是指向另一个档案的位置。不论是硬链接或软链接都不会将原本的档案复制一份，只会占用非常少量的磁碟空间。</p><p>若链接的路径存在，则无法创建新链接，需删除之后，才能新建。</p><ul><li>软链接：<ul><li>1.软链接，以路径的形式存在。类似于Windows操作系统中的快捷方式。</li><li>2.软链接可以 跨文件系统 ，硬链接不可以。</li><li>3.软链接可以对一个不存在的文件名进行链接。</li><li>4.软链接可以对目录进行链接。</li></ul></li><li>硬链接：<ul><li>1.硬链接，以文件副本的形式存在。但不占用实际空间。</li><li>2.不允许给目录创建硬链接。</li><li>3.硬链接只有在同一个文件系统中才能创建。<br>语法：</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln [-s][源文件或目录][目标文件或目录]</span><br></pre></td></tr></table></figure><ul><li><code>-s</code>选项，创建软连接。</li><li>参数1：被链接的文件或文件夹。</li><li>参数2：要链接去的目的地。</li><li>给文件创建软链接，为a.log文件创建软链接link_a，如果a.log丢失，link_a将失效，<code>ln -s a.log link_a</code>。</li><li>给文件创建硬链接，为b.log创建硬链接ln_b，如果b.log丢失，ln_b仍可访问，b.log与ln_b的各项属性相同，<code>ln b.log ln_b</code>。</li></ul><hr><h2 id="文档编辑"><a href="#文档编辑" class="headerlink" title="文档编辑"></a>文档编辑</h2><h3 id="grep命令"><a href="#grep命令" class="headerlink" title="grep命令"></a>grep命令</h3><p>grep (global regular expression) 命令用于查找文件里符合条件的字符串或正则表达式。</p><p>grep 指令用于查找内容包含指定的范本样式的文件，如果发现某文件的内容符合所指定的范本样式，预设 grep 指令会把含有范本样式的那一列显示出来。若不指定任何文件名称，或是所给予的文件名为 -，则 grep 指令会从标准输入设备读取数据。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep [options] pattern [files]</span><br></pre></td></tr></table></figure><ul><li><code>-n</code>选项，可选，表示在结果中显示匹配的行的行号。</li><li><code>pattern</code>，关键字，必填， 表示要查找的字符串或正则表达式，带有空格或其它特殊符号，建议使用””将关键字包围起来。</li><li><code>files</code>， 表示要查找的文件名，可以同时查找多个文件，如果省略 files 参数，则默认从标准输入中读取数据。</li><li>在文件 file.txt 中查找字符串 “hello”，并打印匹配的行，<code>grep hello file.txt</code>。</li><li>在文件夹 dir 中递归查找所有文件中匹配正则表达式 “pattern” 的行，并打印匹配行所在的文件名和行号，<code>grep -r -n pattern dir/</code>。</li><li>在当前目录中，查找后缀有 file 字样的文件中包含 test 字符串的文件，并打印出该字符串的行，<code>grep test *file </code>。</li></ul><hr><h3 id="wc命令"><a href="#wc命令" class="headerlink" title="wc命令"></a>wc命令</h3><p>wc命令做数量统计，可以通过wc命令统计文件的行数、单词数量等。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wc [-cmlw][文件...]</span><br></pre></td></tr></table></figure><ul><li><code>-c</code>选项，统计bytes数量。</li><li><code>-m</code>选项，统计字符数量。</li><li><code>-l</code>选项，统计行数。</li><li><code>-w</code>选项，统计单词数量。</li><li>参数，文件路径，被统计的文件，可作为内容输入端口，多文件按照空格隔开。</li><li>默认的情况下，wc将计算指定文件的行数、字数，以及字节数并依次显示，<code>wc testfile</code>。</li><li>统计字节数，<code>wc -c testfile</code>，其他同理。</li><li>统计当前目录下文件的个数（不包括目录），<code>ls -l | grep &quot;^-&quot; | wc -l</code></li><li>查看某目录下文件夹(目录)的个数（包括子目录），<code>ls -lR | grep &quot;^d&quot; | wc -l</code></li><li>统计文件中带有it关键字的有几行，<code>cat test.txt | grep it | wc -l</code></li><li>统计文件中带有it关键字的结果中有多少个单词，<code>cat test.txt | grep it | wc -w</code></li></ul><hr><h3 id="echo命令"><a href="#echo命令" class="headerlink" title="echo命令"></a>echo命令</h3><p>可以使用echo命令在命令行内输出指定内容。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 输出的内容</span><br></pre></td></tr></table></figure><ul><li>无需选项，只有一个参数，表示要输出的内容，复杂内容可以用””包围。</li><li>普通字符串<ul><li><code>echo &quot;It is a test&quot;</code></li><li><code>echo It is a test</code></li><li>这里的双引号完全可以省略，两条语句效果一致。</li></ul></li><li>显示转义字符<ul><li><code>echo &quot;\&quot;It is a test\&quot;&quot;</code>输出结果为”It is a test”</li></ul></li><li>显示命令执行结果<ul><li><code>echo `pwd` </code></li><li>将命令用反引号<code>`</code>将其包围,被包围的内容，会被作为命令执行，而非普通字符，此处输出的是当前工作目录。</li></ul></li></ul><hr><h3 id="重定向符"><a href="#重定向符" class="headerlink" title="重定向符"></a>重定向符</h3><p>功能：将符号左边的结果，输出到右边指定的文件中去。</p><ul><li><code>&gt;</code>，表示覆盖输出。</li><li><code>&gt;&gt;</code>，表示追加输出。</li><li><code>echo “Hello Linux” &gt; it.txt</code>，使用<code>&gt;</code>覆盖原有内容。</li><li><code>echo Hello World &gt;&gt; it.txt</code>，再次执行，使用<code>&gt;&gt;</code>追加新内容。</li></ul><hr><h2 id="备份压缩"><a href="#备份压缩" class="headerlink" title="备份压缩"></a>备份压缩</h2><p>Linux和Mac系统常用有2种压缩格式，后缀名分别是：</p><ul><li><code>.tar</code>，称之为tarball，归档文件，即简单的将文件组装到一个.tar的文件内，并没有太多文件体积的减少，仅仅是简单的封装。</li><li><code>.gz</code>，也常见为.tar.gz，gzip格式压缩文件，即使用gzip压缩算法将文件压缩到一个文件内，可以极大的减少压缩后的体积</li></ul><h3 id="tar命令"><a href="#tar命令" class="headerlink" title="tar命令"></a>tar命令</h3><p>tar（英文全拼：tape archive ）命令用于备份文件。tar 是用来建立，还原备份文件的工具程序，它可以加入，解开备份文件内的文件。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar [-c -v -x -f -z -C] 参数1 参数2 ... 参数n</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>选项<code>-c</code>，创建压缩文件，用于压缩模式。</li><li>选项<code>-v</code>，显示压缩、解压过程，用于查看进度。</li><li>选项<code>-x</code>，解压模式。</li><li>选项<code>-f</code>，要创建的文件，或要解压的文件，<code>-f</code>选项<strong>必须</strong>在所有选项中位置处于<strong>最后一个</strong>。</li><li>选项<code>-z</code>，gzip模式，不使用<code>-z</code>就是普通的tarball格式。</li><li>选项<code>-C</code>，选择解压的目的地，用于解压模式，<code>-C</code>选项单独使用，和解压所需的其它参数分开。</li><li>tar压缩常用组合为：<ul><li>将1.txt 2.txt 3.txt 压缩到test.tar文件内，<code>tar -cvf test.tar 1.txt 2.txt 3.txt</code>。</li><li>将1.txt 2.txt 3.txt 压缩到test.tar.gz文件内，使用gzip模式，<code>tar -zcvf test.tar.gz 1.txt 2.txt 3.txt</code>。</li></ul></li><li>tar解压常用组合为：<ul><li>解压test.tar，将文件解压至当前目录，<code>tar -xvf test.tar</code>。</li><li>解压test.tar，将文件解压至指定目录（/home/soft），<code>tar -xvf test.tar -C /home/soft</code>。</li><li>以Gzip模式解压test.tar.gz，将文件解压至指定目录（/home/soft），<code>tar -zxvf test.tar.gz -C /home/soft</code>。</li></ul></li></ul><hr><h3 id="zip命令"><a href="#zip命令" class="headerlink" title="zip命令"></a>zip命令</h3><p>zip 命令用于压缩文件。zip 是个使用广泛的压缩程序，压缩后的文件后缀名为 .zip。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zip [-r] 参数1 参数2 ... 参数n</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>选项<code>-r</code>，递归处理，将指定目录下的所有文件和子目录一并处理，被压缩的包含文件夹的时候，需要使用<code>-r</code>选项。</li><li>将a.txt b.txt c.txt 压缩到test.zip文件内，<code>zip test.zip a.txt b.txt c.txt</code>。</li><li>将test、soft两个文件夹和a.txt文件，压缩到test.zip文件内，<code>zip -r test.zip test soft a.txt</code>。</li></ul><hr><h3 id="unzip命令"><a href="#unzip命令" class="headerlink" title="unzip命令"></a>unzip命令</h3><p>unzip命令用于解压缩zip文件。unzip为.zip压缩文件的解压缩程序。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unzip [-d] 参数</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>选项<code>-d</code>，指定要解压去的位置，同<code>tar</code>的<code>-C</code>选项。</li><li>参数，被解压的zip压缩包文件。</li><li>将test.zip解压到当前目录，<code>unzip test.zip</code>。</li><li>将test.zip解压到指定文件夹内（/home/soft），<code>unzip test.zip -d /home/soft</code>。</li></ul><hr><h2 id="系统管理"><a href="#系统管理" class="headerlink" title="系统管理"></a>系统管理</h2><h3 id="su命令"><a href="#su命令" class="headerlink" title="su命令"></a>su命令</h3><p>su(Switch User)命令就是用于账户切换的系统命令。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su [-] [USER]</span><br></pre></td></tr></table></figure><ul><li><code>-</code>符号是可选的，表示是否在切换用户后加载环境变量，建议带上。</li><li>参数：<code>USER</code>，用户名，表示要切换的用户，用户名也可以省略，省略表示切换到root。</li><li>切换用户后，可以通过<code>exit</code>命令退回上一个用户，也可以使用快捷键：<code>ctrl + d</code>。</li><li>使用普通用户，切换到其它用户需要输入密码，如切换到root用户。</li><li>使用root用户切换到其它用户，无需密码，可以直接切换。</li></ul><hr><h3 id="sudo命令"><a href="#sudo命令" class="headerlink" title="sudo命令"></a>sudo命令</h3><p>sudo命令为普通的命令授权，临时以root身份执行。在其它命令之前，带上sudo，即可为这一条命令临时赋予root授权。但是并不是所有的用户，都有权利使用sudo，需要为普通用户配置sudo认证。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo command</span><br></pre></td></tr></table></figure><ul><li>为普通用户配置sudo认证：<ul><li>切换到root用户，执行<code>visudo</code>命令，会自动通过vi编辑器打开：<code>/etc/sudoers</code></li><li>在文件的最后添加：<code>用户名 ALL=ALL NOPASSWD:ALL</code>,其中最后的NOPASSWD:ALL 表示使用sudo命令，无需输入密码，通过 wq 保存。</li></ul></li></ul><hr><h3 id="exit命令"><a href="#exit命令" class="headerlink" title="exit命令"></a>exit命令</h3><p>exit命令用于退出目前的shell。执行exit可使shell以指定的状态值退出。若不设置状态值参数，则shell以预设值退出。状态值0代表执行成功，其他值代表执行失败。exit也可用在script，离开正在执行的script，回到shell。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit [状态值]</span><br></pre></td></tr></table></figure><ul><li>退出终端，<code>exit</code>。</li></ul><hr><h3 id="whoami"><a href="#whoami" class="headerlink" title="whoami"></a>whoami</h3><p>whoami命令用于显示自身用户名称。显示自身的用户名称，本指令相当于执行<code>id -un</code>指令。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whoami</span><br></pre></td></tr></table></figure><ul><li>显示用户名，<code>whoami</code>。</li></ul><hr><h3 id="useradd命令"><a href="#useradd命令" class="headerlink" title="useradd命令"></a>useradd命令</h3><p>useradd 命令用于建立用户帐号。使用 <code>useradd</code>指令所建立的帐号，实际上是保存在<code>/etc/passwd</code> 文本文件中。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd [-g -d] 用户名</span><br></pre></td></tr></table></figure><ul><li>选项：<code>-g</code>，指定用户的组，不指定<code>-g</code>，会创建同名组并自动加入，指定<code>-g</code>需要组已经存在，如已存在同名组，必须使用<code>-g</code>。</li><li>选项：<code>-d</code>，指定用户HOME路径，不指定，HOME目录默认在：<code>/home/用户名</code>。</li><li>新建了一个用户gem，它属于group用户组，同时又属于adm和root用户组，其中group用户组是其主组，为登录名gem产生一个主目录，/home/gem。<code>useradd –d  /home/gem -g group –G adm,root gem</code>。</li></ul><hr><h3 id="userdel命令"><a href="#userdel命令" class="headerlink" title="userdel命令"></a>userdel命令</h3><p>userdel命令用于删除用户帐号。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel [-r] 用户名</span><br></pre></td></tr></table></figure><ul><li>选项：<code>-r</code>，删除用户的主目录，不使用<code>-r</code>，删除用户时，用户的主目录保留。</li></ul><hr><h3 id="usermod命令"><a href="#usermod命令" class="headerlink" title="usermod命令"></a>usermod命令</h3><p>usermod命令用于修改用户帐号。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod 选项 用户名</span><br></pre></td></tr></table></figure><ul><li>常用的选项包括<code>-c</code>,<code>-d</code>,<code>-g</code>,<code>-G</code>等，这些选项的意义与<code>useradd</code>命令中的选项一样，可以为用户指定新的资源值。</li><li>将用户sam的主目录改为/home/z，用户组改为developer，<code>usermod -d /home/z –g developer sam</code>。</li></ul><hr><h3 id="id命令"><a href="#id命令" class="headerlink" title="id命令"></a>id命令</h3><p>id命令用于显示用户的ID，以及所属群组的ID。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id [-gGnru] [用户名]</span><br></pre></td></tr></table></figure><ul><li>选项<code>-g</code>，显示用户所属群组的ID。</li><li>选项<code>-G</code>，显示用户所属附加群组的ID。</li><li>选项<code>-n</code>，显示用户，所属群组或附加群组的名称。</li><li>选项<code>-u</code>，显示用户ID。</li><li>参数：用户名，被查看的用户，如果不提供则查看自身。</li><li>显示所有群组的 ID，<code>id -G</code>。</li><li>显示指定用户信息，<code>id newlinux</code>。</li></ul><hr><h3 id="groupadd命令"><a href="#groupadd命令" class="headerlink" title="groupadd命令"></a>groupadd命令</h3><p>groupadd 命令用于创建一个新的工作组，新工作组的信息将被添加到系统文件中。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd [-g gid] group</span><br></pre></td></tr></table></figure><ul><li>选项<code>-g</code>，指定新建工作组的 id。</li><li>参数：<code>group</code>，创建的工作组名。</li><li>向系统中增加了一个新组group1，新组的组标识号是在当前已有的最大组标识号的基础上加1，<code>groupadd group1</code>。</li><li>向系统中增加了一个新组group2，同时指定新组的组标识号是101，<code>groupadd -g 101 group2</code>。</li></ul><hr><h3 id="groupdel命令"><a href="#groupdel命令" class="headerlink" title="groupdel命令"></a>groupdel命令</h3><p>groupdel命令用于删除群组。<br>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupdel [群组名称]</span><br></pre></td></tr></table></figure><ul><li>从系统中删除组group1，<code>groupdel group1</code>。</li></ul><hr><h3 id="groupmod命令"><a href="#groupmod命令" class="headerlink" title="groupmod命令"></a>groupmod命令</h3><p>groupmod命令用于更改群组识别码或名称。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupmod [-g &lt;群组识别码&gt;][&lt;新群组名称&gt;][群组名称]</span><br></pre></td></tr></table></figure><ul><li>选项<code>-g</code>，指定修改后的工作组 id。</li><li>参数：新群组名称，设置欲使用的群组名称。</li><li>参数：群组名称，要修改的群组名称。</li><li>将组group2的组标识号修改为102，<code>groupmod -g 102 group2</code>。</li><li>将组group2的标识号改为10000，组名修改为group3，<code>groupmod –g 10000 -n group3 group2</code>。</li></ul><hr><h3 id="newgrp-命令"><a href="#newgrp-命令" class="headerlink" title="newgrp 命令"></a>newgrp 命令</h3><p>newgrp 命令用于登入另一个群组。如果一个用户同时属于多个用户组，那么用户可以在用户组之间切换，以便具有其他用户组的权限，<strong>前提条件是其他用户组确实是该用户的主组或附加组。</strong></p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newgrp [群组名称]</span><br></pre></td></tr></table></figure><ul><li>将当前用户切换到root用户组，<code>newgrp root</code>。</li></ul><hr><h3 id="getent命令"><a href="#getent命令" class="headerlink" title="getent命令"></a>getent命令</h3><p>getent(get entries)命令用来查看系统的数据库中的相关记录。其功能是用于查看系统数据库中的记录信息。即便这些数据库不是本地的，类似于LDAP或者NIS也可以使用getent命令进行查看。<strong>可用于查看用户信息、域名信息等</strong>。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getent database [参数]</span><br></pre></td></tr></table></figure><ul><li>支持的database数据库： group， hosts，  networks， passwd，services等，支持的数据库被配置在<code>/etc/nsswitch.conf</code>中。</li><li>查看本地的密码文件（/etc/passwd）中所有用户信息，<code>getent passwd</code>，返回的共有7份信息，分别是：<code>用户名:密码(x):用户ID:组ID:描述信息:HOME目录:执行终端</code>。</li><li>查看本地的密码文件（/etc/passwd）中包含的指定用户信息，<code>getent passwd newlinux</code>。</li><li>查看本地的组文件（/etc/group）中所有组信息，<code>getent group</code>，返回的共包含3份信息，分别是：<code>组名称:组认证(显示为x):组ID</code>。</li><li>查看本地的组文件（/etc/group）中包含的指定组信息，<code>getent root</code>。</li><li>查看本地的主机文件（/etc/hosts）中包含的指定域名信息：<code>getent hosts xxx.com</code>。</li><li>获取所有服务的列表：<code>getent services</code>。</li><li>获取指定服务的列表：<code>getent services 80</code>。</li></ul><hr><h3 id="free命令"><a href="#free命令" class="headerlink" title="free命令"></a>free命令</h3><p>free命令用于显示内存状态。free指令会显示内存的使用情况，包括实体内存，虚拟的交换文件内存，共享内存区段，以及系统核心使用的缓冲区等。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">free [-h]</span><br></pre></td></tr></table></figure><ul><li>选项：<code>-h</code>，以合适的单位显示内存使用情况。</li><li>百分比查内存占用率，<code>free | grep Mem | awk &#39;&#123;print $3/$2 * 100.0&#125;&#39;</code>。</li></ul><hr><h3 id="ps命令"><a href="#ps命令" class="headerlink" title="ps命令"></a>ps命令</h3><p>ps（英文全拼：process status）命令用于显示当前进程的状态。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps [-A -e -f]</span><br></pre></td></tr></table></figure><ul><li>选项：<code>-A</code>，列出所有的进程，显示部分信息<code>PID、TTY、TIME、CMD</code>。</li><li>选项：<code>-e</code>，显示出全部的进程。</li><li>选项：<code>-f</code>，以完全格式化的形式展示信息（展示全部信息）。</li><li>显示所有进程信息，连同命令行， <code>ps -ef</code>。</li><li>查找指定进程格式，<code>ps -ef | grep 进程关键字</code>，进程关键字不仅仅过滤名称，进程号，用户ID，端口等，都可以被grep过滤。</li><li>结果列表显示从左到右分别是：<ul><li><code>UID</code>：进程所属的用户ID。</li><li><code>PID</code>：进程的进程号ID。</li><li><code>PPID</code>：进程的父ID（启动此进程的其它进程）。</li><li><code>C</code>：此进程的CPU占用率（百分比）。</li><li><code>STIME</code>：进程的启动时间。</li><li><code>TTY</code>：启动此进程的终端序号，如显示?，表示非终端启动。</li><li><code>TIME</code>：进程占用CPU的时间。</li><li><code>CMD</code>：进程对应的名称或启动路径或启动命令。</li></ul></li></ul><hr><h3 id="kill命令"><a href="#kill命令" class="headerlink" title="kill命令"></a>kill命令</h3><p>kill命令用于删除执行中的程序或工作。<br>kill 可将指定的信息送至程序。预设的信息为<code>SIGTERM(15)</code>，可将指定程序终止。若仍无法终止该程序，可使用<code>SIGKILL(9)</code>信息尝试强制删除程序。程序或工作的编号可利用<code>ps</code>指令或<code>jobs</code>指令查看。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill [-s &lt;信息名称或编号&gt;][程序]</span><br></pre></td></tr></table></figure><ul><li>选项：<code>-s &lt;信息名称或编号&gt;</code>，指定要送出的信息。</li><li>参数：[程序] ，[程序]可以是程序的PID或是PGID，也可以是工作编号。</li><li>使用 <code>kill -l</code>命令列出所有可用信号。最常用的信号是：<ul><li><code>1(HUP)</code>：重新加载进程。</li><li><code>9(KILL)</code>：杀死一个进程。</li><li><code>15(TERM)</code>：正常停止一个进程。</li></ul></li><li>强制杀死进程号10101，<code>kill -KILL 10101</code>效果等同于<code>kill -9 10101</code>。</li><li>杀死指定用户所有进程:<ul><li>方法一 过滤出newlinux用户进程，<code>kill -9 $(ps -ef | grep newlinux)</code>。</li><li>方法二，<code>kill -u newlinux</code>。 </li></ul></li></ul><hr><h3 id="top命令"><a href="#top命令" class="headerlink" title="top命令"></a>top命令</h3><p>top命令用于实时显示 process 的动态，可查看CPU、内存使用情况，默认每5秒刷新一次。直接输入top即可，按<code>q</code>或<code>ctrl + c</code>退出。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top [-] [d delay] [q] [c] [S] [s] [i] [n] [b]</span><br></pre></td></tr></table></figure><ul><li>选项<code>-p</code>，只显示某个进程的信息。</li><li>选项<code>-d</code>，设置刷新时间，默认是5s。</li><li>选项<code>-c</code>，显示产生进程的完整命令，默认是进程名。</li><li>选项<code>-n</code>，指定刷新次数，比如top -n 3：刷新输出3次后退出。</li><li>选项<code>-b</code>，以非交互非全屏模式运行，以批次的方式执行top，一般配合<code>-n</code>指定输出几次统计信息，将输出重定向到指定文件，比如<code>top -b -n 3 &gt; /tmp/top.tmp</code>。</li><li>选项<code>-i</code>，不显示任何闲置（idle）或无用（zombie）的进程。</li><li>选项<code>-u</code>，查找特定用户启动的进程。</li></ul><p>top命令内容详解：</p><img src="/2023/02/01/6348/image-20230410173914680.png" class="" title="top命令结果展示"><ul><li><p>第一行：</p><ul><li><code>top</code>：命令名称</li><li><code>17:02:25</code>：当前系统时间</li><li><code>up 1：14</code>：启动了1小时14分钟</li><li><code>2 users</code>：2个用户登录</li><li><code>load average</code>：1、5、15分钟负载<ul><li><code>load average：0.34,0.30,0.32</code>：1分钟平均负载0.34，5分钟平均负载0.30，15分钟负载0.32</li></ul></li></ul></li><li><p>第二行：描述的是进程的相关信息</p><ul><li><code>Tasks</code>：任务<ul><li><code>168 total</code>：168个进程</li><li><code>1 running</code>：1个进程子在运行</li><li><code>167 sleeping</code>：167个进程睡眠</li><li><code>0 stopped</code>：0个停止进程</li><li><code>0 zombie</code>：0个僵尸进程</li></ul></li></ul></li><li><p>第三行：描述的是CPU的相关信息</p><ul><li><code>%Cpu(s)</code>：CPU使用率<ul><li><code>us</code>：用户CPU使用率</li><li><code>sy</code>：系统CPU使用率</li><li><code>ni</code>：高优先级进程占用CPU时间百分比</li><li><code>id</code>：空闲CPU率</li><li><code>wa</code>：IO等待CPU占用率</li><li><code>hi</code>：CPU硬件中断率</li><li><code>si</code>：CPU软件中断率</li><li><code>st</code>：强制等待占用CPU率</li></ul></li></ul></li><li><p>第四、五行：描述的是内存的相关信息</p><ul><li><code>Kib Mem</code>：物理内存，<ul><li>`total：总量</li><li><code>free</code>：空闲</li><li><code>used</code>：使用</li><li><code>buff/cache</code>：buff和cache占用</li></ul></li><li>`KibSwap：虚拟内存（交换空间）<ul><li><code>total</code>：总量</li><li><code>free</code>：空闲</li><li><code>used</code>：使用</li><li><code>buff/cache</code>：buff和cache占用</li></ul></li></ul></li><li><p><code>PID</code>，进程id。</p></li><li><p><code>USER</code>，进程所属用户。</p></li><li><p><code>PR</code>，进程优先级，越小越高。</p></li><li><p><code>NI</code>，负值表示高优先级，正表示低优先级。</p></li><li><p><code>VIRT</code>，进程使用虚拟内存，单位KB。</p></li><li><p><code>RES</code>，进程使用物理内存，单位KB。</p></li><li><p><code>SHR</code>，进程使用共享内存，单位KB。</p></li><li><p><code>S</code>，进程状态（S休眠，R运行，Z僵死状态，N负数优先级，I空闲状态）。</p></li><li><p><code>%CPU</code>，进程占用CPU率。</p></li><li><p><code>%MEM</code>，进程占用内存率。</p></li><li><p><code>TIME+</code>，进程使用CPU时间总计，单位10毫秒。</p></li><li><p><code>COMMAND</code>，进程的命令或名称或程序文件路径。</p></li></ul><p>当top以交互式运行（非-b选项启动），可以用以下交互式命令进行控制：</p><table><thead><tr><th align="center">按键</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center"><code>h</code></td><td align="center">会显示帮助画面</td></tr><tr><td align="center"><code>c</code></td><td align="center">会显示产生进程的完整命令，等同于-c参数，再次按下c键，变为默认展示</td></tr><tr><td align="center"><code>f</code></td><td align="center">可以选择需要展示的项目</td></tr><tr><td align="center"><code>M</code></td><td align="center">根据驻留内存大小（RES）排序</td></tr><tr><td align="center"><code>P</code></td><td align="center">根据CPU使用百分比大小进行排序</td></tr><tr><td align="center"><code>T</code></td><td align="center">根据时间/累计时间进行排序</td></tr><tr><td align="center"><code>E</code></td><td align="center">切换顶部内存显示单位</td></tr><tr><td align="center"><code>e</code></td><td align="center">切换进程内存显示单位</td></tr><tr><td align="center"><code>l</code></td><td align="center">切换显示平均负载和启动时间信息</td></tr><tr><td align="center"><code>i</code></td><td align="center">不显示闲置或无用的进程，等同于-i参数，再次按下，变为默认显示</td></tr><tr><td align="center"><code>t</code></td><td align="center">切换显示CPU状态信息</td></tr><tr><td align="center"><code>m</code></td><td align="center">切换显示内存信息</td></tr></tbody></table><hr><h3 id="systemctl命令"><a href="#systemctl命令" class="headerlink" title="systemctl命令"></a>systemctl命令</h3><p>systemctl命令是一个系统管理守护进程、工具和库的集合，用于取代<code>System V</code>、<code>service</code>和<code>chkconfig</code>命令，初始进程主要负责控制systemd系统和服务管理器。该命令主要分为：查询或发送控制命令给systemd服务，管理单元服务的命令，服务文件的相关命令，任务、环境、快照相关命令，systemd服务的配置重载，系统开机关机相关的命令。</p><p>Linux系统很多软件（内置或第三方）均支持使用<code>systemctl</code>命令控制：启动、停止、开机自启，能够被systemctl管理的软件，一般也称之为：服务。</p><p><code>systemctl</code>命令管理的服务在<code> /usr/lib/systemd/system</code>查看。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl [start | stop | restart | status | enable | disable] 服务名</span><br></pre></td></tr></table></figure><ul><li>选项<code>start</code>，启动。</li><li>选项<code>stop</code>，关闭。</li><li>选项<code>status</code>，查看状态。</li><li>选项<code>enable</code>，开启开机自启。</li><li>选项<code>disable</code>，关闭开机自启。</li><li>列出所有可用单元 ，grep可以进行过滤，<code>systemctl list-unit-files[ | grep 服务名]</code>。</li></ul><hr><h3 id="date命令"><a href="#date命令" class="headerlink" title="date命令"></a>date命令</h3><p>date命令可以用来显示或设定系统的日期与时间。当以root身份更改了系统时间之后，记得以 <code>clock -w</code>来将系统时间写入 CMOS 中，这样下次重新开机时系统时间才会持续保持最新的正确值。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date [-d datestr] [-s datestr] [+格式化字符串]</span><br></pre></td></tr></table></figure><ul><li><code>-d</code>按照给定的字符串显示日期，字符串不能是<code>&#39;now&#39;</code>，一般用于日期计算。</li><li><code>-s</code>根据字符串设置系统时间。</li><li>参数：格式化字符串：通过特定的字符串标记，来控制显示的日期格式。<ul><li><code>%Y</code>，年。</li><li><code>%y</code>，年份后两位数字 (00..99)。</li><li><code>%m</code>，月份 (01..12)。</li><li><code>%d</code>，日 (01..31)。</li><li><code>%H</code>，小时 (00..23)。</li><li><code>%M</code>，分钟 (00..59)。</li><li><code>%S</code>，秒 (00..60)。</li><li><code>%s</code>，自 1970-01-01 00:00:00 UTC 到现在的秒数。</li></ul></li><li>使用date命令本体，无选项，直接查看时间，<code>date</code>，输出结果为<code>Tue May 24 00:00:00 CST</code> 2022。</li><li>格式化输出，<code>date +&quot;%Y-%m-%d&quot;</code>，输出结果为<code>2077-02-07</code>。</li><li>时间格式转换，<code>date -d &quot;2009-12-12&quot; +&quot;%Y/%m/%d %H:%M.%S&quot;</code>，输出结果为<code>2009/12/12 00:00.00</code>。</li><li> 输出昨天日期，<code>date -d &quot;1 day ago&quot; +&quot;%Y-%m-%d&quot;</code>，输出结果为<code>2077-02-06</code>。</li><li>输出 2 秒后的时间，<code>date -d &quot;2 second&quot; +&quot;%Y-%m-%d %H:%M.%S&quot;</code>，输出结果为<code>2012-11-20 14:21.31</code>。</li><li>设置当前时间，只有root权限才能设置，其他只能查看，<code>date -s</code>。</li><li>设置日期为20770207，这样会把具体时间设置成00:00:00，<code>date -s 20770207</code>。</li><li>设置具体时间，不会对日期做更改，<code>date -s 01:01:01</code>。</li><li>设置全部时间。<ul><li><code>date -s &quot;01:01:01 2012-05-23&quot;</code>。</li><li><code>date -s &quot;01:01:01 20120523&quot;</code>。</li><li><code>date -s &quot;2012-05-23 01:01:01&quot;</code>。</li><li><code>date -s &quot;20120523 01:01:01&quot;</code>。</li></ul></li></ul><hr><h2 id="网络通讯"><a href="#网络通讯" class="headerlink" title="网络通讯"></a>网络通讯</h2><h3 id="ifconfig命令"><a href="#ifconfig命令" class="headerlink" title="ifconfig命令"></a>ifconfig命令</h3><p>ifconfig命令用于显示或设置网络设备。ifconfig可设置网络设备的状态，或是显示目前的设置。如无法使用ifconfig命令，可以安装：<code>yum -y install net-tools</code>。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig [网络设备][down up][&lt;hw&lt;网络设备类型&gt;&lt;硬件地址&gt;][IP地址]</span><br></pre></td></tr></table></figure><ul><li>显示网络设备信息，<code>ifconfig</code>。</li><li>关闭指定网卡，<code>ifconfig eth0 down</code>。</li><li>启动指定网卡，<code>ifconfig eth0 up</code>。</li><li>关闭网卡并修改MAC地址，<code>ifconfig eth1 hw ether 00:1D:1C:1D:1E</code>,修改成功之后启动该网卡。</li><li>给eth0网卡配置IP地址，<code>ifconfig eth0 192.168.1.117</code>。</li><li>给eth0网卡配置IP地址，配置子网掩码,，配置广播地址，<code>ifconfig eth0 192.168.1.117 netmask 255.255.255.0 broadcast 192.168.1.255</code>。</li></ul><hr><h3 id="ping-命令"><a href="#ping-命令" class="headerlink" title="ping 命令"></a>ping 命令</h3><p>ping 命令用于检测主机。执行 ping 指令会使用 ICMP 传输协议，发出要求回应的信息，若远端主机的网络功能没有问题，就会回应该信息，因而得知该主机运作正常。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ping [-c&lt;完成次数&gt;][主机名称或IP地址]</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>选项：<code>-c</code>，检查的次数，不使用<code>-c</code>选项，将无限次数持续检查。</li><li>参数：ip或主机名，被检查的服务器的ip地址或主机名地址。</li><li>检查到127.0.0.1是否联通，并检查3次，<code>ping -c 127.0.0.1</code>。</li></ul><hr><h3 id="wget命令"><a href="#wget命令" class="headerlink" title="wget命令"></a>wget命令</h3><p>wget是非交互式的文件下载器，可以在命令行内下载网络文件。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wegt [-b] url</span><br></pre></td></tr></table></figure><ul><li>选项：<code>-b</code>，可选，后台下载，会将日志写入到当前工作目录的wget-log文件，通过tail命令可以监控后台下载进度：<code>tail -f wget-log</code>。</li><li>参数：<code>url</code>，下载链接。</li><li>通过wegt后台下载软件安装包，<code>wegt -b http://xxx.xxx.xxx/xxx.tar.gz</code>。</li><li>无论下载是否完成，都会生成要下载的文件，如果下载未完成，请及时清理未完成的不可用文件。</li></ul><hr><h3 id="curl命令"><a href="#curl命令" class="headerlink" title="curl命令"></a>curl命令</h3><p>curl可以发送http网络请求，可用于：下载文件、获取信息等。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl [-O] url</span><br></pre></td></tr></table></figure><ul><li>选项：<code>-O</code>，用于下载文件，当url是下载链接时，可以使用此选项保存文件。</li><li>参数：<code>url</code>，要发起请求的网络地址。</li><li>curl命令行下直接获取当前IP信息，向cip.cc发起网络请求，<code>curl cip.cc</code>。</li><li>通过curl下载软件安装包，<code>curl -O http://xxx.xxx.xxx/xxx.tar.gz</code>。</li></ul><hr><h3 id="netstat命令"><a href="#netstat命令" class="headerlink" title="netstat命令"></a>netstat命令</h3><p>netstat 命令用于显示网络状态。利用netstat指令可得知整个Linux系统的网络情况。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat [-anptu]</span><br></pre></td></tr></table></figure><ul><li>选项：<code>-a</code>，显示所有连线中的Socket。</li><li>选项：<code>-n</code>，直接使用IP地址，而不通过域名服务器。</li><li>选项：<code>-p</code>，显示正在使用Socket的程序识别码和程序名称。</li><li>选项：<code>-t</code>，显示TCP传输协议的连线状况。</li><li>选项：<code>-u</code>，显示UDP传输协议的连线状况。</li><li>查看本机指定端口号的占用情况，<code>netstat -anp | grep 端口号</code>。</li><li>Linux系统可以支持65535个端口，这6万多个端口分为3类进行使用：<ul><li>公认端口：1~1023，用于系统内置或常用知名软件绑定使用，如SSH服务的22端口，HTTPS服务的443端口。</li><li>注册端口：1024~49151，用于松散绑定使用（用户自定义）。</li><li>动态端口：49152~65535，用于临时使用（多用于出口）。</li></ul></li></ul><hr><h2 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h2><h3 id="tail命令"><a href="#tail命令" class="headerlink" title="tail命令"></a>tail命令</h3><p>tail 命令可用于查看文件的内容，有一个常用的参数 -f 常用于查阅正在改变的日志文件。<br><code>tail -f filename</code>会把 filename 文件里的最尾部的内容显示在屏幕上，并且不断刷新，只要 filename 更新就可以看到最新的文件内容。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail [参数] [文件] </span><br></pre></td></tr></table></figure><ul><li><code>-n&lt;行数&gt;</code>选项， 显示文件的尾部 n 行内容。</li><li><code>-f</code> 选项，循环读取。</li><li>显示 notes.log 文件的最后 10 行，<code>tail notes.log</code>，不使用<code>fn</code>参数，默认显示最后 10 行。</li><li>查看notes.log文件的尾部3行：<code>tail -3 notes.log</code>。</li><li>实时查看notes.log文件末尾100行的内容，<code>tail -fn 100 notes.log</code>。</li></ul><hr><h3 id="iostat命"><a href="#iostat命" class="headerlink" title="iostat命"></a>iostat命</h3><p>iostat主要用于监控系统设备的IO负载情况，根据这个可以看出当前系统的写入量和读取量，CPU负载和磁盘负载。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat [-x] [num1] [num2]</span><br></pre></td></tr></table></figure><ul><li>选项：<code>-x</code>，显示更多信息。</li><li>参数：<code>num1</code>：数字，刷新间隔。</li><li>参数：<code>num2</code>：数字，刷新几次。</li></ul><hr><h3 id="sar命令"><a href="#sar命令" class="headerlink" title="sar命令"></a>sar命令</h3><p>可以使用sar命令查看网络的相关统计。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sar -n DEV num1 num2</span><br></pre></td></tr></table></figure><ul><li>选项：<code>-n</code>，查看网络，DEV表示查看网络接口。</li><li><code>num1</code>：刷新间隔（不填就查看一次结束）。</li><li><code>num2</code>：查看次数（不填无限次数）。</li></ul><hr><h3 id="man命令"><a href="#man命令" class="headerlink" title="man命令"></a>man命令</h3><p>man(英文全拼：Manual，手册）命令会列出一份完整的说明。 其内容包括命令语法、各选项的意义及相关命令 。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man [命令]</span><br></pre></td></tr></table></figure><p>快捷键：</p><ul><li><code>q</code>，退出。</li><li><code>Enter</code>，按行下翻。</li><li><code>Space</code>，按页下翻。</li><li><code>b</code>，上翻一页。</li><li>查看cp命令的帮助信息，<code>man cp</code>。</li><li>查看/etc/passwd文件的信息，<code>man /etc/passwd</code>。</li><li>任何命令都支持：<code>--help</code>选项， 可以通过这个选项，查看命令的帮助。如：<code>ls --help</code>， 会列出ls命令的帮助文档。</li></ul><hr><h3 id="hostname命令"><a href="#hostname命令" class="headerlink" title="hostname命令"></a>hostname命令</h3><p>可以通过hostname命令来查看本机的hostname。也可以直接<code>cat /etc/hostname</code>查看。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname</span><br></pre></td></tr></table></figure><ul><li>hostname查看主机名，<code>hostname</code>。</li><li>临时修改主机名，关机后失效，<code>hostname newHostname</code>。</li><li>永久修改主机名：<ul><li>修改配置文件<code>/etc/hostname</code>保存退出，<code>vi /etc/hostname</code>,进入vi，删除旧主机名，输入新主机名newHostname，退出保存，<code>reboot</code>重启生效。</li><li>使用命令<code>hostnamectl</code>，修改主机名（需root），<code>hostnamectl set-hostname newHostname</code>。</li></ul></li></ul><hr><h3 id="管道符"><a href="#管道符" class="headerlink" title="管道符"></a>管道符</h3><p>写法：<code>|</code></p><p>功能：将符号左边的结果，作为符号右边的输入。</p><ul><li>将cat a.txt的结果，作为grep命令的输入，用来过滤it关键字，<code>cat a.txt | grep it</code>。</li><li>可以支持嵌套使用，<code>cat it.txt | grep keyword | grep it</code>。</li><li>过滤ls的结果，<code>ls | grep Desktop</code></li><li>过滤结果，只找路径带有/usr/lib64的结果，<code>find / -name “test” | grep “/usr/lib64”</code>。</li></ul><hr><h1 id="vi-vim文本编辑器"><a href="#vi-vim文本编辑器" class="headerlink" title="vi\vim文本编辑器"></a>vi\vim文本编辑器</h1><p>vi\vim是visual interface的简称, 是Linux中最经典的文本编辑器，vim 是 vi 的加强版本，兼容 vi 的所有指令，不仅能编辑文本，而且还具有 shell 程序编辑的功能，可以不同颜色的字体来辨别语法的正确性，极大方便了程序的设计和编辑性。 </p><p>基本上 vi/vim 共分为三种模式，分别是命令模式（Command mode），输入模式（Insert mode）和底线命令模式（Last line mode）。 这三种模式的作用分别是：</p><ul><li>命令模式：命令模式下，所敲的按键编辑器都理解为命令，以命令驱动执行不同的功能。此模型下，不能自由进行文本编辑。</li><li>输入模式：也就是所谓的编辑模式、插入模式。此模式下，可以对文件内容进行自由编辑。</li><li>底线命令模式：以<code>：</code>开始，通常用于文件的保存、退出。</li></ul><img src="/2023/02/01/6348/Snipaste_2023-03-25_11-55-32.png" class="" title="vi&#x2F;vim模式"><hr><h2 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h2><p>如果需要通过vi/vim编辑器编辑文件，通过如下命令任意一个均可：</p><ul><li>打开或新建文件，并将光标置于第一行首，<code>vi filename</code>。</li><li>打开或新建文件，并将光标置于第一行首，<code>vim filename</code>。</li><li>打开文件，并将光标置于第n行首，<code>vim +n filename</code>。</li><li>打开文件，并将光标置于最后一行首 ，<code>vim + filename</code>。</li><li>打开文件，并将光标置于第一个与pattern匹配的串处，<code>vim +/pattern filename</code>。</li><li>在上次正用vi编辑时发生系统崩溃，恢复filename，<code>vim -r filename</code>。</li><li>打开多个文件，依次进行编辑，<code>vim filename....filename</code>。</li></ul><p>刚启动 vi/vim，便进入了命令模式。此状态下敲击键盘动作会被Vim识别为命令，而非输入字符。比如我们此时按下<code>i</code>，并不会输入一个字符，<code>i</code>被当作了一个命令。 以下是常用的几个命令： </p><ul><li><code>i</code> 切换到输入模式，以输入字符。</li><li><code>x</code> 删除当前光标所在处的字符。</li><li><code>:</code> 切换到底线命令模式，以在最底一行输入命令。</li></ul><p>命令模式下的一些常见快捷键</p><ol><li><strong>进入输入或取代的编辑模式</strong></li></ol><table><thead><tr><th align="center">命令</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><code>i</code></td><td align="center">在当前光标位置，进入输入模式</td></tr><tr><td align="center"><code>a</code></td><td align="center">在当前光标位置之后，进入输入模式</td></tr><tr><td align="center"><code>I</code></td><td align="center">在当行开头，进入输入模式</td></tr><tr><td align="center"><code>A</code></td><td align="center">在当行结尾，进入输入模式</td></tr><tr><td align="center"><code>o</code></td><td align="center">在当前光标下一行，进入输入模式</td></tr><tr><td align="center"><code>O</code></td><td align="center">在当前光标上一行，进入输入模式</td></tr><tr><td align="center"><code>esc</code></td><td align="center">返回命令模式</td></tr></tbody></table><ol start="2"><li><strong>移动光标的方法和搜索替换</strong></li></ol><table><thead><tr><th align="center">命令</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><code>k</code></td><td align="center">上</td></tr><tr><td align="center"><code>j</code></td><td align="center">下</td></tr><tr><td align="center"><code>h</code></td><td align="center">左</td></tr><tr><td align="center"><code>l</code></td><td align="center">右</td></tr><tr><td align="center"><code>0</code></td><td align="center">移动到当行开头</td></tr><tr><td align="center"><code>$</code></td><td align="center">移动到当行结尾</td></tr><tr><td align="center"><code>gg</code></td><td align="center">跳到首行</td></tr><tr><td align="center"><code>G</code></td><td align="center">跳到尾行</td></tr><tr><td align="center"><code>pageup（PgUp）</code></td><td align="center">向上翻页</td></tr><tr><td align="center"><code>pagedown（PgDn）</code></td><td align="center">向下翻页</td></tr><tr><td align="center"><code>/</code></td><td align="center">进入搜索模式</td></tr><tr><td align="center"><code>n</code></td><td align="center">向下继续搜索</td></tr><tr><td align="center"><code>N</code></td><td align="center">向上继续搜索</td></tr></tbody></table><ol start="3"><li><strong>删除、复制与粘贴</strong></li></ol><table><thead><tr><th align="center">命令</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><code>dd</code></td><td align="center">删除当前行</td></tr><tr><td align="center"><code>ndd</code></td><td align="center">向下删除n行</td></tr><tr><td align="center"><code>yy</code></td><td align="center">复制当前行</td></tr><tr><td align="center"><code>nyy</code></td><td align="center">向下复制n行</td></tr><tr><td align="center"><code>p</code></td><td align="center">粘贴</td></tr><tr><td align="center"><code>u</code></td><td align="center">撤销</td></tr><tr><td align="center"><code>ctrl + r</code></td><td align="center">反向撤销</td></tr><tr><td align="center"><code>dG</code></td><td align="center">向下删除尾行（向下的所有）</td></tr><tr><td align="center"><code>dgg</code></td><td align="center">向上删除到首行（向上的所有）</td></tr><tr><td align="center"><code>d0</code></td><td align="center">删除到本行开头</td></tr><tr><td align="center"><code>d$</code></td><td align="center">删除到本行结尾</td></tr></tbody></table><hr><h2 id="输入模式"><a href="#输入模式" class="headerlink" title="输入模式"></a>输入模式</h2><p>在命令模式下按下<code>i</code>就进入了输入模式。在输入模式中，可以使用以下按键：</p><ul><li><strong>字符按键以及Shift组合</strong>，输入字符</li><li><strong>ENTER</strong>，回车键，换行</li><li><strong>BACK SPACE</strong>，退格键，删除光标前一个字符</li><li><strong>DEL</strong>，删除键，删除光标后一个字符</li><li><strong>方向键</strong>，在文本中移动光标</li><li><strong>HOME/END</strong>，移动光标到行首/行尾</li><li><strong>Page Up/Page Down</strong>，上/下翻页</li><li><strong>Insert</strong>，切换光标为输入/替换模式，光标将变成竖线/下划线</li><li><strong>ESC</strong>，退出输入模式，切换到命令模式</li></ul><hr><h2 id="底线命令模式"><a href="#底线命令模式" class="headerlink" title="底线命令模式"></a>底线命令模式</h2><p>在命令模式下按下<code>:</code>就进入了底线命令模式。</p><ol><li><strong>指令行的储存、离开等指令</strong><table><thead><tr><th align="center">命令</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><code>:wq</code></td><td align="center">保存并退出</td></tr><tr><td align="center"><code>:q</code></td><td align="center">仅退出</td></tr><tr><td align="center"><code>:q!</code></td><td align="center">强制退出</td></tr><tr><td align="center"><code>:w</code></td><td align="center">仅保存</td></tr><tr><td align="center"><code>:set nu</code></td><td align="center">显示行号</td></tr><tr><td align="center"><code>set paste</code></td><td align="center">设置粘贴模式</td></tr></tbody></table></li></ol><hr><h1 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h1><p>软件安装，CentOS系统和Ubuntu是使用不同的包管理器。CentOS使用<code>yum</code>管理器，Ubuntu使用<code>apt</code>管理器。<code>yum</code>和 <code>apt</code>均需要root权限，<code>yum</code>和 <code>apt</code>均需联网管理软件安装。</p><h2 id="yum命令"><a href="#yum命令" class="headerlink" title="yum命令"></a>yum命令</h2><p>yum（ Yellow dog Updater, Modified）是一个在Fedora和RedHa 以及SUSE中的Shell前端软件包管理器。</p><p>基于<code>RPM</code>包管理，能够从指定的服务器自动下载 RPM 包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装。</p><p>yum提供了查找、安装、删除某一个、一组甚至全部软件包的命令，而且命令简洁而又好记。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum [options] [command] [package ...]</span><br></pre></td></tr></table></figure><ul><li>选项<code>options</code>，可选，选项包括<code>-h</code>（帮助），<code>-y</code>（当安装过程提示选择全部为 “yes”），<code>-q</code>（不显示安装的过程）等。</li><li>选项<code>command</code>，要进行的操作，<code>install</code>（安装），选项<code>remove</code>（卸载），选项<code>search</code>（搜索）等。</li><li>参数<code>package ...</code>，软件名称。</li><li>yum常用命令：<ul><li>列出所有可更新的软件清单命令，<code>yum check-update</code>。</li><li>更新所有软件命令，<code>yum update</code>。</li><li>仅安装指定的软件命令，<code>yum install &lt;package_name&gt;</code>。</li><li>仅更新指定的软件命令，<code>yum update &lt;package_name&gt;</code>。</li><li>列出所有可安裝的软件清单命令，<code>yum list</code>。</li><li>删除软件包命令，<code>yum remove &lt;package_name&gt;</code>。</li><li>查找软件包命令，<code>yum search &lt;keyword&gt;</code>。</li><li>清除缓存目录下的软件包，<code>yum clean packages</code>。</li><li>清除缓存目录下的 headers，<code>yum clean headers</code>。 </li><li>清除缓存目录下旧的 headers，<code>yum clean oldheaders</code>。</li><li>清除缓存目录下的软件包及旧的 headers，<code>yum clean, yum clean all (= yum clean packages; yum clean oldheaders)</code> 。</li></ul></li><li>更换yum源：<ul><li>首先备份<code>/etc/yum.repos.d/CentOS-Base.repo</code>，<code>mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</code>。</li><li>下载对应版本repo文件, 放入<code>/etc/yum.repos.d/</code>文件夹下。</li><li>运行以下命令生成缓存，<code>yum clean all</code>，<code>yum makecache</code>。</li></ul></li></ul><hr><h2 id="apt命令"><a href="#apt命令" class="headerlink" title="apt命令"></a>apt命令</h2><p>apt（Advanced Packaging Tool）是一个在Debian和Ubuntu中的Shell前端软件包管理器。</p><p>apt命令提供了查找、安装、升级、删除某一个、一组甚至全部软件包的命令，而且命令简洁而又好记。</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt [options] [command] [package ...]</span><br></pre></td></tr></table></figure><ul><li>选项<code>options</code>，可选，选项包括<code>-h</code>（帮助），<code>-y</code>（当安装过程提示选择全部为 “yes”），<code>-q</code>（不显示安装的过程）等。</li><li>选项<code>command</code>，要进行的操作，<code>install</code>（安装），选项<code>remove</code>（卸载），选项<code>search</code>（搜索）等。</li><li>参数<code>package ...</code>，软件名称。</li><li>apt常用命令：<ul><li>列出所有可更新的软件清单命令，<code>sudo apt update</code>。</li><li>升级软件包，<code>sudo apt upgrade</code>。</li><li>列出可更新的软件包及版本信息，<code>apt list --upgradeable</code>。</li><li>升级软件包，升级前先删除需要更新软件包，<code>sudo apt full-upgrade</code>。</li><li>安装指定的软件命令，<code>sudo apt install &lt;package_name&gt;</code>。</li><li>安装多个软件包，<code>sudo apt install &lt;package_1&gt; &lt;package_2&gt; &lt;package_3&gt;</code>。</li><li>更新指定的软件命令，<code>sudo apt update &lt;package_name&gt;</code>。</li><li>显示软件包具体信息,例如，<code>版本号，安装大小，依赖关系等等，</code>sudo apt show <package_name>`。</li><li>删除软件包命令，<code>sudo apt remove &lt;package_name&gt;</code>。</li><li>清理不再使用的依赖和库文件: sudo apt autoremove`。</li><li>移除软件包及配置文件: sudo apt purge <package_name>`。</li><li>查找软件包命令，<code> sudo apt search &lt;keyword&gt;</code>。</li><li>列出所有已安装的包，<code>apt list --installed</code>。</li><li>列出所有已安装的包的版本信息，<code>apt list --all-versions</code>。</li></ul></li></ul><hr><h1 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h1><h2 id="修改Linux时区"><a href="#修改Linux时区" class="headerlink" title="修改Linux时区"></a>修改Linux时区</h2><p>系统默认时区非中国的东八区。</p><p>使用root权限，执行如下命令，将系统自带的<code>/etc/localtime</code>文件删除，并将<code>/usr/share/zoneinfo/Asia/Shanghai</code>文件链接为<code>/etc/localtime</code>文件即可，修改时区为东八区时区。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -f /etc/localtime</span><br><span class="line">sudo ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></pre></td></tr></table></figure><hr><h2 id="同步时间"><a href="#同步时间" class="headerlink" title="同步时间"></a>同步时间</h2><p>可以通过ntp程序自动校准系统时间。安装ntp：<code>yum -y install ntp</code>。</p><p>启动并设置开机自启：</p><ul><li><code>systemctl start ntpd</code></li><li><code>systemctl enable ntpd</code></li></ul><p>当ntpd启动后会定期的联网校准系统的时间。</p><p>也可以手动校准（需root权限），通过阿里云提供的服务网址配合<code>ntpdate</code>命令（安装ntp后会附带这个命令）自动校准，执行以下命令<code>ntpdate -u ntp.aliyun.com</code>。</p><hr><h2 id="域名解析"><a href="#域名解析" class="headerlink" title="域名解析"></a>域名解析</h2><p>可以通过主机名找到对应计算机的IP地址，这就是主机名映射（域名解析）。</p><p>先通过系统本地的记录去查找，如果找不到就联网去公开DNS服务器去查找。</p><p>系统本地的记录：</p><ul><li>Windows看，<code>C:\Windows\System32\drivers\etc\hosts</code>。</li><li>Linux看，<code>/etc/hosts</code>。</li></ul><h2 id="强制停止"><a href="#强制停止" class="headerlink" title="强制停止"></a>强制停止</h2><p>Linux某些程序的运行，如果想要强制停止它，可以使用快捷键<code>ctrl + c</code>。</p><p>命令输入错误，也可以通过快捷键<code>ctrl + c</code>，退出当前输入，重新输入。</p><hr><h2 id="退出或登出"><a href="#退出或登出" class="headerlink" title="退出或登出"></a>退出或登出</h2><p>可以通过快捷键<code>ctrl + d</code>，退出账户的登录，或者退出某些特定程序的专属页面，但不能用于退出vi/vim。</p><hr><h2 id="历史命令搜索"><a href="#历史命令搜索" class="headerlink" title="历史命令搜索"></a>历史命令搜索</h2><ul><li>可以通过<code>history</code>命令，查看历史输入过的命令。</li><li>可以通过<code>!命令前缀</code>，自动执行上一次匹配前缀的命令，如输入<code>!cr</code>自动执行上一次<code>clear</code>清屏命令。</li><li>可以通过快捷键<code>ctrl + r</code>，输入内容去匹配历史命令，如果搜索到的内容是需要的，那么回车键可以直接执行，使用键盘左右键，可以得到此命令（不执行）。</li></ul><hr><h2 id="光标移动快捷键"><a href="#光标移动快捷键" class="headerlink" title="光标移动快捷键"></a>光标移动快捷键</h2><ul><li><code>ctrl + a</code>，跳到命令开头</li><li><code>ctrl + e</code>，跳到命令结尾</li><li><code>ctrl + 键盘左键</code>，向左跳一个单词</li><li><code>ctrl + 键盘右键</code>，向右跳一个单词</li></ul><hr><h2 id="清屏"><a href="#清屏" class="headerlink" title="清屏"></a>清屏</h2><p>通过快捷键<code>ctrl + l</code>，可以清空终端内容，或通过命令<code>clear</code>得到同样效果。</p><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaWeb的使用</title>
      <link href="/2023/01/15/55225.html"/>
      <url>/2023/01/15/55225.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>web框架篇之React</title>
      <link href="/2023/01/04/52647.html"/>
      <url>/2023/01/04/52647.html</url>
      
        <content type="html"><![CDATA[<h1 id="React基础"><a href="#React基础" class="headerlink" title="React基础"></a>React基础</h1><p>react 是前端三大框架之一</p><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><p>首先，通过react脚手架创建项目</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app client --template typescript</span><br></pre></td></tr></table></figure><ul><li>client是项目名</li><li>目前react版本是18.x</li></ul><p>运行项目</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd client</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure><ul><li>会自动打开浏览器，默认监听 3000 端口</li></ul><h4 id="修改端口"><a href="#修改端口" class="headerlink" title="修改端口"></a>修改端口</h4><p>在项目根目录下新建文件 .env.development，它可以定义开发环境下的环境变量</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">PORT</span>=<span class="string">7070</span></span><br></pre></td></tr></table></figure><p>重启项目，端口就变成了 7070</p><ul><li>参考文档：<a href="https://create-react-app.dev/docs/advanced-configuration/">Advanced Configuration | Create React App (create-react-app.dev)</a></li></ul><h4 id="浏览器插件"><a href="#浏览器插件" class="headerlink" title="浏览器插件"></a>浏览器插件</h4><p>插件地址 <a href="https://reactjs.org/blog/2015/09/02/new-react-developer-tools.html#installation">New React Developer Tools – React Blog (reactjs.org)</a></p><h4 id="VSCode"><a href="#VSCode" class="headerlink" title="VSCode"></a>VSCode</h4><p>推荐安装 Prettier 代码格式化插件</p><h2 id="入门案例"><a href="#入门案例" class="headerlink" title="入门案例"></a>入门案例</h2><h3 id="Hello"><a href="#Hello" class="headerlink" title="Hello"></a>Hello</h3><p>编写一个 src/pages/Hello.tsx 组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params"></span>)  &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Hello, World!<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>组件中使用了 jsx 语法，即在 js 中直接使用 html 标签或组件标签</li><li>函数式组件必须返回标签片段</li></ul><p>在 index.js 引入组件</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> reportWebVitals <span class="keyword">from</span> <span class="string">&#x27;./reportWebVitals&#x27;</span></span><br><span class="line"><span class="comment">// 1. 引入组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Hello</span> <span class="keyword">from</span> <span class="string">&#x27;./pages/Hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>) <span class="keyword">as</span> <span class="title class_">HTMLElement</span>)</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;/* 2. 将原来的 <span class="tag">&lt;<span class="name">App</span>/&gt;</span> 改为 <span class="tag">&lt;<span class="name">Hello</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span> */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Hello</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// If you want to start measuring performance in your app, pass a function</span></span><br><span class="line"><span class="comment">// to log results (for example: reportWebVitals(console.log))</span></span><br><span class="line"><span class="comment">// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals</span></span><br><span class="line"><span class="title function_">reportWebVitals</span>()</span><br></pre></td></tr></table></figure><p>将欢迎词作为属性传递给组件</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Hello</span> msg=<span class="string">&#x27;你好&#x27;</span>&gt;&lt;/<span class="title class_">Hello</span>&gt;</span><br></pre></td></tr></table></figure><ul><li>字符串值，可以直接使用双引号赋值</li><li>其它类型的值，用 <code>&#123;值&#125;</code></li></ul><p>而组件修改为</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params">props: &#123; msg: <span class="built_in">string</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;props.msg&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="jsx-原理"><a href="#jsx-原理" class="headerlink" title="jsx 原理"></a>jsx 原理</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params">props: &#123; msg: <span class="built_in">string</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;props.msg&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 v17 之前，其实相当于</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createElement &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params">props: &#123;msg: <span class="built_in">string</span>&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">createElement</span>(<span class="string">&#x27;h3&#x27;</span>, <span class="literal">null</span>, <span class="string">`<span class="subst">$&#123;props.msg&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="人物卡片案例"><a href="#人物卡片案例" class="headerlink" title="人物卡片案例"></a>人物卡片案例</h2><p>样式已经准备好 /src/css/P1.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#root</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100vw</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.student</span> &#123;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">128px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">330px</span>;</span><br><span class="line">  <span class="comment">/* font-family: &#x27;华文行楷&#x27;; */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: flex-start;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#7591AD</span>;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span> <span class="number">#2c2c2c</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#e8f6fd</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.photo</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.photo</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="comment">/* object-fit: scale-down; */</span></span><br><span class="line">  <span class="attribute">object-fit</span>: cover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.photo</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to top, <span class="number">#333</span>, transparent);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.student</span> <span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">68px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">68px</span>;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h2</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">68px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>);</span><br><span class="line">  <span class="attribute">border-top-left-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-top-right-radius</span>: <span class="number">5px</span>;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.student</span> <span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">250px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">22px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.student</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#8ea2b8</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.student</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.photo</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.student</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.photo</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">90px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">90px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">90px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span> <span class="number">#111</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.student</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">object-position</span>: <span class="number">50%</span> <span class="number">0%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.student</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">190px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.student</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">visibility</span>: visible;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>类型 /src/model/Student.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">sex</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>,</span><br><span class="line">  <span class="attr">photo</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>组件 /src/pages/P1.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../css/P1.css&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P1</span>(<span class="params">props: &#123; student: Student &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;student&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;photo&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;props.student.photo&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;props.student.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;props.student.id&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>      </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>性别 &#123;props.student.sex&#125; 年龄 &#123;props.student.age&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stu1 = &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;风清扬&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">99</span>, <span class="attr">photo</span>: <span class="string">&#x27;/imgs/1.png&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> stu2 = &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;玮哥&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">photo</span>: <span class="string">&#x27;/imgs/2.png&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> stu3 = &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;长宏&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span>, <span class="attr">photo</span>: <span class="string">&#x27;/imgs/3.png&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="variable constant_">P1</span> student=&#123;stu1&#125;&gt;&lt;/<span class="variable constant_">P1</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">P1</span> <span class="attr">student</span>=<span class="string">&#123;stu2&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">P1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">P1</span> <span class="attr">student</span>=<span class="string">&#123;stu3&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">P1</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h3><ul><li>src 下的资源，要用相对路径引入</li><li>public 下的资源，记得 / 代表路径的起点</li></ul><h3 id="标签命名"><a href="#标签命名" class="headerlink" title="标签命名"></a>标签命名</h3><ul><li>组件标签必须用大驼峰命名</li><li>普通 html 标签必须用小写命名</li></ul><h3 id="事件处理"><a href="#事件处理" class="headerlink" title="事件处理"></a>事件处理</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../css/P1.css&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P1</span>(<span class="params">props: &#123; student: Student &#125;</span>) &#123;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params">e : React.MouseEvent</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(student)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;student&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;photo&#x27;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;props.student.photo&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;props.student.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;props.student.id&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>性别 &#123;props.student.sex&#125; 年龄 &#123;props.student.age&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>事件以小驼峰命名</li><li>事件处理函数可以有一个事件对象参数，可以获取事件相关信息</li></ul><h3 id="列表-amp-Key"><a href="#列表-amp-Key" class="headerlink" title="列表 &amp; Key"></a>列表 &amp; Key</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">P1</span> <span class="keyword">from</span> <span class="string">&#x27;./P1&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P2</span>(<span class="params">props: &#123; students: Student[] &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;props.students.map((s) =&gt; ( <span class="tag">&lt;<span class="name">P1</span> <span class="attr">student</span>=<span class="string">&#123;s&#125;</span> <span class="attr">key</span>=<span class="string">&#123;s.id&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">P1</span>&gt;</span> ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>key 在循环时是必须的，否则会有 warning</li></ul><p>也可以这么做</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">P1</span> <span class="keyword">from</span> <span class="string">&#x27;./P1&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P2</span>(<span class="params">props: &#123; students: Student[] &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> list = props.<span class="property">students</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">s</span>) =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">P1</span> <span class="attr">student</span>=<span class="string">&#123;s&#125;</span> <span class="attr">key</span>=<span class="string">&#123;s.id&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">P1</span>&gt;</span></span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;list&#125;<span class="tag">&lt;/&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stu1 = &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;风清扬&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">99</span>, <span class="attr">photo</span>: <span class="string">&#x27;/1.png&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> stu2 = &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;玮哥&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">45</span>, <span class="attr">photo</span>: <span class="string">&#x27;/2.png&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> stu3 = &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;长宏&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">45</span>, <span class="attr">photo</span>: <span class="string">&#x27;/3.png&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="variable constant_">P2</span> students=&#123;[stu1,stu2,stu3]&#125;&gt;&lt;/<span class="variable constant_">P2</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h3><p>P1 修改为</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../css/P1.css&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P1</span>(<span class="params">props: &#123; student: Student; hideAge?: <span class="built_in">boolean</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(props.<span class="property">student</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> ageFragment = !props.<span class="property">hideAge</span> &amp;&amp; <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>年龄 &#123;props.student.age&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;student&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;photo&#x27;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;props.student.photo&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;props.student.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;props.student.id&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        性别 &#123;props.student.sex&#125; &#123;ageFragment&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>子元素如果是布尔值，nullish，不会渲染</li></ul><p>P2 修改为</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">P1</span> <span class="keyword">from</span> <span class="string">&#x27;./P1&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P2</span>(<span class="params">props: &#123; students: Student[]; hideAge?: <span class="built_in">boolean</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> list = props.<span class="property">students</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">s</span>) =&gt;</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">P1</span> <span class="attr">student</span>=<span class="string">&#123;s&#125;</span> <span class="attr">hideAge</span>=<span class="string">&#123;props.hideAge&#125;</span> <span class="attr">key</span>=<span class="string">&#123;s.id&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">P1</span>&gt;</span></span></span><br><span class="line">  ))</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;list&#125;<span class="tag">&lt;/&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stu1 = &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;风清扬&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">99</span>, <span class="attr">photo</span>: <span class="string">&#x27;/1.png&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> stu2 = &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;玮哥&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">45</span>, <span class="attr">photo</span>: <span class="string">&#x27;/2.png&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> stu3 = &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;长宏&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">45</span>, <span class="attr">photo</span>: <span class="string">&#x27;/3.png&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="variable constant_">P2</span> students=&#123;[stu1,stu2,stu3]&#125; hideAge=&#123;<span class="literal">true</span>&#125;&gt;&lt;/<span class="variable constant_">P2</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="参数解构"><a href="#参数解构" class="headerlink" title="参数解构"></a>参数解构</h3><p>以 P1 组件为例</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../css/P1.css&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P1</span></span><br><span class="line">(&#123; student, hideAge = <span class="literal">false</span> &#125;: &#123; <span class="attr">student</span>: <span class="title class_">Student</span>, hideAge?: <span class="built_in">boolean</span> &#125;) &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(student)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> ageFragment = !hideAge &amp;&amp; <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>年龄 &#123;student.age&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;student&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;photo&#x27;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;student.photo&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;student.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;student.id&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        性别 &#123;student.sex&#125; &#123;ageFragment&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>可以利用解构赋值语句，让 props 的使用更为简单</li><li>对象解构赋值还有一个额外的好处，给属性赋默认值</li></ul><p>使用组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stu1 = &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;风清扬&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">99</span>, <span class="attr">photo</span>: <span class="string">&#x27;/1.png&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="variable constant_">P1</span> student=&#123;stu1&#125;&gt;&lt;/<span class="variable constant_">P1</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="处理变化的数据"><a href="#处理变化的数据" class="headerlink" title="处理变化的数据"></a>处理变化的数据</h2><p>入门案例侧重的是数据展示，并未涉及到数据的变动，接下来演示react如何处理数据变化</p><h3 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h3><p>首先是axios，作用是发送请求、接收响应，从服务器获取真实数据</p><p>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></table></figure><p>定义组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P4</span>(<span class="params">&#123; id &#125;: &#123; id: <span class="built_in">number</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateStudent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">`http://localhost:8080/api/students/<span class="subst">$&#123;id&#125;</span>`</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">updateStudent</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span><span class="tag">&lt;/&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>其中 /api/students/${id} 是提前准备好的后端服务 api，会延迟 2s 返回结果</li></ul><p>使用组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="variable constant_">P4</span> id=&#123;<span class="number">1</span>&#125;&gt;&lt;/<span class="variable constant_">P4</span>&gt;</span><br></pre></td></tr></table></figure><p>在控制台上打印</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;id&quot;: 1,</span><br><span class="line">    &quot;name&quot;: &quot;宋远桥&quot;,</span><br><span class="line">    &quot;sex&quot;: &quot;男&quot;,</span><br><span class="line">    &quot;age&quot;: 40</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当属性变化时，会重新触发 P4 组件执行，例如将 id 从 1 修改为 2</p><p>执行流程</p><ul><li>首次调用函数组件，返回的 jsx 代码会被渲染成【虚拟 dom 节点】（也称 Fiber 节点）<ul><li>根据【虚拟 dom 节点】会生成【真实 dom 节点】，由浏览器显示出来</li></ul></li><li>当函数组件的 props 或 state 发生变化时，才会<strong>重新</strong>调用函数组件，返回 jsx<ul><li>jsx 与上次的【虚拟 dom 节点】对比<ul><li>如果没变化，复用上次的节点</li><li>有变化，创建新的【虚拟 dom 节点】替换掉上次的节点</li></ul></li></ul></li><li>由于严格模式会触发两次渲染，为了避免干扰，请先注释掉 index.tsx 中的 <code>&lt;React.StrictMode&gt;</code></li></ul><h3 id="状态"><a href="#状态" class="headerlink" title="状态"></a>状态</h3><p>先来看一个例子，能否把服务器返回的数据显示在页面上</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P5</span>(<span class="params">props: &#123; id: <span class="built_in">number</span> &#125;</span>) &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">getTime</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">    <span class="keyword">return</span> d.<span class="title function_">getHours</span>() + <span class="string">&#x27;:&#x27;</span> + d.<span class="title function_">getMinutes</span>() + <span class="string">&#x27;:&#x27;</span> + d.<span class="title function_">getSeconds</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateStudent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="title function_">get</span>(</span><br><span class="line">      <span class="string">`http://localhost:8080/api/students/<span class="subst">$&#123;props.id&#125;</span>`</span></span><br><span class="line">    )</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">assign</span>(student, resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(current, student, <span class="title function_">getTime</span>())</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> current = count++</span><br><span class="line">  <span class="keyword">let</span> student = &#123; <span class="attr">name</span>: <span class="string">&#x27;xx&#x27;</span> &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(current, student, <span class="title function_">getTime</span>())</span><br><span class="line">  <span class="title function_">updateStudent</span>()</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>姓名是：&#123;student.name&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>count 是一个全局变量，记录 P5 函数第几次被调用</li></ul><p>执行效果，控制台上</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0 &#123;name: &#x27;xx&#x27;&#125; &#x27;16:22:16&#x27;</span><br><span class="line">0 &#123;id: 1, name: &#x27;宋远桥&#x27;, sex: &#x27;男&#x27;, age: 40&#125; &#x27;16:22:18&#x27;</span><br></pre></td></tr></table></figure><p>此时页面仍显示 <code>姓名是：xx</code></p><p>那么修改一下 props 的 id 呢？进入开发工具把 id 从 1 修改为 2，控制台上</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> &#123;<span class="attr">name</span>: <span class="string">&#x27;xx&#x27;</span>&#125; <span class="string">&#x27;16:24:0&#x27;</span></span><br><span class="line"><span class="number">1</span> &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;俞莲舟&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">38</span>&#125; <span class="string">&#x27;16:24:2&#x27;</span></span><br></pre></td></tr></table></figure><p>此时页面仍显示 <code>姓名是：xx</code></p><p>为什么页面没有显示两秒后更新的值？</p><ul><li>第一次，页面显示的是 P5 函数的返回结果，这时 student.name 还未被更新成宋远桥，页面显示 xx<ul><li>虽然 2s 后数据更新了，但此时并未触发函数执行，页面不变</li></ul></li><li>第二次，虽然 props 修改触发了函数重新执行，但既然函数重新执行，函数内的 student 又被赋值为 <code>&#123; name: &#39;xx&#39; &#125;</code>，页面还是显示 xx<ul><li>2s 后数据更新，跟第一次一样，并未重新触发函数执行，页面不变</li></ul></li></ul><p>结论：</p><ul><li>函数是无状态的，执行完毕后，它内部用的数据都不会保存下来</li><li>要想让函数有状态，就需要使用 useState 把数据保存在函数之外的地方，这些数据，称之为状态</li></ul><h3 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useReducer, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P5</span>(<span class="params">props: &#123; id: <span class="built_in">number</span> &#125;</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateStudent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="title function_">get</span>(</span><br><span class="line">      <span class="string">`http://localhost:8080/api/students/<span class="subst">$&#123;props.id&#125;</span>`</span></span><br><span class="line">    )</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">assign</span>(student, resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(current, student, <span class="title function_">getTime</span>())</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> current = count++</span><br><span class="line">  <span class="keyword">let</span> [student] = useState&lt;<span class="title class_">Student</span>&gt;(&#123; <span class="attr">name</span>: <span class="string">&#x27;xx&#x27;</span> &#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(current, student, <span class="title function_">getTime</span>())</span><br><span class="line">  <span class="title function_">updateStudent</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>姓名是：&#123;student.name&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来使用 setXXX 方法更新 State</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">P5</span>(<span class="params">props: &#123; id: <span class="built_in">number</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateStudent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">`/api/students/<span class="subst">$&#123;props.id&#125;</span>`</span>)</span><br><span class="line">    <span class="title function_">setStudent</span>(resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> [student, setStudent] = useState&lt;<span class="title class_">Student</span>&gt;(&#123; <span class="attr">name</span>: <span class="string">&#x27;xx&#x27;</span> &#125;)</span><br><span class="line">  <span class="title function_">updateStudent</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>姓名是：&#123;student.name&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>工作流程如下</p><p>首次使用 useState，用它的参数初始化 State</p><p>2s 后数据更新，setStudent 函数会更新 State 数据，并会触发下一次渲染（P5 的调用）</p><p>再次调用 useState，这时返回更新后的数据</p><p>这时再返回 jsx，内容就是 <code>姓名是：张三</code> 了</p><blockquote><p><strong>P.S.</strong></p><p>使用了 useState 之后，会执行两次 xhr 请求，后一次请求是 react 开发工具发送的，不用理会</p></blockquote><p>问题还未结束，第二次 P5 调用时，updateStudent 还会执行，结果会导致 2s 后响应返回继续调用 setStudent，这会导致每隔 2s 调用一次 P5 函数（渲染一次）</p><p>如何让 updateStudent 只执行一次呢？一种土办法是再设置一个布尔 State </p><p>接下来数据更新</p><p>第二次进入 P5 函数时，由于 fetch 条件不成立，因此不会再执行两个 setXXX 方法</p><p>函数式组件的工作流程</p><ul><li>首次调用函数组件，返回的 jsx 代码会被渲染成【虚拟 dom 节点】（也称 Fiber 节点）<ul><li>此时使用 useState 会将组件工作过程中需要数据绑定到【虚拟 dom 节点】上</li><li>根据【虚拟 dom 节点】会生成【真实 dom 节点】，由浏览器显示出来</li></ul></li><li>当函数组件的 props 或 state 发生变化时，才会重新调用函数组件，返回 jsx<ul><li>props 变化由父组件决定，state 变化由组件自身决定</li><li>jsx 与上次的【虚拟 dom 节点】对比<ul><li>如果没变化，复用上次的节点</li><li>有变化，创建新的【虚拟 dom 节点】替换掉上次的节点</li></ul></li></ul></li></ul><h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><p>Effect 称之为副作用（没有贬义），函数组件的主要目的，是为了渲染生成 html 元素，除了这个主要功能以外，管理状态，fetch 数据 … 等等之外的功能，都可以称之为副作用。</p><p>useXXX 打头的一系列方法，都是为副作用而生的，在 react 中把它们称为 Hooks</p><p>useEffect 三种用法</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">useEffect</span></span><br><span class="line"><span class="comment">  参数1：箭头函数, 在真正渲染 html 之前会执行它</span></span><br><span class="line"><span class="comment">  参数2：</span></span><br><span class="line"><span class="comment">    情况1：没有, 代表每次执行组件函数时, 都会执行副作用函数</span></span><br><span class="line"><span class="comment">    情况2：[], 代表副作用函数只会执行一次</span></span><br><span class="line"><span class="comment">    情况3：[依赖项], 依赖项变化时，副作用函数会执行</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P6</span>(<span class="params">&#123; id, age &#125;: &#123; id: <span class="built_in">number</span>, age: <span class="built_in">number</span> &#125;</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1.主要功能&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// useEffect(() =&gt; console.log(&#x27;3.副作用功能&#x27;)) </span></span><br><span class="line">  <span class="comment">// useEffect(() =&gt; console.log(&#x27;3.副作用功能&#x27;), []) </span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3.副作用功能&#x27;</span>), [id]) </span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;2.主要功能&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;id&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用它改写 P5 案例</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P6</span>(<span class="params">&#123; id, age &#125;: &#123; id: <span class="built_in">number</span>, age: <span class="built_in">number</span> &#125;</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [student, setStudent] = <span class="title function_">useState</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;xx&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateStudent</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">`http://localhost:8080/api/students/<span class="subst">$&#123;id&#125;</span>`</span>)    </span><br><span class="line">      <span class="title function_">setStudent</span>(resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">updateStudent</span>()</span><br><span class="line">  &#125;, [id])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;student.name&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createContext, useContext, useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; R, <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  createContext         创建上下文对象</span></span><br><span class="line"><span class="comment">  useContext            读取上下文对象的值</span></span><br><span class="line"><span class="comment">  &lt;上下文对象.Provider&gt;  修改上下文对象的值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HiddenContext</span> = <span class="title function_">createContext</span>(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给以下组件提供数据，控制年龄隐藏、显示</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P7</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [students, setStudents] = useState&lt;<span class="title class_">Student</span>[]&gt;([])</span><br><span class="line">  <span class="keyword">const</span> [hidden, setHidden] = <span class="title function_">useState</span>(<span class="literal">false</span>)</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateStudents</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">get</span>&lt;R&lt;<span class="title class_">Student</span>[]&gt;&gt;(<span class="string">&quot;http://localhost:8080/api/students&quot;</span>)</span><br><span class="line">      <span class="title function_">setStudents</span>(resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">updateStudents</span>()</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">hideOrShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 参数：上一次状态值，旧值</span></span><br><span class="line">    <span class="comment">// 返回值：要更新的新值</span></span><br><span class="line">    <span class="title function_">setHidden</span>(<span class="function">(<span class="params">old</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> !old</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">HiddenContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;hidden&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&#123;hidden?</span>&#x27;<span class="attr">显示</span>&#x27;<span class="attr">:</span>&#x27;<span class="attr">隐藏</span>&#x27;&#125; <span class="attr">onClick</span>=<span class="string">&#123;hideOrShow&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">P71</span> <span class="attr">students</span>=<span class="string">&#123;students&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">P71</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">HiddenContext.Provider</span>&gt;</span></span>  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 负责处理学生集合</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">P71</span>(<span class="params">&#123; students &#125;: &#123; students: Student[] &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> list = students.<span class="title function_">map</span>(<span class="function"><span class="params">s</span>=&gt;</span><span class="language-xml"><span class="tag">&lt;<span class="name">P72</span> <span class="attr">student</span>=<span class="string">&#123;s&#125;</span> <span class="attr">key</span>=<span class="string">&#123;s.id&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">P72</span>&gt;</span></span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;list&#125;<span class="tag">&lt;/&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 负责显示单个学生</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">P72</span>(<span class="params">&#123; student &#125;: &#123; student: Student &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> hidden = <span class="title function_">useContext</span>(<span class="title class_">HiddenContext</span>)</span><br><span class="line">  <span class="keyword">const</span> jsx = !hidden &amp;&amp; <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;student.age&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;student.name&#125; &#123;jsx&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>如果组件分散在多个文件中，HiddenContext 应该 export 导出，用到它的组件 import 导入</li><li>React 中因修改触发的组件重新渲染，都应当是自上而下的</li><li>setHidden 方法如果更新的是对象，那么要返回一个新对象，而不是在旧对象上做修改</li></ul><h2 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../css/P8.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">P8</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [student, setStudent] = <span class="title function_">useState</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;&#x27;</span>, <span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;)</span><br><span class="line">  <span class="keyword">const</span> [message, setMessage] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> options = [<span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;女&#x27;</span>]</span><br><span class="line">  <span class="keyword">const</span> jsx = options.<span class="title function_">map</span>(<span class="function"><span class="params">e</span> =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">option</span> <span class="attr">key</span>=<span class="string">&#123;e&#125;</span>&gt;</span>&#123;e&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// e 事件对象, e.target 事件源</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onChange</span>(<span class="params">e : React.ChangeEvent&lt;HTMLInputElement|HTMLSelectElement&gt;</span>) &#123;</span><br><span class="line">    <span class="title function_">setStudent</span>(<span class="function">(<span class="params">old</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="comment">// 返回的新值，不能与旧值是同一个对象</span></span><br><span class="line">      <span class="keyword">return</span> &#123;...old, [e.<span class="property">target</span>.<span class="property">name</span>]:e.<span class="property">target</span>.<span class="property">value</span>&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">onClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">&#x27;http://localhost:8080/api/students&#x27;</span>, student)</span><br><span class="line">    <span class="title function_">setMessage</span>(resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> messageJsx = message &amp;&amp; <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;success&#x27;</span>&gt;</span>&#123;message&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&#123;student.name&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;onChange&#125;</span> <span class="attr">name</span>=<span class="string">&#x27;name&#x27;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">value</span>=<span class="string">&#123;student.sex&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;onChange&#125;</span> <span class="attr">name</span>=<span class="string">&#x27;sex&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;jsx&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&#123;student.age&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;onChange&#125;</span> <span class="attr">name</span>=<span class="string">&#x27;age&#x27;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#x27;button&#x27;</span> <span class="attr">value</span>=<span class="string">&#x27;新增&#x27;</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;messageJsx&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="React-进阶"><a href="#React-进阶" class="headerlink" title="React 进阶"></a>React 进阶</h1><h2 id="Ant-Design"><a href="#Ant-Design" class="headerlink" title="Ant Design"></a>Ant Design</h2><p>react 组件库</p><ul><li><p>官网地址：<a href="https://ant.design/">https://ant.design/</a></p></li><li><p>镜像地址1：<a href="https://ant-design.gitee.io/">https://ant-design.gitee.io/</a></p></li><li><p>镜像地址2：<a href="https://ant-design.antgroup.com/">https://ant-design.antgroup.com/</a></p></li></ul><h3 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h3><p>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install antd</span><br></pre></td></tr></table></figure><ul><li>目前版本是 4.x</li></ul><p>引入样式，在 css 文件中加入</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@import</span> <span class="string">&#x27;~antd/dist/antd.css&#x27;</span>;</span><br></pre></td></tr></table></figure><p>引入 antd 组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">type</span>=<span class="string">&#x27;primary&#x27;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="国际化"><a href="#国际化" class="headerlink" title="国际化"></a>国际化</h3><p>试试其它组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Modal</span> &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Modal</span> <span class="attr">open</span>=<span class="string">&#123;true&#125;</span> <span class="attr">title</span>=<span class="string">&#x27;对话框&#x27;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">Modal</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>发现确定和取消按钮是英文的，这是因为 antd 支持多种语言，而默认语言是英文</p><p>要想改为中文，建议修改最外层的组件 index.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ConfigProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> zhCN <span class="keyword">from</span> <span class="string">&#x27;antd/es/locale/zh_CN&#x27;</span></span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">ConfigProvider</span> <span class="attr">locale</span>=<span class="string">&#123;zhCN&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">A1</span>&gt;</span><span class="tag">&lt;/<span class="name">A1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">ConfigProvider</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Table</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ColumnsType</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/lib/table&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; R, <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A3</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [students, setStudents] = useState&lt;<span class="title class_">Student</span>[]&gt;([])</span><br><span class="line">  <span class="keyword">const</span> [loading, setLoading] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getStudents</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">get</span>&lt;R&lt;<span class="title class_">Student</span>[]&gt;&gt;(</span><br><span class="line">        <span class="string">&#x27;http://localhost:8080/api/students&#x27;</span></span><br><span class="line">      )</span><br><span class="line">      <span class="title function_">setStudents</span>(resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">      <span class="title function_">setLoading</span>(<span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getStudents</span>()</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// title: 列标题  dataIndex: 要关联的属性名</span></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">columns</span>: <span class="title class_">ColumnsType</span>&lt;<span class="title class_">Student</span>&gt; = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;编号&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;sex&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;age&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// columns: 列定义</span></span><br><span class="line">  <span class="comment">// dataSource: 数据源，一般是数组包对象</span></span><br><span class="line">  <span class="comment">// rowKey: 作为唯一标识的属性名</span></span><br><span class="line">  <span class="comment">// loading: 显示加载图片</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Table</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">columns</span>=<span class="string">&#123;columns&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">dataSource</span>=<span class="string">&#123;students&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">rowKey</span>=<span class="string">&#x27;id&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">loading</span>=<span class="string">&#123;loading&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Table</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="客户端分页"><a href="#客户端分页" class="headerlink" title="客户端分页"></a>客户端分页</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Table</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ColumnsType</span>, <span class="title class_">TablePaginationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/lib/table&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; R, <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A3</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [students, setStudents] = useState&lt;<span class="title class_">Student</span>[]&gt;([])</span><br><span class="line">  <span class="keyword">const</span> [loading, setLoading] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">const</span> [pagination, setPagination] = useState&lt;<span class="title class_">TablePaginationConfig</span>&gt;(</span><br><span class="line">    &#123;<span class="attr">current</span>:<span class="number">1</span>, <span class="attr">pageSize</span>:<span class="number">5</span>&#125;</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 参数: 新的分页数据</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onTableChange</span>(<span class="params">newPagination: TablePaginationConfig</span>) &#123;</span><br><span class="line">    <span class="title function_">setPagination</span>(newPagination)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getStudents</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">get</span>&lt;R&lt;<span class="title class_">Student</span>[]&gt;&gt;(</span><br><span class="line">        <span class="string">&#x27;http://localhost:8080/api/students&#x27;</span></span><br><span class="line">      )</span><br><span class="line">      <span class="title function_">setStudents</span>(resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">      <span class="title function_">setLoading</span>(<span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getStudents</span>()</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ... 省略</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// pagination: 分页数据</span></span><br><span class="line">  <span class="comment">// onChange: 当页号，页大小改变时触发</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Table</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">columns</span>=<span class="string">&#123;columns&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">dataSource</span>=<span class="string">&#123;students&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">rowKey</span>=<span class="string">&#x27;id&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">loading</span>=<span class="string">&#123;loading&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">pagination</span>=<span class="string">&#123;pagination&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onChange</span>=<span class="string">&#123;onTableChange&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Table</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>本例还是查询所有数据，分页是客户端 Table 组件自己实现的</li></ul><h3 id="服务端分页"><a href="#服务端分页" class="headerlink" title="服务端分页"></a>服务端分页</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Table</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ColumnsType</span>, <span class="title class_">TablePaginationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/lib/table&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PageResp</span>, R, <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A4</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [students, setStudents] = useState&lt;<span class="title class_">Student</span>[]&gt;([])</span><br><span class="line">  <span class="keyword">const</span> [loading, setLoading] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">const</span> [pagination, setPagination] = useState&lt;<span class="title class_">TablePaginationConfig</span>&gt;(&#123;</span><br><span class="line">    <span class="attr">current</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">pageSize</span>: <span class="number">5</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onTableChange</span>(<span class="params">newPagination: TablePaginationConfig</span>) &#123;</span><br><span class="line">    <span class="title function_">setPagination</span>(newPagination)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getStudents</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// params 用来给请求添加 url 后的 ? 参数</span></span><br><span class="line">      <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">get</span>&lt;R&lt;<span class="title class_">PageResp</span>&lt;<span class="title class_">Student</span>&gt;&gt;&gt;(</span><br><span class="line">        <span class="string">&#x27;http://localhost:8080/api/students/q&#x27;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">params</span>: &#123;</span><br><span class="line">            <span class="attr">page</span>: pagination.<span class="property">current</span>,</span><br><span class="line">            <span class="attr">size</span>: pagination.<span class="property">pageSize</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">      <span class="comment">// 返回结果中：list 代表当前页集合, total 代表总记录数</span></span><br><span class="line">      <span class="title function_">setStudents</span>(resp.<span class="property">data</span>.<span class="property">data</span>.<span class="property">list</span>)</span><br><span class="line">      <span class="title function_">setPagination</span>(<span class="function">(<span class="params">old</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; ...old, <span class="attr">total</span>: resp.<span class="property">data</span>.<span class="property">data</span>.<span class="property">total</span> &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title function_">setLoading</span>(<span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getStudents</span>()</span><br><span class="line">  &#125;, [pagination.<span class="property">current</span>, pagination.<span class="property">pageSize</span>])</span><br><span class="line">  <span class="comment">// useEffect 需要在依赖项( current 和 pageSize ) 改变时重新执行</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">columns</span>: <span class="title class_">ColumnsType</span>&lt;<span class="title class_">Student</span>&gt; = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;编号&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;sex&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;age&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Table</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">columns</span>=<span class="string">&#123;columns&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">dataSource</span>=<span class="string">&#123;students&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">rowKey</span>=<span class="string">&#x27;id&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">loading</span>=<span class="string">&#123;loading&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">pagination</span>=<span class="string">&#123;pagination&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onChange</span>=<span class="string">&#123;onTableChange&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Table</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>本例需要服务端配合来实现分页，参见代码中新加的注释</li></ul><p>其中 PageResp 类型定义为</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">PageResp</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">list</span>: T[],</span><br><span class="line">  <span class="attr">total</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Input</span>, <span class="title class_">Select</span>, <span class="title class_">Table</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ColumnsType</span>, <span class="title class_">TablePaginationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/lib/table&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PageResp</span>, R, <span class="title class_">Student</span>, <span class="title class_">StudentQueryForm</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Option</span> &#125; = <span class="title class_">Select</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A5</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [students, setStudents] = useState&lt;<span class="title class_">Student</span>[]&gt;([])</span><br><span class="line">  <span class="keyword">const</span> [loading, setLoading] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">const</span> [pagination, setPagination] = useState&lt;<span class="title class_">TablePaginationConfig</span>&gt;(&#123;</span><br><span class="line">    <span class="attr">current</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">pageSize</span>: <span class="number">5</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 代表查询条件的状态数据</span></span><br><span class="line">  <span class="keyword">const</span> [form, setForm] = useState&lt;<span class="title class_">StudentQueryForm</span>&gt;(&#123;&#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onTableChange</span>(<span class="params">newPagination: TablePaginationConfig</span>) &#123;</span><br><span class="line">    <span class="title function_">setPagination</span>(newPagination)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getStudents</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">get</span>&lt;R&lt;<span class="title class_">PageResp</span>&lt;<span class="title class_">Student</span>&gt;&gt;&gt;(</span><br><span class="line">        <span class="string">&#x27;http://localhost:8080/api/students/q&#x27;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">params</span>: &#123;</span><br><span class="line">            <span class="attr">page</span>: pagination.<span class="property">current</span>,</span><br><span class="line">            <span class="attr">size</span>: pagination.<span class="property">pageSize</span>,</span><br><span class="line">            ...form <span class="comment">// 补充查询参数</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">      <span class="title function_">setStudents</span>(resp.<span class="property">data</span>.<span class="property">data</span>.<span class="property">list</span>)</span><br><span class="line">      <span class="title function_">setPagination</span>(<span class="function">(<span class="params">old</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; ...old, <span class="attr">total</span>: resp.<span class="property">data</span>.<span class="property">data</span>.<span class="property">total</span> &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title function_">setLoading</span>(<span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getStudents</span>()</span><br><span class="line">  &#125;, [pagination.<span class="property">current</span>, pagination.<span class="property">pageSize</span>, form.<span class="property">name</span>, form.<span class="property">sex</span>, form.<span class="property">age</span>])</span><br><span class="line">  <span class="comment">// 依赖项除了分页条件外，新加了查询条件依赖</span></span><br><span class="line">    </span><br><span class="line">  <span class="keyword">const</span> <span class="attr">columns</span>: <span class="title class_">ColumnsType</span>&lt;<span class="title class_">Student</span>&gt; = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;编号&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;sex&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;age&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// name 条件改变时处理函数</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onNameChange</span>(<span class="params">e: React.ChangeEvent&lt;HTMLInputElement&gt;</span>) &#123;</span><br><span class="line">    <span class="title function_">setForm</span>(<span class="function">(<span class="params">old</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;...old, <span class="attr">name</span>: e.<span class="property">target</span>.<span class="property">value</span>&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// sex 条件改变时处理函数</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onSexChange</span>(<span class="params">value: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="title function_">setForm</span>(<span class="function">(<span class="params">old</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;...old, <span class="attr">sex</span>: value&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// age 条件改变时处理函数</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onAgeChange</span>(<span class="params">value: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="title function_">setForm</span>(<span class="function">(<span class="params">old</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;...old, <span class="attr">age</span>: value&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> <span class="attr">120</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">placeholder</span>=<span class="string">&#x27;请输入姓名&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;form.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;onNameChange&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Select</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> <span class="attr">120</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">placeholder</span>=<span class="string">&#x27;请选择性别&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">allowClear</span>=<span class="string">&#123;true&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;form.sex&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;onSexChange&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Option</span> <span class="attr">value</span>=<span class="string">&#x27;男&#x27;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Option</span> <span class="attr">value</span>=<span class="string">&#x27;女&#x27;</span>&gt;</span>女<span class="tag">&lt;/<span class="name">Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Select</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> <span class="attr">120</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">placeholder</span>=<span class="string">&#x27;请选择年龄&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">allowClear</span>=<span class="string">&#123;true&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;form.age&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;onAgeChange&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Option</span> <span class="attr">value</span>=<span class="string">&#x27;1,19&#x27;</span>&gt;</span>20以下<span class="tag">&lt;/<span class="name">Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Option</span> <span class="attr">value</span>=<span class="string">&#x27;20,29&#x27;</span>&gt;</span>20左右<span class="tag">&lt;/<span class="name">Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Option</span> <span class="attr">value</span>=<span class="string">&#x27;30,39&#x27;</span>&gt;</span>30左右<span class="tag">&lt;/<span class="name">Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Option</span> <span class="attr">value</span>=<span class="string">&#x27;40,120&#x27;</span>&gt;</span>40以上<span class="tag">&lt;/<span class="name">Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Table</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">columns</span>=<span class="string">&#123;columns&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">dataSource</span>=<span class="string">&#123;students&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">rowKey</span>=<span class="string">&#x27;id&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">loading</span>=<span class="string">&#123;loading&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">pagination</span>=<span class="string">&#123;pagination&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;onTableChange&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Table</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>建议 axios 发请求是用 params 而不要自己拼字符串，因为自己拼串需要去掉值为 undefined 的属性</li></ul><p>其中 StudentQueryForm 为</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">StudentQueryForm</span> &#123;</span><br><span class="line">  name?: <span class="built_in">string</span>,</span><br><span class="line">  sex?: <span class="built_in">string</span>,</span><br><span class="line">  age?: <span class="built_in">string</span>,</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, message, <span class="title class_">Popconfirm</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; R &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A6Delete</span>(<span class="params">&#123; id, onSuccess &#125;: &#123; id: <span class="built_in">number</span>, onSuccess:()=&gt;<span class="built_in">void</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">onConfirm</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">delete</span>&lt;R&lt;<span class="built_in">string</span>&gt;&gt;(</span><br><span class="line">      <span class="string">`http://localhost:8080/api/students/<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">    )</span><br><span class="line">    message.<span class="title function_">success</span>(resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">    <span class="comment">// 改变 form 依赖项</span></span><br><span class="line">    <span class="title function_">onSuccess</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Popconfirm</span> <span class="attr">title</span>=<span class="string">&#x27;确定要删除学生吗?&#x27;</span> <span class="attr">onConfirm</span>=<span class="string">&#123;onConfirm&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">danger</span> <span class="attr">size</span>=<span class="string">&#x27;small&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        删除</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Popconfirm</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用删除组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Input</span>, <span class="title class_">Select</span>, <span class="title class_">Space</span>, <span class="title class_">Table</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ColumnsType</span>, <span class="title class_">TablePaginationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/lib/table&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PageResp</span>, R, <span class="title class_">Student</span>, <span class="title class_">StudentQueryForm</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> A6Delete <span class="keyword">from</span> <span class="string">&#x27;./A6Delete&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Option</span> &#125; = <span class="title class_">Select</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A6</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ... 省略</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onDeleteSuccess</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setForm</span>(<span class="function">(<span class="params">old</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;...old&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">const</span> <span class="attr">columns</span>: <span class="title class_">ColumnsType</span>&lt;<span class="title class_">Student</span>&gt; = [</span><br><span class="line">    <span class="comment">// ... 省略</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;操作&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;operation&#x27;</span>,</span><br><span class="line">      <span class="comment">// value: 属性值, student</span></span><br><span class="line">      <span class="attr">render</span>: <span class="function">(<span class="params">_, student</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Space</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">A6Delete</span> <span class="attr">id</span>=<span class="string">&#123;student.id&#125;</span> <span class="attr">onSuccess</span>=<span class="string">&#123;onDeleteSuccess&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">A6Delete</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Button</span> <span class="attr">type</span>=<span class="string">&#x27;default&#x27;</span> <span class="attr">size</span>=<span class="string">&#x27;small&#x27;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Space</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ... 省略</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Form</span>, <span class="title class_">Input</span>, <span class="title class_">InputNumber</span>, message, <span class="title class_">Modal</span>, <span class="title class_">Radio</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Rule</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/lib/form&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; R, <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A6Update</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">  open,</span></span><br><span class="line"><span class="params">  student,</span></span><br><span class="line"><span class="params">  onSuccess,</span></span><br><span class="line"><span class="params">  onCancel,</span></span><br><span class="line"><span class="params">&#125;: &#123;</span></span><br><span class="line"><span class="params">  open: <span class="built_in">boolean</span></span></span><br><span class="line"><span class="params">  student: Student</span></span><br><span class="line"><span class="params">  onSuccess?: () =&gt; <span class="built_in">void</span></span></span><br><span class="line"><span class="params">  onCancel?: () =&gt; <span class="built_in">void</span></span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="title class_">Item</span> &#125; = <span class="title class_">Form</span></span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="title class_">Group</span> &#125; = <span class="title class_">Radio</span></span><br><span class="line">  <span class="keyword">const</span> options = [</span><br><span class="line">    &#123; <span class="attr">label</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">value</span>: <span class="string">&#x27;男&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">label</span>: <span class="string">&#x27;女&#x27;</span>, <span class="attr">value</span>: <span class="string">&#x27;女&#x27;</span> &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [form] = <span class="title class_">Form</span>.<span class="title function_">useForm</span>() <span class="comment">// 代表了表单对象</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">nameRules</span>: <span class="title class_">Rule</span>[] = [</span><br><span class="line">    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;姓名必须&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">min</span>: <span class="number">2</span>, <span class="attr">type</span>: <span class="string">&#x27;string&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;至少两个字符&#x27;</span> &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">ageRules</span>: <span class="title class_">Rule</span>[] = [</span><br><span class="line">    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;年龄必须&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">min</span>: <span class="number">1</span>, <span class="attr">type</span>: <span class="string">&#x27;number&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;最小1岁&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">max</span>: <span class="number">120</span>, <span class="attr">type</span>: <span class="string">&#x27;number&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;最大120岁&#x27;</span> &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">onOk</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 验证并获取表单数据</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> values = <span class="keyword">await</span> form.<span class="title function_">validateFields</span>()</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(values)</span><br><span class="line">      <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">put</span>&lt;R&lt;<span class="built_in">string</span>&gt;&gt;(</span><br><span class="line">        <span class="string">`http://localhost:8080/api/students/<span class="subst">$&#123;values.id&#125;</span>`</span>,</span><br><span class="line">        values</span><br><span class="line">      )</span><br><span class="line">      message.<span class="title function_">success</span>(resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">      onSuccess &amp;&amp; <span class="title function_">onSuccess</span>()</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(e)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 修改表单数据</span></span><br><span class="line">    form.<span class="title function_">setFieldsValue</span>(student) <span class="comment">// id, name, sex, age</span></span><br><span class="line">  &#125;, [student])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Modal</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">open</span>=<span class="string">&#123;open&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">title</span>=<span class="string">&#x27;修改学生&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onOk</span>=<span class="string">&#123;onOk&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onCancel</span>=<span class="string">&#123;onCancel&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">forceRender</span>=<span class="string">&#123;true&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Form</span> <span class="attr">form</span>=<span class="string">&#123;form&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> <span class="attr">label</span>=<span class="string">&#x27;编号&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;id&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Input</span> <span class="attr">readOnly</span>&gt;</span><span class="tag">&lt;/<span class="name">Input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> <span class="attr">label</span>=<span class="string">&#x27;姓名&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;name&#x27;</span> <span class="attr">rules</span>=<span class="string">&#123;nameRules&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Input</span>&gt;</span><span class="tag">&lt;/<span class="name">Input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> <span class="attr">label</span>=<span class="string">&#x27;性别&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;sex&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Group</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">options</span>=<span class="string">&#123;options&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">optionType</span>=<span class="string">&#x27;button&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">buttonStyle</span>=<span class="string">&#x27;solid&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> <span class="attr">label</span>=<span class="string">&#x27;年龄&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;age&#x27;</span> <span class="attr">rules</span>=<span class="string">&#123;ageRules&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">InputNumber</span>&gt;</span><span class="tag">&lt;/<span class="name">InputNumber</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Modal</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>forceRender 是避免因为使用 useForm 后，表单套在 Modal 中会出现的警告错误</li></ul><p>使用组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Input</span>, <span class="title class_">Select</span>, <span class="title class_">Space</span>, <span class="title class_">Table</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ColumnsType</span>, <span class="title class_">TablePaginationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/lib/table&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PageResp</span>, R, <span class="title class_">Student</span>, <span class="title class_">StudentQueryForm</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> A6Delete <span class="keyword">from</span> <span class="string">&#x27;./A6Delete&#x27;</span></span><br><span class="line"><span class="keyword">import</span> A6Update <span class="keyword">from</span> <span class="string">&#x27;./A6Update&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Option</span> &#125; = <span class="title class_">Select</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A6</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ... 省略</span></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">columns</span>: <span class="title class_">ColumnsType</span>&lt;<span class="title class_">Student</span>&gt; = [</span><br><span class="line">    <span class="comment">// ... 省略</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;操作&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;operation&#x27;</span>,</span><br><span class="line">      <span class="comment">// value: 属性值, student</span></span><br><span class="line">      <span class="attr">render</span>: <span class="function">(<span class="params">_, student</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Space</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">A6Delete</span> <span class="attr">id</span>=<span class="string">&#123;student.id&#125;</span> <span class="attr">onSuccess</span>=<span class="string">&#123;onDeleteSuccess&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">A6Delete</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">type</span>=<span class="string">&#x27;default&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">size</span>=<span class="string">&#x27;small&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                  onUpdateClick(student)</span></span><br><span class="line"><span class="language-xml">                &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                修改</span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Space</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// -------------- 修改功能开始 -------------</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onUpdateClick</span>(<span class="params">student: Student</span>) &#123;</span><br><span class="line">    <span class="title function_">setUpdateOpen</span>(<span class="literal">true</span>)</span><br><span class="line">    <span class="title function_">setUpdateForm</span>(student)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onUpdateCancel</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setUpdateOpen</span>(<span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onUpdateSuccess</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setUpdateOpen</span>(<span class="literal">false</span>)</span><br><span class="line">    <span class="title function_">setForm</span>(<span class="function">(<span class="params">old</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; ...old &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [updateOpen, setUpdateOpen] = <span class="title function_">useState</span>(<span class="literal">false</span>)</span><br><span class="line">  <span class="keyword">const</span> [updateForm, setUpdateForm] = useState&lt;<span class="title class_">Student</span>&gt;(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// -------------- 修改功能结束 -------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">A6Update</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">open</span>=<span class="string">&#123;updateOpen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">student</span>=<span class="string">&#123;updateForm&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onSuccess</span>=<span class="string">&#123;onUpdateSuccess&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onCancel</span>=<span class="string">&#123;onUpdateCancel&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">A6Update</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!-- ... 省略 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="新增"><a href="#新增" class="headerlink" title="新增"></a>新增</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Form</span>, <span class="title class_">Input</span>, <span class="title class_">InputNumber</span>, message, <span class="title class_">Modal</span>, <span class="title class_">Radio</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Rule</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/lib/form&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; R, <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A6Insert</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">  open,</span></span><br><span class="line"><span class="params">  student,</span></span><br><span class="line"><span class="params">  onSuccess,</span></span><br><span class="line"><span class="params">  onCancel,</span></span><br><span class="line"><span class="params">&#125;: &#123;</span></span><br><span class="line"><span class="params">  open: <span class="built_in">boolean</span></span></span><br><span class="line"><span class="params">  student: Student</span></span><br><span class="line"><span class="params">  onSuccess?: () =&gt; <span class="built_in">void</span></span></span><br><span class="line"><span class="params">  onCancel?: () =&gt; <span class="built_in">void</span></span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="title class_">Item</span> &#125; = <span class="title class_">Form</span></span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="title class_">Group</span> &#125; = <span class="title class_">Radio</span></span><br><span class="line">  <span class="keyword">const</span> options = [</span><br><span class="line">    &#123; <span class="attr">label</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">value</span>: <span class="string">&#x27;男&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">label</span>: <span class="string">&#x27;女&#x27;</span>, <span class="attr">value</span>: <span class="string">&#x27;女&#x27;</span> &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [form] = <span class="title class_">Form</span>.<span class="title function_">useForm</span>() <span class="comment">// 代表了表单对象</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">nameRules</span>: <span class="title class_">Rule</span>[] = [</span><br><span class="line">    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;姓名必须&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">min</span>: <span class="number">2</span>, <span class="attr">type</span>: <span class="string">&#x27;string&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;至少两个字符&#x27;</span> &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">ageRules</span>: <span class="title class_">Rule</span>[] = [</span><br><span class="line">    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;年龄必须&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">min</span>: <span class="number">1</span>, <span class="attr">type</span>: <span class="string">&#x27;number&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;最小1岁&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">max</span>: <span class="number">120</span>, <span class="attr">type</span>: <span class="string">&#x27;number&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;最大120岁&#x27;</span> &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">onOk</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 验证并获取表单数据</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> values = <span class="keyword">await</span> form.<span class="title function_">validateFields</span>()</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(values)</span><br><span class="line">      <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">post</span>&lt;R&lt;<span class="built_in">string</span>&gt;&gt;(</span><br><span class="line">        <span class="string">`http://localhost:8080/api/students`</span>,</span><br><span class="line">        values</span><br><span class="line">      )</span><br><span class="line">      message.<span class="title function_">success</span>(resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">      onSuccess &amp;&amp; <span class="title function_">onSuccess</span>()</span><br><span class="line">      form.<span class="title function_">resetFields</span>() <span class="comment">// 重置表单</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(e)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Modal</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">open</span>=<span class="string">&#123;open&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">title</span>=<span class="string">&#x27;新增学生&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onOk</span>=<span class="string">&#123;onOk&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onCancel</span>=<span class="string">&#123;onCancel&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">forceRender</span>=<span class="string">&#123;true&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Form</span> <span class="attr">form</span>=<span class="string">&#123;form&#125;</span> <span class="attr">initialValues</span>=<span class="string">&#123;student&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> <span class="attr">label</span>=<span class="string">&#x27;姓名&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;name&#x27;</span> <span class="attr">rules</span>=<span class="string">&#123;nameRules&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Input</span>&gt;</span><span class="tag">&lt;/<span class="name">Input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> <span class="attr">label</span>=<span class="string">&#x27;性别&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;sex&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Group</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">options</span>=<span class="string">&#123;options&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">optionType</span>=<span class="string">&#x27;button&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">buttonStyle</span>=<span class="string">&#x27;solid&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">Group</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> <span class="attr">label</span>=<span class="string">&#x27;年龄&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;age&#x27;</span> <span class="attr">rules</span>=<span class="string">&#123;ageRules&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">InputNumber</span>&gt;</span><span class="tag">&lt;/<span class="name">InputNumber</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Modal</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>initialValues 只会触发一次表单赋初值</li><li>form.resetFields() 会将表单重置为 initialValues 时的状态</li></ul><p>使用组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Input</span>, <span class="title class_">Select</span>, <span class="title class_">Space</span>, <span class="title class_">Table</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ColumnsType</span>, <span class="title class_">TablePaginationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/lib/table&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PageResp</span>, R, <span class="title class_">Student</span>, <span class="title class_">StudentQueryForm</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> A6Delete <span class="keyword">from</span> <span class="string">&#x27;./A6Delete&#x27;</span></span><br><span class="line"><span class="keyword">import</span> A6Insert <span class="keyword">from</span> <span class="string">&#x27;./A6Insert&#x27;</span></span><br><span class="line"><span class="keyword">import</span> A6SelectedDelete <span class="keyword">from</span> <span class="string">&#x27;./A6SelectedDelete&#x27;</span></span><br><span class="line"><span class="keyword">import</span> A6Update <span class="keyword">from</span> <span class="string">&#x27;./A6Update&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Option</span> &#125; = <span class="title class_">Select</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A6</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ... 省略</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// -------------- 新增功能开始 -------------</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onInsertClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setInsertOpen</span>(<span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onInsertCancel</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setInsertOpen</span>(<span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onInsertSuccess</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setInsertOpen</span>(<span class="literal">false</span>)</span><br><span class="line">    <span class="title function_">setForm</span>(<span class="function">(<span class="params">old</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; ...old &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [insertOpen, setInsertOpen] = <span class="title function_">useState</span>(<span class="literal">false</span>)</span><br><span class="line">  <span class="keyword">const</span> [insertForm, setInsertForm] = useState&lt;<span class="title class_">Student</span>&gt;(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// -------------- 新增功能结束 -------------</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">A6Insert</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">open</span>=<span class="string">&#123;insertOpen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">student</span>=<span class="string">&#123;insertForm&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onSuccess</span>=<span class="string">&#123;onInsertSuccess&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onCancel</span>=<span class="string">&#123;onInsertCancel&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">A6Insert</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">A6Update</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">open</span>=<span class="string">&#123;updateOpen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">student</span>=<span class="string">&#123;updateForm&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onSuccess</span>=<span class="string">&#123;onUpdateSuccess&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onCancel</span>=<span class="string">&#123;onUpdateCancel&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">A6Update</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Space</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> <span class="attr">120</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">placeholder</span>=<span class="string">&#x27;请输入姓名&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">value</span>=<span class="string">&#123;form.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onChange</span>=<span class="string">&#123;onNameChange&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Select</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> <span class="attr">120</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">placeholder</span>=<span class="string">&#x27;请选择性别&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">allowClear</span>=<span class="string">&#123;true&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">value</span>=<span class="string">&#123;form.sex&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onChange</span>=<span class="string">&#123;onSexChange&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Option</span> <span class="attr">value</span>=<span class="string">&#x27;男&#x27;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Option</span> <span class="attr">value</span>=<span class="string">&#x27;女&#x27;</span>&gt;</span>女<span class="tag">&lt;/<span class="name">Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Select</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> <span class="attr">120</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">placeholder</span>=<span class="string">&#x27;请选择年龄&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">allowClear</span>=<span class="string">&#123;true&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">value</span>=<span class="string">&#123;form.age&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onChange</span>=<span class="string">&#123;onAgeChange&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Option</span> <span class="attr">value</span>=<span class="string">&#x27;1,19&#x27;</span>&gt;</span>20以下<span class="tag">&lt;/<span class="name">Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Option</span> <span class="attr">value</span>=<span class="string">&#x27;20,29&#x27;</span>&gt;</span>20左右<span class="tag">&lt;/<span class="name">Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Option</span> <span class="attr">value</span>=<span class="string">&#x27;30,39&#x27;</span>&gt;</span>30左右<span class="tag">&lt;/<span class="name">Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Option</span> <span class="attr">value</span>=<span class="string">&#x27;40,120&#x27;</span>&gt;</span>40以上<span class="tag">&lt;/<span class="name">Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Button</span> <span class="attr">type</span>=<span class="string">&#x27;primary&#x27;</span> <span class="attr">onClick</span>=<span class="string">&#123;onInsertClick&#125;</span>&gt;</span>新增<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Space</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Table</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">columns</span>=<span class="string">&#123;columns&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">dataSource</span>=<span class="string">&#123;students&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">rowKey</span>=<span class="string">&#x27;id&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">loading</span>=<span class="string">&#123;loading&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">pagination</span>=<span class="string">&#123;pagination&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;onTableChange&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Table</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="删除选中"><a href="#删除选中" class="headerlink" title="删除选中"></a>删除选中</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, message, <span class="title class_">Popconfirm</span> &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; R &#125; <span class="keyword">from</span> <span class="string">&quot;../model/Student&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A6DeleteSelected</span>(<span class="params"></span></span><br><span class="line"><span class="params">  &#123;ids, onSuccess&#125;: &#123;ids:React.Key[], onSuccess?:()=&gt;<span class="built_in">void</span>&#125; <span class="comment">// Key[] 是 number 或 string 的数组</span></span></span><br><span class="line"><span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> disabled = ids.<span class="property">length</span> === <span class="number">0</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">onConfirm</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">delete</span>&lt;R&lt;<span class="built_in">string</span>&gt;&gt;(<span class="string">&#x27;http://localhost:8080/api/students&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">data</span>: ids</span><br><span class="line">    &#125;)</span><br><span class="line">    message.<span class="title function_">success</span>(resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">    onSuccess &amp;&amp; <span class="title function_">onSuccess</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Popconfirm</span> <span class="attr">title</span>=<span class="string">&#x27;真的要删除选中的学生吗?&#x27;</span> <span class="attr">onConfirm</span>=<span class="string">&#123;onConfirm&#125;</span> <span class="attr">disabled</span>=<span class="string">&#123;disabled&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">danger</span> <span class="attr">type</span>=<span class="string">&#x27;primary&#x27;</span> <span class="attr">disabled</span>=<span class="string">&#123;disabled&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        删除选中</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Popconfirm</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>与 A6 结合</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Input</span>, <span class="title class_">Select</span>, <span class="title class_">Space</span>, <span class="title class_">Table</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ColumnsType</span>, <span class="title class_">TablePaginationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/lib/table&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PageResp</span>, R, <span class="title class_">Student</span>, <span class="title class_">StudentQueryForm</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> A6Delete <span class="keyword">from</span> <span class="string">&#x27;./A6Delete&#x27;</span></span><br><span class="line"><span class="keyword">import</span> A6Insert <span class="keyword">from</span> <span class="string">&#x27;./A6Insert&#x27;</span></span><br><span class="line"><span class="keyword">import</span> A6SelectedDelete <span class="keyword">from</span> <span class="string">&#x27;./A6SelectedDelete&#x27;</span></span><br><span class="line"><span class="keyword">import</span> A6Update <span class="keyword">from</span> <span class="string">&#x27;./A6Update&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Option</span> &#125; = <span class="title class_">Select</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A6</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ... 省略</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// -------------- 删除选中功能开始 -------------</span></span><br><span class="line">  <span class="keyword">const</span> [ids, setIds] = useState&lt;<span class="title class_">React</span>.<span class="property">Key</span>[]&gt;([])</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onIdsChange</span>(<span class="params">ids:React.Key[]</span>) &#123;</span><br><span class="line">    <span class="comment">// console.log(ids)</span></span><br><span class="line">    <span class="title function_">setIds</span>(ids)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onDeleteSelectedSuccess</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setForm</span>(<span class="function">(<span class="params">old</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;...old&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">setIds</span>([])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// -------------- 删除选中功能结束 -------------</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">A6Insert</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">open</span>=<span class="string">&#123;insertOpen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">student</span>=<span class="string">&#123;insertForm&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onSuccess</span>=<span class="string">&#123;onInsertSuccess&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onCancel</span>=<span class="string">&#123;onInsertCancel&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">A6Insert</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">A6Update</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">open</span>=<span class="string">&#123;updateOpen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">student</span>=<span class="string">&#123;updateForm&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onSuccess</span>=<span class="string">&#123;onUpdateSuccess&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onCancel</span>=<span class="string">&#123;onUpdateCancel&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">A6Update</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Space</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="comment">&lt;!-- ... 省略 --&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">A6SelectedDelete</span> <span class="attr">ids</span>=<span class="string">&#123;ids&#125;</span> <span class="attr">onSuccess</span>=<span class="string">&#123;onDeleteSelectedSuccess&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">A6SelectedDelete</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Space</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Table</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">rowSelection</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">selectedRowKeys:</span> <span class="attr">selectedKeys</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange:</span> <span class="attr">onSelectChange</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">columns</span>=<span class="string">&#123;columns&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">dataSource</span>=<span class="string">&#123;students&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">rowKey</span>=<span class="string">&#x27;id&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">loading</span>=<span class="string">&#123;loading&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">pagination</span>=<span class="string">&#123;pagination&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;onTableChange&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Table</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="useRequest"><a href="#useRequest" class="headerlink" title="useRequest"></a>useRequest</h3><p>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install ahooks</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRequest &#125; <span class="keyword">from</span> <span class="string">&#x27;ahooks&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Table</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ColumnsType</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/lib/table&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Student</span>, R &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A3</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">getStudents</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> axios.<span class="property">get</span>&lt;R&lt;<span class="title class_">Student</span>[]&gt;&gt;(<span class="string">&#x27;http://localhost:8080/api/students&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; loading, data &#125; = <span class="title function_">useRequest</span>(getStudents)  </span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">columns</span>: <span class="title class_">ColumnsType</span>&lt;<span class="title class_">Student</span>&gt; = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;编号&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;sex&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;age&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Table</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">dataSource</span>=<span class="string">&#123;data?.data.data&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">columns</span>=<span class="string">&#123;columns&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">rowKey</span>=<span class="string">&#x27;id&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">loading</span>=<span class="string">&#123;loading&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">pagination</span>=<span class="string">&#123;&#123;</span> <span class="attr">hideOnSinglePage:</span> <span class="attr">true</span> &#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">Table</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="useAndtTable"><a href="#useAndtTable" class="headerlink" title="useAndtTable"></a>useAndtTable</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useAntdTable &#125; <span class="keyword">from</span> <span class="string">&#x27;ahooks&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Table</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ColumnsType</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/lib/table&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Student</span>, R &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PageResp</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">total</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">list</span>: T[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PageReq</span> &#123;</span><br><span class="line">  <span class="attr">current</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">pageSize</span>: <span class="built_in">number</span></span><br><span class="line">  sorter?: <span class="built_in">any</span></span><br><span class="line">  filter?: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A3</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getStudents</span>(<span class="params">&#123; current, pageSize &#125;: PageReq</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">get</span>&lt;R&lt;<span class="title class_">PageResp</span>&lt;<span class="title class_">Student</span>&gt;&gt;&gt;(</span><br><span class="line">      <span class="string">`http://localhost:8080/api/students/q?page=<span class="subst">$&#123;current&#125;</span>&amp;size=<span class="subst">$&#123;pageSize&#125;</span>`</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> resp.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; tableProps &#125; = <span class="title function_">useAntdTable</span>(getStudents, &#123;</span><br><span class="line">    <span class="attr">defaultParams</span>: [&#123; <span class="attr">current</span>: <span class="number">1</span>, <span class="attr">pageSize</span>: <span class="number">5</span> &#125;],</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(tableProps)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">columns</span>: <span class="title class_">ColumnsType</span>&lt;<span class="title class_">Student</span>&gt; = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;编号&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;sex&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">      <span class="attr">dataIndex</span>: <span class="string">&#x27;age&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Table</span> &#123;<span class="attr">...tableProps</span>&#125; <span class="attr">columns</span>=<span class="string">&#123;columns&#125;</span> <span class="attr">rowKey</span>=<span class="string">&#x27;id&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">Table</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="MobX"><a href="#MobX" class="headerlink" title="MobX"></a>MobX</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>需求，组件0 改变了数据，其它组件也想获得改变后的数据，如图所示</p><p>这种多个组件之间要共享状态数据，useState 就不够用了，useContext 也不好用了</p><p>能够和 react 配合使用的状态管理库有</p><ul><li>MobX</li><li>Redux</li></ul><p>其中 Redux API <strong>非常</strong>难以使用，这里选择了更加符合<strong>人类习惯</strong>的 MobX，它虽然采用了面向对象的语法，但也能和函数式的代码很好地结合</p><h3 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h3><ul><li><a href="https://cn.mobx.js.org/">MobX 中文文档</a></li><li><a href="https://mobx.js.org/README.html">MobX 官方文档</a></li></ul><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mobx mobx-react-lite</span><br></pre></td></tr></table></figure><ul><li>mobx 目前版本是 6.x</li><li>mobx-react-lite 目前版本是 3.x</li></ul><h3 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h3><p><img src="https://mobx.js.org/assets/action-state-view.png" alt="Action, State, View"></p><ul><li>Actions 用来修改状态数据的方法</li><li>Observable state 状态数据，可观察</li><li>Derived values 派生值，也叫 Computed values 计算值，会根据状态数据的改变而改变，具有缓存功能</li><li>Reactions 状态数据发生变化后要执行的操作，如 react 函数组件被重新渲染</li></ul><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>首先，定义一个在函数之外存储状态数据的 store，它与 useState 不同：</p><ul><li>useState 里的状态数据是存储在每个组件节点上，不同组件之间没法共享</li><li>而 MobX 的 store 就是一个普通 js 对象，只要保证多个组件都访问此对象即可</li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; makeAutoObservable &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; R, <span class="title class_">Student</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StudentStore</span> &#123;</span><br><span class="line">  <span class="attr">student</span>: <span class="title class_">Student</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">makeAutoObservable</span>(<span class="variable language_">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">fetch</span>(<span class="params">id: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">get</span>&lt;R&lt;<span class="title class_">Student</span>&gt;&gt;(</span><br><span class="line">      <span class="string">`http://localhost:8080/api/students/<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">    )</span><br><span class="line">    <span class="title function_">runInAction</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">student</span> = resp.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">print</span>() &#123;</span><br><span class="line">    <span class="keyword">const</span> first = <span class="variable language_">this</span>.<span class="property">student</span>.<span class="property">name</span>.<span class="title function_">charAt</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">student</span>.<span class="property">sex</span> === <span class="string">&#x27;男&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> first.<span class="title function_">concat</span>(<span class="string">&#x27;大侠&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">student</span>.<span class="property">sex</span> === <span class="string">&#x27;女&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> first.<span class="title function_">concat</span>(<span class="string">&#x27;女侠&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">StudentStore</span>()</span><br></pre></td></tr></table></figure><p>其中 makeAutoObservable 会</p><ul><li>将对象的属性 student 变成 Observable state，即状态数据</li><li>将对象的方法 fetch 变成 Action，即修改数据的方法</li><li>将 get 方法变成 Computed values</li></ul><p>在异步操作里为状态属性赋值，需要放在 runInAction 里，否则会有警告错误</p><p>使用 store，所有使用 store 的组件，为了感知状态数据的变化，需要用 observer 包装，对应着图中 reactions</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Search</span> <span class="keyword">from</span> <span class="string">&#x27;antd/lib/input/Search&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react-lite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> studentStore <span class="keyword">from</span> <span class="string">&#x27;../store/StudentStore&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A71</span> <span class="keyword">from</span> <span class="string">&#x27;./A71&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Test2</span> <span class="keyword">from</span> <span class="string">&#x27;./Test2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">A7</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Search</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">placeholder</span>=<span class="string">&#x27;input search text&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onSearch</span>=<span class="string">&#123;(v)</span> =&gt;</span> studentStore.fetch(Number(v))&#125;</span></span><br><span class="line"><span class="language-xml">        style=&#123;&#123; width: 100 &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>组件0 &#123;studentStore.student.name&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">A71</span>&gt;</span><span class="tag">&lt;/<span class="name">A71</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">A72</span>&gt;</span><span class="tag">&lt;/<span class="name">A72</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">observer</span>(<span class="variable constant_">A7</span>)</span><br></pre></td></tr></table></figure><p>其它组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react-lite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> studentStore <span class="keyword">from</span> <span class="string">&#x27;../store/StudentStore&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">A71</span> = (<span class="params"></span>) =&gt;&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span>&#x27;<span class="attr">red</span>&#x27;&#125;&#125;&gt;</span>组件1 &#123;studentStore.student.name&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">observer</span>(<span class="variable constant_">A71</span>)</span><br></pre></td></tr></table></figure><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react-lite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> studentStore <span class="keyword">from</span> <span class="string">&#x27;../store/StudentStore&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">A72</span> = (<span class="params"></span>) =&gt;&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span>&#x27;<span class="attr">red</span>&#x27;&#125;&#125;&gt;</span>组件1 &#123;studentStore.student.name&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">observer</span>(<span class="variable constant_">A72</span>)</span><br></pre></td></tr></table></figure><h3 id="注解方式"><a href="#注解方式" class="headerlink" title="注解方式"></a>注解方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; R, Student &#125; from <span class="string">&quot;../model/Student&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; action, computed, makeAutoObservable, makeObservable, observable, runInAction &#125; from <span class="string">&#x27;mobx&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios from <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StudentStore</span> &#123;</span><br><span class="line">  <span class="comment">// 属性 - 对应状态数据 observable state</span></span><br><span class="line">  <span class="meta">@observable</span> student: Student = &#123; id: <span class="number">0</span>, name: <span class="string">&#x27;&#x27;</span> &#125;</span><br><span class="line">  <span class="comment">// 方法 - 对应 action 方法</span></span><br><span class="line">  <span class="meta">@action</span> setName(name: string) &#123;</span><br><span class="line">    <span class="built_in">this</span>.student.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@action</span> async <span class="title function_">fetch</span><span class="params">(id: number)</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="variable">resp</span> <span class="operator">=</span> await axios.get&lt;R&lt;Student&gt;&gt;(`http:<span class="comment">//localhost:8080/api/students/$&#123;id&#125;`)</span></span><br><span class="line">    runInAction(() =&gt; &#123;</span><br><span class="line">      <span class="built_in">this</span>.student = resp.data.data</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// get 方法 - 对应 derived value</span></span><br><span class="line">  <span class="meta">@computed</span> get <span class="title function_">displayName</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="variable">first</span> <span class="operator">=</span> <span class="built_in">this</span>.student.name.charAt(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.student.sex === <span class="string">&#x27;男&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> first + <span class="string">&#x27;大侠&#x27;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.student.sex === <span class="string">&#x27;女&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> first + <span class="string">&#x27;女侠&#x27;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 构造器</span></span><br><span class="line">  constructor() &#123;</span><br><span class="line">    makeObservable(<span class="built_in">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">StudentStore</span>()</span><br></pre></td></tr></table></figure><p>需要在 tsconifg.json 中加入配置</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">&quot;experimentalDecorators&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="React-Router"><a href="#React-Router" class="headerlink" title="React Router"></a>React Router</h2><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install react-router-dom</span><br></pre></td></tr></table></figure><ul><li>目前版本是 6.x</li></ul><h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h3><p>新建文件 src/router/router.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; lazy &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Navigate</span>, <span class="title class_">RouteObject</span>, useRoutes &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">load</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Page</span> = <span class="title function_">lazy</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">`../pages/<span class="subst">$&#123;name&#125;</span>`</span>))</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Page</span>&gt;</span><span class="tag">&lt;/<span class="name">Page</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">staticRoutes</span>: <span class="title class_">RouteObject</span>[] = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8Login&#x27;</span>) &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8Main&#x27;</span>),</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;student&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8MainStudent&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;teacher&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8MainTeacher&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;user&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8MainUser&#x27;</span>) &#125;</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/404&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8Notfound&#x27;</span>) &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/*&#x27;</span>, <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&#123;</span>&#x27;/<span class="attr">404</span>&#x27;&#125;&gt;</span><span class="tag">&lt;/<span class="name">Navigate</span>&gt;</span></span> &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Router</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">useRoutes</span>(staticRoutes)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>index.tsx 修改为</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ConfigProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> zhCN <span class="keyword">from</span> <span class="string">&#x27;antd/es/locale/zh_CN&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BrowserRouter</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Router</span> <span class="keyword">from</span> <span class="string">&#x27;./router/router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>) <span class="keyword">as</span> <span class="title class_">HTMLElement</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">ConfigProvider</span> <span class="attr">locale</span>=<span class="string">&#123;zhCN&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Router</span>&gt;</span><span class="tag">&lt;/<span class="name">Router</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">ConfigProvider</span>&gt;</span></span>  </span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>A8Main 的代码</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Layout</span> &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Link</span>, <span class="title class_">Outlet</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">A8Main</span> () &#123;  </span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Layout.Header</span>&gt;</span>头部导航<span class="tag">&lt;/<span class="name">Layout.Header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Layout.Sider</span>&gt;</span>侧边导航</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#x27;/student&#x27;</span>&gt;</span>学生管理<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#x27;/teacher&#x27;</span>&gt;</span>教师管理<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#x27;/user&#x27;</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Layout.Sider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Layout.Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Outlet</span>&gt;</span><span class="tag">&lt;/<span class="name">Outlet</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Layout.Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>Navigate 的作用是重定向</li><li>load 方法的作用是懒加载组件，更重要的是根据字符串找到真正的组件，这是动态路由所需要的</li><li>children 来进行嵌套路由映射，嵌套路由在跳转后，并不是替换整个页面，而是用新页面替换父页面的 Outlet 部分</li></ol><h3 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h3><p>路由分成两部分：</p><ul><li>静态路由，固定的部分，如主页、404、login 这几个页面</li><li>动态路由，变化的部分，经常是主页内的嵌套路由，比如 Student、Teacher 这些</li></ul><p>动态路由应该是根据用户登录后，根据角色的不同，从后端服务获取，因为这些数据是变化的，所以用 mobx 来管理</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; makeAutoObservable, runInAction &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Navigate</span>, <span class="title class_">RouteObject</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MenuAndRoute</span>, R, <span class="title class_">Route</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; load &#125; <span class="keyword">from</span> <span class="string">&#x27;../router/MyRouter&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RoutesStore</span> &#123;</span><br><span class="line">  <span class="attr">dynamicRoutes</span>: <span class="title class_">Route</span>[]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">fetch</span>(<span class="params">username: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">get</span>&lt;R&lt;<span class="title class_">MenuAndRoute</span>&gt;&gt;(</span><br><span class="line">      <span class="string">`http://localhost:8080/api/menu/<span class="subst">$&#123;username&#125;</span>`</span></span><br><span class="line">    )</span><br><span class="line">    <span class="title function_">runInAction</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dynamicRoutes</span> = resp.<span class="property">data</span>.<span class="property">data</span>.<span class="property">routeList</span></span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;dynamicRoutes&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">dynamicRoutes</span>))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">makeAutoObservable</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="keyword">const</span> r = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;dynamicRoutes&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dynamicRoutes</span> = r ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(r) : []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">reset</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dynamicRoutes</span> = []</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;dynamicRoutes&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">routes</span>() &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">staticRoutes</span>: <span class="title class_">RouteObject</span>[] = [</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8Login&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8Main&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;/404&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8Notfound&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;/*&#x27;</span>, <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&#123;</span>&#x27;/<span class="attr">404</span>&#x27;&#125;&gt;</span><span class="tag">&lt;/<span class="name">Navigate</span>&gt;</span></span> &#125;,</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">const</span> main = staticRoutes[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    main.<span class="property">children</span> = <span class="variable language_">this</span>.<span class="property">dynamicRoutes</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(r.<span class="property">path</span>, r.<span class="property">element</span>)</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">path</span>: r.<span class="property">path</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="title function_">load</span>(r.<span class="property">element</span>),</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> staticRoutes</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">RoutesStore</span>()</span><br></pre></td></tr></table></figure><ul><li>其中用 localStorage 进行了数据的持久化，避免刷新后丢失数据</li></ul><p>MyRouter 文件修改为</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react-lite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; lazy &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Navigate</span>, <span class="title class_">RouteObject</span>, useRoutes &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">RoutesStore</span> <span class="keyword">from</span> <span class="string">&#x27;../store/RoutesStore&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把字符串组件 =&gt; 组件标签</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">load</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="comment">// A8Login</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Page</span> = <span class="title function_">lazy</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">`../pages/<span class="subst">$&#123;name&#125;</span>`</span>))</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Page</span>&gt;</span><span class="tag">&lt;/<span class="name">Page</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 路由对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyRouter</span>(<span class="params"></span>) &#123;  </span><br><span class="line">  <span class="keyword">const</span> router = <span class="title function_">useRoutes</span>(<span class="title class_">RoutesStore</span>.<span class="property">routes</span>)</span><br><span class="line">  <span class="keyword">return</span> router</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">observer</span>(<span class="title class_">MyRouter</span>)</span><br></pre></td></tr></table></figure><p>注意导入 router 对象时，用 observer 做了包装，这样能够在 store 发生变化时重建 router 对象</p><h3 id="动态菜单"><a href="#动态菜单" class="headerlink" title="动态菜单"></a>动态菜单</h3><p>图标要独立安装依赖</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @ant-design/icons</span><br></pre></td></tr></table></figure><p>图标组件，用来将<strong>字符串图标</strong>转换为<strong>标签图标</strong></p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> icons <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Module</span> &#123;</span><br><span class="line">  [<span class="attr">p</span>: <span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">all</span>: <span class="title class_">Module</span> = icons</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Icon</span>(<span class="params">&#123; name &#125;: &#123; name: <span class="built_in">string</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Icon</span> = all[name]</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Icon</span>&gt;</span><span class="tag">&lt;/<span class="name">Icon</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改 RoutesStore.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; makeAutoObservable, runInAction &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Link</span>, <span class="title class_">Navigate</span>, <span class="title class_">RouteObject</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Menu</span>, <span class="title class_">MenuAndRoute</span>, R, <span class="title class_">Route</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; load &#125; <span class="keyword">from</span> <span class="string">&#x27;../router/MyRouter&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Icon</span> <span class="keyword">from</span> <span class="string">&#x27;./Icon&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">convertMenu</span>(<span class="params">m: Menu</span>): <span class="built_in">any</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Label</span> = m.<span class="property">routePath</span> ? <span class="language-xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;m.routePath&#125;</span>&gt;</span>&#123;m.label&#125;<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span> : m.<span class="property">label</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">label</span>: <span class="title class_">Label</span>,</span><br><span class="line">    <span class="attr">key</span>: m.<span class="property">key</span>,</span><br><span class="line">    <span class="attr">icon</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Icon</span> <span class="attr">name</span>=<span class="string">&#123;m.icon&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Icon</span>&gt;</span></span>,</span><br><span class="line">    <span class="attr">children</span>: m.<span class="property">children</span> &amp;&amp; m.<span class="property">children</span>.<span class="title function_">map</span>(convertMenu)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RoutesStore</span> &#123;</span><br><span class="line">  <span class="comment">// 动态部分</span></span><br><span class="line">  <span class="attr">dynamicRoutes</span>: <span class="title class_">Route</span>[] = []</span><br><span class="line">  <span class="attr">dynamicMenus</span>: <span class="title class_">Menu</span>[] = []</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">fetch</span>(<span class="params">username: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">get</span>&lt;R&lt;<span class="title class_">MenuAndRoute</span>&gt;&gt;(</span><br><span class="line">      <span class="string">`http://localhost:8080/api/menu/<span class="subst">$&#123;username&#125;</span>`</span></span><br><span class="line">    )</span><br><span class="line">    <span class="title function_">runInAction</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dynamicRoutes</span> = resp.<span class="property">data</span>.<span class="property">data</span>.<span class="property">routeList</span></span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;dynamicRoutes&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">dynamicRoutes</span>))</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dynamicMenus</span> = resp.<span class="property">data</span>.<span class="property">data</span>.<span class="property">menuTree</span></span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;dynamicMenus&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">dynamicMenus</span>))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">menus</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">dynamicMenus</span>.<span class="title function_">map</span>(convertMenu)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">routes</span>() &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">staticRoutes</span>: <span class="title class_">RouteObject</span>[] = [</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8Login&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8Main&#x27;</span>), <span class="attr">children</span>: [] &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;/404&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8Notfound&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;/*&#x27;</span>, <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&#123;</span>&#x27;/<span class="attr">404</span>&#x27;&#125;&gt;</span><span class="tag">&lt;/<span class="name">Navigate</span>&gt;</span></span> &#125;,</span><br><span class="line">    ]</span><br><span class="line">    staticRoutes[<span class="number">1</span>].<span class="property">children</span> = <span class="variable language_">this</span>.<span class="property">dynamicRoutes</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">path</span>: r.<span class="property">path</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="title function_">load</span>(r.<span class="property">element</span>),</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> staticRoutes</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">makeAutoObservable</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="keyword">const</span> json = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;dynamicRoutes&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dynamicRoutes</span> = json ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json) : []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> json2 = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;dynamicMenus&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dynamicMenus</span> = json2 ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json2) : []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">reset</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;dynamicRoutes&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dynamicRoutes</span> = []</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;dynamicMenus&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dynamicMenus</span> = []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">RoutesStore</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>其中 convertMenu 为核心方法，负责将服务器返回的 Menu 转换成 antd Menu 组件需要的 Menu</p><p>使用</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Menu</span> items=&#123;<span class="title class_">RoutesStore</span>.<span class="property">menus</span>&#125; mode=<span class="string">&#x27;inline&#x27;</span> theme=<span class="string">&quot;dark&quot;</span>&gt;&lt;/<span class="title class_">Menu</span>&gt;</span><br></pre></td></tr></table></figure><p>跳转若发生错误，可能是因为组件懒加载引起的，需要用 Suspense 解决</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">ConfigProvider</span> <span class="attr">locale</span>=<span class="string">&#123;zhCN&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">h3</span>&gt;</span>加载中...<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">MyRouter</span>&gt;</span><span class="tag">&lt;/<span class="name">MyRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">ConfigProvider</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ItemType</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/lib/menu/hooks/useItems&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; makeAutoObservable, runInAction &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Link</span>, <span class="title class_">Navigate</span>, <span class="title class_">RouteObject</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LoginReq</span>, <span class="title class_">LoginResp</span>, <span class="title class_">Menu</span>, <span class="title class_">MenuAndRoute</span>, R, <span class="title class_">Route</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Student&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; load &#125; <span class="keyword">from</span> <span class="string">&#x27;../router/MyRouter&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Icon</span> <span class="keyword">from</span> <span class="string">&#x27;./Icon&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">convertMenu</span>(<span class="params">m: Menu</span>): <span class="title class_">ItemType</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Label</span> = m.<span class="property">routePath</span>? <span class="language-xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;m.routePath&#125;</span>&gt;</span>&#123;m.label&#125;<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span> : m.<span class="property">label</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">key</span>: m.<span class="property">key</span>,</span><br><span class="line">    <span class="attr">label</span>: <span class="title class_">Label</span>,</span><br><span class="line">    <span class="attr">icon</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Icon</span> <span class="attr">name</span>=<span class="string">&#123;m.icon&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Icon</span>&gt;</span></span>, </span><br><span class="line">    <span class="attr">children</span>: m.<span class="property">children</span> &amp;&amp; m.<span class="property">children</span>.<span class="title function_">map</span>(convertMenu)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RoutesStore</span> &#123;</span><br><span class="line">  <span class="comment">// 动态部分</span></span><br><span class="line">  <span class="attr">dynamicRoutes</span>: <span class="title class_">Route</span>[] = []</span><br><span class="line">  <span class="attr">dynamicMenus</span>: <span class="title class_">Menu</span>[] = []</span><br><span class="line"></span><br><span class="line">  <span class="attr">token</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">state</span>: <span class="built_in">string</span> = <span class="string">&#x27;pending&#x27;</span> <span class="comment">// 取值 pending done error</span></span><br><span class="line">  <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span> <span class="comment">// 取值: 1. 空串 正常  2. 非空串 错误消息</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params">loginReq: LoginReq</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = <span class="string">&#x27;pending&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> resp1 = <span class="keyword">await</span> axios.<span class="property">post</span>&lt;R&lt;<span class="title class_">LoginResp</span>&gt;&gt;(</span><br><span class="line">      <span class="string">&#x27;http://localhost:8080/api/loginJwt&#x27;</span>,</span><br><span class="line">      loginReq</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">if</span>(resp1.<span class="property">data</span>.<span class="property">code</span> === <span class="number">999</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> resp2 = <span class="keyword">await</span> axios.<span class="property">get</span>&lt;R&lt;<span class="title class_">MenuAndRoute</span>&gt;&gt;(</span><br><span class="line">        <span class="string">`http://localhost:8080/api/menu/<span class="subst">$&#123;loginReq.username&#125;</span>`</span></span><br><span class="line">      )</span><br><span class="line">      <span class="title function_">runInAction</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">token</span> = resp1.<span class="property">data</span>.<span class="property">data</span>.<span class="property">token</span></span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;token&#x27;</span>, <span class="variable language_">this</span>.<span class="property">token</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dynamicRoutes</span> = resp2.<span class="property">data</span>.<span class="property">data</span>.<span class="property">routeList</span></span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;dynamicRoutes&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">dynamicRoutes</span>))</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dynamicMenus</span> = resp2.<span class="property">data</span>.<span class="property">data</span>.<span class="property">menuTree</span></span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;dynamicMenus&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">dynamicMenus</span>))</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = <span class="string">&#x27;done&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">runInAction</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">message</span> = resp1.<span class="property">data</span>.<span class="property">message</span> || <span class="string">&#x27;未知错误&#x27;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = <span class="string">&#x27;error&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">fetch</span>(<span class="params">username: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="property">get</span>&lt;R&lt;<span class="title class_">MenuAndRoute</span>&gt;&gt;(</span><br><span class="line">      <span class="string">`http://localhost:8080/api/menu/<span class="subst">$&#123;username&#125;</span>`</span></span><br><span class="line">    )</span><br><span class="line">    <span class="title function_">runInAction</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dynamicRoutes</span> = resp.<span class="property">data</span>.<span class="property">data</span>.<span class="property">routeList</span></span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;dynamicRoutes&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">dynamicRoutes</span>))</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dynamicMenus</span> = resp.<span class="property">data</span>.<span class="property">data</span>.<span class="property">menuTree</span></span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;dynamicMenus&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">dynamicMenus</span>))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">routes</span>() &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">staticRoutes</span>: <span class="title class_">RouteObject</span>[] = [</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8Login&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8Main&#x27;</span>), <span class="attr">children</span>: [] &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;/404&#x27;</span>, <span class="attr">element</span>: <span class="title function_">load</span>(<span class="string">&#x27;A8Notfound&#x27;</span>) &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;/*&#x27;</span>, <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&#123;</span>&#x27;/<span class="attr">404</span>&#x27;&#125;&gt;</span><span class="tag">&lt;/<span class="name">Navigate</span>&gt;</span></span> &#125;,</span><br><span class="line">    ]</span><br><span class="line">    staticRoutes[<span class="number">1</span>].<span class="property">children</span> = <span class="variable language_">this</span>.<span class="property">dynamicRoutes</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">path</span>: r.<span class="property">path</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="title function_">load</span>(r.<span class="property">element</span>),</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> staticRoutes</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">menus</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">dynamicMenus</span>.<span class="title function_">map</span>(convertMenu)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">makeAutoObservable</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="keyword">const</span> json = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;dynamicRoutes&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dynamicRoutes</span> = json ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json) : []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> json1 = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;dynamicMenus&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dynamicMenus</span> = json1 ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json1) : []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">token</span> = token ?? <span class="string">&#x27;&#x27;</span></span><br><span class="line">      </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = <span class="string">&#x27;pending&#x27;</span>  </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">reset</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;dynamicRoutes&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dynamicRoutes</span> = []</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;dynamicMenus&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dynamicMenus</span> = []</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">token</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">      </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = <span class="string">&#x27;pending&#x27;</span>    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">RoutesStore</span>()</span><br></pre></td></tr></table></figure><p>登录页面</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">A8Login</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onFinish</span>(<span class="params">values: &#123; username: <span class="built_in">string</span>; password: <span class="built_in">string</span> &#125;</span>) &#123;</span><br><span class="line">    <span class="title class_">RoutesStore</span>.<span class="title function_">login</span>(values)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> nav = <span class="title function_">useNavigate</span>()</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">RoutesStore</span>.<span class="property">state</span> === <span class="string">&#x27;done&#x27;</span>) &#123;</span><br><span class="line">      <span class="title function_">nav</span>(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title class_">RoutesStore</span>.<span class="property">state</span> === <span class="string">&#x27;error&#x27;</span>) &#123;</span><br><span class="line">      message.<span class="title function_">error</span>(<span class="title class_">RoutesStore</span>.<span class="property">message</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [<span class="title class_">RoutesStore</span>.<span class="property">state</span>])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">observer</span>(A8Login)</span><br></pre></td></tr></table></figure><ul><li>用 useNavigate() 返回的函数跳转的代码不能包含在函数式组件的主逻辑中，只能放在<ul><li>其它事件处理函数中</li><li>写在副作用函数 useEffect 之中</li></ul></li></ul><h3 id="注销、欢迎词、登录检查"><a href="#注销、欢迎词、登录检查" class="headerlink" title="注销、欢迎词、登录检查"></a>注销、欢迎词、登录检查</h3><p>Store 中增加 get username 方法</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RoutesStore</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiJ9.-l-MjMPGJVOf3zoIJgoqpV3LWoqvCCgcaI1ga86ismU</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">username</span>() &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">token</span>.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> json = <span class="title function_">atob</span>(<span class="variable language_">this</span>.<span class="property">token</span>.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>)[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json).<span class="property">sub</span></span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>token 的前两部分都可以解码出来，其中 [1] 就是 token 的内容部分</li></ul><p>主页组件改为</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Layout</span>, <span class="title class_">Menu</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react-lite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Navigate</span>, <span class="title class_">Outlet</span>, useNavigate &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">RoutesStore</span> <span class="keyword">from</span> <span class="string">&#x27;../store/RoutesStore&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">A8Main</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> nav = <span class="title function_">useNavigate</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">RoutesStore</span>.<span class="title function_">reset</span>()</span><br><span class="line">    <span class="title function_">nav</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* useEffect(()=&gt;&#123;</span></span><br><span class="line"><span class="comment">    if(RoutesStore.username === &#x27;&#x27;) &#123;</span></span><br><span class="line"><span class="comment">      nav(&#x27;/login&#x27;)</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">  &#125;, []) */</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(<span class="title class_">RoutesStore</span>.<span class="property">username</span> === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&#x27;/login&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">Navigate</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Layout.Header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>欢迎您【&#123;RoutesStore.username&#125;】<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Button</span> <span class="attr">size</span>=<span class="string">&#x27;small&#x27;</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span>注销<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Layout.Header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Layout.Sider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Menu</span> <span class="attr">items</span>=<span class="string">&#123;RoutesStore.menus&#125;</span> <span class="attr">theme</span>=<span class="string">&#x27;dark&#x27;</span> <span class="attr">mode</span>=<span class="string">&#x27;inline&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">Menu</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Layout.Sider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Layout.Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Outlet</span>&gt;</span><span class="tag">&lt;/<span class="name">Outlet</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Layout.Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">observer</span>(A8Main)</span><br></pre></td></tr></table></figure><ul><li>这个例子中推荐用 Navigate 来完成跳转</li><li>/student，/teacher 等路由不需要检查，因为登录成功后才有</li></ul><h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><h3 id="代码片段"><a href="#代码片段" class="headerlink" title="代码片段"></a>代码片段</h3><p>VScode中使用快捷键<code>ctrl+shift+p</code>，输入关键词<strong>代码</strong>，选择<strong>代码片段</strong></p><p>定义 fun.code-snippets</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;函数组件&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;scope&quot;</span><span class="punctuation">:</span> <span class="string">&quot;javascript,typescript,typescriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;prefix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fun&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;body&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line"><span class="string">&quot;export default function $&#123;1:函数名&#125; () &#123;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;  $0&quot;</span><span class="punctuation">,</span>      </span><br><span class="line">      <span class="string">&quot;  return &lt;&gt;&lt;/&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="string">&quot;&#125;&quot;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;快速生成react函数式组件&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>定义 ofun.code-snippets</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;mobx函数组件&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;scope&quot;</span><span class="punctuation">:</span> <span class="string">&quot;javascript,typescript,typescriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;prefix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ofun&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;body&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;import &#123; observer &#125; from \&quot;mobx-react-lite\&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="string">&quot;function $&#123;1:函数名&#125; () &#123;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;  $0&quot;</span><span class="punctuation">,</span>      </span><br><span class="line">      <span class="string">&quot;  return &lt;&gt;&lt;/&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="string">&quot;&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;export default observer($1)&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;快速生成mobx react函数式组件&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>这样可以在 tsx 中用快捷键 <code>fun</code> 以及 <code>ofun</code> 创建相应的代码片段</p>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> web框架 </tag>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>web框架篇之Vue3</title>
      <link href="/2023/01/03/61285.html"/>
      <url>/2023/01/03/61285.html</url>
      
        <content type="html"><![CDATA[<h1 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h1><h2 id="动态类型的问题"><a href="#动态类型的问题" class="headerlink" title="动态类型的问题"></a>动态类型的问题</h2><p>js属于动态类型语言，例如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">obj</span>) &#123;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>obj可能只是个字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;hello, world&#x27;</span>)</span><br></pre></td></tr></table></figure><p>obj也有可能是个函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">test</span>(<span class="function">()=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello, world&#x27;</span>))</span><br></pre></td></tr></table></figure><p>obj 类型不确定，就给后期使用者带来了麻烦，一旦传入的参数不对，代码就崩溃了</p><p>动态类型意味着</p><ul><li>运行代码时才知道发生什么 (running the code to see what happens)</li></ul><p>静态类型意味着</p><ul><li>在代码运行前，就对它的行为做出预测 (make predications about what code is expected before it runs)</li></ul><h2 id="TypeScript的引入"><a href="#TypeScript的引入" class="headerlink" title="TypeScript的引入"></a>TypeScript的引入</h2><p>TypeScript是微软开发的一个开源的编程语言，通过在JavaScript的基础上添加<strong>静态类型</strong>定义构建而成。<br>TypeScript通过TypeScript编译器或Babel转译为JavaScript代码，可运行在任何浏览器，任何操作系统。</p><p>下面的typescript代码，就在代码运行前对参数加入了约束限制</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">msg : <span class="built_in">string</span></span>) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>限制了参数只能做string该做的事情</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">msg : <span class="built_in">Function</span></span>) &#123;</span><br><span class="line">  <span class="title function_">msg</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>限制了参数只能做函数该做的事情</li></ul><h2 id="TypeScript的入门"><a href="#TypeScript的入门" class="headerlink" title="TypeScript的入门"></a>TypeScript的入门</h2><p>安装typescript编译器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure><p>编写 ts 代码</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params">msg: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">hello</span>(<span class="string">&#x27;hello,world&#x27;</span>)</span><br></pre></td></tr></table></figure><p>执行 tsc 编译命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc xxx.ts</span><br></pre></td></tr></table></figure><p>编译生成js代码，编译后进行了类型擦除</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params">msg</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">hello</span>(<span class="string">&#x27;hello,world&#x27;</span>);</span><br></pre></td></tr></table></figure><p>例子，用interface定义用户类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">u: User</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(u.<span class="property">name</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(u.<span class="property">age</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;zhangs&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;)</span><br></pre></td></tr></table></figure><p>编译后</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">u</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(u.<span class="property">name</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(u.<span class="property">age</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;zhangs&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;);</span><br></pre></td></tr></table></figure><p>可见，typescript属于编译时实施类型检查（静态类型）的技术</p><h2 id="typescript类型"><a href="#typescript类型" class="headerlink" title="typescript类型"></a>typescript类型</h2><table><thead><tr><th align="center">类型</th><th align="center">例</th><th align="center">备注</th></tr></thead><tbody><tr><td align="center">字符串类型</td><td align="center">string</td><td align="center"></td></tr><tr><td align="center">数字类型</td><td align="center">number</td><td align="center"></td></tr><tr><td align="center">布尔类型</td><td align="center">boolean</td><td align="center"></td></tr><tr><td align="center">数组类型</td><td align="center">number[],string[], boolean[] 依此类推</td><td align="center"></td></tr><tr><td align="center">任意类型</td><td align="center">any</td><td align="center">相当于又回到了没有类型的时代</td></tr><tr><td align="center">复杂类型</td><td align="center">type 与 interface</td><td align="center"></td></tr><tr><td align="center">函数类型</td><td align="center">() =&gt; void</td><td align="center">对函数的参数和返回值进行说明</td></tr><tr><td align="center">字面量类型</td><td align="center">“a”|”b”|”c”</td><td align="center">限制变量或参数的取值</td></tr><tr><td align="center">nullish类型</td><td align="center">null与 undefined</td><td align="center"></td></tr><tr><td align="center">泛型</td><td align="center"><code>&lt;T&gt;</code>，<code>&lt;T extends 父类型&gt;</code></td><td align="center"></td></tr></tbody></table><h3 id="标注位置"><a href="#标注位置" class="headerlink" title="标注位置"></a>标注位置</h3><h4 id="标注变量"><a href="#标注变量" class="headerlink" title="标注变量"></a>标注变量</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;hello,world&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>一般可以省略，因为可以根据后面的字面量推断出前面变量类型</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> message = <span class="string">&#x27;hello,world&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="标注参数"><a href="#标注参数" class="headerlink" title="标注参数"></a>标注参数</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>很多时候，都能够推断出参数类型</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> names = [<span class="string">&#x27;Alice&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Eve&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> lowercaseNames = names.<span class="title function_">map</span>(<span class="function">(<span class="params">e: <span class="built_in">string</span></span>) =&gt;</span> e.<span class="title function_">toLowerCase</span>())</span><br></pre></td></tr></table></figure><ul><li>可以用类型推断，推断出 e 是 string 类型</li></ul><h4 id="标注返回值"><a href="#标注返回值" class="headerlink" title="标注返回值"></a>标注返回值</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) : <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>一般也可以省略，因为可以根据返回值做类型推断</li></ul><h3 id="复杂类型"><a href="#复杂类型" class="headerlink" title="复杂类型"></a>复杂类型</h3><h4 id="type"><a href="#type" class="headerlink" title="type"></a>type</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Cat</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c1</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小白&#x27;</span>, <span class="attr">age</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">c2</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小花&#x27;</span> &#125;  <span class="comment">// 错误: 缺少 age 属性</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c3</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小黑&#x27;</span>, <span class="attr">age</span>: <span class="number">1</span>, <span class="attr">sex</span>: <span class="string">&#x27;公&#x27;</span> &#125; <span class="comment">// 错误: 多出 sex 属性</span></span><br></pre></td></tr></table></figure><h4 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c1</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小白&#x27;</span>, <span class="attr">age</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">c2</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小花&#x27;</span> &#125;  <span class="comment">// 错误: 缺少 age 属性</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c3</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小黑&#x27;</span>, <span class="attr">age</span>: <span class="number">1</span>, <span class="attr">sex</span>: <span class="string">&#x27;公&#x27;</span> &#125; <span class="comment">// 错误: 多出 sex 属性</span></span><br></pre></td></tr></table></figure><h4 id="可选属性"><a href="#可选属性" class="headerlink" title="可选属性"></a>可选属性</h4><p>如果需要某个属性可选，可以用下面的语法</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  age?: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c1</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小白&#x27;</span>, <span class="attr">age</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">c2</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小花&#x27;</span> &#125;  <span class="comment">// 正确: age 属性可选</span></span><br></pre></td></tr></table></figure><ul><li>可选属性要注意处理 undefined 值</li></ul><h4 id="鸭子类型"><a href="#鸭子类型" class="headerlink" title="鸭子类型"></a>鸭子类型</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">cat: Cat</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(cat.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c1 = &#123; <span class="attr">name</span>: <span class="string">&#x27;小白&#x27;</span>, <span class="attr">age</span>: <span class="number">1</span> &#125; </span><br><span class="line"><span class="title function_">test</span>(c1)</span><br></pre></td></tr></table></figure><ul><li>const c1 并没有声明类型为 Cat，但它与 Cat 类型有一样的属性，也可以被当作是 Cat 类型</li></ul><h3 id="方法类型"><a href="#方法类型" class="headerlink" title="方法类型"></a>方法类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Api</span> &#123;</span><br><span class="line">  <span class="title function_">foo</span>(): <span class="built_in">void</span>,</span><br><span class="line">  <span class="title function_">bar</span>(<span class="attr">str</span>: <span class="built_in">string</span>): <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">api: Api</span>) &#123;</span><br><span class="line">  api.<span class="title function_">foo</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(api.<span class="title function_">bar</span>(<span class="string">&#x27;hello&#x27;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(&#123;</span><br><span class="line">  <span class="title function_">foo</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ok&#x27;</span>) &#125;,</span><br><span class="line">  <span class="title function_">bar</span>(<span class="params">str: <span class="built_in">string</span></span>) &#123; <span class="keyword">return</span> str.<span class="title function_">toUpperCase</span>() &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="字面量类型"><a href="#字面量类型" class="headerlink" title="字面量类型"></a>字面量类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printText</span>(<span class="params">s: <span class="built_in">string</span>, alignment: <span class="string">&quot;left&quot;</span> | <span class="string">&quot;right&quot;</span> | <span class="string">&quot;center&quot;</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(s, alignment)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">printText</span>(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;left&#x27;</span>)</span><br><span class="line"><span class="title function_">printText</span>(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;aaa&#x27;</span>) <span class="comment">// 错误: 取值只能是 left | right | center</span></span><br></pre></td></tr></table></figure><h3 id="nullish-类型"><a href="#nullish-类型" class="headerlink" title="nullish 类型"></a>nullish 类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">x?: <span class="built_in">string</span> | <span class="literal">null</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x?.<span class="title function_">toUpperCase</span>())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;aaa&#x27;</span>)</span><br><span class="line"><span class="title function_">test</span>(<span class="literal">null</span>)</span><br><span class="line"><span class="title function_">test</span>()</span><br></pre></td></tr></table></figure><ul><li><code>x?: string | null</code>表示可能是undefined或者是string或者是null</li></ul><h4 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h4><p>下面的几个类型声明显然有一定的相似性</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">RefString</span> &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">RefNumber</span> &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">RefBoolean</span> &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="built_in">boolean</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">r1</span>: <span class="title class_">RefString</span> = &#123; <span class="attr">value</span>: <span class="string">&#x27;hello&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">r2</span>: <span class="title class_">RefNumber</span> = &#123; <span class="attr">value</span>: <span class="number">123</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">r3</span>: <span class="title class_">RefBoolean</span> = &#123; <span class="attr">value</span>: <span class="literal">true</span> &#125;</span><br></pre></td></tr></table></figure><p>可以改进为</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Ref</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">value</span>: T</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">r1</span>: <span class="title class_">Ref</span>&lt;<span class="built_in">string</span>&gt; = &#123; <span class="attr">value</span>: <span class="string">&#x27;hello&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">r2</span>: <span class="title class_">Ref</span>&lt;<span class="built_in">number</span>&gt; = &#123; <span class="attr">value</span>: <span class="number">123</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">r3</span>: <span class="title class_">Ref</span>&lt;<span class="built_in">boolean</span>&gt; = &#123; <span class="attr">value</span>: <span class="literal">true</span> &#125;</span><br></pre></td></tr></table></figure><ul><li>泛型的要点就是 <code>&lt;类型参数&gt;</code>，把【类型】也当作一个变化的要素，像参数一样传递过来，这样就可以派生出结构相似的新类型</li></ul><p>函数定义也支持泛型</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> ref&lt;T&gt;(<span class="attr">n</span>: T): <span class="title class_">Ref</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">value</span>: n &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> v1 = <span class="title function_">ref</span>(<span class="string">&quot;hello&quot;</span>); <span class="comment">// Ref&lt;string&gt;</span></span><br><span class="line"><span class="keyword">const</span> v2 = <span class="title function_">ref</span>(<span class="number">123.3333</span>);<span class="comment">// Ref&lt;number&gt;</span></span><br><span class="line"></span><br><span class="line">v1.<span class="property">value</span>.<span class="title function_">toLocaleLowerCase</span>()</span><br><span class="line">v2.<span class="property">value</span>.<span class="title function_">toFixed</span>(<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h2 id="意义"><a href="#意义" class="headerlink" title="意义"></a>意义</h2><h3 id="更好理解框架"><a href="#更好理解框架" class="headerlink" title="更好理解框架"></a>更好理解框架</h3><p>现在越来越多的前端框架采用 typescript，如果懂 typescript 语法，可以更好地阅读框架代码</p><p>以 Map 为例</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;()</span><br><span class="line">map</span><br><span class="line">  .<span class="title function_">set</span>(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>)</span><br><span class="line">  .<span class="title function_">set</span>(<span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>)</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">forEach</span>(<span class="function">(<span class="params">value,key,m</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value, key)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>注意编译需要 <code>tsc --target es6 .\xxx.ts</code></li></ul><h3 id="更好的提示"><a href="#更好的提示" class="headerlink" title="更好的提示"></a>更好的提示</h3><p>例如，从服务器返回的一段 json，如果不用 typescript，则编辑器也不能给出准确的提示</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">user</span>: <span class="title class_">User</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="string">`&#123; &quot;name&quot;:&quot;张三&quot;, &quot;age&quot;:18 &#125;`</span>)</span><br></pre></td></tr></table></figure><h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><blockquote><p>关于TypeScript与JavaScript中的类语法不是重点，class相关语法只是起到辅助作用，更重要的是interface</p></blockquote><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> u = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&#x27;张三&#x27;</span>)</span><br></pre></td></tr></table></figure><p>其实会被编译成这个样子（默认 –target=es3）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">User</span> = <span class="comment">/** <span class="doctag">@class</span> */</span> (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">User</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">User</span>;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="keyword">var</span> u = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&#x27;张三&#x27;</span>);</span><br></pre></td></tr></table></figure><p>所以js中的class，并不等价于java中的class，它还是基于原型实现的</p><h3 id="只读属性"><a href="#只读属性" class="headerlink" title="只读属性"></a>只读属性</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> u = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&#x27;张三&#x27;</span>)</span><br><span class="line">u.<span class="property">name</span> = <span class="string">&#x27;李四&#x27;</span><span class="comment">// 编译错误</span></span><br></pre></td></tr></table></figure><ul><li>readonly是typescript特有的，表示该属性只读</li></ul><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">study</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>]正在学习`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> u = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&#x27;张三&#x27;</span>)</span><br><span class="line">u.<span class="title function_">study</span>()</span><br></pre></td></tr></table></figure><h3 id="get，set"><a href="#get，set" class="headerlink" title="get，set"></a>get，set</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">_name</span>: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">name</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> u = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&#x27;张三&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(u.<span class="property">name</span>)</span><br><span class="line">u.<span class="property">name</span> = <span class="string">&#x27;李四&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(u.<span class="property">name</span>)</span><br></pre></td></tr></table></figure><ul><li>注意，需要在编译时加上<code>tsc --target es6 .\xxx.ts</code>选项</li><li>es6等价于es2015，再此之上还有es2016 … es2022</li></ul><h3 id="类与接口"><a href="#类与接口" class="headerlink" title="类与接口"></a>类与接口</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="title function_">study</span>(<span class="attr">course</span>: <span class="built_in">string</span>): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserImpl</span> <span class="keyword">implements</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">study</span>(<span class="params">course: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>]正在学习[<span class="subst">$&#123;course&#125;</span>]`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">foo</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">user</span>: <span class="title class_">User</span> = <span class="keyword">new</span> <span class="title class_">UserImpl</span>(<span class="string">&#x27;张三&#x27;</span>)</span><br><span class="line">user.<span class="title function_">study</span>(<span class="string">&#x27;Typescript&#x27;</span>)</span><br><span class="line">user.<span class="title function_">foo</span>() <span class="comment">// 错误，必须是接口中定义的方法</span></span><br></pre></td></tr></table></figure><h3 id="继承与接口"><a href="#继承与接口" class="headerlink" title="继承与接口"></a>继承与接口</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Flyable</span> &#123;</span><br><span class="line">  <span class="title function_">fly</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bird</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> <span class="keyword">implements</span> <span class="title class_">Flyable</span> &#123;</span><br><span class="line">  <span class="title function_">fly</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>在飞翔`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">b</span>: <span class="title class_">Flyable</span> &amp; <span class="title class_">Animal</span> = <span class="keyword">new</span> <span class="title class_">Bird</span>(<span class="string">&quot;小花&quot;</span>)</span><br><span class="line">b.<span class="title function_">fly</span>()</span><br></pre></td></tr></table></figure><ul><li>Flyable&amp;Animal表示变量是flyable类型，同时也是Animal类型</li></ul><h3 id="方法重写"><a href="#方法重写" class="headerlink" title="方法重写"></a>方法重写</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">  <span class="title function_">study</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`father study`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Father</span> &#123;  </span><br><span class="line">  <span class="title function_">study</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">study</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`son study`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">f</span>: <span class="title class_">Father</span> = <span class="keyword">new</span> <span class="title class_">Son</span>()</span><br><span class="line">f.<span class="title function_">study</span>()</span><br></pre></td></tr></table></figure><h1 id="Vue3基础"><a href="#Vue3基础" class="headerlink" title="Vue3基础"></a>Vue3基础</h1><p>技术选型</p><ul><li>Vue <ul><li><strong>选项式 API</strong> 还是 <strong>组合式 API</strong>✔️</li><li><strong>HTML</strong> 还是 <strong>单文件组件</strong>✔️</li></ul></li><li>语法<ul><li><strong>javascript</strong> 还是 <strong>typescript</strong>✔️</li></ul></li><li>构建工具<ul><li><strong>@vue/cli</strong> 还是 <strong>vite</strong>✔️</li></ul></li><li>路由<ul><li><strong>vue-router</strong>✔️</li></ul></li><li>共享存储<ul><li><strong>vuex</strong> 还是 <strong>pinia✔️</strong></li></ul></li><li>视图组件<ul><li><strong>ElementUI</strong> 还是 <strong>Antdv</strong>✔️</li></ul></li></ul><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><p>采用vite作为前端项目的打包，构建工具</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init vite@latest</span><br></pre></td></tr></table></figure><p>按提示操作</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd 项目目录</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h3 id="编码-IDE"><a href="#编码-IDE" class="headerlink" title="编码 IDE"></a>编码 IDE</h3><p>Vue官方推荐采用微软的VSCode作为开发工具，到VSCode的官网 <a href="https://code.visualstudio.com/" title="下载VSCode">Visual Studio Code</a> 下载安装即可</p><p>要对<code>*.vue</code>做语法支持，还需VSCode安装一个<code>Volar</code>插件</p><h3 id="安装-devtools"><a href="#安装-devtools" class="headerlink" title="安装 devtools"></a>安装 devtools</h3><ul><li>devtools 插件网址：<a href="https://devtools.vuejs.org/guide/installation.html">https://devtools.vuejs.org/guide/installation.html</a></li></ul><h3 id="配置修改"><a href="#配置修改" class="headerlink" title="配置修改"></a>配置修改</h3><ul><li>文档地址：<a href="https://vitejs.cn/config/#server-port">配置 Vite | Vite中文网 (vitejs.cn)</a></li></ul><h4 id="修改端口"><a href="#修改端口" class="headerlink" title="修改端口"></a>修改端口</h4><p>打开项目根目录下vite.config.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">7070</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="配置代理"><a href="#配置代理" class="headerlink" title="配置代理"></a>配置代理</h4><p>为了避免前后端服务器联调时， fetch、xhr请求产生跨域问题，需要配置代理，同样是修改项目根目录下vite.config.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">7070</span>,</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">index.html</span><br><span class="line">package.json</span><br><span class="line">tsconfig.json</span><br><span class="line">vite.config.ts</span><br><span class="line">├─public</span><br><span class="line">└─src</span><br><span class="line">    ├─assets</span><br><span class="line">    ├─components</span><br><span class="line">    ├─model</span><br><span class="line">    ├─router</span><br><span class="line">    ├─store</span><br><span class="line">    └─views</span><br></pre></td></tr></table></figure><ul><li>index.html 为主页面</li><li>package.json npm 配置文件</li><li>tsconfig.json typescript 配置文件</li><li>vite.config.ts vite 配置文件</li><li>public 静态资源</li><li>src/components 可重用组件</li><li>src/model 模型定义</li><li>src/router 路由</li><li>src/store 共享存储</li><li>src/views 视图组件</li></ul><h2 id="Vue-组件"><a href="#Vue-组件" class="headerlink" title="Vue 组件"></a>Vue 组件</h2><p>Vue 的组件文件以<code>.vue</code>结尾，每个组件由三部分组成</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure><ul><li>script代码部分，控制模板的数据来源和行为</li><li>template模板部分，由它生成html代码</li><li>style样式部分，一般不关心</li></ul><p>根组件是<code>src/App.vue</code>，演示Helloworld例子</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">let msg = ref(&quot;hello&quot;); // 把数据变成响应式的</span><br><span class="line"></span><br><span class="line">function change() &#123;</span><br><span class="line">  msg.value = &quot;world&quot;;</span><br><span class="line">  console.log(msg);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;input type=&quot;button&quot; value=&quot;修改msg&quot; @click=&quot;change&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ul><li><code>&#123;&#123;msg&#125;&#125;</code>用来将一个变量绑定到页面上某个位置</li><li>绑定的变量必须用<code>ref</code>函数来封装<ul><li><code>ref</code>返回的是【响应式】数据，即数据一旦变化，页面展示也跟着变化</li></ul></li></ul><h3 id="main-ts"><a href="#main-ts" class="headerlink" title="main.ts"></a>main.ts</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./style.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">  .<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li>createApp是创建一个Vue应用程序，它接收的参数App即之前的根组件</li><li>mount就是把根组件生成的html代码片段【挂载】到index.html中id为app的html元素上</li></ul><p>可以修改自己的组件文件，挂载到主页面</p><p>新建 src/views/E0.vue，内容如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const msg = ref(&#x27;Hello, World!!&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>修改 main.ts 将自己的组件文件挂载</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./style.css&#x27;</span></span><br><span class="line"><span class="comment">// import App from &#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">E0</span> <span class="keyword">from</span> <span class="string">&#x27;./views/E0.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="variable constant_">E0</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="ref-与-reactive"><a href="#ref-与-reactive" class="headerlink" title="ref 与 reactive"></a>ref 与 reactive</h3><p>vue提供了两个函数，都可以将数据变为【响应式】数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, reactive &#125; from &#x27;vue&#x27;</span><br><span class="line">const msg = ref(&#x27;Hello, World&#x27;)</span><br><span class="line">const user = reactive(&#123; name: &#x27;张三&#x27; &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;msg&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;user.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ul><li>ref能将任意类型的数据变为【响应式】数据</li><li>reactive只能将对象类型变为【响应式】，对基本类型无效（例如string，number，boolean）</li></ul><p>还有一点不同</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, reactive &#125; from &#x27;vue&#x27;</span><br><span class="line">const u1 = ref(&#123; name: &#x27;张三&#x27; &#125;)</span><br><span class="line">const u2 = reactive(&#123; name: &#x27;张三&#x27; &#125;)</span><br><span class="line"></span><br><span class="line">function test() &#123;</span><br><span class="line">  console.log(u1.value)</span><br><span class="line">  console.log(u2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;u1&#125;&#125;&lt;/h2&gt; &lt;!--  &#123; &quot;name&quot;: &quot;张三&quot; &#125;  --&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;u2&#125;&#125;&lt;/h2&gt; &lt;!--  &#123; &quot;name&quot;: &quot;张三&quot; &#125;  --&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;u1.name&#125;&#125;&lt;/h2&gt; &lt;!--  张三  --&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;u2.name&#125;&#125;&lt;/h2&gt; &lt;!--  张三  --&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ul><li>在 template模板中使用ref包装的数据，直接写【变量名】就可以了</li><li>但在代码中要使用ref包装的数据，必须用<code>变量名.value</code>才能访问到</li><li>reactive包装的数据，在模板中和代码中都是一致的</li></ul><h3 id="属性绑定"><a href="#属性绑定" class="headerlink" title="属性绑定"></a>属性绑定</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const path = ref(&#x27;/src/assets/vue.svg&#x27;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;img :src=&quot;path&quot; alt=&quot;&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ul><li><code>:属性名</code>用来将标签属性与【响应式】变量绑定</li></ul><h3 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const count = ref(0)</span><br><span class="line">function dec() &#123;</span><br><span class="line">  count.value--</span><br><span class="line">&#125;</span><br><span class="line">function inc() &#123;</span><br><span class="line">  count.value++</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input type=&quot;button&quot; value=&quot;-&quot; @click=&quot;dec&quot;&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;count&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;input type=&quot;button&quot; value=&quot;+&quot; @click=&quot;inc&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ul><li><code>@事件名</code>用来将标签属性与函数绑定，事件发生后执行函数内代码</li></ul><h3 id="表单绑定"><a href="#表单绑定" class="headerlink" title="表单绑定"></a>表单绑定</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const user = ref(&#123;</span><br><span class="line">  name:&#x27;张三&#x27;,</span><br><span class="line">  age:18,</span><br><span class="line">  sex:&#x27;男&#x27;,</span><br><span class="line">  fav:[&#x27;游泳&#x27;,&#x27;打球&#x27;]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function saveUser() &#123;</span><br><span class="line">  console.log(user.value)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;outer&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;label for=&quot;&quot;&gt;请输入姓名&lt;/label&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; v-model=&quot;user.name&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;label for=&quot;&quot;&gt;请输入年龄&lt;/label&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; v-model=&quot;user.age&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;label for=&quot;&quot;&gt;请选择性别&lt;/label&gt;</span><br><span class="line">      男 &lt;input type=&quot;radio&quot; value=&quot;男&quot; v-model=&quot;user.sex&quot;/&gt; </span><br><span class="line">      女 &lt;input type=&quot;radio&quot; value=&quot;女&quot; v-model=&quot;user.sex&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;label for=&quot;&quot;&gt;请选择爱好&lt;/label&gt;</span><br><span class="line">      游泳 &lt;input type=&quot;checkbox&quot; value=&quot;游泳&quot; v-model=&quot;user.fav&quot;/&gt; </span><br><span class="line">      打球 &lt;input type=&quot;checkbox&quot; value=&quot;打球&quot; v-model=&quot;user.fav&quot;/&gt; </span><br><span class="line">      健身 &lt;input type=&quot;checkbox&quot; value=&quot;健身&quot; v-model=&quot;user.fav&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input type=&quot;button&quot; value=&quot;保存&quot; @click=&quot;saveUser&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  div &#123;</span><br><span class="line">    margin-bottom: 8px;</span><br><span class="line">  &#125;</span><br><span class="line">  .outer &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">    position: relative;</span><br><span class="line">    padding-left: 80px;</span><br><span class="line">  &#125;</span><br><span class="line">  label &#123;</span><br><span class="line">    text-align: left;</span><br><span class="line">    width: 100px;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    position: absolute;</span><br><span class="line">    left :0;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><ul><li>用<code>v-model</code>实现双向绑定，即 <ul><li>javascript数据可以同步到表单标签</li><li>反过来用户在表单标签输入的新值也会同步到javascript这边</li></ul></li><li>双向绑定只适用于表单这种带【输入】功能的标签，其它标签的数据绑定，单向就足够了</li><li>复选框这种标签，双向绑定的javascript数据类型一般用数组</li></ul><h3 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3><p>有时需要在数据展示时做简单的计算</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const firstName = ref(&#x27;三&#x27;)</span><br><span class="line">const lastName = ref(&#x27;张&#x27;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;lastName + firstName&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h3&gt;&#123;&#123;lastName + firstName&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h4&gt;&#123;&#123;lastName + firstName&#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>看起来较为繁琐，可以用计算属性改进</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, computed &#125; from &#x27;vue&#x27;</span><br><span class="line">const firstName = ref(&#x27;三&#x27;)</span><br><span class="line">const lastName = ref(&#x27;张&#x27;)</span><br><span class="line">const fullName = computed(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;enter&#x27;)</span><br><span class="line">  return lastName.value + firstName.value</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;fullName&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h3&gt;&#123;&#123;fullName&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h4&gt;&#123;&#123;fullName&#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ul><li>fullName即为计算属性，它具备缓存功能，即firstName 和 lastName的值发生了变化，才会重新计算</li><li>如果用函数实现相同功能，则没有缓存功能</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const firstName = ref(&#x27;三&#x27;)</span><br><span class="line">const lastName = ref(&#x27;张&#x27;)</span><br><span class="line">function fullName() &#123;</span><br><span class="line">  console.log(&#x27;enter&#x27;)</span><br><span class="line">  return lastName.value + firstName.value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;fullName()&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h3&gt;&#123;&#123;fullName()&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h4&gt;&#123;&#123;fullName()&#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="xhr"><a href="#xhr" class="headerlink" title="xhr"></a>xhr</h3><p>浏览器中有两套API可以和后端交互，发送请求、接收响应，fetch api已说明过，另一套api是xhr，基本用法如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">response</span>)</span><br><span class="line">&#125;</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://localhost:8080/api/students&#x27;</span>)</span><br><span class="line">xhr.<span class="property">responseType</span> = <span class="string">&quot;json&quot;</span></span><br><span class="line">xhr.<span class="title function_">send</span>()</span><br></pre></td></tr></table></figure><p>但这套api虽然功能强大，但比较老，不直接支持Promise，因此有必要对其进行改造</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">get</span>(<span class="params">url: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">    xhr.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">if</span>(xhr.<span class="property">status</span> === <span class="number">200</span>)&#123;</span><br><span class="line">        <span class="title function_">resolve</span>(xhr.<span class="property">response</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span>(xhr.<span class="property">status</span> === <span class="number">404</span>) &#123;</span><br><span class="line">        <span class="title function_">reject</span>(xhr.<span class="property">response</span>)</span><br><span class="line">      &#125; <span class="comment">// 其它情况也需考虑，这里简化处理</span></span><br><span class="line">    &#125;</span><br><span class="line">    xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, url)</span><br><span class="line">    xhr.<span class="property">responseType</span> = <span class="string">&#x27;json&#x27;</span></span><br><span class="line">    xhr.<span class="title function_">send</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Promise对象适合用来封装异步操作，并可以配合await使用</li><li>Promise在构造时，需要一个箭头函数，箭头函数有两个参数resolve和reject<ul><li>resolve是异步操作成功时被调用，把成功的结果传递给它，最后会作为await的结果返回</li><li>reject在异步操作失败时被调用，把失败的结果传递给它，最后在catch块被捉住</li></ul></li><li>await会一直等到Promise内调用了resolve或reject才会继续向下运行</li></ul><p>调用示例1：同步接收结果，不走代理</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">get</span>(<span class="string">&quot;http://localhost:8080/api/students&quot;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(resp)</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用示例2：走代理</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">get</span>(<span class="string">&#x27;/api/students&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(resp)  </span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>走代理明显慢不少</li></ul><h3 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h3><h4 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h4><p>axios 就是对xhr api的封装，手法与前面例子类似</p><p>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></table></figure><p>一个简单的例子</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line"></span><br><span class="line">let count = ref(0);</span><br><span class="line"></span><br><span class="line">async function getStudents() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    const resp = await axios.get(&quot;/api/students&quot;);</span><br><span class="line">    count.value = resp.data.data.length;</span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">    console.log(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  getStudents()</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;学生人数为：&#123;&#123; count &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ul><li>onMounted指vue组件生成的html代码片段，挂载完毕后被执行</li></ul><p>再来一个post 例子</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line"></span><br><span class="line">const student = ref(&#123;</span><br><span class="line">  name: &#x27;&#x27;,</span><br><span class="line">  sex: &#x27;男&#x27;,</span><br><span class="line">  age: 18</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">async function addStudent() &#123;</span><br><span class="line">  console.log(student.value)</span><br><span class="line">  const resp = await axios.post(&#x27;/api/students&#x27;, student.value)</span><br><span class="line">  console.log(resp.data.data)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; placeholder=&quot;请输入姓名&quot; v-model=&quot;student.name&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;label for=&quot;&quot;&gt;请选择性别&lt;/label&gt;</span><br><span class="line">      男 &lt;input type=&quot;radio&quot; value=&quot;男&quot; v-model=&quot;student.sex&quot;/&gt; </span><br><span class="line">      女 &lt;input type=&quot;radio&quot; value=&quot;女&quot; v-model=&quot;student.sex&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input type=&quot;number&quot; placeholder=&quot;请输入年龄&quot; v-model=&quot;student.age&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input type=&quot;button&quot; value=&quot;添加&quot; @click=&quot;addStudent&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">div &#123;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h4 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h4><ul><li>开发环境下，联调的后端服务器地址是 <code>http://localhost:8080</code>，</li><li>上线改为生产环境后，后端服务器地址为 <code>http://xxx.com</code></li></ul><p>这就要求区分开发环境和生产环境，这件事可交给构建工具vite来做</p><p>默认情况下，vite支持上面两种环境，分别对应根目录下两个配置文件 </p><ul><li>.env.development - 开发环境</li><li>.env.production - 生产环境</li></ul><p>针对以上需求，分别在两个文件中加入</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">VITE_BACKEND_API_BASE_URL</span> = <span class="string">&#x27;http://localhost:8080&#x27;</span></span><br></pre></td></tr></table></figure><p>和</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">VITE_BACKEND_API_BASE_URL</span> = <span class="string">&#x27;http://xxx.com&#x27;</span></span><br></pre></td></tr></table></figure><p>然后在代码中使用vite给提供的特殊对象 <code>import.meta.env</code>，就可以获取到 <code>VITE_BACKEND_API_BASE_URL</code> 在不同环境下的值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_BACKEND_API_BASE_URL</span></span><br></pre></td></tr></table></figure><p>默认情况下，不能智能提示自定义的环境变量，做如下配置：新增文件 <code>src/env.d.ts</code> 并添加如下内容</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// &lt;reference types=&quot;vite/client&quot; /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ImportMetaEnv</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">VITE_BACKEND_API_BASE_URL</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="comment">// 更多环境变量...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ImportMeta</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">env</span>: <span class="title class_">ImportMetaEnv</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>参考文档地址 <a href="https://cn.vitejs.dev/guide/env-and-mode.html">环境变量和模式 | Vite 官方中文文档 (vitejs.dev)</a></li></ul><h4 id="baseURL"><a href="#baseURL" class="headerlink" title="baseURL"></a>baseURL</h4><p>可以自己创建一个axios对象，方便添加默认设置，新建文件 /src/api/request.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建新的 axios 对象</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">const</span> _axios = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_BACKEND_API_BASE_URL</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> _axios</span><br></pre></td></tr></table></figure><p>然后在其它组件中引用这个 ts 文件，例如 /src/views/E8.vue，就不用自己拼接路径前缀了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &#x27;../api/request&#x27;</span><br><span class="line">// ...</span><br><span class="line">await axios.post(&#x27;/api/students&#x27;, ...)    </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建新的 axios 对象</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">const</span> _axios = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_BACKEND_API_BASE_URL</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截器</span></span><br><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">config</span>)=&gt;</span>&#123; <span class="comment">// 统一添加请求头</span></span><br><span class="line">    config.<span class="property">headers</span> = &#123;</span><br><span class="line">      <span class="title class_">Authorization</span>: <span class="string">&#x27;aaa.bbb.ccc&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>)=&gt;</span>&#123; <span class="comment">// 请求出错时的处理</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">response</span>)=&gt;</span>&#123; <span class="comment">// 状态码  2xx</span></span><br><span class="line">    <span class="comment">// 这里的code是自定义的错误码</span></span><br><span class="line">    <span class="keyword">if</span>(response.<span class="property">data</span>.<span class="property">code</span> === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> response</span><br><span class="line">    &#125;     </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(response.<span class="property">data</span>.<span class="property">code</span> === <span class="number">401</span>) &#123;       </span><br><span class="line">      <span class="comment">// 情况1</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(&#123;&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ... </span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>)=&gt;</span>&#123; <span class="comment">// 状态码 &gt; 2xx, 400,401,403,404,500</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error) <span class="comment">// 处理了异常</span></span><br><span class="line">    <span class="keyword">if</span>(error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">400</span>) &#123;</span><br><span class="line">      <span class="comment">// 情况1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">      <span class="comment">// 情况2</span></span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(&#123;&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> _axios</span><br></pre></td></tr></table></figure><p>处理响应时，又分成两种情况</p><ol><li>后端返回的是标准响应状态码，这时会走响应拦截器第二个箭头函数，用 error.response.status 做分支判断</li><li>后端返回的响应状态码总是200，用自定义错误码表示出错，这时会走响应拦截器第一个箭头函数，用 response.data.code 做分支判断</li></ol><p>另外</p><ul><li><code>Promise.reject(error)</code>类似于将异常继续向上抛出，异常由调用者（Vue组件）来配合<code>try ... catch</code>来处理</li><li><code>Promise.resolve(&#123;&#125;)</code>表示错误已解决，返回一个空对象，调用者中接到这个空对象时，需要配合<code>?.</code>来避免访问不存在的属性</li></ul><h3 id="条件与列表"><a href="#条件与列表" class="headerlink" title="条件与列表"></a>条件与列表</h3><p>首先，新增模型数据 src/model/Model8080.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">sex</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果spring错误，返回的对象格式</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">SpringError</span> &#123;</span><br><span class="line">  <span class="attr">timestamp</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">status</span>: <span class="built_in">number</span>,</span><br><span class="line">  <span class="attr">error</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">message</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">path</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果spring成功，返回list情况</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">SpringList</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">data</span>: T[],</span><br><span class="line">  message?: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">code</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果spring成功，返回page情况</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">SpringPage</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">data</span>: &#123; <span class="attr">list</span>: T[], <span class="attr">total</span>: <span class="built_in">number</span> &#125;,</span><br><span class="line">  message?: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">code</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果spring成功，返回string情况</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">SpringString</span> &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="built_in">string</span>,</span><br><span class="line">  message?: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">code</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AxiosResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">AxiosRespError</span> <span class="keyword">extends</span> <span class="title class_">AxiosResponse</span>&lt;<span class="title class_">SpringError</span>&gt; &#123; &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">AxiosRespList</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">AxiosResponse</span>&lt;<span class="title class_">SpringList</span>&lt;T&gt;&gt; &#123; &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">AxiosRespPage</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">AxiosResponse</span>&lt;<span class="title class_">SpringPage</span>&lt;T&gt;&gt; &#123; &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">AxiosRespString</span> <span class="keyword">extends</span> <span class="title class_">AxiosResponse</span>&lt;<span class="title class_">SpringString</span>&gt; &#123; &#125;</span><br></pre></td></tr></table></figure><p>其中 </p><ul><li>AxiosRespPage代表分页时的响应类型</li><li>AxiosRespList代表返回集合时的响应类型</li><li>AxiosRespString代表返回字符串时的响应类型</li><li>AxiosRespError代表Spring出错时时的响应类型</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import axios from &quot;../api/request&quot;;</span><br><span class="line">import &#123; Student, SpringList &#125; from &quot;../model/Model8080&quot;;</span><br><span class="line"></span><br><span class="line">// 说明 students 数组类型为 Student[]</span><br><span class="line">const students = ref&lt;Student[]&gt;([]);</span><br><span class="line"></span><br><span class="line">async function getStudents() &#123;</span><br><span class="line">  // 说明 resp.data 类型是 SpringList&lt;Student&gt;</span><br><span class="line">  const resp = await axios.get&lt;SpringList&lt;Student&gt;&gt;(&quot;/api/students&quot;);  </span><br><span class="line">  console.log(resp.data.data);</span><br><span class="line">  students.value = resp.data.data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; getStudents());</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;outer&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;title&quot;&gt;学生列表&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;thead&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;row bold&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;col&quot;&gt;编号&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;col&quot;&gt;姓名&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;col&quot;&gt;性别&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;col&quot;&gt;年龄&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;tbody&quot;&gt;</span><br><span class="line">      &lt;div v-if=&quot;students.length === 0&quot;&gt;暂无数据&lt;/div&gt;</span><br><span class="line">      &lt;template v-else&gt;</span><br><span class="line">        &lt;div class=&quot;row&quot; v-for=&quot;s of students&quot; :key=&quot;s.id&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;col&quot;&gt;&#123;&#123; s.id &#125;&#125;&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col&quot;&gt;&#123;&#123; s.name &#125;&#125;&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col&quot;&gt;&#123;&#123; s.sex &#125;&#125;&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col&quot;&gt;&#123;&#123; s.age &#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.outer &#123;</span><br><span class="line">  font-family: 华文行楷;</span><br><span class="line">  font-size: 20px;</span><br><span class="line">  width: 500px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.title &#123;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">  font-size: 30px;</span><br><span class="line">  color: #333;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.row &#123;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.col &#123;</span><br><span class="line">  border: 1px solid #f0f0f0;</span><br><span class="line">  width: 15%;</span><br><span class="line">  height: 35px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 35px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.bold .col &#123;</span><br><span class="line">  background-color: #f1f1f1;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><ul><li>加入泛型是为了更好的提示</li><li>v-if 与 v-else 不能和 v-for 处于同一标签</li><li>template 标签还有一个用途，就是用它少生成一层真正 html 代码</li><li>可以看到将结果封装为响应式数据还是比较繁琐的，后面会使用 useRequest 改进</li></ul><h4 id="监听器"><a href="#监听器" class="headerlink" title="监听器"></a>监听器</h4><p>利用监听器，可以在【响应式】的基础上添加一些副作用，把更多的东西变成【响应式的】</p><ul><li><p>原本只是数据变化 =&gt; 页面更新</p></li><li><p>watch可以在数据变化时 =&gt; 其它更新</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; v-model=&quot;name&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, watch &#125; from &quot;vue&quot;;</span><br><span class="line">function useStorage(name: string) &#123;</span><br><span class="line">  const data = ref(sessionStorage.getItem(name) ?? &quot;&quot;);</span><br><span class="line">  watch(data, (newValue) =&gt; &#123;</span><br><span class="line">    sessionStorage.setItem(name, newValue);</span><br><span class="line">  &#125;);</span><br><span class="line">  return data;</span><br><span class="line">&#125;</span><br><span class="line">const name = useStorage(&quot;name&quot;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>名称为 useXXXX 的函数，作用是返回带扩展功能的【响应式】数据</li><li>localStorage   即使浏览器关闭，数据还在</li><li>sessionStorage  数据工作在浏览器活动期间</li></ul><h3 id="vueuse"><a href="#vueuse" class="headerlink" title="vueuse"></a>vueuse</h3><p>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @vueuse/core</span><br></pre></td></tr></table></figure><p>一些函数的用法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h3&gt;X: &#123;&#123;x&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h3&gt;Y: &#123;&#123;y&#125;&#125;&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">  &lt;h3&gt;&#123;&#123;count&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;input type=&quot;button&quot; @click=&quot;inc()&quot; value=&quot;+&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;button&quot; @click=&quot;dec()&quot; value=&quot;-&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;input type=&quot;text&quot; v-model=&quot;name&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; useMouse, useCounter, useStorage &#125; from &#x27;@vueuse/core&#x27;</span><br><span class="line"></span><br><span class="line">const &#123;x, y&#125; = useMouse()</span><br><span class="line"></span><br><span class="line">const &#123;count, inc, dec&#125; = useCounter()</span><br><span class="line"></span><br><span class="line">const name = useStorage(&quot;name&quot;, &quot;&quot;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="useRequest"><a href="#useRequest" class="headerlink" title="useRequest"></a>useRequest</h3><p>响应式的 axios 封装，官网地址 <a href="https://next.cn.attojs.org/">一个 Vue 请求库 | VueRequest (attojs.org)</a></p><p>首先安装 vue-request</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-request@next</span><br></pre></td></tr></table></figure><p>组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h3 v-if=&quot;students.length === 0&quot;&gt;暂无数据&lt;/h3&gt;</span><br><span class="line">  &lt;ul v-else&gt;</span><br><span class="line">    &lt;li v-for=&quot;s of students&quot; :key=&quot;s.id&quot;&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;s.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;s.sex&#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;s.age&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;</span><br><span class="line">import &#123; useRequest &#125; from &#x27;vue-request&#x27;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; AxiosRespList, Student &#125; from &#x27;../model/Model8080&#x27;</span><br><span class="line"></span><br><span class="line">// data 代表就是 axios 的响应对象</span><br><span class="line">const &#123; data &#125; = useRequest&lt;AxiosRespList&lt;Student&gt;&gt;(() =&gt; axios.get(&#x27;/api/students&#x27;))</span><br><span class="line"></span><br><span class="line">const students = computed(()=&gt;&#123;</span><br><span class="line">  return data?.value?.data.data || []</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">ul li &#123;</span><br><span class="line">  list-style: none;</span><br><span class="line">  font-family: &quot;华文行楷&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li span:nth-child(1) &#123;</span><br><span class="line">  font-size: 24px;</span><br><span class="line">&#125;</span><br><span class="line">li span:nth-child(2) &#123;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  color: crimson;</span><br><span class="line">  vertical-align: bottom;</span><br><span class="line">&#125;</span><br><span class="line">li span:nth-child(3) &#123;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  color: darkblue;</span><br><span class="line">  vertical-align: top;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><ul><li>data.value 的取值一开始是 undefined，随着响应返回变成 axios 的响应对象</li><li>用 computed 进行适配</li></ul><h3 id="usePagination"><a href="#usePagination" class="headerlink" title="usePagination"></a>usePagination</h3><p>在 src/model/Model8080.ts 中补充类型说明</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">StudentQueryDto</span> &#123;</span><br><span class="line">  name?: <span class="built_in">string</span>,</span><br><span class="line">  sex?: <span class="built_in">string</span>,</span><br><span class="line">  age?: <span class="built_in">string</span>, <span class="comment">// 18,20</span></span><br><span class="line">  <span class="attr">page</span>: <span class="built_in">number</span>,</span><br><span class="line">  <span class="attr">size</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>js中类似于18,20这样以逗号分隔字符串，会在get传参时转换为java中的整数数组</li></ul><p>编写组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; placeholder=&quot;请输入姓名&quot; v-model=&quot;dto.name&quot;&gt;</span><br><span class="line">  &lt;select v-model=&quot;dto.sex&quot;&gt;</span><br><span class="line">    &lt;option value=&quot;&quot; selected&gt;请选择性别&lt;/option&gt;</span><br><span class="line">    &lt;option value=&quot;男&quot;&gt;男&lt;/option&gt;</span><br><span class="line">    &lt;option value=&quot;女&quot;&gt;女&lt;/option&gt;</span><br><span class="line">  &lt;/select&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; placeholder=&quot;请输入年龄范围&quot; v-model=&quot;dto.age&quot;&gt;</span><br><span class="line">  &lt;br&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; placeholder=&quot;请输入页码&quot; v-model=&quot;dto.page&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; placeholder=&quot;请输入页大小&quot; v-model=&quot;dto.size&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;button&quot; value=&quot;搜索&quot; @click=&quot;search&quot;&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;h3 v-if=&quot;students.length === 0&quot;&gt;暂无数据&lt;/h3&gt;</span><br><span class="line">  &lt;ul v-else&gt;</span><br><span class="line">    &lt;li v-for=&quot;s of students&quot; :key=&quot;s.id&quot;&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;s.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;s.sex&#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;s.age&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  总记录数&#123;&#123;total&#125;&#125; 总页数&#123;&#123;totalPage&#125;&#125;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;</span><br><span class="line">import &#123; usePagination &#125; from &#x27;vue-request&#x27;</span><br><span class="line">import &#123; computed, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; AxiosRespPage, Student, StudentQueryDto &#125; from &#x27;../model/Model8080&#x27;</span><br><span class="line"></span><br><span class="line">const dto = ref&lt;StudentQueryDto&gt;(&#123;name:&#x27;&#x27;, sex:&#x27;&#x27;, age:&#x27;&#x27;, page:1, size:5&#125;)</span><br><span class="line"></span><br><span class="line">// data 代表就是 axios 的响应对象</span><br><span class="line">// 泛型参数1: 响应类型</span><br><span class="line">// 泛型参数2: 请求类型</span><br><span class="line">const &#123; data, total, totalPage, run &#125; = usePagination&lt;AxiosRespPage&lt;Student&gt;, StudentQueryDto[]&gt;(</span><br><span class="line">  (d) =&gt; axios.get(&#x27;/api/students/q&#x27;, &#123;params: d&#125;), // 箭头函数</span><br><span class="line">  &#123;</span><br><span class="line">    defaultParams: [ dto.value ], // 默认参数, 会作为参数传递给上面的箭头函数</span><br><span class="line">    pagination: &#123;</span><br><span class="line">      currentKey: &#x27;page&#x27;, // 指明当前页属性</span><br><span class="line">      pageSizeKey: &#x27;size&#x27;, // 指明页大小属性</span><br><span class="line">      totalKey: &#x27;data.data.total&#x27; // 指明总记录数属性</span><br><span class="line">    &#125; </span><br><span class="line">  &#125; // 选项</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const students = computed(()=&gt;&#123;</span><br><span class="line">  return data?.value?.data.data.list || []</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function search() &#123;</span><br><span class="line">  run(dto.value) // 会作为参数传递给usePagination的箭头函数</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">ul li &#123;</span><br><span class="line">  list-style: none;</span><br><span class="line">  font-family: &quot;华文行楷&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li span:nth-child(1) &#123;</span><br><span class="line">  font-size: 24px;</span><br><span class="line">&#125;</span><br><span class="line">li span:nth-child(2) &#123;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  color: crimson;</span><br><span class="line">  vertical-align: bottom;</span><br><span class="line">&#125;</span><br><span class="line">li span:nth-child(3) &#123;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  color: darkblue;</span><br><span class="line">  vertical-align: top;</span><br><span class="line">&#125;</span><br><span class="line">input,select &#123;</span><br><span class="line">  width: 100px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><ul><li>usePagination 只需要定义一次，后续还想用它内部的 axios 发请求，只需调用 run 函数</li></ul><h3 id="子组件"><a href="#子组件" class="headerlink" title="子组件"></a>子组件</h3><h4 id="例1"><a href="#例1" class="headerlink" title="例1"></a>例1</h4><p>定义子组件 Child1</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;card&quot;&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p class=&quot;name&quot;&gt;&#123;&#123;name&#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p class=&quot;location&quot;&gt;&#123;&#123;country&#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;img :src=&quot;avatar || &#x27;/src/assets/vue.svg&#x27;&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">// 定义属性,  编译宏</span><br><span class="line">defineProps&lt;&#123;name:string,country:string,avatar?:string&#125;&gt;()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-wrap: wrap;</span><br><span class="line">  justify-content: space-evenly;</span><br><span class="line">  flex-direction: row-reverse;</span><br><span class="line">&#125;</span><br><span class="line">.name &#123;</span><br><span class="line">  font-weight: bold;</span><br><span class="line">&#125;</span><br><span class="line">.location &#123;</span><br><span class="line">  font-size: 0.8em;</span><br><span class="line">  color: #6d597a;</span><br><span class="line">&#125;</span><br><span class="line">.card &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-evenly;</span><br><span class="line">  padding: 1em;</span><br><span class="line">  margin: 1rem;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  background: #fff;</span><br><span class="line">  width: 200px;</span><br><span class="line">  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card:hover &#123;</span><br><span class="line">  transform: rotate(-5deg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card img &#123;</span><br><span class="line">  margin-left: 1em;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  max-width: 55px;</span><br><span class="line">  max-height: 55px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>父组件引用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Child1 name=&quot;张三&quot; country=&quot;中国&quot; avatar=&quot;/src/assets/vue.svg&quot;&gt;&lt;/Child1&gt;</span><br><span class="line">  &lt;Child1 name=&quot;李四&quot; country=&quot;印度&quot; avatar=&quot;/vite.svg&quot;&gt;&lt;/Child1&gt;</span><br><span class="line">  &lt;Child1 name=&quot;王五&quot; country=&quot;韩国&quot; &gt;&lt;/Child1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import Child1 from &#x27;../components/Child1.vue&#x27;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="例2"><a href="#例2" class="headerlink" title="例2"></a>例2</h4><p>首先添加类型说明 model/ModelRandomUser.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AxiosResponse</span> &#125; <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">AxiosRespResults</span> <span class="keyword">extends</span> <span class="title class_">AxiosResponse</span>&lt;<span class="title class_">Results</span>&gt;&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Results</span> &#123;</span><br><span class="line">  <span class="attr">info</span>: &#123;</span><br><span class="line">    <span class="attr">page</span>: <span class="built_in">number</span>,</span><br><span class="line">    <span class="attr">results</span>: <span class="built_in">number</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">results</span>: <span class="title class_">Result</span>[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Result</span> &#123;</span><br><span class="line">  <span class="attr">gender</span>: <span class="string">&#x27;male&#x27;</span> | <span class="string">&#x27;female&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: &#123;</span><br><span class="line">    <span class="attr">first</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">last</span>: <span class="built_in">string</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">location</span>: &#123;</span><br><span class="line">    <span class="attr">country</span>: <span class="built_in">string</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">picture</span>: &#123;</span><br><span class="line">    <span class="attr">medium</span>: <span class="built_in">string</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">login</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="built_in">string</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>子组件不变，父组件使用子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Child1 v-for=&quot;u of users&quot; </span><br><span class="line">    :name=&quot;u.name.first&quot; </span><br><span class="line">    :country=&quot;u.location.country&quot; </span><br><span class="line">    :avatar=&quot;u.picture.medium&quot;</span><br><span class="line">    :key=&quot;u.login.username&quot;&gt;&lt;/Child1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">import &#123; useRequest &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; AxiosRespResults &#125; from &#x27;../model/ModelRandomUser&#x27;</span><br><span class="line">import Child1 from &quot;../components/Child1.vue&quot;;</span><br><span class="line"></span><br><span class="line">const &#123; data &#125; = useRequest&lt;AxiosRespResults&gt;(</span><br><span class="line">  ()=&gt;axios.get(&#x27;https://randomuser.me/api/?results=3&#x27;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const users = computed(()=&gt;&#123;</span><br><span class="line">  return data.value?.data.results || []</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>如果觉得 Result 数据结构嵌套太复杂，还可以做一个类型映射</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Child1 v-for=&quot;u of users&quot; </span><br><span class="line">    :name=&quot;u.name&quot; </span><br><span class="line">    :country=&quot;u.country&quot; </span><br><span class="line">    :avatar=&quot;u.avatar&quot;</span><br><span class="line">    :key=&quot;u.username&quot;&gt;&lt;/Child1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">import &#123; useRequest &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; AxiosRespResults, Result &#125; from &#x27;../model/ModelRandomUser&#x27;</span><br><span class="line">import Child1 from &quot;../components/Child1.vue&quot;;</span><br><span class="line"></span><br><span class="line">const &#123; data &#125; = useRequest&lt;AxiosRespResults&gt;(</span><br><span class="line">  ()=&gt;axios.get(&#x27;https://randomuser.me/api/?results=3&#x27;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const users = computed(()=&gt;&#123;</span><br><span class="line">  return data.value?.data.results.map(resultToUser) || []</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">interface User &#123;</span><br><span class="line">  name: string,</span><br><span class="line">  country: string,</span><br><span class="line">  avatar: string,</span><br><span class="line">  username: string</span><br><span class="line">&#125;</span><br><span class="line">function resultToUser(r:Result):User &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    name: r.name.first,</span><br><span class="line">    country: r.location.country,</span><br><span class="line">    avatar: r.picture.medium,</span><br><span class="line">    username: r.login.username</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>resultToUser 将 Result 类型映射为 User 类型</li></ul><h1 id="Vue进阶"><a href="#Vue进阶" class="headerlink" title="Vue进阶"></a>Vue进阶</h1><h2 id="Antdv"><a href="#Antdv" class="headerlink" title="Antdv"></a>Antdv</h2><p>添加必要插件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install ant-design-vue</span><br></pre></td></tr></table></figure><ul><li>ant-design-vue 组件库插件</li></ul><p>引入antdv功能，修改main.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./style.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> antd <span class="keyword">from</span> <span class="string">&#x27;ant-design-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;ant-design-vue/dist/antd.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(antd).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- &lt;a-table :columns=&quot;columns&quot; :dataSource=&quot;students&quot; rowKey=&quot;id&quot;&gt;&lt;/a-table&gt; --&gt;</span><br><span class="line">  &lt;a-table :columns=&quot;columns&quot; :dataSource=&quot;students&quot; :rowKey=&quot;rowKey&quot;&gt;&lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;;</span><br><span class="line">import &#123; ref, computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRequest &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; AxiosRespList, Student &#125; from &quot;../model/Model8080&quot;;</span><br><span class="line"></span><br><span class="line">const &#123;data&#125; = useRequest&lt;AxiosRespList&lt;Student&gt;&gt;(</span><br><span class="line">  ()=&gt;axios.get(&#x27;/api/students&#x27;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const students = computed(()=&gt;&#123;</span><br><span class="line">  return data.value?.data.data || []</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function rowKey(r:Student) &#123;</span><br><span class="line">  return r.id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const columns = ref([</span><br><span class="line">  &#123;</span><br><span class="line">    title:&#x27;编号&#x27;,</span><br><span class="line">    dataIndex:&#x27;id&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title:&#x27;姓名&#x27;,</span><br><span class="line">    dataIndex:&#x27;name&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title:&#x27;性别&#x27;,</span><br><span class="line">    dataIndex:&#x27;sex&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title:&#x27;年龄&#x27;,</span><br><span class="line">    dataIndex:&#x27;age&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-table :columns=&quot;columns&quot; :data-source=&quot;students&quot; row-key=&quot;id&quot;</span><br><span class="line">   :pagination=&quot;pagination&quot; @change=&quot;tableChange&quot;&gt;&lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;;</span><br><span class="line">import &#123; ref, computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; usePagination &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; AxiosRespPage, Student, StudentQueryDto &#125; from &quot;../model/Model8080&quot;;</span><br><span class="line">import &#123; PaginationProps &#125; from &quot;ant-design-vue&quot;;</span><br><span class="line">import DateBody from &quot;ant-design-vue/lib/vc-picker/panels/DatePanel/DateBody&quot;;</span><br><span class="line"></span><br><span class="line">const dto = ref(&#123;page: 1, size: 5&#125;)</span><br><span class="line"></span><br><span class="line">const &#123;data, total, run&#125; = usePagination&lt;AxiosRespPage&lt;Student&gt;, StudentQueryDto[]&gt;(</span><br><span class="line">  (d)=&gt; axios.get(&#x27;/api/students/q&#x27;, &#123;params:d&#125;),</span><br><span class="line">  &#123;</span><br><span class="line">    defaultParams: [dto.value],</span><br><span class="line">    pagination: &#123;</span><br><span class="line">      currentKey: &quot;page&quot;,</span><br><span class="line">      pageSizeKey: &#x27;size&#x27;,</span><br><span class="line">      totalKey: &#x27;data.data.total&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// 在页号或页大小改变时调用</span><br><span class="line">function tableChange(pagination: PaginationProps) &#123; </span><br><span class="line">  console.log(pagination)</span><br><span class="line">  dto.value.page = pagination.current ?? 1</span><br><span class="line">  dto.value.size = pagination.pageSize ?? 5</span><br><span class="line">  run(dto.value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const pagination = computed&lt;PaginationProps&gt;(()=&gt;&#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    current: dto.value.page, // 当前页</span><br><span class="line">    pageSize: dto.value.size, // 页大小</span><br><span class="line">    total: total.value,       // 总记录数</span><br><span class="line">    showSizeChanger: true,    // 显示页大小的下拉列表</span><br><span class="line">    pageSizeOptions: [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;] // 自定义下拉列表内容</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const students = computed(()=&gt;&#123;</span><br><span class="line">  return data.value?.data.data.list || []</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const columns = ref([</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;编号&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;姓名&quot;,</span><br><span class="line">    dataIndex: &quot;name&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;性别&quot;,</span><br><span class="line">    dataIndex: &quot;sex&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;年龄&quot;,</span><br><span class="line">    dataIndex: &quot;age&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">]);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="搜索、删除"><a href="#搜索、删除" class="headerlink" title="搜索、删除"></a>搜索、删除</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-row&gt;</span><br><span class="line">    &lt;a-col :span=&quot;2&quot;&gt;</span><br><span class="line">      &lt;a-button type=&quot;primary&quot; size=&quot;small&quot;&gt;新增&lt;/a-button&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">    &lt;a-col :span=&quot;4&quot;&gt;</span><br><span class="line">      &lt;a-popconfirm title=&quot;确认要删除选中学生吗?&quot;</span><br><span class="line">        ok-text=&quot;确定&quot; cancel-text=&quot;取消&quot; @confirm=&quot;onDeleteIds&quot;</span><br><span class="line">        @visibleChange=&quot;onVisibleChange&quot; :visible=&quot;visible&quot;&gt;</span><br><span class="line">        &lt;a-button type=&quot;primary&quot; size=&quot;small&quot;&gt;删除选中&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-popconfirm&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">    &lt;a-col :span=&quot;4&quot;&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">    &lt;a-col :span=&quot;4&quot;&gt;</span><br><span class="line">      &lt;a-input v-model:value=&quot;dto.name&quot; placeholder=&quot;输姓名&quot; size=&quot;small&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">    &lt;a-col :span=&quot;4&quot;&gt;</span><br><span class="line">      &lt;a-select v-model:value=&quot;dto.sex&quot; placeholder=&quot;选性别&quot; :allowClear=&quot;true&quot; size=&quot;small&quot;&gt;</span><br><span class="line">        &lt;a-select-option value=&quot;男&quot;&gt;男&lt;/a-select-option&gt;</span><br><span class="line">        &lt;a-select-option value=&quot;女&quot;&gt;女&lt;/a-select-option&gt;</span><br><span class="line">      &lt;/a-select&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">    &lt;a-col :span=&quot;4&quot;&gt;</span><br><span class="line">      &lt;a-select v-model:value=&quot;dto.age&quot; placeholder=&quot;选年龄&quot; :allowClear=&quot;true&quot; size=&quot;small&quot;&gt;</span><br><span class="line">        &lt;a-select-option value=&quot;0,20&quot;&gt;20以下&lt;/a-select-option&gt;</span><br><span class="line">        &lt;a-select-option value=&quot;21,30&quot;&gt;21~30&lt;/a-select-option&gt;</span><br><span class="line">        &lt;a-select-option value=&quot;31,40&quot;&gt;31~40&lt;/a-select-option&gt;</span><br><span class="line">        &lt;a-select-option value=&quot;40,120&quot;&gt;40以上&lt;/a-select-option&gt;</span><br><span class="line">      &lt;/a-select&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">    &lt;a-col :span=&quot;2&quot;&gt;</span><br><span class="line">      &lt;a-button @click=&quot;tableChange&quot; type=&quot;primary&quot; size=&quot;small&quot;&gt;搜索&lt;/a-button&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">  &lt;/a-row&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;a-table :columns=&quot;columns&quot; :data-source=&quot;students&quot; row-key=&quot;id&quot;</span><br><span class="line">    :pagination=&quot;pagination&quot; @change=&quot;tableChange&quot;</span><br><span class="line">    :row-selection=&quot;&#123;selectedRowKeys:ids,onChange:onSelectChange&#125;&quot;&gt;</span><br><span class="line">    &lt;template #bodyCell=&quot;&#123;column, record&#125;&quot;&gt;</span><br><span class="line">      &lt;template v-if=&quot;column.dataIndex===&#x27;name&#x27;&quot;&gt;</span><br><span class="line">      &#123;&#123;record.name + (record.sex===&#x27;男&#x27;?&#x27;(大侠)&#x27;:&#x27;(女侠)&#x27;)&#125;&#125;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;template v-else-if=&quot;column.dataIndex===&#x27;operation&#x27;&quot;&gt;</span><br><span class="line">      &lt;a&gt;修改&lt;/a&gt;</span><br><span class="line">      &lt;a-divider type=&quot;vertical&quot;&gt;&lt;/a-divider&gt;</span><br><span class="line">      &lt;a-popconfirm title=&quot;确认要删除该学生吗?&quot;</span><br><span class="line">        ok-text=&quot;确定&quot; cancel-text=&quot;取消&quot; @confirm=&quot;onDelete(record.id)&quot;&gt;</span><br><span class="line">        &lt;a&gt;删除&lt;/a&gt;   </span><br><span class="line">      &lt;/a-popconfirm&gt;         </span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">  </span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;;</span><br><span class="line">import &#123; ref, computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; usePagination, useRequest &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; AxiosRespPage, AxiosRespString, Student, StudentQueryDto &#125; from &quot;../model/Model8080&quot;;</span><br><span class="line">import &#123; PaginationProps &#125; from &quot;ant-design-vue&quot;;</span><br><span class="line"></span><br><span class="line">// &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 搜索功能开始</span><br><span class="line">const dto = ref(&#123;page: 1, size: 5, name: &#x27;&#x27;, sex: null, age: null&#125;)</span><br><span class="line"></span><br><span class="line">const &#123;data, total, run: search&#125; = usePagination&lt;AxiosRespPage&lt;Student&gt;, StudentQueryDto[]&gt;(</span><br><span class="line">  (d) =&gt; axios.get(&#x27;/api/students/q&#x27;, &#123;params:d&#125;),</span><br><span class="line">  &#123;</span><br><span class="line">    defaultParams: [dto.value],</span><br><span class="line">    pagination: &#123;</span><br><span class="line">      currentKey: &quot;page&quot;,</span><br><span class="line">      pageSizeKey: &#x27;size&#x27;,</span><br><span class="line">      totalKey: &#x27;data.data.total&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">function tableChange(pagination: PaginationProps) &#123; </span><br><span class="line">  // console.log(pagination)</span><br><span class="line">  dto.value.page = pagination.current ?? 1</span><br><span class="line">  dto.value.size = pagination.pageSize ?? 5</span><br><span class="line">  search(dto.value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const pagination = computed&lt;PaginationProps&gt;(()=&gt;&#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    current: dto.value.page, // 当前页</span><br><span class="line">    pageSize: dto.value.size, // 页大小</span><br><span class="line">    total: total.value,       // 总记录数</span><br><span class="line">    showSizeChanger: true,    // 显示页大小的下拉列表</span><br><span class="line">    pageSizeOptions: [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;] // 自定义下拉列表内容</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const students = computed(()=&gt;&#123;</span><br><span class="line">  return data.value?.data.data.list || []</span><br><span class="line">&#125;)</span><br><span class="line">// &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 搜索功能结束</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 删除功能开始</span><br><span class="line">async function onDelete(id:number) &#123;</span><br><span class="line">  // console.log(&quot;学生id是:&quot;+id)</span><br><span class="line">  await deleteById(id)      // 删除请求 删除响应</span><br><span class="line">  search(dto.value)        //                   查询请求 查询响应</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const &#123; runAsync: deleteById &#125; = useRequest&lt;AxiosRespString, number[]&gt;(</span><br><span class="line">  (id) =&gt; axios.delete(`/api/students/$&#123;id&#125;`),</span><br><span class="line">  &#123;</span><br><span class="line">    manual: true</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">// &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 删除功能结束</span><br><span class="line"></span><br><span class="line">// &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 删除选中开始</span><br><span class="line">const ids = ref&lt;number[]&gt;([])</span><br><span class="line"></span><br><span class="line">function onSelectChange(keys:number[]) &#123;</span><br><span class="line">  // console.log(keys)</span><br><span class="line">  ids.value = keys</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">async function onDeleteIds() &#123;</span><br><span class="line">  await deleteByIds(ids.value)</span><br><span class="line">  ids.value = []</span><br><span class="line">  search(dto.value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const &#123; runAsync: deleteByIds &#125; = useRequest&lt;AxiosRespString, number[][]&gt;(</span><br><span class="line">  (ids)=&gt;axios.delete(&#x27;/api/students&#x27;, &#123;data: ids&#125;),</span><br><span class="line">  &#123;</span><br><span class="line">    manual: true</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const visible = ref(false)</span><br><span class="line"></span><br><span class="line">function onVisibleChange(v:boolean) &#123;</span><br><span class="line">  if(!v) &#123; // 希望隐藏</span><br><span class="line">    visible.value = false</span><br><span class="line">  &#125; else &#123; // 希望显示</span><br><span class="line">    visible.value = ids.value.length &gt; 0</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 删除选中结束</span><br><span class="line"></span><br><span class="line">const columns = ref([</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;编号&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;姓名&quot;,</span><br><span class="line">    dataIndex: &quot;name&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;性别&quot;,</span><br><span class="line">    dataIndex: &quot;sex&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;年龄&quot;,</span><br><span class="line">    dataIndex: &quot;age&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &#x27;操作&#x27;,</span><br><span class="line">    dataIndex: &#x27;operation&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .ant-input, .ant-select &#123;</span><br><span class="line">    width: 80px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="新增、修改"><a href="#新增、修改" class="headerlink" title="新增、修改"></a>新增、修改</h3><p>子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-modal :visible=&quot;visible&quot; :title=&quot;title&quot; </span><br><span class="line">    @ok=&quot;onOk&quot; @cancel=&quot;onCancel&quot;&gt;</span><br><span class="line">    &lt;a-form&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;编号&quot; v-if=&quot;id&quot;&gt;</span><br><span class="line">        &lt;a-input readonly v-model:value=&quot;id&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;姓名&quot;&gt;</span><br><span class="line">        &lt;a-input v-model:value=&quot;dto.name&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;性别&quot;&gt;</span><br><span class="line">        &lt;a-radio-group v-model:value=&quot;dto.sex&quot;&gt;</span><br><span class="line">          &lt;a-radio-button value=&quot;男&quot;&gt;男&lt;/a-radio-button&gt;</span><br><span class="line">          &lt;a-radio-button value=&quot;女&quot;&gt;女&lt;/a-radio-button&gt;</span><br><span class="line">        &lt;/a-radio-group&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;年龄&quot;&gt;</span><br><span class="line">        &lt;a-input-number v-model:value=&quot;dto.age&quot;&gt;&lt;/a-input-number&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">    &lt;/a-form&gt;</span><br><span class="line">  &lt;/a-modal&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;;</span><br><span class="line">import &#123; ref, computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRequest &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; StudentSaveDto, AxiosRespString &#125; from &quot;../model/Model8080&quot;;</span><br><span class="line">import &#123; Form &#125; from &#x27;ant-design-vue&#x27;</span><br><span class="line"></span><br><span class="line">// 定义属性</span><br><span class="line">const props = defineProps&lt;&#123;id:number, dto:StudentSaveDto, visible:boolean&#125;&gt;()</span><br><span class="line"></span><br><span class="line">const title = computed(()=&gt; props.id===0?&#x27;新增学生&#x27;:&#x27;修改学生&#x27;)</span><br><span class="line"></span><br><span class="line">// 定义事件</span><br><span class="line">const emit = defineEmits([&#x27;update:visible&#x27;, &#x27;saved&#x27;])</span><br><span class="line"></span><br><span class="line">async function onOk() &#123;</span><br><span class="line">  if(props.id === 0) &#123;</span><br><span class="line">    await insert(props.dto)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    await update(props.dto)</span><br><span class="line">  &#125;</span><br><span class="line">  emit(&#x27;saved&#x27;)</span><br><span class="line">  // 发送事件给父组件, 希望把 visible 改为 false</span><br><span class="line">  emit(&#x27;update:visible&#x27;, false) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function onCancel() &#123;</span><br><span class="line">  // 发送事件给父组件, 希望把 visible 改为 false</span><br><span class="line">  emit(&#x27;update:visible&#x27;, false)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const &#123;runAsync:insert&#125; = useRequest&lt;AxiosRespString,StudentSaveDto[]&gt;(</span><br><span class="line">  (dto)=&gt;axios.post(&#x27;/api/students&#x27;, dto),</span><br><span class="line">  &#123;</span><br><span class="line">    manual: true</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const &#123;runAsync:update&#125; = useRequest&lt;AxiosRespString,StudentSaveDto[]&gt;(</span><br><span class="line">  (dto)=&gt;axios.put(`/api/students/$&#123;props.id&#125;`, dto),</span><br><span class="line">  &#123;</span><br><span class="line">    manual: true</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>父组件使用子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;A4Save :id=&quot;id&quot; :dto=&quot;saveDto&quot; v-model:visible=&quot;saveVisible&quot;&gt;&lt;/A4Save&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">// ...</span><br><span class="line">// &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 新增、修改开始</span><br><span class="line">const saveVisible = ref(false)</span><br><span class="line">const id = ref(0)</span><br><span class="line">const saveDto = reactive(&#123;name:&#x27;&#x27;, sex:&#x27;男&#x27;, age:18&#125;)</span><br><span class="line"></span><br><span class="line">function onInsert() &#123;</span><br><span class="line">  saveVisible.value = true</span><br><span class="line">  id.value = 0</span><br><span class="line">  Object.assign(saveDto, &#123;name:&#x27;&#x27;, sex:&#x27;男&#x27;, age:18&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function onUpdate(record: Student) &#123;</span><br><span class="line">  saveVisible.value = true</span><br><span class="line">  id.value = record.id</span><br><span class="line">  Object.assign(saveDto, record)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function onSaved() &#123;</span><br><span class="line">  search(dto.value)</span><br><span class="line">&#125;    </span><br><span class="line">// &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 新增、修改结束</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>saveDto 使用 reactive 包装，是为了解决后续表单校验失效问题</li><li>Object.assign 是将源对象（参数2）的属性值赋值给目标对象（参数1）的同名属性，效果等价于</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">saveDto.<span class="property">name</span> = record.<span class="property">name</span></span><br><span class="line">saveDto.<span class="property">sex</span> = record.<span class="property">sex</span></span><br><span class="line">saveDto.<span class="property">age</span> = record.<span class="property">age</span></span><br></pre></td></tr></table></figure><h3 id="全局消息"><a href="#全局消息" class="headerlink" title="全局消息"></a>全局消息</h3><p>在 request.ts 中对响应消息统一处理</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; message &#125; <span class="keyword">from</span> <span class="string">&#x27;ant-design-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">response</span>)=&gt;</span>&#123; <span class="comment">// 状态码  2xx</span></span><br><span class="line">    <span class="keyword">if</span>(response.<span class="property">data</span>.<span class="property">message</span>) &#123;</span><br><span class="line">      message.<span class="title function_">success</span>(response.<span class="property">data</span>.<span class="property">message</span>, <span class="number">3</span>)</span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="comment">// ... </span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>)=&gt;</span>&#123; <span class="comment">// 状态码 &gt; 2xx, 400,401,403,404,500</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="表单校验"><a href="#表单校验" class="headerlink" title="表单校验"></a>表单校验</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-modal :visible=&quot;visible&quot; :title=&quot;title&quot; </span><br><span class="line">    @ok=&quot;onOk&quot; @cancel=&quot;onCancel&quot;&gt;</span><br><span class="line">    &lt;a-form&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;编号&quot; v-if=&quot;id&quot;&gt;</span><br><span class="line">        &lt;a-input readonly v-model:value=&quot;id&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;姓名&quot; v-bind=&quot;validateInfos.name&quot;&gt;</span><br><span class="line">        &lt;a-input v-model:value=&quot;dto.name&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;性别&quot; v-bind=&quot;validateInfos.sex&quot;&gt;</span><br><span class="line">        &lt;a-radio-group v-model:value=&quot;dto.sex&quot;&gt;</span><br><span class="line">          &lt;a-radio-button value=&quot;男&quot;&gt;男&lt;/a-radio-button&gt;</span><br><span class="line">          &lt;a-radio-button value=&quot;女&quot;&gt;女&lt;/a-radio-button&gt;</span><br><span class="line">        &lt;/a-radio-group&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;年龄&quot; v-bind=&quot;validateInfos.age&quot;&gt;</span><br><span class="line">        &lt;a-input-number v-model:value=&quot;dto.age&quot;&gt;&lt;/a-input-number&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">    &lt;/a-form&gt;</span><br><span class="line">  &lt;/a-modal&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;;</span><br><span class="line">import &#123; ref, computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRequest &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; StudentSaveDto, AxiosRespString &#125; from &quot;../model/Model8080&quot;;</span><br><span class="line">import &#123; Form &#125; from &#x27;ant-design-vue&#x27;</span><br><span class="line"></span><br><span class="line">// 定义属性</span><br><span class="line">const props = defineProps&lt;&#123;id:number, dto:StudentSaveDto, visible:boolean&#125;&gt;()</span><br><span class="line"></span><br><span class="line">const title = computed(()=&gt; props.id===0?&#x27;新增学生&#x27;:&#x27;修改学生&#x27;)</span><br><span class="line"></span><br><span class="line">// 定义事件</span><br><span class="line">const emit = defineEmits([&#x27;update:visible&#x27;, &#x27;saved&#x27;])</span><br><span class="line"></span><br><span class="line">async function onOk() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    // 提交前校验</span><br><span class="line">    await validate()</span><br><span class="line">    if(props.id === 0) &#123;</span><br><span class="line">      await insert(props.dto)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      await update(props.dto)</span><br><span class="line">    &#125;</span><br><span class="line">    emit(&#x27;saved&#x27;)</span><br><span class="line">    // 发送事件给父组件, 希望把 visible 改为 false</span><br><span class="line">    emit(&#x27;update:visible&#x27;, false) </span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">    console.error(e)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function onCancel() &#123;</span><br><span class="line">  // 发送事件给父组件, 希望把 visible 改为 false</span><br><span class="line">  emit(&#x27;update:visible&#x27;, false)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const &#123;runAsync:insert&#125; = useRequest&lt;AxiosRespString,StudentSaveDto[]&gt;(</span><br><span class="line">  (dto)=&gt;axios.post(&#x27;/api/students&#x27;, dto),</span><br><span class="line">  &#123;</span><br><span class="line">    manual: true</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const &#123;runAsync:update&#125; = useRequest&lt;AxiosRespString,StudentSaveDto[]&gt;(</span><br><span class="line">  (dto)=&gt;axios.put(`/api/students/$&#123;props.id&#125;`, dto),</span><br><span class="line">  &#123;</span><br><span class="line">    manual: true</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const rules = ref(&#123;</span><br><span class="line">  name: [</span><br><span class="line">    &#123;required: true, message:&#x27;姓名必须&#x27;&#125;,</span><br><span class="line">    &#123;min:2, message:&#x27;字符数至少为2&#x27;&#125;</span><br><span class="line">  ],</span><br><span class="line">  sex: [</span><br><span class="line">    &#123;required: true, message:&#x27;性别必须&#x27;&#125;</span><br><span class="line">  ],</span><br><span class="line">  age: [</span><br><span class="line">    &#123;required: true, message:&#x27;年龄必须&#x27;&#125;,</span><br><span class="line">    &#123;min:10, message:&#x27;年龄最小为10岁&#x27;, type:&#x27;number&#x27;&#125;,</span><br><span class="line">    &#123;max:120, message:&#x27;年龄最大为120岁&#x27;, type:&#x27;number&#x27;&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 参数1: 待校验的数据</span><br><span class="line">// 参数2: 校验规则</span><br><span class="line">const &#123; validateInfos, validate &#125; = Form.useForm(props.dto, rules)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@4</span><br></pre></td></tr></table></figure><h3 id="创建-router"><a href="#创建-router" class="headerlink" title="创建 router"></a>创建 router</h3><p>首先创建一个 /src/router/a5router.ts 文件，在其中定义路由</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A51</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A51.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A52</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A52.vue&#x27;</span></span><br><span class="line"><span class="comment">// 路由 =&gt; 路径和组件之间的对应关系</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a1&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="variable constant_">A51</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a2&#x27;</span>, </span><br><span class="line">    <span class="attr">component</span>: <span class="variable constant_">A52</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123; </span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(), <span class="comment">// 路径格式</span></span><br><span class="line">  <span class="attr">routes</span>: routes <span class="comment">// 路由数组</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><ul><li><p>createWebHashHistory 是用 # 符号作为【单页面】跳转技术，上面两个路由访问时路径格式为</p><ul><li><a href="http://localhost:7070/#/a1">http://localhost:7070/#/a1</a></li><li><a href="http://localhost:7070/#/a2">http://localhost:7070/#/a2</a></li></ul></li><li><p>每个路由都有两个必须属性</p><ul><li><p>path：路径</p></li><li><p>component：组件</p></li></ul></li><li><p>createRouter 用来创建 router 对象，作为默认导出</p></li></ul><p>需要在 main.ts 中导入 router 对象：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A5</span> <span class="keyword">from</span> <span class="string">&#x27;./views/A5.vue&#x27;</span>  <span class="comment">// vue-router</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/a5router&#x27;</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="variable constant_">A5</span>).<span class="title function_">use</span>(antdv).<span class="title function_">use</span>(router).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>A5 是根组件，不必在 router 中定义，但需要在其中定义 router-view，用来控制路由跳转后，A51、A52 这些组件的显示位置，内容如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a5&quot;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="动态导入"><a href="#动态导入" class="headerlink" title="动态导入"></a>动态导入</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A51</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A51.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A52</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A52.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a3&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A53.vue&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><ul><li>用 import 关键字导入，效果是打包时会将组件的 js 代码都打包成一个大的 js 文件，如果组件非常多，会影响页面加载速度</li><li>而 import 函数导入（动态导入），则是按需加载，即<ul><li>当路由跳转到 /a3 路径时，才会去加载 A53 组件对应的 js 代码</li><li>vue-router 官方推荐采用动态导入</li></ul></li></ul><h4 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h4><p>如果希望再嵌套更深层次的路由跳转，例如：希望在 A53 组件内再进行路由跳转</p><p>首先，修改 A53.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a53&quot;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>其次，再修改 /src/router/a5router.ts 文件 内容</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A51</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A51.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A52</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A52.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a3&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A53.vue&#x27;</span>),</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;student&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A531.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;teacher&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A532.vue&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><p>用法1</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A51</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A51.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A52</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A52.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a3&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A53.vue&#x27;</span>),</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/a3/student&#x27;</span>, <span class="comment">// 重定向到另外路径</span></span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;student&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A531.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;teacher&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A532.vue&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>效果是，页面输入 /a3，紧接着会重定向跳转到 /a3/student</p><p>用法2</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A51</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A51.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A52</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A52.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a1&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="variable constant_">A51</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a2&#x27;</span>, </span><br><span class="line">    <span class="attr">component</span>: <span class="variable constant_">A52</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/:pathMatcher(.*)*&#x27;</span>, <span class="comment">// 可以匹配剩余的路径</span></span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/a2&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>效果是，当页面输入一个不存在路径 /aaa 时，会被 <code>path: &#39;/:pathMatcher(.*)*&#39;</code> 匹配到，然后重定向跳转到 A52 组件去</p><h3 id="主页布局"><a href="#主页布局" class="headerlink" title="主页布局"></a>主页布局</h3><p>借助antdv的layout组件，可以实现主页【上】【左】【右】布局</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a53&quot;&gt;</span><br><span class="line">    &lt;a-layout&gt;</span><br><span class="line">      &lt;a-layout-header&gt;&lt;/a-layout-header&gt;</span><br><span class="line">      &lt;a-layout&gt;</span><br><span class="line">        &lt;a-layout-sider&gt;&lt;/a-layout-sider&gt;</span><br><span class="line">        &lt;a-layout-content&gt;</span><br><span class="line">          &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">        &lt;/a-layout-content&gt;</span><br><span class="line">      &lt;/a-layout&gt;</span><br><span class="line">    &lt;/a-layout&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.a53 &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">  background-color: rgb(220, 225, 255);</span><br><span class="line">  background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3E%3Ctext x=&#x27;35&#x27; y=&#x27;10&#x27; font-size=&#x27;14&#x27; font-family=&#x27;system-ui, sans-serif&#x27; text-anchor=&#x27;middle&#x27; dominant-baseline=&#x27;middle&#x27;%3EA53(主页)%3C/text%3E%3C/svg%3E&quot;);</span><br><span class="line">  padding: 20px;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line">.ant-layout-header &#123;</span><br><span class="line">  height: 50px;</span><br><span class="line">  background-color:darkseagreen;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-sider &#123;</span><br><span class="line">  background-color:lightsalmon;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-content &#123;</span><br><span class="line">  background-color: aliceblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-footer &#123;</span><br><span class="line">  background-color:darkslateblue;</span><br><span class="line">  height: 30px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-has-sider &#123;</span><br><span class="line">  height: calc(100% - 50px);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="侧边栏菜单"><a href="#侧边栏菜单" class="headerlink" title="侧边栏菜单"></a>侧边栏菜单</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a53&quot;&gt;</span><br><span class="line">    &lt;a-layout&gt;</span><br><span class="line">      &lt;a-layout-header&gt;&lt;/a-layout-header&gt;</span><br><span class="line">      &lt;a-layout&gt;</span><br><span class="line">        &lt;a-layout-sider&gt;</span><br><span class="line">          &lt;a-menu theme=&quot;dark&quot; mode=&quot;inline&quot;&gt;</span><br><span class="line">            &lt;a-menu-item :key=&quot;1&quot;&gt;</span><br><span class="line">              &lt;router-link to=&quot;/a3/student&quot;&gt;菜单1&lt;/router-link&gt;</span><br><span class="line">            &lt;/a-menu-item&gt;</span><br><span class="line">            &lt;a-menu-item :key=&quot;2&quot;&gt;</span><br><span class="line">              &lt;router-link to=&quot;/a3/teacher&quot;&gt;菜单2&lt;/router-link&gt;</span><br><span class="line">            &lt;/a-menu-item&gt;</span><br><span class="line">            &lt;a-menu-item :key=&quot;3&quot;&gt;菜单3&lt;/a-menu-item&gt;</span><br><span class="line">            &lt;a-sub-menu :key=&quot;4&quot; title=&quot;菜单4&quot;&gt;</span><br><span class="line">              &lt;a-menu-item :key=&quot;41&quot;&gt;菜单41&lt;/a-menu-item&gt;</span><br><span class="line">              &lt;a-menu-item :key=&quot;42&quot;&gt;菜单42&lt;/a-menu-item&gt;</span><br><span class="line">            &lt;/a-sub-menu&gt;</span><br><span class="line">          &lt;/a-menu&gt;</span><br><span class="line">        &lt;/a-layout-sider&gt;</span><br><span class="line">        &lt;a-layout-content&gt;</span><br><span class="line">          &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">        &lt;/a-layout-content&gt;</span><br><span class="line">      &lt;/a-layout&gt;</span><br><span class="line">    &lt;/a-layout&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ul><li>a-menu-item 与 a-sub-menu 都必须为 key 属性唯一赋值，否则会产生混乱</li><li>router-link 标签用来切换路由，to 是目标路由的路径</li><li>theme 属性定义菜单的主题（默认亮色主题，dark 为暗色主题）</li><li>mode 属性定义子菜单的展示模式（默认弹出，inline 显示在下方）</li></ul><h3 id="菜单图标"><a href="#菜单图标" class="headerlink" title="菜单图标"></a>菜单图标</h3><p>安装图标依赖</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @ant-design/icons-vue</span><br></pre></td></tr></table></figure><p>菜单中使用图标</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a53&quot;&gt;</span><br><span class="line">    &lt;a-layout&gt;</span><br><span class="line">      &lt;a-layout-header&gt;&lt;/a-layout-header&gt;</span><br><span class="line">      &lt;a-layout&gt;</span><br><span class="line">        &lt;a-layout-sider&gt;</span><br><span class="line">          &lt;a-menu theme=&quot;dark&quot; mode=&quot;inline&quot;&gt;</span><br><span class="line">            &lt;a-menu-item :key=&quot;1&quot;&gt;</span><br><span class="line">              &lt;template #icon&gt;</span><br><span class="line">                &lt;highlight-outlined /&gt;</span><br><span class="line">              &lt;/template&gt;</span><br><span class="line">              &lt;router-link to=&quot;/a3/student&quot;&gt;菜单1&lt;/router-link&gt;</span><br><span class="line">            &lt;/a-menu-item&gt;</span><br><span class="line">            &lt;a-menu-item :key=&quot;2&quot;&gt;</span><br><span class="line">              &lt;template #icon&gt;</span><br><span class="line">                &lt;align-center-outlined /&gt;</span><br><span class="line">              &lt;/template&gt;</span><br><span class="line">              &lt;router-link to=&quot;/a3/teacher&quot;&gt;菜单2&lt;/router-link&gt;</span><br><span class="line">            &lt;/a-menu-item&gt;</span><br><span class="line">            &lt;a-menu-item :key=&quot;3&quot;&gt;</span><br><span class="line">              &lt;template #icon&gt;</span><br><span class="line">                &lt;strikethrough-outlined /&gt;</span><br><span class="line">              &lt;/template&gt;</span><br><span class="line">              菜单3&lt;/a-menu-item&gt;</span><br><span class="line">            &lt;a-sub-menu :key=&quot;4&quot; title=&quot;菜单4&quot;&gt;</span><br><span class="line">              &lt;template #icon&gt;</span><br><span class="line">                &lt;sort-descending-outlined /&gt;</span><br><span class="line">              &lt;/template&gt;</span><br><span class="line">              &lt;a-menu-item :key=&quot;41&quot;&gt;菜单41&lt;/a-menu-item&gt;</span><br><span class="line">              &lt;a-menu-item :key=&quot;42&quot;&gt;菜单42&lt;/a-menu-item&gt;</span><br><span class="line">            &lt;/a-sub-menu&gt;</span><br><span class="line">          &lt;/a-menu&gt;</span><br><span class="line">        &lt;/a-layout-sider&gt;</span><br><span class="line">        &lt;a-layout-content&gt;</span><br><span class="line">          &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">        &lt;/a-layout-content&gt;</span><br><span class="line">      &lt;/a-layout&gt;</span><br><span class="line">    &lt;/a-layout&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123;HighlightOutlined, AlignCenterOutlined, StrikethroughOutlined, SortDescendingOutlined&#125; from &#x27;@ant-design/icons-vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>图标组件没有全局绑定，需要 import 之后才能使用</li><li>用 <code>&lt;template #icon&gt;&lt;/template&gt;</code> 插槽，才能确定图标展示的位置（菜单文字之前）</li></ul><h3 id="二次封装图标组件"><a href="#二次封装图标组件" class="headerlink" title="二次封装图标组件"></a>二次封装图标组件</h3><p>最终希望用统一的图标组件去使用图标，图标名只是作为一个属性值传递进去，例如：</p><p>使用者</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-icon icon=&quot;highlight-outlined&quot;&gt;&lt;/a-icon&gt;</span><br><span class="line">  &lt;a-icon icon=&quot;align-center-outlined&quot;&gt;&lt;/a-icon&gt;</span><br><span class="line">  &lt;a-icon icon=&quot;strikethrough-outlined&quot;&gt;&lt;/a-icon&gt;</span><br><span class="line">  &lt;a-icon icon=&quot;sort-descending-outlined&quot;&gt;&lt;/a-icon&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import AIcon from &#x27;../components/AIcon1.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="方法1，使用-vue-组件"><a href="#方法1，使用-vue-组件" class="headerlink" title="方法1，使用 vue 组件"></a>方法1，使用 vue 组件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123;HighlightOutlined, AlignCenterOutlined, StrikethroughOutlined, SortDescendingOutlined&#125; from &#x27;@ant-design/icons-vue&#x27;</span><br><span class="line">const props = defineProps&lt;&#123;icon:string&#125;&gt;()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;highlight-outlined v-if=&quot;icon===&#x27;highlight-outlined&#x27;&quot;&gt;&lt;/highlight-outlined&gt;</span><br><span class="line">  &lt;align-center-outlined v-else-if=&quot;icon===&#x27;align-center-outlined&#x27;&quot;&gt;&lt;/align-center-outlined&gt;</span><br><span class="line">  &lt;strikethrough-outlined v-else-if=&quot;icon===&#x27;strikethrough-outlined&#x27;&quot;&gt;&lt;/strikethrough-outlined&gt;</span><br><span class="line">  &lt;sort-descending-outlined v-else-if=&quot;icon===&#x27;sort-descending-outlined&#x27;&quot;&gt;&lt;/sort-descending-outlined&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ul><li>缺点：实现太笨</li></ul><h4 id="方法2，使用函数式组件"><a href="#方法2，使用函数式组件" class="headerlink" title="方法2，使用函数式组件"></a>方法2，使用函数式组件</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Icons</span> <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Module</span> &#123;</span><br><span class="line">  [<span class="attr">p</span>:<span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数1: 组件属性</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">AIcon</span> = (<span class="params">props:&#123;icon:<span class="built_in">string</span>&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// console.log(props.icon)</span></span><br><span class="line">  <span class="comment">// console.log(Icons)</span></span><br><span class="line">  <span class="comment">// 参数1: 组件对象</span></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">im</span>: <span class="title class_">Module</span> = <span class="title class_">Icons</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">h</span>(im[<span class="title function_">toCamelCase</span>(props.<span class="property">icon</span>)])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">AIcon</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将-分隔的单词转换为大驼峰命名的单词</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toCamelCase</span>(<span class="params">str: <span class="built_in">string</span></span>) &#123; <span class="comment">// highlight-outlined</span></span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>) <span class="comment">// [&#x27;highlight&#x27;, &#x27;outlined&#x27;]</span></span><br><span class="line">    .<span class="title function_">map</span>(<span class="function">(<span class="params">e</span>)=&gt;</span> e.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + e.<span class="title function_">slice</span>(<span class="number">1</span>) ) <span class="comment">// [&#x27;Highlight&#x27;, &#x27;Outlined&#x27;]</span></span><br><span class="line">    .<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Icons 的结构如下</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">  HighlightOutlined: HighlightOutlined组件对象,</span></span><br><span class="line"><span class="comment">  MonitorOutlined: MonitorOutlined组件对象,</span></span><br><span class="line"><span class="comment">  ...</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><ul><li>需要动态生成标签的时候，可以考虑使用函数式组件</li></ul><h4 id="方法3，使用-jsx-组件"><a href="#方法3，使用-jsx-组件" class="headerlink" title="方法3，使用 jsx 组件"></a>方法3，使用 jsx 组件</h4><p>首先，安装 </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @vitejs/plugin-vue-jsx -D</span><br></pre></td></tr></table></figure><p>配置 vite.config.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vueJsx <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue-jsx&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>(), <span class="title function_">vueJsx</span>()]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>编写一个 Hi.tsx 组件</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="title class_">String</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params">props: &#123; msg: <span class="built_in">string</span> &#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>&#123;props.msg&#125;<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后被其它组件使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import Hi from &#x27;../components/Hi&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Hi msg=&quot;Hello,World&quot;&gt;&lt;/Hi&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>用 jsx 实现图标组件</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Icons</span> <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Module</span> &#123;</span><br><span class="line">  [<span class="attr">p</span>:<span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toCamelCase</span>(<span class="params">str: <span class="built_in">string</span></span>) &#123; <span class="comment">// highlight-outlined</span></span><br><span class="line">  <span class="keyword">return</span> str</span><br><span class="line">    .<span class="title function_">split</span>(<span class="string">&quot;-&quot;</span>) <span class="comment">// [&#x27;highlight&#x27;, &#x27;outlined&#x27;]</span></span><br><span class="line">    .<span class="title function_">map</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> e.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + e.<span class="title function_">slice</span>(<span class="number">1</span>)) <span class="comment">// [&#x27;Highlight&#x27;, &#x27;Outlined&#x27;]</span></span><br><span class="line">    .<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>); <span class="comment">// HighlightOutlined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">icon</span>: <span class="title class_">String</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params">props: &#123;icon: <span class="built_in">string</span>&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">im</span>: <span class="title class_">Module</span> = <span class="title class_">Icons</span></span><br><span class="line">    <span class="keyword">const</span> tag = im[<span class="title function_">toCamelCase</span>(props.<span class="property">icon</span>)] <span class="comment">// 图标组件</span></span><br><span class="line">    <span class="comment">// HighlightOutlined</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">()=&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">tag</span>&gt;</span><span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span> <span class="comment">// 返回组件标签</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="动态路由与菜单"><a href="#动态路由与菜单" class="headerlink" title="动态路由与菜单"></a>动态路由与菜单</h3><h4 id="路由文件"><a href="#路由文件" class="headerlink" title="路由文件"></a>路由文件</h4><p>a6router.js</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useStorage &#125; <span class="keyword">from</span> <span class="string">&#x27;@vueuse/core&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Route</span>, <span class="title class_">Menu</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Model8080&#x27;</span></span><br><span class="line"><span class="keyword">const</span> clientRoutes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A6Login.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;404&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A6NotFound.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;main&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A6Main.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/:pathMatcher(.*)*&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;remaining&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/404&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>: clientRoutes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> serverMenus = useStorage&lt;<span class="title class_">Menu</span>[]&gt;(<span class="string">&#x27;serverMenus&#x27;</span>, [])</span><br><span class="line"><span class="keyword">const</span> serverRoutes = useStorage&lt;<span class="title class_">Route</span>[]&gt;(<span class="string">&#x27;serverRoutes&#x27;</span>, [])</span><br><span class="line"><span class="title function_">addServerRoutes</span>(serverRoutes.<span class="property">value</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">addServerRoutes</span>(<span class="params">routeList: Route[]</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> r <span class="keyword">of</span> routeList) &#123;</span><br><span class="line">    <span class="keyword">if</span> (r.<span class="property">parentName</span>) &#123;</span><br><span class="line">      router.<span class="title function_">addRoute</span>(r.<span class="property">parentName</span>, &#123;</span><br><span class="line">        <span class="attr">path</span>: r.<span class="property">path</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(r.<span class="property">component</span>),</span><br><span class="line">        <span class="attr">name</span>: r.<span class="property">name</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  serverRoutes.<span class="property">value</span> = routeList</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">resetRoutes</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> r <span class="keyword">of</span> clientRoutes) &#123;</span><br><span class="line">    router.<span class="title function_">addRoute</span>(r)</span><br><span class="line">  &#125;</span><br><span class="line">  serverRoutes.<span class="property">value</span> = <span class="literal">null</span></span><br><span class="line">  serverMenus.<span class="property">value</span> = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>本文件重要的函数及变量</p><ul><li>addServerRoutes 函数向路由表中添加由服务器提供的路由，路由分成两部分<ul><li>clientRoutes 这是客户端固定的路由</li><li>serverRoutes 这是服务器变化的路由，存储于 localStorage</li></ul></li><li>resetRoutes 函数用来将路由重置为 clientRoutes <ul><li>vue-router@4 中的 addRoute 方法会【覆盖】同名路由，这是这种实现的关键</li><li>因此，服务器返回的路由最好是 main 的子路由，这样重置时就会比较简单，用之前的 main 一覆盖就完事了</li></ul></li><li>serverMenus 变量记录服务器变化的菜单，存储于 localStorage</li></ul><h4 id="登录组件"><a href="#登录组件" class="headerlink" title="登录组件"></a>登录组件</h4><p>动态路由应当在登录时生成，A6Login.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;login&quot;&gt;</span><br><span class="line">    &lt;a-form :label-col=&quot;&#123; span: 6 &#125;&quot; autocomplete=&quot;off&quot;&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;用户名&quot; v-bind=&quot;validateInfos.username&quot;&gt;</span><br><span class="line">        &lt;a-input v-model:value=&quot;dto.username&quot; /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;密码&quot; v-bind=&quot;validateInfos.password&quot;&gt;</span><br><span class="line">        &lt;a-input-password v-model:value=&quot;dto.password&quot; /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item :wrapper-col=&quot;&#123; offset: 6, span: 16 &#125;&quot;&gt;</span><br><span class="line">        &lt;a-button type=&quot;primary&quot; @click=&quot;onClick&quot;&gt;Submit&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-form-item&gt;      </span><br><span class="line">    &lt;/a-form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; Form &#125; from &#x27;ant-design-vue&#x27;</span><br><span class="line">import &#123; useRouter &#125; from &#x27;vue-router&#x27;</span><br><span class="line">import axios from &#x27;../api/request&#x27;</span><br><span class="line">import &#123; useRequest &#125; from &#x27;vue-request&#x27;</span><br><span class="line">import &#123; AxiosRespToken, LoginDto, AxiosRespMenuAndRoute &#125; from &#x27;../model/Model8080&#x27;</span><br><span class="line">import &#123; resetRoutes, addServerRoutes, serverMenus &#125; from &#x27;../router/a6router&#x27;</span><br><span class="line">const dto = ref(&#123;username:&#x27;&#x27;, password:&#x27;&#x27;&#125;)</span><br><span class="line">const rules = ref(&#123;</span><br><span class="line">  username: [</span><br><span class="line">    &#123;required: true, message:&#x27;用户名必填&#x27;&#125;</span><br><span class="line">  ],</span><br><span class="line">  password:[</span><br><span class="line">    &#123;required: true, message:&#x27;密码必填&#x27;&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line">const &#123; validateInfos, validate &#125; = Form.useForm(dto, rules)</span><br><span class="line">const router = useRouter()</span><br><span class="line">const &#123; runAsync:login &#125; = useRequest&lt;AxiosRespToken, LoginDto[]&gt;((dto)=&gt; axios.post(&#x27;/api/loginJwt&#x27;, dto), &#123;manual:true&#125;)</span><br><span class="line">const &#123; runAsync:menu &#125; = useRequest&lt;AxiosRespMenuAndRoute, string[]&gt;((username)=&gt; axios.get(`/api/menu/$&#123;username&#125;`), &#123;manual:true&#125;)</span><br><span class="line">async function onClick() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    await validate()</span><br><span class="line">    const loginResp = await login(dto.value</span><br><span class="line">    if(loginResp.data.code === 200) &#123; // 登录成功</span><br><span class="line">      const token = loginResp.data.data.token</span><br><span class="line">      const menuResp = await menu(dto.value.username)</span><br><span class="line">      const routeList = menuResp.data.data.routeList</span><br><span class="line">      addServerRoutes(routeList)</span><br><span class="line">      serverMenus.value = menuResp.data.data.menuTree</span><br><span class="line">      router.push(&#x27;/&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">    console.error(e)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">onMounted(()=&gt;&#123;</span><br><span class="line">  resetRoutes()</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.login&#123;</span><br><span class="line">  margin: 200px auto;</span><br><span class="line">  width: 25%;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  height: 180px;</span><br><span class="line">  background-color: antiquewhite;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><ul><li>登录成功后去请求 <code>/api/menu/&#123;username&#125;</code>  获取该用户的菜单和路由</li><li>router.push 方法用来以编程方式跳转至主页路由</li></ul><h4 id="主页组件"><a href="#主页组件" class="headerlink" title="主页组件"></a>主页组件</h4><p>A6Main.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a6main&quot;&gt;</span><br><span class="line">    &lt;a-layout&gt;</span><br><span class="line">      &lt;a-layout-header&gt;</span><br><span class="line">      &lt;/a-layout-header&gt;</span><br><span class="line">      &lt;a-layout&gt;</span><br><span class="line">        &lt;a-layout-sider&gt;</span><br><span class="line">          &lt;a-menu mode=&quot;inline&quot; theme=&quot;dark&quot;&gt;</span><br><span class="line">            &lt;template v-for=&quot;m1 of serverMenus&quot;&gt;</span><br><span class="line">              &lt;a-sub-menu v-if=&quot;m1.children&quot; :key=&quot;m1.id&quot; :title=&quot;m1.title&quot;&gt;</span><br><span class="line">                &lt;template #icon&gt;&lt;a-icon :icon=&quot;m1.icon&quot;&gt;&lt;/a-icon&gt;&lt;/template&gt;</span><br><span class="line">                &lt;a-menu-item v-for=&quot;m2 of m1.children&quot; :key=&quot;m2.id&quot;&gt;</span><br><span class="line">                  &lt;template #icon&gt;&lt;a-icon :icon=&quot;m2.icon&quot;&gt;&lt;/a-icon&gt;&lt;/template&gt;</span><br><span class="line">                  &lt;router-link v-if=&quot;m2.routePath&quot; :to=&quot;m2.routePath&quot;&gt;&#123;&#123;m2.title&#125;&#125;&lt;/router-link&gt;</span><br><span class="line">                  &lt;span v-else&gt;&#123;&#123;m2.title&#125;&#125;&lt;/span&gt;</span><br><span class="line">                &lt;/a-menu-item&gt;</span><br><span class="line">              &lt;/a-sub-menu&gt;</span><br><span class="line">              &lt;a-menu-item v-else :key=&quot;m1.id&quot;&gt;</span><br><span class="line">                &lt;template #icon&gt;&lt;a-icon :icon=&quot;m1.icon&quot;&gt;&lt;/a-icon&gt;&lt;/template&gt;</span><br><span class="line">                &lt;router-link v-if=&quot;m1.routePath&quot; :to=&quot;m1.routePath&quot;&gt;&#123;&#123;m1.title&#125;&#125;&lt;/router-link&gt;</span><br><span class="line">                &lt;span v-else&gt;&#123;&#123;m1.title&#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/a-menu-item&gt;</span><br><span class="line">            &lt;/template&gt;            </span><br><span class="line">          &lt;/a-menu&gt;</span><br><span class="line">        &lt;/a-layout-sider&gt;</span><br><span class="line">        &lt;a-layout-content&gt;</span><br><span class="line">          &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">        &lt;/a-layout-content&gt;</span><br><span class="line">      &lt;/a-layout&gt;</span><br><span class="line">    &lt;/a-layout&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import AIcon from &#x27;../components/AIcon3&#x27; // jsx icon 组件</span><br><span class="line">import &#123; serverMenus &#125; from &#x27;../router/a6router&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.a6main &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">  background-color: rgb(220, 225, 255);</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line">.ant-layout-header &#123;</span><br><span class="line">  height: 50px;</span><br><span class="line">  background-color:darkseagreen;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-sider &#123;</span><br><span class="line">  background-color:lightsalmon;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-content &#123;</span><br><span class="line">  background-color: aliceblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-footer &#123;</span><br><span class="line">  background-color:darkslateblue;</span><br><span class="line">  height: 30px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-has-sider &#123;</span><br><span class="line">  height: calc(100% - 50px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="token-使用"><a href="#token-使用" class="headerlink" title="token 使用"></a>token 使用</h3><ol><li>获取用户信息，例如服务器端可以把用户名、该用户的路由、菜单信息都统一从 token 返回</li><li>前端路由跳转依据，例如跳转前检查 token，如果不存在，表示未登录，就避免跳转至某些路由</li><li>后端 api 访问依据，例如每次发请求携带 token，后端需要身份校验的 api 需要用到</li></ol><h2 id="pinia"><a href="#pinia" class="headerlink" title="pinia"></a>pinia</h2><p>需求：在组件p1里更新了数据，主页组件也同步更新显示</p><ul><li>storage 虽然可以实现多个组件的数据共享，但是需要【主动访问】才能获取更新后的数据</li><li>本例中由于没有涉及主页组件的 mounted 操作，因此并不会【主动】获取 storage 的数据 </li></ul><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pinia</span><br></pre></td></tr></table></figure><p>在 main.ts 中引入</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="variable constant_">A6</span>).<span class="title function_">use</span>(antdv).<span class="title function_">use</span>(router).<span class="title function_">use</span>(<span class="title function_">createPinia</span>()).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="定义Store"><a href="#定义Store" class="headerlink" title="定义Store"></a>定义Store</h3><p>再新建 store 目录来管理共享数据，下面是 /src/store/UserInfo.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;../api/request&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserInfoDto</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Model8080&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserInfo = <span class="title function_">defineStore</span>(<span class="string">&#x27;userInfo&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;&#x27;</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">get</span>(<span class="params">username: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">`/api/info/<span class="subst">$&#123;username&#125;</span>`</span>)</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="variable language_">this</span>, resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">update</span>(<span class="params">dto: UserInfoDto</span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">&#x27;/api/info&#x27;</span>, dto)</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="variable language_">this</span>, dto)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li><p>定义了 useUserInfo 函数，用来获取共享数据，它可能用于多个组件</p><ul><li>命名习惯上，函数变量以 use 打头</li></ul></li><li><p>state 定义数据格式</p></li><li><p>actions 定义操作数据的方法</p><ul><li><p>get 方法用来获取用户信息</p></li><li><p>update 方法用来修改用户信息</p></li></ul></li></ul><ul><li>由于 useRequest 必须放在 setup 函数内，这里简化起见，直接使用了 axios</li></ul><p>获取用户信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a6main&quot;&gt;</span><br><span class="line">    &lt;a-layout&gt;</span><br><span class="line">      &lt;a-layout-header&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123;serverUsername&#125;&#125; 【&#123;&#123;userInfo.name&#125;&#125; - &#123;&#123;userInfo.sex&#125;&#125;】&lt;/span&gt;</span><br><span class="line">      &lt;/a-layout-header&gt;</span><br><span class="line">      &lt;a-layout&gt;</span><br><span class="line">        &lt;!-- ... --&gt;</span><br><span class="line">      &lt;/a-layout&gt;</span><br><span class="line">    &lt;/a-layout&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; onMounted &#125; from &#x27;vue&#x27;;</span><br><span class="line">import AIcon from &#x27;../components/AIcon3&#x27; // jsx icon 组件</span><br><span class="line">import &#123; serverMenus, serverUsername &#125; from &#x27;../router/a6router&#x27;</span><br><span class="line">import &#123; useUserInfo &#125; from &#x27;../store/UserInfo&#x27;</span><br><span class="line">const userInfo = useUserInfo()</span><br><span class="line"></span><br><span class="line">onMounted(()=&gt;&#123;</span><br><span class="line">  userInfo.get(serverUsername.value)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>修改用户信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a6p1&quot;&gt;</span><br><span class="line">    &lt;h3&gt;修改用户信息&lt;/h3&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;a-form&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;用户名&quot;&gt;</span><br><span class="line">        &lt;a-input readonly v-model:value=&quot;dto.username&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;姓名&quot; v-bind=&quot;validateInfos.name&quot;&gt;</span><br><span class="line">        &lt;a-input v-model:value=&quot;dto.name&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;性别&quot;&gt;</span><br><span class="line">        &lt;a-radio-group v-model:value=&quot;dto.sex&quot;&gt;</span><br><span class="line">          &lt;a-radio-button value=&quot;男&quot;&gt;男&lt;/a-radio-button&gt;</span><br><span class="line">          &lt;a-radio-button value=&quot;女&quot;&gt;女&lt;/a-radio-button&gt;</span><br><span class="line">        &lt;/a-radio-group&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">    &lt;/a-form&gt;</span><br><span class="line">    &lt;a-button type=&quot;primary&quot; @click=&quot;onClick&quot;&gt;确定&lt;/a-button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; Form &#125; from &#x27;ant-design-vue&#x27;</span><br><span class="line">import &#123; onMounted, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; UserInfoDto &#125; from &#x27;../model/Model8080&#x27;</span><br><span class="line">import &#123; useUserInfo &#125; from &#x27;../store/UserInfo&#x27;;</span><br><span class="line">const dto = ref&lt;UserInfoDto&gt;(&#123; username: &#x27;&#x27;, name: &#x27;&#x27;, sex: &#x27;&#x27; &#125;)</span><br><span class="line">const userInfo = useUserInfo()</span><br><span class="line">onMounted(()=&gt;&#123;</span><br><span class="line">  Object.assign(dto.value, userInfo)</span><br><span class="line">&#125;)</span><br><span class="line">const rules = ref(&#123;</span><br><span class="line">  name: [</span><br><span class="line">    &#123;required: true, message:&#x27;姓名必填&#x27;&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line">const &#123; validateInfos, validate &#125; = Form.useForm(dto, rules)</span><br><span class="line">async function onClick() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    await validate()</span><br><span class="line">    await userInfo.update(dto.value)</span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">    console.error(e)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>不能直接把 userInfo 绑定到表单，需要 dto 中转一下</li><li>userInfo.update 和 useInfo.get 返回的都是 Promise 对象，可以配合 await 一起用</li></ul>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> web框架 </tag>
            
            <tag> Vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>web框架篇之Vue2</title>
      <link href="/2023/01/02/12196.html"/>
      <url>/2023/01/02/12196.html</url>
      
        <content type="html"><![CDATA[<h1 id="Vue-js介绍"><a href="#Vue-js介绍" class="headerlink" title="Vue.js介绍"></a>Vue.js介绍</h1><p>Vue.js是一套用于构建用户界面的渐进式框架<br>Vue.js是一个MVVM框架</p><p>MVVM模式</p><ul><li>Model：负责数据存储</li><li>View：负责页面展示</li><li>View Model：负责业务逻辑处理（比如Ajax请求等），对数据进行加工后交给视图展示，Vue在其中就是起到了这个角色</li></ul><p>使用方式</p><ol><li>在html页面使用script引入vue.js的库即可使用</li><li>使用Npm管理依赖，使用webpack打包工具对vue.js应用打包</li><li>使用vue.js官方提供的CLI脚本架很方便去创建vue.js工程雏形</li></ol><p>功能</p><ol><li>声明式渲染：将数据渲染进DOM系统，如使用vue.js的插值表达式</li><li>条件与循环：使用vue.js提供的v-if、v-for等标签，方便对数据进行判断、循环</li><li>双向数据绑定： 提供v-model 指令，实现Dom元素和数据变量之间双向绑定</li><li>处理用户输入：用 v-on 指令添加一个事件监听器，通过它调用在 Vue 实例中定义的方法</li><li>组件化应用构建：vue.js可定义多组件，在vue页面中引用组件</li></ol><h1 id="Vue2基础"><a href="#Vue2基础" class="headerlink" title="Vue2基础"></a>Vue2基础</h1><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><h3 id="安装脚手架"><a href="#安装脚手架" class="headerlink" title="安装脚手架"></a>安装脚手架</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure><ul><li>-g 参数表示全局安装，这样在任意目录都可以使用vue脚本创建项目</li></ul><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><p>使用图形向导来创建 vue 项目</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue ui</span><br></pre></td></tr></table></figure><ol><li>详情中输入项目名</li><li>预设中选择手动配置项目</li><li>功能中添加 vue router 和 vuex</li><li>配置中选择版本<code>2.X</code>，<code>Pick a linter / formatter config</code>选择<code>ESLint with error prevention only</code>，之后创建项目</li></ol><h3 id="安装devtools"><a href="#安装devtools" class="headerlink" title="安装devtools"></a>安装devtools</h3><ul><li>devtools 插件网址：<a href="https://devtools.vuejs.org/guide/installation.html">https://devtools.vuejs.org/guide/installation.html</a></li></ul><h3 id="运行项目"><a href="#运行项目" class="headerlink" title="运行项目"></a>运行项目</h3><p>进入项目目录，执行</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure><h3 id="配置修改"><a href="#配置修改" class="headerlink" title="配置修改"></a>配置修改</h3><p>文档地址：<a href="https://webpack.js.org/configuration/dev-server/#devserverport">DevServer | webpack</a></p><h4 id="修改端口"><a href="#修改端口" class="headerlink" title="修改端口"></a>修改端口</h4><p>前端服务器默认占用了 8080 端口</p><p>打开<code>vue.config.js</code>添加</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">7070</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="添加代理"><a href="#添加代理" class="headerlink" title="添加代理"></a>添加代理</h4><p>为了避免前后端服务器联调时，fetch、xhr请求产生跨域问题，需要配置代理</p><p>打开<code>vue.config.js</code>添加</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">7070</span>,</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="Vue项目结构"><a href="#Vue项目结构" class="headerlink" title="Vue项目结构"></a>Vue项目结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PS D:\code\client&gt; tree src</span><br><span class="line">D:\code\CLIENT\SRC</span><br><span class="line">├─assets</span><br><span class="line">├─components</span><br><span class="line">├─router</span><br><span class="line">├─store</span><br><span class="line">└─views</span><br></pre></td></tr></table></figure><ul><li><p>assets - 静态资源</p></li><li><p>components - 可重用组件</p></li><li><p>router - 路由</p></li><li><p>store - 数据共享</p></li><li><p>views - 视图组件</p></li><li><p>api - 跟后台交互，发送fetch、xhr请求，接收响应</p></li><li><p>plugins - 插件</p></li></ul><h2 id="Vue组件"><a href="#Vue组件" class="headerlink" title="Vue组件"></a>Vue组件</h2><p>Vue的组件文件以 .vue 结尾，每个组件由三部分组成</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure><ul><li>template - 模板部分，由它生成html代码</li><li>script - 代码部分，控制模板的数据来源和行为</li><li>style - 样式部分，一般不关心</li></ul><p>入口组件是 App.vue</p><p>先删除原有代码，演示Hello, World例子</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Hello, World --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123;msg&#125;&#125;&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      msg: &quot;Hello, Vue!&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>解释</p><ul><li>export default 导出组件对象，供main.js导入使用</li><li>main.js中导入了template模板，由其中的<code>h函数</code>解析模板，生成虚拟节点，再由<code>mount函数</code>展示虚拟节点（html代码，不包含template标签），将结果放置于<code>public/index.html的id选择器(#app)</code>中</li><li>也可在main.js中注释导入的原有<code>App.vue</code>组件，导入自定义组件，修改<code>h函数</code>内容，即可使用自定义组件</li><li>对象有一个 data 方法，返回一个<strong>对象</strong>，给 template 提供数据</li><li><code>&#123;&#123;&#125;&#125;` 在 Vue 里称之为插值表达式，用来**绑定** data 方法返回的**对象**属性，**绑定**的含义是数据发生变化时，页面显示会同步变化### 文本插值<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;&#123;&#123; name &#125;&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;h1&gt;&#123;&#123; age &gt; 60 ? &#x27;老年&#x27; : &#x27;青年&#x27; &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    data: function () &#123;</span><br><span class="line">        return &#123; name: &#x27;张三&#x27;, age: 70 &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>* `&#123;&#123;&#125;&#125;</code> 里只能绑定一个属性，绑定多个属性需要用多个 <code>&#123;&#123;&#125;&#125;</code> 分别绑定</li><li>template内只能有一个根元素（Vue2中）</li><li>插值内可以进行简单的表达式计算</li></ul><h3 id="属性绑定"><a href="#属性绑定" class="headerlink" title="属性绑定"></a>属性绑定</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;&lt;input type=&quot;text&quot; v-bind:value=&quot;name&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;&lt;input type=&quot;date&quot; v-bind:value=&quot;birthday&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;&lt;input type=&quot;text&quot; :value=&quot;age&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    data: function () &#123;</span><br><span class="line">        return &#123; name: &#x27;王五&#x27;, birthday: &#x27;1995-05-01&#x27;, age: 20 &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>简写方式：可以省略 v-bind 只保留冒号</li><li><code>v-bind:value=&quot;name&quot;</code>，此时<code>name</code>会被解析成一个变量，若是在data函数中没有找到，会显示找不到错误</li><li>当<code>:value=&quot;5&quot;</code>时，找不到对应的绑定属性，会当成表达式进行解析，解析成对应数据类型的数据</li></ul><h3 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;&lt;input type=&quot;button&quot; value=&quot;点我执行m1&quot; v-on:click=&quot;m1&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;&lt;input type=&quot;button&quot; value=&quot;点我执行m2&quot; @click=&quot;m2&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123;count&#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    data: function () &#123;</span><br><span class="line">        return &#123; count: 0 &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        m1() &#123;</span><br><span class="line">            this.count ++;</span><br><span class="line">            console.log(&quot;m1&quot;)</span><br><span class="line">        &#125;,</span><br><span class="line">        m2() &#123;</span><br><span class="line">            this.count --;</span><br><span class="line">            console.log(&quot;m2&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>简写方式：可以把 v-on: 替换为 @</li><li>在 methods 方法中的 this 代表的是 data 函数返回的数据对象</li></ul><h3 id="双向绑定"><a href="#双向绑定" class="headerlink" title="双向绑定"></a>双向绑定</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label for=&quot;&quot;&gt;请输入姓名&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; v-model=&quot;name&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label for=&quot;&quot;&gt;请输入年龄&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; v-model=&quot;age&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label for=&quot;&quot;&gt;请选择性别&lt;/label&gt;</span><br><span class="line">            男 &lt;input type=&quot;radio&quot; value=&quot;男&quot; v-model=&quot;sex&quot;&gt;</span><br><span class="line">            女 &lt;input type=&quot;radio&quot; value=&quot;女&quot; v-model=&quot;sex&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label for=&quot;&quot;&gt;请选择爱好&lt;/label&gt;</span><br><span class="line">            游泳 &lt;input type=&quot;checkbox&quot; value=&quot;游泳&quot; v-model=&quot;fav&quot;&gt;</span><br><span class="line">            打球 &lt;input type=&quot;checkbox&quot; value=&quot;打球&quot; v-model=&quot;fav&quot;&gt;</span><br><span class="line">            健身 &lt;input type=&quot;checkbox&quot; value=&quot;健身&quot; v-model=&quot;fav&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    data: function () &#123;</span><br><span class="line">        return &#123; name: &#x27;&#x27;, age: null, sex:&#x27;男&#x27; , fav:[&#x27;打球&#x27;]&#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>用 v-model 实现双向绑定，即 <ul><li>javascript 数据可以同步到表单标签</li><li>反过来用户在表单标签输入的新值也会同步到 javascript 这边</li></ul></li><li>双向绑定只适用于表单这种带【输入】功能的标签，其它标签的数据绑定，单向就足够了</li><li>复选框这种标签，双向绑定的 javascript 数据类型一般用数组</li></ul><h3 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123;fullName&#125;&#125;&lt;/h2&gt; &lt;!-- 计算属性 --&gt;</span><br><span class="line">        &lt;!-- &lt;h2&gt;&#123;&#123;firstName + lastName&#125;&#125;&lt;/h2&gt;  表达式数据拼接 --&gt;</span><br><span class="line">        &lt;!-- &lt;h2&gt;&#123;&#123;fullName()&#125;&#125;&lt;/h2&gt; 普通方法调用 --&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    data: function () &#123;</span><br><span class="line">        return &#123; firstName: &#x27;三&#x27;, lastName: &#x27;张&#x27; &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    /* methods: &#123;</span><br><span class="line">        fullName() &#123;</span><br><span class="line">            console.log(&#x27;进入了 fullName&#x27;)</span><br><span class="line">            return this.lastName + this.firstName;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,*/</span><br><span class="line">    computed: &#123;</span><br><span class="line">        fullName() &#123;</span><br><span class="line">            console.log(&#x27;进入了 fullName&#x27;)</span><br><span class="line">            return this.lastName + this.firstName;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br></pre></td></tr></table></figure><ul><li>普通方法调用必须加 ()，没有缓存功能</li><li>计算属性使用时就把它当属性来用，不加 ()，有缓存功能：<ul><li>一次计算后，会将结果缓存，下次再计算时，只要数据没有变化，不会重新计算，直接返回缓存结果</li></ul></li></ul><h3 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h3><p>axios 的底层是用了 XMLHttpRequest（xhr）方式发送请求和接收响应，xhr相对于fetch api来说，功能更强大，但由于是比较老的api，不支持Promise，axios对xhr进行了封装，使之支持Promise，并提供了对请求、响应的统一拦截功能</p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios -S</span><br></pre></td></tr></table></figure><h4 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>axios 默认导出一个对象，这里的 import 导入的就是它默认导出的对象</li></ul><h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><table><thead><tr><th>请求</th><th>备注</th></tr></thead><tbody><tr><td>axios(url[, config])</td><td>发起一个GET请求（默认请求方式）</td></tr><tr><td>axios.get(url[, config])</td><td>发起一个GET请求</td></tr><tr><td>axios.delete(url[, config])</td><td></td></tr><tr><td>axios.head(url[, config])</td><td></td></tr><tr><td>axios.options(url[, config])</td><td></td></tr><tr><td>axios.post(url[, data[, config]])</td><td>发起一个POST请求</td></tr><tr><td>axios.put(url[, data[, config]])</td><td></td></tr><tr><td>axios.patch(url[, data[, config]])</td><td></td></tr></tbody></table><ul><li>config - 选项对象，例如查询参数、请求头</li><li>data - 请求体数据，默认的是json格式数据</li><li>get、head 请求无法携带请求体，这应当是浏览器的限制所致（xhr、fetch api均有限制）</li><li>options、delete请求可以通过config中的data携带请求体</li></ul><p>例子</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type=&quot;button&quot; value=&quot;获取远程数据&quot; @click=&quot;sendReq()&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        async sendReq() &#123;</span><br><span class="line">            // 1. get, post</span><br><span class="line">            // const resp = await axios.get(&#x27;/api/a2&#x27;);</span><br><span class="line">            // const resp = await axios.post(&#x27;/api/a2&#x27;);</span><br><span class="line"></span><br><span class="line">            // 2. 发送请求头</span><br><span class="line">            // const resp = await axios.post(&#x27;/api/a3&#x27;,&#123;&#125;,&#123;</span><br><span class="line">            //     headers:&#123;</span><br><span class="line">            //         Authorization:&#x27;abc&#x27;</span><br><span class="line">            //     &#125;</span><br><span class="line">            // &#125;);</span><br><span class="line"></span><br><span class="line">            // 3. 发送请求时携带查询参数 ?name=xxx&amp;age=xxx</span><br><span class="line">            // const name = encodeURIComponent(&#x27;&amp;&amp;&amp;&#x27;);//&amp;&amp;&amp;会当作特殊字符，而不是普通字符</span><br><span class="line">            // const age = 18;</span><br><span class="line">            // const resp = await axios.post(`/api/a4?name=$&#123;name&#125;&amp;age=$&#123;age&#125;`);</span><br><span class="line"></span><br><span class="line">            // 不想拼串、处理特殊字符，使用下面的办法</span><br><span class="line">            // const resp = await axios.post(&#x27;/api/a4&#x27;, &#123;&#125;, &#123;</span><br><span class="line">            //     params: &#123;</span><br><span class="line">            //         name:&#x27;&amp;&amp;&amp;&amp;&#x27;,</span><br><span class="line">            //         age: 20</span><br><span class="line">            //     &#125;</span><br><span class="line">            // &#125;);</span><br><span class="line"></span><br><span class="line">            // 4. 用请求体发数据，格式为 urlencoded</span><br><span class="line">            // const params = new URLSearchParams();</span><br><span class="line">            // params.append(&quot;name&quot;, &quot;张三&quot;);</span><br><span class="line">            // params.append(&quot;age&quot;, 24)</span><br><span class="line">            // const resp = await axios.post(&#x27;/api/a4&#x27;, params);</span><br><span class="line"></span><br><span class="line">            // 5. 用请求体发数据，格式为 multipart</span><br><span class="line">            // const params = new FormData();</span><br><span class="line">            // params.append(&quot;name&quot;, &quot;李四&quot;);</span><br><span class="line">            // params.append(&quot;age&quot;, 30);</span><br><span class="line">            // const resp = await axios.post(&#x27;/api/a5&#x27;, params);</span><br><span class="line"></span><br><span class="line">            // 6. 用请求体发数据，格式为 json</span><br><span class="line">            const resp = await axios.post(&#x27;/api/a5json&#x27;, &#123;</span><br><span class="line">                name: &#x27;王五&#x27;,</span><br><span class="line">                age: 50</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            console.log(resp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="创建实例"><a href="#创建实例" class="headerlink" title="创建实例"></a>创建实例</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _axios = axios.<span class="title function_">create</span>(config);</span><br></pre></td></tr></table></figure><ul><li>axios对象可以直接使用，但使用的是默认的设置</li><li>用<code>axios.create</code>创建的对象，可以覆盖默认设置，config见下面说明</li></ul><p>常见的 config 项有</p><table><thead><tr><th>名称</th><th>含义</th></tr></thead><tbody><tr><td>baseURL</td><td>将自动加在 url 前面</td></tr><tr><td>headers</td><td>请求头，类型为简单对象</td></tr><tr><td>params</td><td>跟在 URL 后的请求参数，类型为简单对象或 URLSearchParams</td></tr><tr><td>data</td><td>请求体，类型有简单对象、FormData、URLSearchParams、File 等</td></tr><tr><td>withCredentials</td><td>跨域时是否携带 Cookie 等凭证，默认为 false</td></tr><tr><td>responseType</td><td>响应类型，默认为 json</td></tr></tbody></table><p>例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _axios = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>,</span><br><span class="line">    <span class="attr">withCredentials</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">await</span> _axios.<span class="title function_">post</span>(<span class="string">&#x27;/api/a6set&#x27;</span>)</span><br><span class="line"><span class="keyword">await</span> _axios.<span class="title function_">post</span>(<span class="string">&#x27;/api/a6get&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li>生产环境希望xhr请求不走代理，可以用baseURL统一修改</li><li>希望跨域请求携带cookie，需要配置<code>withCredentials: true</code>，服务器也要配置<code>allowCredentials = true</code>，否则浏览器获取跨域返回的cookie时会报错</li></ul><h4 id="响应格式"><a href="#响应格式" class="headerlink" title="响应格式"></a>响应格式</h4><table><thead><tr><th>名称</th><th>含义</th></tr></thead><tbody><tr><td>data</td><td>响应体数据</td></tr><tr><td>status</td><td>状态码</td></tr><tr><td>headers</td><td>响应头</td></tr></tbody></table><ul><li>200 表示响应成功</li><li>400 请求数据不正确 age=abc</li><li>401 身份验证没通过</li><li>403 没有权限</li><li>404 资源不存在</li><li>405 不支持请求方式 post</li><li>500 服务器内部错误</li></ul><h4 id="请求拦截器"><a href="#请求拦截器" class="headerlink" title="请求拦截器"></a>请求拦截器</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">        <span class="comment">// 比如在这里添加统一的 headers</span></span><br><span class="line">        config.<span class="property">headers</span> = &#123;</span><br><span class="line">            <span class="title class_">Authorization</span>:<span class="string">&#x27;abc&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="响应拦截器"><a href="#响应拦截器" class="headerlink" title="响应拦截器"></a>响应拦截器</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="keyword">function</span>(<span class="params">response</span>) &#123;</span><br><span class="line">        <span class="comment">// 2xx 范围内走这里</span></span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">        <span class="comment">// 超出 2xx, 比如 4xx, 5xx 走这里</span></span><br><span class="line">        <span class="keyword">if</span>(error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">400</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求参数不正确&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">400</span>);</span><br><span class="line">        &#125;<span class="comment">//else if(404 500 ....).....</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type=&quot;button&quot; value=&quot;获取远程数据&quot; @click=&quot;sendReq()&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;title&quot;&gt;学生列表&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;thead&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;row bold&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;编号&lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;姓名&lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;性别&lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;年龄&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;tbody&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;row&quot; v-if=&quot;students.length &gt; 0&quot;&gt;显示学生数据&lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;row&quot; v-else&gt;暂无学生数据&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;../util/myaxios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    data: function() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            students: []</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods : &#123;</span><br><span class="line">        async sendReq() &#123;</span><br><span class="line">            const resp = await axios.get(&quot;/api/students&quot;);</span><br><span class="line">            console.log(resp.data.data)</span><br><span class="line">            this.students = resp.data.data;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">    div &#123;</span><br><span class="line">        font-family: 华文行楷;</span><br><span class="line">        font-size: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .title &#123;</span><br><span class="line">        margin-bottom: 10px;</span><br><span class="line">        font-size: 30px;</span><br><span class="line">        color: #333;</span><br><span class="line">        text-align: center;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .row &#123;</span><br><span class="line">        background-color: #fff;</span><br><span class="line">        display: flex;</span><br><span class="line">        justify-content: center;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .col &#123;</span><br><span class="line">        border: 1px solid #f0f0f0;</span><br><span class="line">        width: 15%;</span><br><span class="line">        height: 35px;</span><br><span class="line">        text-align: center;</span><br><span class="line">        line-height: 35px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .bold .col &#123;</span><br><span class="line">        background-color: #f1f1f1;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!-- &lt;input type=&quot;button&quot; value=&quot;获取远程数据&quot; @click=&quot;sendReq()&quot;&gt; --&gt;</span><br><span class="line">        &lt;div class=&quot;title&quot;&gt;学生列表&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;thead&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;row bold&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;编号&lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;姓名&lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;性别&lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;年龄&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;tbody&quot;&gt;</span><br><span class="line">            &lt;div v-if=&quot;students.length &gt; 0&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;row&quot; v-for=&quot;s of students&quot; :key=&quot;s.id&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;col&quot;&gt;&#123;&#123;s.id&#125;&#125;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;col&quot;&gt;&#123;&#123;s.name&#125;&#125;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;col&quot;&gt;&#123;&#123;s.sex&#125;&#125;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;col&quot;&gt;&#123;&#123;s.age&#125;&#125;&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;row&quot; v-else&gt;暂无学生数据&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;../util/myaxios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    mounted: function()&#123;</span><br><span class="line">        this.sendReq()</span><br><span class="line">    &#125;,</span><br><span class="line">    data: function() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            students: []</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods : &#123;</span><br><span class="line">        async sendReq() &#123;</span><br><span class="line">            const resp = await axios.get(&quot;/api/students&quot;);</span><br><span class="line">            console.log(resp.data.data)</span><br><span class="line">            this.students = resp.data.data;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">    div &#123;</span><br><span class="line">        font-family: 华文行楷;</span><br><span class="line">        font-size: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .title &#123;</span><br><span class="line">        margin-bottom: 10px;</span><br><span class="line">        font-size: 30px;</span><br><span class="line">        color: #333;</span><br><span class="line">        text-align: center;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .row &#123;</span><br><span class="line">        background-color: #fff;</span><br><span class="line">        display: flex;</span><br><span class="line">        justify-content: center;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .col &#123;</span><br><span class="line">        border: 1px solid #f0f0f0;</span><br><span class="line">        width: 15%;</span><br><span class="line">        height: 35px;</span><br><span class="line">        text-align: center;</span><br><span class="line">        line-height: 35px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .bold .col &#123;</span><br><span class="line">        background-color: #f1f1f1;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><ul><li>v-if和v-for不能用于同一个标签</li><li>v-for需要配合特殊的标签属性 key 一起使用，并且 key 属性要绑定到一个能起到唯一标识作用的数据上，本例绑定到了学生编号上</li><li>options的mounted属性对应一个函数，此函数会在组件挂载后（准备就绪）被调用，可以在它内部发起请求，去获取学生数据</li></ul><h3 id="重用组件"><a href="#重用组件" class="headerlink" title="重用组件"></a>重用组件</h3><p>按钮组件（路径：src/components/MyButton.vue）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- :class 属性绑定的语法，将[]中的数据绑定到class属性 --&gt;</span><br><span class="line">    &lt;div class=&quot;button&quot; :class=&quot;[type,size]&quot;&gt;        </span><br><span class="line">        第&lt;slot&gt;&lt;/slot&gt;个按钮  &lt;!-- 占位 插槽 --&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    props: [&quot;type&quot;, &quot;size&quot;]  //自定义属性</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    //省略了样式部分</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>使用组件（路径：src/views /View_1.vue）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;父组件&lt;/h1&gt;</span><br><span class="line">        &lt;!-- 使用子组件标签，格式为子组件名使用&#x27;-&#x27;分割，如&#x27;MyButton -&gt; my-button&#x27; --&gt;</span><br><span class="line">        &lt;my-button type=&quot;primary&quot; size=&quot;small&quot;&gt;1&lt;/my-button&gt;</span><br><span class="line">        &lt;my-button type=&quot;danger&quot; size=&quot;middle&quot;&gt;2&lt;/my-button&gt;</span><br><span class="line">        &lt;my-button type=&quot;success&quot; size=&quot;large&quot;&gt;3&lt;/my-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyButton from &#x27;../components/MyButton.vue&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    //选择要使用的组件</span><br><span class="line">    components: &#123;</span><br><span class="line">        MyButton</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="Vue2进阶"><a href="#Vue2进阶" class="headerlink" title="Vue2进阶"></a>Vue2进阶</h1><h2 id="ElementUI"><a href="#ElementUI" class="headerlink" title="ElementUI"></a>ElementUI</h2><p>安装</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install element-ui -S</span><br></pre></td></tr></table></figure><p>注意：Vue2对用的ElementUI的主版本也是2.XXXXX</p><p>引入组件</p><p>main.js文件中添加如下内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Element</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Element</span>)</span><br><span class="line"><span class="comment">//放置于new Vue（&#123;之前</span></span><br></pre></td></tr></table></figure><p>测试，在自己的组件中使用 ElementUI 的组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button&gt;按钮&lt;/el-button&gt;</span><br></pre></td></tr></table></figure><h3 id="表格组件"><a href="#表格组件" class="headerlink" title="表格组件"></a>表格组件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-table :data=&quot;students&quot;&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;编号&quot; prop=&quot;id&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;姓名&quot; prop=&quot;name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;../util/myaxios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    async mounted() &#123;</span><br><span class="line">        const resp = await axios.get(&#x27;/api/students&#x27;);</span><br><span class="line">        this.students = resp.data.data</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            students: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="分页组件"><a href="#分页组件" class="headerlink" title="分页组件"></a>分页组件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-table v-bind:data=&quot;students&quot;&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;编号&quot; prop=&quot;id&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;姓名&quot; prop=&quot;name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">        &lt;el-pagination </span><br><span class="line">            :total=&quot;total&quot;</span><br><span class="line">            :page-size=&quot;queryDto.size&quot;</span><br><span class="line">            :current-page=&quot;queryDto.page&quot;</span><br><span class="line">            layout=&quot;prev,pager,next,sizes,-&gt;,total&quot;</span><br><span class="line">            :page-sizes=&quot;[5,10,15,20]&quot;</span><br><span class="line">            @current-change=&quot;currentChange&quot;</span><br><span class="line">            @size-change=&quot;sizeChange&quot;</span><br><span class="line">        &gt;&lt;/el-pagination&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;../util/myaxios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        this.query();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        currentChange(page) &#123;</span><br><span class="line">            this.queryDto.page = page;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;,</span><br><span class="line">        sizeChange(size)&#123;</span><br><span class="line">            this.queryDto.size = size;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;,</span><br><span class="line">        async query() &#123;</span><br><span class="line">            const resp = await axios.get(&#x27;/api/students/q&#x27;, &#123;</span><br><span class="line">                params: this.queryDto</span><br><span class="line">            &#125;);</span><br><span class="line">            this.students = resp.data.data.list;</span><br><span class="line">            this.total = resp.data.data.total;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            students: [],</span><br><span class="line">            total: 0,</span><br><span class="line">            queryDto: &#123;</span><br><span class="line">                page: 1,</span><br><span class="line">                size: 5</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>三种情况都应该触发查询<ul><li>mounted 组件挂载完成后</li><li>页号变化时</li><li>页大小变化时</li></ul></li><li>查询传参应该根据后台需求，灵活采用不同方式<ul><li>本例中因为是 get 请求，无法采用请求体，只能用config对象中的 params 方式传参</li></ul></li></ul><h3 id="分页搜索"><a href="#分页搜索" class="headerlink" title="分页搜索"></a>分页搜索</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-input placeholder=&quot;请输入姓名&quot; size=&quot;mini&quot; v-model=&quot;queryDto.name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;el-select placeholder=&quot;请选择性别&quot; size=&quot;mini&quot; v-model=&quot;queryDto.sex&quot; clearable&gt;</span><br><span class="line">            &lt;el-option value=&quot;男&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;女&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">        &lt;el-select placeholder=&quot;请选择年龄&quot; size=&quot;mini&quot; v-model=&quot;queryDto.age&quot; clearable&gt;</span><br><span class="line">            &lt;el-option value=&quot;0,20&quot; label=&quot;0到20岁&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;21,30&quot; label=&quot;21到30岁&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;31,40&quot; label=&quot;31到40岁&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;41,120&quot; label=&quot;41到120岁&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; size=&quot;mini&quot; @click=&quot;search()&quot;&gt;搜索&lt;/el-button&gt;</span><br><span class="line">        &lt;el-divider&gt;&lt;/el-divider&gt;</span><br><span class="line">        &lt;el-table v-bind:data=&quot;students&quot;&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;编号&quot; prop=&quot;id&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;姓名&quot; prop=&quot;name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;性别&quot; prop=&quot;sex&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;年龄&quot; prop=&quot;age&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">        &lt;el-pagination :total=&quot;total&quot; :page-size=&quot;queryDto.size&quot; :current-page=&quot;queryDto.page&quot;</span><br><span class="line">            layout=&quot;prev,pager,next,sizes,-&gt;,total&quot; :page-sizes=&quot;[5, 10, 15, 20]&quot; @current-change=&quot;currentChange&quot;</span><br><span class="line">            @size-change=&quot;sizeChange&quot;&gt;&lt;/el-pagination&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;../util/myaxios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        this.query();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        currentChange(page) &#123;</span><br><span class="line">            this.queryDto.page = page;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;,</span><br><span class="line">        sizeChange(size) &#123;</span><br><span class="line">            this.queryDto.size = size;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;,</span><br><span class="line">        async query() &#123;</span><br><span class="line">            const resp = await axios.get(&#x27;/api/students/q&#x27;, &#123;</span><br><span class="line">                params: this.queryDto</span><br><span class="line">            &#125;);</span><br><span class="line">            this.students = resp.data.data.list;</span><br><span class="line">            this.total = resp.data.data.total;</span><br><span class="line">        &#125;,</span><br><span class="line">        search() &#123;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            students: [],</span><br><span class="line">            total: 0,</span><br><span class="line">            queryDto: &#123;</span><br><span class="line">                name: &#x27;&#x27;,</span><br><span class="line">                sex: &#x27;&#x27;,</span><br><span class="line">                age: &#x27;&#x27;,  </span><br><span class="line">                page: 1,</span><br><span class="line">                size: 5</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>sex 与  age 均用 <code>&#39;&#39;</code> 表示用户没有选择的情况</li><li>age 取值 <code>0,20</code> 会被 spring 转换为 <code>new int[]&#123;0, 20&#125;</code></li><li>age 取值 <code>&#39;&#39;</code> 会被 spring 转换为 <code>new int[0]</code></li></ul><h3 id="级联选择"><a href="#级联选择" class="headerlink" title="级联选择"></a>级联选择</h3><p>级联选择器中选项的数据结构为</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;<span class="attr">value</span>:<span class="number">100</span>, <span class="attr">label</span>:<span class="string">&#x27;主页&#x27;</span>,<span class="attr">children</span>:[</span><br><span class="line">        &#123;<span class="attr">value</span>:<span class="number">101</span>, <span class="attr">label</span>:<span class="string">&#x27;菜单1&#x27;</span>, <span class="attr">children</span>:[</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">105</span>, <span class="attr">label</span>:<span class="string">&#x27;子项1&#x27;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">106</span>, <span class="attr">label</span>:<span class="string">&#x27;子项2&#x27;</span>&#125;</span><br><span class="line">        ]&#125;,</span><br><span class="line">        &#123;<span class="attr">value</span>:<span class="number">102</span>, <span class="attr">label</span>:<span class="string">&#x27;菜单2&#x27;</span>, <span class="attr">children</span>:[</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">107</span>, <span class="attr">label</span>:<span class="string">&#x27;子项3&#x27;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">108</span>, <span class="attr">label</span>:<span class="string">&#x27;子项4&#x27;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">109</span>, <span class="attr">label</span>:<span class="string">&#x27;子项5&#x27;</span>&#125;</span><br><span class="line">        ]&#125;,</span><br><span class="line">        &#123;<span class="attr">value</span>:<span class="number">103</span>, <span class="attr">label</span>:<span class="string">&#x27;菜单3&#x27;</span>, <span class="attr">children</span>:[</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">110</span>, <span class="attr">label</span>:<span class="string">&#x27;子项6&#x27;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">111</span>, <span class="attr">label</span>:<span class="string">&#x27;子项7&#x27;</span>&#125;</span><br><span class="line">        ]&#125;,</span><br><span class="line">        &#123;<span class="attr">value</span>:<span class="number">104</span>, <span class="attr">label</span>:<span class="string">&#x27;菜单4&#x27;</span>&#125;</span><br><span class="line">    ]&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>下面的例子是将后端返回的一维数组【树化】</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;el-cascader :options=&quot;ops&quot;&gt;&lt;/el-cascader&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;../util/myaxios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    async mounted() &#123;</span><br><span class="line">        const resp = await axios.get(&#x27;/api/menu&#x27;)</span><br><span class="line">        console.log(resp.data.data)</span><br><span class="line">        const array = resp.data.data;</span><br><span class="line"></span><br><span class="line">        const map = new Map(); </span><br><span class="line"></span><br><span class="line">        // 1. 将所有数据存入 map 集合(为了接下来查找效率)</span><br><span class="line">        for(const &#123;id,name,pid&#125; of array) &#123;</span><br><span class="line">            map.set(id, &#123;value:id, label:name, pid:pid&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        // 2. 建立父子关系</span><br><span class="line">        // 3. 找到顶层对象</span><br><span class="line">        const top = [];</span><br><span class="line">        for(const obj of map.values()) &#123;</span><br><span class="line">            const parent = map.get(obj.pid);</span><br><span class="line">            if(parent !== undefined) &#123;</span><br><span class="line">                parent.children ??= [];</span><br><span class="line">                parent.children.push(obj);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                top.push(obj)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        this.ops = top;</span><br><span class="line">    &#125;,</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            ops: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="Vue-Router"><a href="#Vue-Router" class="headerlink" title="Vue-Router"></a>Vue-Router</h2><p>vue 属于单页面应用，所谓的路由，就是根据浏览器路径不同，用不同的<strong>视图组件</strong>替换这个页面内容展示</p><h3 id="配置路由"><a href="#配置路由" class="headerlink" title="配置路由"></a>配置路由</h3><p>新建一个路由 js 文件，例如 src/router/example.js，内容如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ContainerView</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/example/ContainerView.vue&#x27;</span>  <span class="comment">// @指的是src目录</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">LoginView</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/example/LoginView.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NotFoundView</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/example/NotFoundView.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">ContainerView</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">LoginView</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">NotFoundView</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><ul><li>本例中映射了 3 个路径与对应的视图组件</li></ul><p>在 main.js 中导入自定义的路由js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ev <span class="keyword">from</span> <span class="string">&#x27;./views/ExampleView.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/example&#x27;</span>  <span class="comment">// 修改这里</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Element</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//阻止vue启动生产消息</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Element</span>)</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(ev)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>根组件是 ExampleView.vue，内容为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;all&quot;&gt;</span><br><span class="line">        &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ul><li>其中 <code>&lt;router-view&gt;</code> 起到占位作用，改变路径后，该路径对应的视图组件就会占据 <code>&lt;router-view&gt;</code> 的位置，替换掉它之前的内容</li></ul><h3 id="动态导入"><a href="#动态导入" class="headerlink" title="动态导入"></a>动态导入</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/example/ContainerView.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/example/LoginView.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/example/NotFoundView.vue&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><ul><li>静态导入是将所有组件的 js 代码打包到一起，如果组件非常多，打包后的 js 文件会很大，影响页面加载速度</li><li>动态导入是将组件的 js 代码放入独立的文件，用到时才加载</li></ul><h3 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h3><p>组件内需要切换内容，就需要用到嵌套路由（子路由），下面的例子是在【ContainerView 组件】内定义了 3 个子路由</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/example/ContainerView.vue&#x27;</span>),</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/c/p1&#x27;</span>,  <span class="comment">// 访问/路径，重定向至/c/p1路径</span></span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123; </span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;c/p1&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/example/container/P1View.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; </span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;c/p2&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/example/container/P2View.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; </span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;c/p3&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/example/container/P3View.vue&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/example/LoginView.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/example/NotFoundView.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/404&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>子路由变化，切换的是【ContainerView 组件】中 <code>&lt;router-view&gt;&lt;/router-view&gt;</code> 部分的内容</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">        &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ul><li>redirect 可以用来重定向（跳转）到一个新的地址</li><li>path 的取值为<code>*</code>表示匹配不到其它 path 时，就会匹配它</li><li>添加<code>path:&#39;*&#39;</code>而不是修改<code>path:&#39;/404&#39;</code>为<code>path:&#39;*&#39;</code>，是为了浏览器地址栏的显示路径为404，而不是为原有路径</li></ul><h3 id="ElementUI布局"><a href="#ElementUI布局" class="headerlink" title="ElementUI布局"></a>ElementUI布局</h3><p>通常主页要做布局，下面的代码是 ElementUI 提供的【上-【左-右】】布局</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;el-container&gt;</span><br><span class="line">            &lt;el-header&gt;&lt;/el-header&gt;</span><br><span class="line">            &lt;el-container&gt;</span><br><span class="line">                &lt;el-aside width=&quot;200px&quot;&gt;&lt;/el-aside&gt;</span><br><span class="line">                &lt;el-main&gt;</span><br><span class="line">                    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">                &lt;/el-main&gt;</span><br><span class="line">            &lt;/el-container&gt;</span><br><span class="line">        &lt;/el-container&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="路由跳转"><a href="#路由跳转" class="headerlink" title="路由跳转"></a>路由跳转</h3><h4 id="标签式"><a href="#标签式" class="headerlink" title="标签式"></a>标签式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-aside width=&quot;200px&quot;&gt;</span><br><span class="line">    &lt;router-link to=&quot;/c1/p1&quot;&gt;P1&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link to=&quot;/c1/p2&quot;&gt;P2&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link to=&quot;/c1/p3&quot;&gt;P3&lt;/router-link&gt;</span><br><span class="line">&lt;/el-aside&gt;</span><br></pre></td></tr></table></figure><h4 id="编程式"><a href="#编程式" class="headerlink" title="编程式"></a>编程式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-header&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; icon=&quot;el-icon-edit&quot; </span><br><span class="line">               circle size=&quot;mini&quot; @click=&quot;jump(&#x27;/c1/p1&#x27;)&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;success&quot; icon=&quot;el-icon-check&quot; </span><br><span class="line">               circle size=&quot;mini&quot; @click=&quot;jump(&#x27;/c1/p2&#x27;)&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;warning&quot; icon=&quot;el-icon-star-off&quot; </span><br><span class="line">               circle size=&quot;mini&quot; @click=&quot;jump(&#x27;/c1/p3&#x27;)&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">&lt;/el-header&gt;</span><br></pre></td></tr></table></figure><p>jump 方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    methods : &#123;</span><br><span class="line">        jump(url) &#123;</span><br><span class="line">            this.$router.push(url);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>其中 this.$router 是拿到路由对象</li><li>push 方法根据 url 进行跳转</li></ul><h4 id="导航菜单"><a href="#导航菜单" class="headerlink" title="导航菜单"></a>导航菜单</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-menu router background-color=&quot;#545c64&quot; text-color=&quot;#fff&quot; active-text-color=&quot;#ffd04b&quot;&gt;</span><br><span class="line">    &lt;el-submenu index=&quot;/c1&quot;&gt;</span><br><span class="line">        &lt;span slot=&quot;title&quot;&gt;</span><br><span class="line">            &lt;i class=&quot;el-icon-platform-eleme&quot;&gt;&lt;/i&gt;</span><br><span class="line">            菜单1</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">        &lt;el-menu-item index=&quot;/c1/p1&quot;&gt;子项1&lt;/el-menu-item&gt;</span><br><span class="line">        &lt;el-menu-item index=&quot;/c1/p2&quot;&gt;子项2&lt;/el-menu-item&gt;</span><br><span class="line">        &lt;el-menu-item index=&quot;/c1/p3&quot;&gt;子项3&lt;/el-menu-item&gt;</span><br><span class="line">    &lt;/el-submenu&gt;</span><br><span class="line">    &lt;el-menu-item index=&quot;/c2&quot;&gt;</span><br><span class="line">        &lt;span slot=&quot;title&quot;&gt;</span><br><span class="line">            &lt;i class=&quot;el-icon-phone&quot;&gt;&lt;/i&gt;</span><br><span class="line">            菜单2</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">    &lt;/el-menu-item&gt;</span><br><span class="line">    &lt;el-menu-item index=&quot;/c3&quot;&gt;</span><br><span class="line">        &lt;span slot=&quot;title&quot;&gt;</span><br><span class="line">            &lt;i class=&quot;el-icon-star-on&quot;&gt;&lt;/i&gt;</span><br><span class="line">            菜单3</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">    &lt;/el-menu-item&gt;</span><br><span class="line">&lt;/el-menu&gt;</span><br></pre></td></tr></table></figure><ul><li>图标和菜单项文字建议用 <code>&lt;span slot=&#39;title&#39;&gt;&lt;/span&gt;</code> 包裹起来</li><li><code>el-menu</code> 标签上加上 <code>router</code> 属性，表示结合导航菜单与路由对象，此时，就可以利用菜单项的 <code>index</code> 属性来路由跳转</li></ul><h3 id="动态路由与菜单"><a href="#动态路由与菜单" class="headerlink" title="动态路由与菜单"></a>动态路由与菜单</h3><p>不同的用户查询的的菜单、路由信息是不一样的</p><p>例如：访问 <code>/api/menu/admin</code> 返回所有的数据</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">102</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;菜单2&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;el-icon-delete-solid&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/m2&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;component&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">107</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;子项3&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;el-icon-s-marketing&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/m2/c3&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="number">102</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;component&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C3View.vue&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p>访问 <code>/api/menu/wang</code> 返回</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">103</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;菜单3&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;el-icon-s-tools&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/m3&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;component&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">110</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;子项6&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;el-icon-upload&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/m3/c6&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="number">103</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;component&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C6View.vue&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p>前端根据用户身份不同，动态添加路由和显示菜单</p><h4 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h4><p>设置父路由名称</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/example/ContainerView.vue&#x27;</span>),</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/c/p1&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123; </span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;c/p1&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/example/container/P1View.vue&#x27;</span>)</span><br><span class="line">      &#125;,...</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>设置路由方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">addServerRoutes</span>(<span class="params">array</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="title function_">getRouters</span>());</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> &#123; id, path, component &#125; <span class="keyword">of</span> array) &#123;</span><br><span class="line">        <span class="keyword">if</span> (component !== <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 动态添加路由</span></span><br><span class="line">            <span class="comment">// 参数1：父路由名称</span></span><br><span class="line">            <span class="comment">// 参数2：路由信息对象</span></span><br><span class="line">            router.<span class="title function_">addRoute</span>(<span class="string">&#x27;c&#x27;</span>, &#123;</span><br><span class="line">                <span class="attr">path</span>: path,</span><br><span class="line">                <span class="attr">name</span>: id,</span><br><span class="line">                <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">`@/views/example/container/<span class="subst">$&#123;component&#125;</span>`</span>)</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>js 这边只保留几个固定路由，如主页、404 和 login</li><li>以上方法执行时，将服务器返回的路由信息加入到名为<code>c</code>的父路由中去</li><li>这里要注意组件路径，前面 @/views 是必须在 js 这边完成拼接的，否则 import 函数会失效</li></ul><h4 id="重置路由"><a href="#重置路由" class="headerlink" title="重置路由"></a>重置路由</h4><p>在用户注销时应当重置路由</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">resetRouter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  router.<span class="property">matcher</span> = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123; routes &#125;).<span class="property">matcher</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="页面刷新"><a href="#页面刷新" class="headerlink" title="页面刷新"></a>页面刷新</h4><p>页面刷新后，会导致动态添加的路由失效，解决方法是将路由数据存入 sessionStorage</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;@/util/myaxios&#x27;</span><br><span class="line">import &#123;resetRouter, addServerRoutes&#125; from &#x27;@/router/example&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            username: &#x27;admin&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        async login() &#123;       </span><br><span class="line">            resetRouter(); // 重置路由     </span><br><span class="line">            const resp = await axios.get(`/api/menu/$&#123;this.username&#125;`)</span><br><span class="line">            const array = resp.data.data;</span><br><span class="line">            // localStorage     即使浏览器关闭，存储的数据仍在</span><br><span class="line">            // sessionStorage   以标签页为单位，关闭标签页时，数据被清除</span><br><span class="line">            sessionStorage.setItem(&#x27;serverRoutes&#x27;, JSON.stringify(array))</span><br><span class="line">            addServerRoutes(array); // 动态添加路由</span><br><span class="line">            this.$router.push(&#x27;/&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>页面刷新，重新创建路由对象时，从 sessionStorage 里恢复路由数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 从 sessionStorage 中恢复路由数据</span></span><br><span class="line"><span class="keyword">const</span> serverRoutes = sessionStorage.<span class="title function_">getItem</span>(<span class="string">&#x27;serverRoutes&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span>(serverRoutes) &#123;</span><br><span class="line">    <span class="keyword">const</span> array = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(serverRoutes);</span><br><span class="line">    <span class="title function_">addServerRoutes</span>(array) <span class="comment">// 动态添加路由</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="动态菜单"><a href="#动态菜单" class="headerlink" title="动态菜单"></a>动态菜单</h4><p>代码部分</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        const serverRoutes = sessionStorage.getItem(&#x27;serverRoutes&#x27;);</span><br><span class="line">        const array = JSON.parse(serverRoutes);</span><br><span class="line">        const map = new Map();</span><br><span class="line">        for(const obj of array) &#123;</span><br><span class="line">            map.set(obj.id, obj);</span><br><span class="line">        &#125;</span><br><span class="line">        const top = [];</span><br><span class="line">        for(const obj of array) &#123;</span><br><span class="line">            const parent = map.get(obj.pid);</span><br><span class="line">            if(parent) &#123;</span><br><span class="line">                parent.children ??= [];</span><br><span class="line">                parent.children.push(obj);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                top.push(obj);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        this.top = top;</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            top: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>菜单部分</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-menu router background-color=&quot;#545c64&quot; text-color=&quot;#fff&quot; active-text-color=&quot;#ffd04b&quot; :unique-opened=&quot;true&quot;&gt;</span><br><span class="line">    &lt;template v-for=&quot;m1 of top&quot;&gt;</span><br><span class="line">&lt;el-submenu v-if=&quot;m1.children&quot; :key=&quot;m1.id&quot; :index=&quot;m1.path&quot;&gt;</span><br><span class="line">    &lt;span slot=&quot;title&quot;&gt;</span><br><span class="line">        &lt;i :class=&quot;m1.icon&quot;&gt;&lt;/i&gt; &#123;&#123;m1.name&#125;&#125;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">    &lt;el-menu-item v-for=&quot;m2 of m1.children&quot; :key=&quot;m2.id&quot; :index=&quot;m2.path&quot;&gt;</span><br><span class="line">        &lt;span slot=&quot;title&quot;&gt;</span><br><span class="line">            &lt;i :class=&quot;m2.icon&quot;&gt;&lt;/i&gt; &#123;&#123;m2.name&#125;&#125;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">        &lt;/el-menu-item&gt;</span><br><span class="line">        &lt;/el-submenu&gt;</span><br><span class="line">&lt;el-menu-item v-else :key=&quot;m1.id&quot; :index=&quot;m1.path&quot;&gt;</span><br><span class="line">    &lt;span slot=&quot;title&quot;&gt;</span><br><span class="line">        &lt;i :class=&quot;m1.icon&quot;&gt;&lt;/i&gt; &#123;&#123;m1.name&#125;&#125;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">        &lt;/el-menu-item&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-menu&gt;</span><br></pre></td></tr></table></figure><h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><h3 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h3><p>vuex 可以在多个组件之间共享数据，并且共享的数据是【响应式】的，即数据的变更能及时渲染到模板</p><p>与之对比 localStorage 与 sessionStorage 也能共享数据，但缺点是数据并非【响应式】</p><p>首先需要定义 state 与 mutations ，一个用来读取共享数据，一个用来修改共享数据</p><p>src/store/index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  读取数据，走 state, getters</span></span><br><span class="line"><span class="comment">  修改数据，走 mutations, actions</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">updateName</span>(<span class="params">state, name</span>) &#123;</span><br><span class="line">      state.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>修改共享数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;p&quot;&gt;</span><br><span class="line">        &lt;el-input placeholder=&quot;请修改用户姓名&quot; </span><br><span class="line">            size=&quot;mini&quot; v-model=&quot;name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; size=&quot;mini&quot; @click=&quot;update()&quot;&gt;修改&lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const options = &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        update()&#123;</span><br><span class="line">            this.$store.commit(&#x27;updateName&#x27;, this.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    data () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            name:&#x27;&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>mutations 方法不能直接调用，只能通过 <code>store.commit(mutation方法名, 参数)</code> 来间接调用</li></ul><p>读取共享数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;el-container&gt;</span><br><span class="line">            &lt;el-header&gt;</span><br><span class="line">                &lt;div class=&quot;t&quot;&gt;</span><br><span class="line">                    欢迎您：&#123;&#123; $store.state.name &#125;&#125;, &#123;&#123; $store.state.age &#125;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">            &lt;/el-header&gt;</span><br><span class="line">            &lt;el-container&gt;</span><br><span class="line">                &lt;el-aside width=&quot;200px&quot;&gt;</span><br><span class="line">                &lt;/el-aside&gt;</span><br><span class="line">                &lt;el-main&gt;</span><br><span class="line">                    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">                &lt;/el-main&gt;</span><br><span class="line">            &lt;/el-container&gt;</span><br><span class="line">        &lt;/el-container&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="mapState"><a href="#mapState" class="headerlink" title="mapState"></a>mapState</h3><p>每次去写 <code>$store.state.name</code> 这样的代码显得非常繁琐，可以用 vuex 生成计算属性</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;el-container&gt;</span><br><span class="line">            &lt;el-header&gt;</span><br><span class="line">                &lt;div class=&quot;t&quot;&gt;欢迎您：&#123;&#123; name &#125;&#125;, &#123;&#123; age &#125;&#125;&lt;/div&gt;</span><br><span class="line">            &lt;/el-header&gt;</span><br><span class="line">            &lt;el-container&gt;</span><br><span class="line">                &lt;el-aside width=&quot;200px&quot;&gt;</span><br><span class="line">                &lt;/el-aside&gt;</span><br><span class="line">                &lt;el-main&gt;</span><br><span class="line">                    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">                &lt;/el-main&gt;</span><br><span class="line">            &lt;/el-container&gt;</span><br><span class="line">        &lt;/el-container&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState &#125; from &#x27;vuex&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    computed: &#123;</span><br><span class="line">        //name() &#123;return this.$store.state.name&#125; &#125;,</span><br><span class="line">        //age() &#123;return this.$store.state.name&#125; &#125;,</span><br><span class="line">        ...mapState([&#x27;name&#x27;, &#x27;age&#x27;])</span><br><span class="line">    &#125;</span><br><span class="line">    //computed: mapState([&#x27;name&#x27;, &#x27;age&#x27;]) //同理</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>mapState 返回的是一个对象，对象内包含了 name() 和 age() 的这两个方法作为计算属性</li><li>此对象配合 <code>...</code> 展开运算符，填充入 computed 即可使用</li></ul><h3 id="mapMutations"><a href="#mapMutations" class="headerlink" title="mapMutations"></a>mapMutations</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;p&quot;&gt;</span><br><span class="line">        &lt;el-input placeholder=&quot;请修改用户姓名&quot; </span><br><span class="line">            size=&quot;mini&quot; v-model=&quot;name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; size=&quot;mini&quot; @click=&quot;updateName(name)&quot;&gt;修改&lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;mapMutations&#125; from &#x27;vuex&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        ...mapMutations([&#x27;updateName&#x27;])</span><br><span class="line">    &#125;,</span><br><span class="line">    data () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            name:&#x27;&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>类似的，调用mutation修改共享数据也可以简化</li><li>mapMutations返回的对象中包含的方法，就会调用<code>store.commit()</code>来执行mutation方法</li><li>注意参数传递略有不同</li></ul><h3 id="actions"><a href="#actions" class="headerlink" title="actions"></a>actions</h3><p>mutations方法内不能包括修改不能立刻生效的代码，否则会造成Vuex调试工具工作不准确，必须把这些代码写在actions方法中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  读取数据，走 state, getters</span></span><br><span class="line"><span class="comment">  修改数据，走 mutations, actions</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;@/util/myaxios&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">updateName</span>(<span class="params">state, name</span>) &#123;</span><br><span class="line">      state.<span class="property">name</span> = name;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 错误的用法，如果在mutations方法中包含了异步操作，会造成开发工具不准确</span></span><br><span class="line">    <span class="comment">/* async updateServerName(state) &#123;</span></span><br><span class="line"><span class="comment">      const resp = await axios.get(&#x27;/api/user&#x27;);</span></span><br><span class="line"><span class="comment">      const &#123;name, age&#125; = resp.data.data;</span></span><br><span class="line"><span class="comment">      state.name = name;</span></span><br><span class="line"><span class="comment">      state.age = age;</span></span><br><span class="line"><span class="comment">    &#125; */</span></span><br><span class="line">    <span class="title function_">updateServerName</span>(<span class="params">state, user</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; name, age &#125; = user;</span><br><span class="line">      state.<span class="property">name</span> = name;</span><br><span class="line">      state.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">updateServerName</span>(<span class="params">context</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;/api/user&#x27;</span>);</span><br><span class="line">      context.<span class="title function_">commit</span>(<span class="string">&#x27;updateServerName&#x27;</span>, resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>首先应当调用actions的updateServerName获取数据</li><li>然后再由它间接调用mutations的updateServerName更新共享数据</li></ul><p>页面使用actions的方法代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;p&quot;&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; size=&quot;mini&quot;</span><br><span class="line">            @click=&quot;updateServerName()&quot;&gt;从服务器获取数据,存入store&lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapActions &#125; from &#x27;vuex&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        ...mapActions([&#x27;updateServerName&#x27;])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li><p>mapActions会生成调用actions中方法的代码</p></li><li><p>调用actions的代码内部等价于<code>this.$store.dispatch(&#39;action名称&#39;, 参数)</code>，它返回的是Promise对象，可以用同步或异步方式接收结果</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> web框架 </tag>
            
            <tag> Vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>web基础篇</title>
      <link href="/2023/01/01/5459.html"/>
      <url>/2023/01/01/5459.html</url>
      
        <content type="html"><![CDATA[<h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><p>HTML 即 HyperText Markup language 超文本标记语言，HTML 的作用是定义网页的内容和结构。</p><ul><li>HyperText 是指用超链接的方式组织网页，把网页联系起来</li><li>Markup 是指用 <code>&lt;标签&gt;</code> 的方式赋予内容不同的功能和含义</li></ul><h2 id="HTML-元素"><a href="#HTML-元素" class="headerlink" title="HTML 元素"></a>HTML 元素</h2><p>HTML 由一系列元素 <code>elements</code> 组成，例如</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>整体称之为元素</li><li><code>&lt;p&gt;</code> 和 <code>&lt;/p&gt;</code> 分别称为起始和结束标签</li><li>标签包围起来的 Hello, world 称之为内容</li><li><code>p</code>是预先定义好的 html 标签，作用是将内容作为一个单独的段落</li></ul><p>元素还可以有属性，如</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>属性一般是预先定义好的，这里的 id 属性是给元素一个唯一的标识</li></ul><p>元素之间可以嵌套，如</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>HTML 是一门非常<span class="tag">&lt;<span class="name">b</span>&gt;</span>强大<span class="tag">&lt;/<span class="name">b</span>&gt;</span>的语言<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>错误嵌套写法：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>HTML 是一门非常<span class="tag">&lt;<span class="name">b</span>&gt;</span>强大的语言<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br></pre></td></tr></table></figure><p>不包含内容的元素称之为空元素，如</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.png&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.png&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><ul><li>img 作用是用来展示图片</li><li>src 属性用来指明图片路径</li></ul><h2 id="HTML-页面"><a href="#HTML-页面" class="headerlink" title="HTML 页面"></a>HTML 页面</h2><p>单独的 HTML 元素，可以充当一份完整的 HTML 页面的组成部分</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>测试页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 注释内容 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.png&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>html</code> 元素囊括了页面中所有其它元素，整个页面只需一个，称为根元素</li><li><code>head</code> 元素包含的是那些不用于展现内容的元素，如 <code>title</code>，<code>link</code>，<code>meta</code> 等</li><li><code>body</code> 元素包含了对用户展现内容的元素，如用于展示文本、图片、视频、音频的各种元素</li></ul><h2 id="常见元素"><a href="#常见元素" class="headerlink" title="常见元素"></a>常见元素</h2><h3 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h3><h4 id="Heading"><a href="#Heading" class="headerlink" title="Heading"></a>Heading</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>1号标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>2号标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>3号标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>4号标题<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>5号标题<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span>6号标题<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Paragraph"><a href="#Paragraph" class="headerlink" title="Paragraph"></a>Paragraph</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="List"><a href="#List" class="headerlink" title="List"></a>List</h4><p>无序列表 unordered list</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>有序列表 ordered list</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure><p>多级列表</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    北京市</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>海淀区<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    河北省</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>石家庄<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Anchor"><a href="#Anchor" class="headerlink" title="Anchor"></a>Anchor</h4><p>锚，超链接</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;网页地址&quot;</span>&gt;</span>超链接文本<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="多媒体"><a href="#多媒体" class="headerlink" title="多媒体"></a>多媒体</h3><h4 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;文件路径&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>src 格式有 3 种</p><ul><li>文件地址<ul><li>data URL，格式如<code>data:媒体类型;base64,数据</code>，例如png格式图片：<code>data:image/png;base64,XXXXX(数据)</code></li></ul></li><li>object URL，需要配合 javascript 使用</li></ul><h4 id="Video"><a href="#Video" class="headerlink" title="Video"></a>Video</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;文件路径&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Audio"><a href="#Audio" class="headerlink" title="Audio"></a>Audio</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;文件路径&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h3><h4 id="作用与语法"><a href="#作用与语法" class="headerlink" title="作用与语法"></a>作用与语法</h4><p>表单的作用是收集用户填入的数据，并将这些数据提交给服务器</p><p>表单的语法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;服务器地址&quot;</span> <span class="attr">method</span>=<span class="string">&quot;请求方式&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;数据格式&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 表单项 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交按钮&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>method 请求方式有 <ul><li>get （默认）提交时，数据跟在 URL 地址之后</li><li>post 提交时，数据在请求体内</li></ul></li><li>enctype 在 post 请求时，指定请求体的数据格式<ul><li>application/x-www-form-urlencoded（默认）</li><li>multipart/form-data（用于文件上传）</li></ul></li><li>其中表单项提供多种收集数据的方式<ul><li>有 name 属性的表单项数据，才会被发送给服务器</li></ul></li></ul><h4 id="常见的表单项"><a href="#常见的表单项" class="headerlink" title="常见的表单项"></a>常见的表单项</h4><h5 id="文本框"><a href="#文本框" class="headerlink" title="文本框"></a>文本框</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;uesrname&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="密码框"><a href="#密码框" class="headerlink" title="密码框"></a>密码框</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="隐藏框"><a href="#隐藏框" class="headerlink" title="隐藏框"></a>隐藏框</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="日期框"><a href="#日期框" class="headerlink" title="日期框"></a>日期框</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;date&quot;</span> <span class="attr">name</span>=<span class="string">&quot;birthday&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="单选"><a href="#单选" class="headerlink" title="单选"></a>单选</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="多选"><a href="#多选" class="headerlink" title="多选"></a>多选</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fav&quot;</span> <span class="attr">value</span>=<span class="string">&quot;唱歌&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fav&quot;</span> <span class="attr">value</span>=<span class="string">&quot;逛街&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fav&quot;</span> <span class="attr">value</span>=<span class="string">&quot;游戏&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;avatar&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="HTTP-请求"><a href="#HTTP-请求" class="headerlink" title="HTTP 请求"></a>HTTP 请求</h2><h3 id="请求组成"><a href="#请求组成" class="headerlink" title="请求组成"></a>请求组成</h3><p>请求由三部分组成</p><ol><li>请求行</li><li>请求头</li><li>请求体</li></ol><h3 id="请求方式与数据格式"><a href="#请求方式与数据格式" class="headerlink" title="请求方式与数据格式"></a>请求方式与数据格式</h3><h4 id="get-请求示例"><a href="#get-请求示例" class="headerlink" title="get 请求示例"></a>get 请求示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /test2?name=%E6%B5%8B%E8%AF%95&amp;age=20 HTTP/1.1</span><br><span class="line">Host: localhost</span><br></pre></td></tr></table></figure><ul><li><code>%E6%B5%8B%E8%AF%95</code> 是<code>测试</code>经过 URL 编码后的结果</li></ul><h4 id="post-请求示例"><a href="#post-请求示例" class="headerlink" title="post 请求示例"></a>post 请求示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST /test2 HTTP/1.1</span><br><span class="line">Host: localhost</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Content-Length: 30</span><br><span class="line"></span><br><span class="line">name=%E6%B5%8B%E8%AF%95&amp;age=18</span><br></pre></td></tr></table></figure><p>application/x-www-form-urlencoed 格式细节：</p><ul><li>参数分成名字和值，中间用 = 分隔</li><li>多个参数使用 &amp; 进行分隔</li><li><code>测试</code>等特殊字符需要用<code>encodeURIComponent()</code>编码为<code>%E6%B5%8B%E8%AF%95</code> 后才能发送（可在浏览器开发者模式中的控制台输入js语法演示）</li></ul><h4 id="json-请求示例"><a href="#json-请求示例" class="headerlink" title="json 请求示例"></a>json 请求示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST /test3 HTTP/1.1</span><br><span class="line">Host: localhost</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Content-Length: 25</span><br><span class="line"></span><br><span class="line">&#123;&quot;name&quot;:&quot;zhang&quot;,&quot;age&quot;:18&#125;</span><br></pre></td></tr></table></figure><p>json 对象格式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;属性名&quot;:属性值&#125;</span><br></pre></td></tr></table></figure><p>其中属性值可以是</p><ul><li>字符串 “”</li><li>数字</li><li>true, false</li><li>null</li><li>对象</li><li>数组</li></ul><p>json 数组格式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[元素1, 元素2, ...]</span><br></pre></td></tr></table></figure><h4 id="multipart-请求示例"><a href="#multipart-请求示例" class="headerlink" title="multipart 请求示例"></a>multipart 请求示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">POST /test2 HTTP/1.1</span><br><span class="line">Host: localhost</span><br><span class="line">Content-Type: multipart/form-data; boundary=123</span><br><span class="line">Content-Length: 125</span><br><span class="line"></span><br><span class="line">--123</span><br><span class="line">Content-Disposition: form-data; name=&quot;name&quot;</span><br><span class="line"></span><br><span class="line">lisi</span><br><span class="line">--123</span><br><span class="line">Content-Disposition: form-data; name=&quot;age&quot;</span><br><span class="line"></span><br><span class="line">30</span><br><span class="line">--123--</span><br></pre></td></tr></table></figure><ul><li>boundary=123 用来定义分隔符</li><li>起始分隔符是 <code>--分隔符</code></li><li>结束分隔符是 <code>--分隔符--</code></li></ul><h4 id="数据格式小结"><a href="#数据格式小结" class="headerlink" title="数据格式小结"></a>数据格式小结</h4><p>客户端发送</p><ul><li>编码 <ul><li>application/x-www-form-urlencoded ：url 编码</li><li>application/json：utf-8 编码</li><li>multipart/form-data：每部分编码可以不同</li></ul></li><li>表单只支持以 application/x-www-form-urlencoded 和 multipart/form-data 格式发送数据</li><li>文件上传需要用 multipart/form-data 格式</li><li>js 代码可以支持任意格式发送数据 </li></ul><p>服务端接收</p><ul><li>对 application/x-www-form-urlencoded 和 multipart/form-data 格式的数据，Spring 接收方式是统一的，只需要用 java bean 的属性名对应请求参数名即可</li><li>对于 applicaiton/json 格式的数据，Spring 接收需要使用 @RequestBody 注解 + java bean 的方式</li></ul><h3 id="session-原理"><a href="#session-原理" class="headerlink" title="session 原理"></a>session 原理</h3><p>Http 无状态，有会话</p><ul><li>无状态是指，请求之间相互独立，第一次请求的数据，第二次请求不能重用</li><li>有会话是指，客户端和服务端都有相应的技术，可以暂存数据，让数据在请求间共享</li></ul><p>服务端使用了 session 技术来暂存数据</p><p>存</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /s1?name=zhang HTTP/1.1</span><br><span class="line">Host: localhost</span><br></pre></td></tr></table></figure><p>取</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET /s2 HTTP/1.1</span><br><span class="line">Host: localhost</span><br><span class="line">Cookie: JSESSIONID=560FA845D02AE09B176E1BC5D9816A5D</span><br></pre></td></tr></table></figure><p>session 技术实现身份验证</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant Client</span><br><span class="line">participant L as LoginController</span><br><span class="line">participant i as LoginInterceptor</span><br><span class="line">participant Session</span><br><span class="line">rect rgb(200, 223, 255)</span><br><span class="line">Client -&gt;&gt; +L : 登录请求</span><br><span class="line">L -&gt;&gt; L : 检查用户名，密码，验证通过</span><br><span class="line">L -&gt;&gt; +Session : 存入用户名</span><br><span class="line">Session --&gt;&gt; -L: </span><br><span class="line">L --&gt;&gt; -Client: 登录成功</span><br><span class="line">end</span><br><span class="line">rect rgb(200, 190, 255)</span><br><span class="line">Client -&gt;&gt; +i : 其它请求</span><br><span class="line">i -&gt;&gt; +Session : 获取用户名</span><br><span class="line">Session --&gt;&gt; -i : </span><br><span class="line">i -&gt;&gt; i: 用户名存在，放行</span><br><span class="line">i --&gt;&gt; -Client : </span><br><span class="line">end</span><br></pre></td></tr></table></figure><h3 id="jwt-原理"><a href="#jwt-原理" class="headerlink" title="jwt 原理"></a>jwt 原理</h3><p>jwt 技术实现身份验证</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant Client</span><br><span class="line">participant L as LoginController</span><br><span class="line">participant i as LoginInterceptor</span><br><span class="line"></span><br><span class="line">rect rgb(200, 223, 255)</span><br><span class="line">Client -&gt;&gt; +L : 登录请求</span><br><span class="line">L -&gt;&gt; L : 检查用户名，密码，验证通过</span><br><span class="line">L --&gt;&gt; -Client : 登录成功，返回token</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">rect rgb(150, 190, 155)</span><br><span class="line">Client -&gt;&gt; +i : 其它请求，携带token</span><br><span class="line">i -&gt;&gt; i : 校验token，校验无误，放行</span><br><span class="line">i --&gt;&gt; -Client : </span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>生成 token</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /j1?name=zhang&amp;pass=123 HTTP/1.1</span><br><span class="line">Host: localhost</span><br></pre></td></tr></table></figure><p>校验 token</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET /j2 HTTP/1.1</span><br><span class="line">Host: localhost</span><br><span class="line">Authorization: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiJ9._1-P_TLlzQPb1_lCyGwplMZaKQ8Mcw_plBbYPZ3OX28</span><br></pre></td></tr></table></figure><hr><h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><p>CSS 即 Cascading  Style  Sheets 级联（层叠）样式表，它描述了网页的表现与展示效果。</p><p>css代码位置：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">       <span class="comment">/*CSS样式*/</span></span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure><p>在<code>head</code>标签内引入css样式</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">herf</span>=<span class="string">&quot;1.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><ul><li>type 选择器 - 根据标签名进行匹配（元素选择器）</li><li>class 选择器 - 根据元素的 class 属性进行匹配</li><li>id 选择器  - 根据元素的 id 属性进行匹配</li></ul><h2 id="属性和值"><a href="#属性和值" class="headerlink" title="属性和值"></a>属性和值</h2><ul><li>background-color : red;</li><li>display</li></ul><h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><p>与布局相关的 html 元素</p><ul><li>div</li><li>template</li></ul><hr><h1 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h1><p>一种脚本语言，可以用来更改页面内容，控制多媒体，制作图像、动画等</p><p>js 代码位置</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// js代码一般放在底部，不影响加载顺序，不会影响浏览器渲染。</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>引入 js 脚本</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js脚本路径&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>框架之中，引入方式会有所不同</li></ul><h2 id="变量与数据类型"><a href="#变量与数据类型" class="headerlink" title="变量与数据类型"></a>变量与数据类型</h2><h3 id="声明变量"><a href="#声明变量" class="headerlink" title="声明变量"></a>声明变量</h3><h4 id="let"><a href="#let" class="headerlink" title="let"></a>let</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> 变量名 = 值;</span><br></pre></td></tr></table></figure><ul><li>let 声明的变量可以被多次赋值，例如</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">100</span>;  <span class="comment">// 初始值是 100</span></span><br><span class="line">a = <span class="number">200</span>;  <span class="comment">// ok, 被重新赋值为 200</span></span><br></pre></td></tr></table></figure><h4 id="const"><a href="#const" class="headerlink" title="const"></a>const</h4><ul><li>const 修饰的叫常量，只能赋值一次</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> b = <span class="number">300</span>; <span class="comment">// 初始值是 300</span></span><br><span class="line">b = <span class="number">400</span>;   <span class="comment">// error, 不能再次赋值</span></span><br></pre></td></tr></table></figure><ul><li>const 并不意味着它引用的内容不可修改，例如</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> c = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">c[<span class="number">2</span>] = <span class="number">4</span>;         <span class="comment">// ok, 数组内容被修改成 [1,2,4]</span></span><br><span class="line">c = [<span class="number">5</span>,<span class="number">6</span>];<span class="comment">// error, 不能再次赋值</span></span><br></pre></td></tr></table></figure><h4 id="var"><a href="#var" class="headerlink" title="var"></a>var</h4><p>var 声明的变量可以被多次赋值，例如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="number">100</span>;</span><br><span class="line">f = <span class="number">200</span>;</span><br></pre></td></tr></table></figure><h3 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h3><h4 id="undefined-和-null"><a href="#undefined-和-null" class="headerlink" title="undefined 和 null"></a>undefined 和 null</h4><ul><li>执行表达式或函数，没有返回结果，出现 undefined</li><li>访问数组不存在的元素，访问对象不存在的属性，出现 undefined</li><li>定义变量，没有初始化，出现 undefined</li></ul><p>例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);  <span class="comment">// 函数没有返回值, 结果是  undefined</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">10</span>; <span class="comment">// 表达式没有返回值, 结果是 undefined</span></span><br><span class="line"><span class="keyword">let</span> b = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b[<span class="number">10</span>]); <span class="comment">// 数组未定义元素是 undefined</span></span><br><span class="line"><span class="keyword">let</span> c = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;张三&quot;</span>&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="property">age</span>); <span class="comment">// 对象未定义属性是 undefined</span></span><br><span class="line"><span class="keyword">let</span> d;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(d);<span class="comment">// 变量未初始化是 undefined</span></span><br></pre></td></tr></table></figure><p>二者共同点</p><ul><li>都没有属性、方法</li><li>二者合称 Nullish</li></ul><p>二者区别</p><ul><li>undefined 由 js 产生</li><li>null 由程序员提供</li></ul><h4 id="string"><a href="#string" class="headerlink" title="string"></a>string</h4><p>js 字符串三种写法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&quot;hello&quot;</span>;  <span class="comment">// 双引号</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="string">&quot;world&quot;</span>;  <span class="comment">// 单引号</span></span><br><span class="line"><span class="keyword">let</span> c = <span class="string">`hello`</span>;  <span class="comment">// 反引号</span></span><br></pre></td></tr></table></figure><p>用 java 和 js 中的字符串表示如下html代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;1.html&quot;</span>&gt;</span>超链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>java 显得比较繁琐</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;&lt;a href=\&quot;1.html\&quot;&gt;超链接&lt;/a&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//jdk15正式引入的Text Blocks文本块</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;1.html&quot;&gt;超链接&lt;/a&gt;&quot;&quot;&quot;</span>;</span><br></pre></td></tr></table></figure><p>js 显得比较灵活</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s1 = <span class="string">&#x27;&lt;a href=&quot;1.html&quot;&gt;超链接&lt;/a&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s2 = <span class="string">`&lt;a href=&quot;1.html&quot;&gt;超链接&lt;/a&gt;`</span>;</span><br></pre></td></tr></table></figure><p>模板字符串（Template strings）</p><p>需求：拼接 URI 的请求参数，如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/test?name=zhang&amp;age=18</span><br><span class="line">/test?name=li&amp;age=20</span><br></pre></td></tr></table></figure><p>传统方法拼接</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = ; <span class="comment">// zhang li ...</span></span><br><span class="line"><span class="keyword">let</span> age = ; <span class="comment">// 18 20 ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> uri = <span class="string">&quot;/test?name=&quot;</span> + name + <span class="string">&quot;&amp;age=&quot;</span> + age;</span><br></pre></td></tr></table></figure><p>模板字符串方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = ; <span class="comment">// zhang li ...</span></span><br><span class="line"><span class="keyword">let</span> age = ; <span class="comment">// 18 20 ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> uri = <span class="string">`/test?name=<span class="subst">$&#123;name&#125;</span>&amp;age=<span class="subst">$&#123;age&#125;</span>`</span>;</span><br></pre></td></tr></table></figure><h4 id="number-和-bigint"><a href="#number-和-bigint" class="headerlink" title="number 和 bigint"></a>number 和 bigint</h4><p>number 类型标识的是双精度浮动小数，例如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span> / <span class="number">3</span>;   <span class="comment">// 结果 3.3333333333333335</span></span><br></pre></td></tr></table></figure><p>既然是浮点小数，那么可以除零</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span> / <span class="number">0</span>;  <span class="comment">// 结果 Infinity 正无穷大</span></span><br><span class="line">-<span class="number">10</span> / <span class="number">0</span>;  <span class="comment">// 结果 -Infinity 负无穷大</span></span><br></pre></td></tr></table></figure><p>浮点小数都有运算精度问题，例如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.0</span> - <span class="number">1.1</span>; <span class="comment">// 结果 0.8999999999999999</span></span><br></pre></td></tr></table></figure><p>字符串转数字</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;10&quot;</span>); <span class="comment">// 结果是数字 10 </span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;10.5&quot;</span>);<span class="comment">// 结果是数字 10, 去除了小数部分</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;10&quot;</span>) / <span class="number">3</span>; <span class="comment">// 结果仍视为 number 浮点数, 因此结果为 3.3333333333333335</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;abc&quot;</span>);<span class="comment">// 转换失败，结果是特殊值 NaN (Not a Number)</span></span><br></pre></td></tr></table></figure><p>要表示真正的整数，需要用 bigint，数字的结尾用 n 表示它是一个 bigint 类型</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10n</span> / <span class="number">3n</span>;<span class="comment">// 结果 3n, 按整数除法处理</span></span><br></pre></td></tr></table></figure><h4 id="boolean"><a href="#boolean" class="headerlink" title="boolean"></a>boolean</h4><ul><li>Truthy</li><li>Falsy</li></ul><p>在 js 中，并不是 boolean 才能用于条件判断，可以在 if 语句中使用【数字】、【字符串】… 作为判断条件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(b) &#123; <span class="comment">// true</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;进入了&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这时就有一个规则，当需要条件判断时，这个值被当作 true 还是 false，当作 true 的值归类为 truthy，当作 false 的值归类为 falsy</p><p>下面值都是 falsy</p><ul><li><code>false</code></li><li><code>Nullish (null, undefined)</code></li><li><code>0, 0n, NaN</code></li><li><code>&quot;&quot; &#39;&#39; ``</code>  即长度为零的字符串</li></ul><p>剩余的值绝大部分都是 truthy</p><p>有几个容易被当作 falsy 实际是 truthy 的</p><ul><li><code>&quot;false&quot;, &quot;0&quot;</code> 即字符串的 false 和 字符串的零</li><li><code>[]</code> 空数组</li><li><code>&#123;&#125;</code> 空对象</li></ul><h4 id="symbol"><a href="#symbol" class="headerlink" title="symbol"></a>symbol</h4><ul><li>很少使用</li></ul><h3 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h3><h4 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h4><h5 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> 函数名(参数) &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">    <span class="keyword">return</span> 结果;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数名(实参);</span><br></pre></td></tr></table></figure><p>例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>);     <span class="comment">// 返回 3</span></span><br></pre></td></tr></table></figure><p>js 中的函数调用特点：对参数的<strong>类型</strong>和<strong>个数</strong>都没有限制，例如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">add</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>);  <span class="comment">// 返回 ab</span></span><br><span class="line"><span class="title function_">add</span>(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);   <span class="comment">// 返回 9, 第三个参数没有被用到, 不会报错</span></span><br><span class="line"><span class="title function_">add</span>(<span class="number">1</span>);<span class="comment">// 返回 NaN, 这时 b 没有定义是 undefined, undefined 做数学运算结果就是 NaN</span></span><br></pre></td></tr></table></figure><h5 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h5><p>java 中（spring）实现默认参数的效果的做法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/page&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">page</span><span class="params">(</span></span><br><span class="line"><span class="params">        <span class="meta">@RequestParam(defaultValue=&quot;1&quot;)</span> <span class="type">int</span> page, </span></span><br><span class="line"><span class="params">        <span class="meta">@RequestParam(defaultValue=&quot;10&quot;)</span> <span class="type">int</span> size</span></span><br><span class="line"><span class="params">    )</span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>js实现默认参数的效果的做法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">pagination</span>(<span class="params">page = <span class="number">1</span>, size = <span class="number">10</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(page, size);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h5><p>语法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params">参数</span>) &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">    <span class="keyword">return</span> 结果;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>第一种场景：定义完毕后立刻调用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;)(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>第二种场景：作为其它对象的方法，例如</p><p>页面有元素</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>点我啊<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>此元素有一个 onclick 方法，会在鼠标单击这个元素后被执行，onclick 方法刚开始是 null，需要赋值后才能使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>).<span class="property">onclick</span> = (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;鼠标单击了...&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(参数) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">    <span class="keyword">return</span> 结果;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>如果没有参数，() 还是要保留</li><li>如果只有一个参数，() 可以省略</li><li>如果函数体内只有一行代码，{} 可以省略</li><li>如果这一行代码就是结果，return 可以省略</li></ul><p>例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>).<span class="property">onclick</span> = <span class="function">() =&gt;</span>  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aa&quot;</span>);</span><br></pre></td></tr></table></figure><h5 id="函数是对象"><a href="#函数是对象" class="headerlink" title="函数是对象"></a>函数是对象</h5><p>以下形式在 js 中非常常见！</p><ol><li>可以参与赋值，例，具名函数也能参与赋值</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">abc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;bb&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>).<span class="property">onclick</span> = abc;</span><br></pre></td></tr></table></figure><ol start="2"><li>有属性、有方法，执行 <code>console.dir(abc)</code>，输出结果如下</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ƒ abc()</span><br><span class="line">    arguments: null</span><br><span class="line">    caller: null</span><br><span class="line">    length: 0</span><br><span class="line">    name: &quot;abc&quot;</span><br><span class="line">    ➡prototype: &#123;constructor: ƒ&#125;</span><br><span class="line">    [[FunctionLocation]]: VM1962:1</span><br><span class="line">    ➡[[Prototype]]: ƒ ()</span><br><span class="line">    ➡[[Scopes]]: Scopes[1]</span><br></pre></td></tr></table></figure><ul><li><p>其中带有 f 标记的是方法，不带的是属性</p></li><li><p>带有 ➡ 符号的节点可以继续展开</p></li><li><p>带有 <code>[[ ]]</code> 的是内置属性，不能访问，只能查看</p></li><li><p>相对重要的是 <code>[[Prototype]]</code> 和 <code>[[Scopes]]</code> 指的是继承和作用域</p></li></ul><ol start="3"><li>可以作为方法参数</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b</span>(<span class="params">fn</span>) &#123;          <span class="comment">// fn 将来可以是一个函数对象</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">    <span class="title function_">fn</span>();                 <span class="comment">// 调用函数对象</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">b</span>(a)</span><br></pre></td></tr></table></figure><ol start="4"><li>可以作为方法返回值</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">d</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;d&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//c()    //调用c方法</span></span><br><span class="line"><span class="title function_">c</span>()()  <span class="comment">//调用c方法后再调用d方法</span></span><br></pre></td></tr></table></figure><h5 id="函数作用域"><a href="#函数作用域" class="headerlink" title="函数作用域"></a>函数作用域</h5><p>函数可以嵌套（js 代码中很常见，只是嵌套的形式更多是匿名函数，箭头函数）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> z = <span class="number">30</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x, y); <span class="comment">//10 20</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x, y, z); <span class="comment">//报错，z is not defined</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">b</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">a</span>();</span><br></pre></td></tr></table></figure><ul><li>以函数为分界线划定作用域，所有函数之外是全局作用域</li><li>查找变量时，由内向外查找<ul><li>在内层作用域找到变量，就会停止查找，不会再找外层</li><li>所有作用域都找不到变量，报错</li></ul></li><li>作用域本质上是函数对象的属性，可以通过 console.dir() 来查看调试</li></ul><h5 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x,y); <span class="comment">//10 20</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">a</span>()();  <span class="comment">// 在外面执行了 b</span></span><br></pre></td></tr></table></figure><p>这段代码有两个特点：<br>1、函数b嵌套在函数a内部；<br>2、函数a返回函数b。</p><ul><li>函数定义时，它的作用域已经确定好了，因此无论函数将来去了哪，都能从它的作用域中找到当时那些变量</li><li>闭包就是指<strong>函数能够访问自己的作用域中变量</strong>，闭包可以理解成<strong>定义在一个函数内部的函数</strong></li></ul><h5 id="let、var-与作用域"><a href="#let、var-与作用域" class="headerlink" title="let、var 与作用域"></a>let、var 与作用域</h5><p>如果函数外层引用的是 let 变量，那么外层普通的 {} 也会作为作用域边界，最外层的 let 也占一个 script 作用域</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> y = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">dir</span>(b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果函数外层引用的是 var 变量，外层普通的 {} 不会视为边界</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">dir</span>(b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果 var 变量出现了重名，则他俩会被视为同一作用域中的同一个变量</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> e = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> e = <span class="number">20</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);<span class="comment">// 打印 20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(e);<span class="comment">// 因为是同一个变量，还是打印 20</span></span><br></pre></td></tr></table></figure><p>如果是 let，则视为两个作用域中的两个变量</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> e = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> e = <span class="number">20</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);<span class="comment">// 打印 20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(e);<span class="comment">// 打印 10</span></span><br></pre></td></tr></table></figure><p>要想里面的 e 和外面的 e 能区分开来，最简单的办法是改成 let，或者用函数来界定作用域范围</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> e = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> e = <span class="number">20</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">b</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br></pre></td></tr></table></figure><h4 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h4><p>语法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建数组</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取数组元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="number">0</span>]); <span class="comment">// 输出 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改数组元素</span></span><br><span class="line">array[<span class="number">0</span>] = <span class="number">5</span>; <span class="comment">// 数组元素变成了 [5,2,3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历数组元素，其中 length 是数组属性，代表数组长度</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>API</p><ul><li>push、shift、splice</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]; </span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">push</span>(<span class="number">4</span>);    <span class="comment">// 向数组尾部(右侧)添加元素, 结果 [1,2,3,4]</span></span><br><span class="line">arr.<span class="title function_">shift</span>();<span class="comment">// 从数组头部(左侧)移除元素, 结果 [2,3,4]</span></span><br><span class="line">arr.<span class="title function_">splice</span>(<span class="number">1</span>,<span class="number">1</span>);<span class="comment">// 删除【参数1】索引位置的【参数2】个元素，结果 [2,4]</span></span><br></pre></td></tr></table></figure><ul><li>join</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">join</span>(); <span class="comment">// 默认使用【,】作为连接符，结果 &#x27;a,b,c&#x27;</span></span><br><span class="line">arr.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);<span class="comment">// 结果 &#x27;abc&#x27;</span></span><br><span class="line">arr.<span class="title function_">join</span>(<span class="string">&#x27;-&#x27;</span>);<span class="comment">// 结果 &#x27;a-b-c&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>map、filter、forEach</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">i</span>) &#123;   <span class="comment">// 代表的新旧元素之间的变换规则</span></span><br><span class="line">    <span class="keyword">return</span> i * <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// arr.map(a) // 具名函数，结果 [10,20,30,60]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// arr.map( (i) =&gt; &#123;return i * 10&#125; ); // 箭头函数</span></span><br><span class="line">arr.<span class="title function_">map</span>( <span class="function"><span class="params">i</span> =&gt;</span> i * <span class="number">10</span> ); <span class="comment">// 箭头函数</span></span><br></pre></td></tr></table></figure><ul><li>传给 map 的函数，参数代表旧元素，返回值代表新元素</li></ul><p>map 的内部实现（伪代码）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">map</span>(<span class="params">a</span>) &#123; <span class="comment">// 参数是一个函数</span></span><br><span class="line">    <span class="keyword">let</span> narr = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> o = arr[i]; <span class="comment">// 旧元素</span></span><br><span class="line">        <span class="keyword">let</span> n = <span class="title function_">a</span>(o);   <span class="comment">// 新元素</span></span><br><span class="line">        narr.<span class="title function_">push</span>(n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> narr;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>filter 例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>];</span><br><span class="line">arr.<span class="title function_">filter</span>( <span class="function">(<span class="params">i</span>)=&gt;</span> i % <span class="number">2</span> == <span class="number">1</span> ); <span class="comment">// 结果 [1,3]</span></span><br></pre></td></tr></table></figure><ul><li>传给 filter 的函数，参数代表旧元素，返回 true 表示要留下的元素</li></ul><p>forEach 例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/*for(let i = 0; i &lt; arr.length; i++) &#123;</span></span><br><span class="line"><span class="comment">    console.log(arr[i]);</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">forEach</span>( <span class="function">(<span class="params">i</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(i) );</span><br></pre></td></tr></table></figure><p>两个称呼</p><ul><li>高阶函数，map，filter，forEach</li><li>回调函数，例如作为参数传入的函数</li></ul><h4 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h4><h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    属性名: 值,</span><br><span class="line">    方法名: 函数,</span><br><span class="line">    get 属性名() &#123;&#125;,</span><br><span class="line">    set 属性名(新值) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>例1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu1 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小明&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">study</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;爱学习&quot;</span>);</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>例2</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;小黑&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">let</span> study = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;爱学习&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stu2 = &#123; name, age, study &#125;</span><br></pre></td></tr></table></figure><p>例3（重点）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu3 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小白&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="title function_">study</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;爱学习&quot;</span>);</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>注意</strong>：对象方法这么写，仅限于对象内部</li></ul><p>例4</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu4 = &#123;</span><br><span class="line">    <span class="attr">_name</span>: <span class="literal">null</span>, <span class="comment">/*类似于java中私有成员变量*/</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">name</span>() &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;进入了get&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;进入了set&quot;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用属性， get，set</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">stu4.<span class="property">_name</span>  <span class="comment">//null</span></span><br><span class="line"></span><br><span class="line">stu4.<span class="property">name</span> = <span class="string">&quot;小白&quot;</span> <span class="comment">//进入了set</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(stu4.<span class="property">name</span>)  <span class="comment">//进入了get</span></span><br></pre></td></tr></table></figure><h5 id="特色：属性增删"><a href="#特色：属性增删" class="headerlink" title="特色：属性增删"></a>特色：属性增删</h5><p>对比一下 Java 中的 Object</p><ul><li>Java 的 Object 是以类作为模板来创建，对象不能脱离类模板的范围，一个对象的属性、能用的方法都是确定好的</li><li>js 的对象，不需要什么模板，它的属性和方法可以随时加减</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;;</span><br><span class="line">stu.<span class="property">age</span> = <span class="number">18</span>;<span class="comment">// 添加属性</span></span><br><span class="line"><span class="keyword">delete</span> stu.<span class="property">age</span>;<span class="comment">// 删除属性</span></span><br><span class="line"></span><br><span class="line">stu.<span class="property">study</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;<span class="comment">// 添加方法</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;在学习&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>添加 get，set，需要借助<code>Object.definePropery</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;<span class="attr">_name</span>:<span class="literal">null</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(stu, <span class="string">&quot;name&quot;</span>, &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">name</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>参数1：目标对象</li><li>参数2：属性名</li><li>参数3：get，set 的定义</li></ul><h5 id="特色：this"><a href="#特色：this" class="headerlink" title="特色：this"></a>特色：this</h5><ul><li>Java 中的 this 是个隐式参数</li><li>Java 中， this 代表的就是调用方法的那个对象</li></ul><p>js 中的 this 也是隐式参数，但它与函数运行时上下文相关</p><p>例如，一个“落单”的函数，不属于任何对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">study</span>(<span class="params">subject</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;在学习 &quot;</span> + subject)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试一下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">study</span>(<span class="string">&quot;js&quot;</span>);  <span class="comment">// 输出 在学习 js</span></span><br></pre></td></tr></table></figure><p>这是因为此时函数执行，全局对象 window 被当作了 this，window 对象的 name 属性是空串</p><p>同样的函数，如果作为对象的方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;小白&quot;</span>,</span><br><span class="line">    study</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这种情况下，会将当前对象作为 this</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stu.<span class="title function_">study</span>(<span class="string">&#x27;js&#x27;</span>); <span class="comment">// 输出 小白在学习 js</span></span><br></pre></td></tr></table></figure><p>还可动态改变 this</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;<span class="attr">name</span>:<span class="string">&quot;小黑&quot;</span>&#125;;</span><br><span class="line">study.<span class="title function_">call</span>(stu, <span class="string">&quot;js&quot;</span>);<span class="comment">// 输出 小黑在学习 js</span></span><br></pre></td></tr></table></figure><p>使用call()和apply()方法时，就会改变this的指向，这回 study 执行时，就把 call 的第一个参数 stu 作为 this</p><p>一个例外是，在<strong>箭头函数</strong>内出现的 this，以外层 this 理解 </p><p>用匿名函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小花&quot;</span>,</span><br><span class="line">    <span class="attr">friends</span>: [<span class="string">&quot;小白&quot;</span>,<span class="string">&quot;小黑&quot;</span>,<span class="string">&quot;小明&quot;</span>],</span><br><span class="line">    <span class="title function_">play</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">friends</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;与&quot;</span> + e + <span class="string">&quot;在玩耍&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">stu.<span class="title function_">play</span>()</span><br></pre></td></tr></table></figure><ul><li>this.name 所在的函数是【落单】的函数<code>function(e)</code>，因此 this 代表 window</li></ul><p>输出结果为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">与小白在玩耍</span><br><span class="line">与小黑在玩耍</span><br><span class="line">与小明在玩耍</span><br></pre></td></tr></table></figure><p>用箭头函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小花&quot;</span>,</span><br><span class="line">    <span class="attr">friends</span>: [<span class="string">&quot;小白&quot;</span>,<span class="string">&quot;小黑&quot;</span>,<span class="string">&quot;小明&quot;</span>],</span><br><span class="line">    <span class="title function_">play</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">friends</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;与&quot;</span> + e + <span class="string">&quot;在玩耍&quot;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>this.name 所在的函数是箭头函数，因此 this 要看它外层的 play 函数，play 又是属于 stu 的方法，因此 this 代表 stu 对象</li></ul><p>输出结果为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">小花与小白在玩耍</span><br><span class="line">小花与小黑在玩耍</span><br><span class="line">小花与小明在玩耍</span><br></pre></td></tr></table></figure><p>不用箭头函数的做法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小花&quot;</span>,</span><br><span class="line">    <span class="attr">friends</span>: [<span class="string">&quot;小白&quot;</span>,<span class="string">&quot;小黑&quot;</span>,<span class="string">&quot;小明&quot;</span>],</span><br><span class="line">    <span class="title function_">play</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> me = <span class="variable language_">this</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">friends</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(me.<span class="property">name</span> + <span class="string">&quot;与&quot;</span> + e + <span class="string">&quot;在玩耍&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="特色：原型继承"><a href="#特色：原型继承" class="headerlink" title="特色：原型继承"></a>特色：原型继承</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> father = &#123;</span><br><span class="line">    <span class="attr">f1</span>: <span class="string">&#x27;父属性&#x27;</span>,</span><br><span class="line">    <span class="attr">m1</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;父方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> son = <span class="title class_">Object</span>.<span class="title function_">create</span>(father);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(son.<span class="property">f1</span>);  <span class="comment">// 打印 父属性</span></span><br><span class="line">son.<span class="title function_">m1</span>();  <span class="comment">// 打印 父方法</span></span><br></pre></td></tr></table></figure><ul><li>father 是父对象，son 去调用 .m1 或 .f1 时，自身对象没有，就到父对象找</li><li>son 自己可以添加自己的属性和方法</li><li>son 里有特殊属性 <code>__proto__</code> 代表它的父对象，js 术语： son 的原型对象</li><li>不同浏览器对打印 son 的 <code>__proto__</code> 属性时显示不同<ul><li>Edge 打印 console.dir(son) 显示 <code>[[Prototype]]</code></li><li>Firefox 打印 console.dir(son) 显示 <code>&lt;prototype&gt;</code></li></ul></li></ul><h5 id="特色：基于函数的原型继承"><a href="#特色：基于函数的原型继承" class="headerlink" title="特色：基于函数的原型继承"></a>特色：基于函数的原型继承</h5><p>出于方便的原因，js 又提供了一种基于函数的原型继承</p><blockquote><p><strong>函数职责</strong></p><ol><li><p>负责创建子对象，给子对象提供属性、方法，功能上相当于构造方法</p></li><li><p>函数有个特殊的属性 prototype，它就是函数创建的子对象的父对象</p><p><strong>注意！</strong>名字有差异，这个属性的作用就是为新对象提供原型</p></li></ol></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">cons</span>(<span class="params">f2</span>) &#123;</span><br><span class="line">    <span class="comment">// 创建子对象(this), 给子对象提供属性和方法</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">f2</span> = f2;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">m2</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;子方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// cons.prototype 就是父对象</span></span><br><span class="line">cons.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">f1</span> = <span class="string">&quot;父属性&quot;</span>;</span><br><span class="line">cons.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">m1</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;父方法&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配合 new 关键字，创建子对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> son = <span class="keyword">new</span> <span class="title function_">cons</span>(<span class="string">&quot;子属性&quot;</span>)</span><br></pre></td></tr></table></figure><p>子对象的 <code>__proto__</code> 就是函数的 <code>prototype</code> 属性</p><h5 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h5><p>一个 json 对象可以长这样：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">18</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>一个 js 对象长这样：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>json 字符串与 js 对象的转换</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JSON</span>.<span class="title function_">parse</span>(json字符串);  <span class="comment">// 返回js对象</span></span><br><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(js对象);  <span class="comment">// 返回json字符串</span></span><br></pre></td></tr></table></figure><h3 id="动态类型"><a href="#动态类型" class="headerlink" title="动态类型"></a>动态类型</h3><p>静态类型语言，如 Java，值有类型，变量也有类型、赋值给变量时，类型要相符</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">b</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;  <span class="comment">// 错误</span></span><br></pre></td></tr></table></figure><p>而 js 属于动态类型语言，值有类型，但变量没有类型，赋值给变量时，没要求</p><p>例如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">100</span>;</span><br><span class="line">b = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line">b = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>动态类型看起来比较灵活，但变量没有类型，会给后期维护带来困难，例如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="comment">// obj 的类型未知，必须根据不同类型做出相应的容错处理</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="运算符与表达式"><a href="#运算符与表达式" class="headerlink" title="运算符与表达式"></a>运算符与表达式</h2><ul><li><code>+ - * / % ** </code></li><li><code>+= -= *= /= %= **=</code></li><li><code>++ --</code></li><li>位运算、移位运算</li><li><code>== != &gt; &gt;= &lt; &lt;=</code></li><li><code>=== !==</code></li><li><code>&amp;&amp; || !</code></li><li><code>?? ?.</code></li><li><code>...</code></li><li>解构赋值</li></ul><h3 id=""><a href="#" class="headerlink" title="==="></a>===</h3><p>严格相等运算符，用作逻辑判等</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> == <span class="number">1</span>    <span class="comment">// 返回 true </span></span><br><span class="line"><span class="number">1</span> == <span class="string">&#x27;1&#x27;</span><span class="comment">// 返回 true，会先将右侧的字符串转为数字，再做比较</span></span><br><span class="line"><span class="number">1</span> === <span class="string">&#x27;1&#x27;</span><span class="comment">// 返回 false，类型不等，直接返回 false</span></span><br></pre></td></tr></table></figure><p>typeof 查看某个值的类型</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">1</span><span class="comment">// 返回 &#x27;number&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">&#x27;1&#x27;</span><span class="comment">// 返回 &#x27;string&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="-1"><a href="#-1" class="headerlink" title="||"></a>||</h3><p>需求，如果参数 n 没有传递，给它一个【男】</p><p><strong>推荐</strong>做法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n = <span class="string">&#x27;男&#x27;</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可能的做法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(n === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        n = <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>还可能是这样</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    n = (n === <span class="literal">undefined</span>) ? <span class="string">&#x27;男&#x27;</span> : n;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>一些老旧代码中可能的做法（不推荐）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    n = n || <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>它的语法是</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">值<span class="number">1</span> || 值<span class="number">2</span></span><br></pre></td></tr></table></figure><p>如果值1 是 Truthy，返回值1，如果值1 是 Falsy 返回值 2</p><h3 id="与"><a href="#与" class="headerlink" title="?? 与 ?."></a>?? 与 ?.</h3><h4 id="-2"><a href="#-2" class="headerlink" title="??"></a>??</h4><p>需求，如果参数 n 没有传递或是 null，给它一个【男】</p><p>如果用传统办法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(n === <span class="literal">undefined</span> || n === <span class="literal">null</span>) &#123;</span><br><span class="line">        n = <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用 ??</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    n = n ?? <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>语法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">值1 ?? 值2</span><br></pre></td></tr></table></figure><ul><li>值1 是 nullish，返回值2</li><li>值1 不是 nullish，返回值1</li></ul><h4 id="-3"><a href="#-3" class="headerlink" title="?."></a>?.</h4><p>需求，函数参数是一个对象，可能包含有子属性</p><p>例如，参数可能是</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu1 = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">address</span>: &#123;</span><br><span class="line">        <span class="attr">city</span>: <span class="string">&#x27;北京&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stu2 = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;李四&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stu3 = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;李四&quot;</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在要访问子属性（有问题）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">stu</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stu.<span class="property">address</span>.<span class="property">city</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在希望当某个属性是 nullish 时，短路并返回 undefined，可以用 ?.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">stu</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stu.<span class="property">address</span>?.<span class="property">city</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用传统办法 </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">stu</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(stu.<span class="property">address</span> === <span class="literal">undefined</span> || stu.<span class="property">address</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">undefined</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stu.<span class="property">address</span>.<span class="property">city</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="…"><a href="#…" class="headerlink" title="…"></a>…</h3><p>展开运算符</p><p>作用1：打散数组，把元素传递给多个参数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">a,b,c</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需求，把数组元素依次传递给函数参数</p><p>传统写法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">test</span>(arr[<span class="number">0</span>],arr[<span class="number">1</span>],arr[<span class="number">2</span>]);<span class="comment">// 输出 1,2,3</span></span><br></pre></td></tr></table></figure><p>展开运算符写法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">test</span>(...arr);<span class="comment">// 输出 1,2,3</span></span><br></pre></td></tr></table></figure><ul><li>打散可以理解为【去掉了】数组外侧的中括号，只剩下数组元素</li></ul><p>作用2：复制数组或对象</p><p>数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [...arr1];<span class="comment">// 复制数组</span></span><br></pre></td></tr></table></figure><p>对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;...obj1&#125;;<span class="comment">// 复制对象</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：展开运算符复制属于浅拷贝（创建一个新对象，该对象有着原始对象属性值的一份精确拷贝），例如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">address</span>: &#123;<span class="attr">city</span>: <span class="string">&#x27;北京&#x27;</span>&#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> o2 = &#123;...o1&#125;;</span><br></pre></td></tr></table></figure><p>作用3：合并数组或对象</p><p>合并数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 = [<span class="number">1</span>,<span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> a2 = [<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b1 = [...a1,...a2];<span class="comment">// 结果 [1,2,3,4]</span></span><br><span class="line"><span class="keyword">let</span> b2 = [...a2,<span class="number">5</span>,...a1]<span class="comment">// 结果 [3,4,5,1,2]</span></span><br></pre></td></tr></table></figure><p>合并对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> o2 = &#123;<span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> o3 = &#123;<span class="attr">name</span>:<span class="string">&#x27;李四&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> n1 = &#123;...o1, ...o2&#125;;<span class="comment">// 结果 &#123;name:&#x27;张三&#x27;,age:18&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> n2 = &#123;...o3, ...o2, ...o1&#125;; <span class="comment">// 结果&#123;name:&#x27;张三&#x27;,age:18&#125;</span></span><br></pre></td></tr></table></figure><ul><li>复制对象时出现同名属性，后面的会覆盖前面的</li></ul><h3 id="-4"><a href="#-4" class="headerlink" title="[] {}"></a>[] {}</h3><p>解构赋值</p><h4 id="-5"><a href="#-5" class="headerlink" title="[]"></a>[]</h4><p>用在声明变量时</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, b, c] = arr;<span class="comment">// 结果 a=1, b=2, c=3</span></span><br></pre></td></tr></table></figure><p>用在声明参数时</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">[a,b,c]</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c) <span class="comment">// 结果 a=1, b=2, c=3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(arr);</span><br></pre></td></tr></table></figure><h4 id="-6"><a href="#-6" class="headerlink" title="{}"></a>{}</h4><p>用在声明变量时</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;name,age&#125; = obj;<span class="comment">// 结果 name=张三, age=18</span></span><br></pre></td></tr></table></figure><p>用在声明参数时</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">&#123;name, age&#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name, age); <span class="comment">// 结果 name=张三, age=18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(obj)</span><br></pre></td></tr></table></figure><h2 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h2><ul><li><code>if ... else</code></li><li><code>switch</code></li><li><code>while</code></li><li><code>do ... while</code></li><li><code>for</code> </li><li><code>for ... in</code></li><li><code>for ... of</code></li><li><code>try ... catch</code></li></ul><h3 id="for-in"><a href="#for-in" class="headerlink" title="for in"></a>for in</h3><p>主要用来遍历对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> father = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>, <span class="attr">study</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> n <span class="keyword">in</span> father) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>其中 const n 代表遍历出来的属性名</li><li>注意1：方法名也能被遍历出来（它其实也算一种特殊属性）</li><li>注意2：遍历子对象时，父对象的属性会跟着遍历出来</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> son = <span class="title class_">Object</span>.<span class="title function_">create</span>(father);</span><br><span class="line">son.<span class="property">sex</span> = <span class="string">&quot;男&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> n <span class="keyword">in</span> son) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>注意3：在 for in 内获取属性值，要使用 [] 语法，而不能用 . 语法</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> n <span class="keyword">in</span> son) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n, son[n]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="for-of"><a href="#for-of" class="headerlink" title="for of"></a>for of</h3><p>主要用来遍历数组，也可以是其它可迭代对象，如 Map，Set 等</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> i <span class="keyword">of</span> a1) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a2 = [</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&#x27;李四&#x27;</span>, <span class="attr">age</span>:<span class="number">20</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&#x27;王五&#x27;</span>, <span class="attr">age</span>:<span class="number">22</span>&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> obj <span class="keyword">of</span> a2) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>, obj.<span class="property">age</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> &#123;name,age&#125; <span class="keyword">of</span> a2) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name, age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="try-catch"><a href="#try-catch" class="headerlink" title="try catch"></a>try catch</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stu1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>, <span class="attr">address</span>: &#123;<span class="attr">city</span>:<span class="string">&#x27;北京&#x27;</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">let</span> stu2 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">stu</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(stu.<span class="property">address</span>.<span class="property">city</span>)   </span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;出现了异常&#x27;</span>, e.<span class="property">message</span>)</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;finally&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><h4 id="安装-nvm"><a href="#安装-nvm" class="headerlink" title="安装 nvm"></a>安装 nvm</h4><p>nvm 即 (node version manager)，可方便切换 node.js 版本</p><ol><li>下载地址：<ol><li><a href="https://github.com/nvm-sh/nvm" title="nvm下载地址">Linux&amp;macOS</a></li><li><a href="https://github.com/coreybutler/nvm-windows" title="nvm下载地址">Windows</a></li></ol></li><li>首次运行前设置好国内镜像地址</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm node_mirror http://npm.taobao.org/mirrors/node/</span><br><span class="line">nvm npm_mirror https://npm.taobao.org/mirrors/npm/</span><br></pre></td></tr></table></figure><p>查看有哪些可用版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm list available</span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|   CURRENT    |     LTS      |  OLD STABLE  | OLD UNSTABLE |</span><br><span class="line">|--------------|--------------|--------------|--------------|</span><br><span class="line">|    18.7.0    |   16.16.0    |   0.12.18    |   0.11.16    |</span><br><span class="line">|    17.2.0    |   14.17.5    |   0.10.48    |    0.9.10    |</span><br></pre></td></tr></table></figure><p>建议安装 LTS（长期支持版）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm install 16.16.0</span><br><span class="line">nvm install 14.17.5</span><br></pre></td></tr></table></figure><p>执行 <code>nvm list</code> 会列出已安装版本</p><p>切换到 16.16.0</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm use 16.16.0</span><br></pre></td></tr></table></figure><p>切换到 14.17.5</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm use 14.17.5</span><br></pre></td></tr></table></figure><p>安装后 nvm 本机的环境变量会自动添加，但可能需要手工添加 nodejs 的 PATH 环境变量</p><h4 id="检查-npm"><a href="#检查-npm" class="headerlink" title="检查 npm"></a>检查 npm</h4><p>npm 是 js 的包管理器，类似于 java的 maven。</p><p><code>.npmrc</code>，可以理解成npm running cnfiguration，即npm运行时配置文件。电脑中有多个<code>.npmrc</code>文件，npm按照如下顺序读取这些配置文件。</p><ol><li>项目配置文件: /project/.npmrc</li><li>用户配置文件：~/.npmrc</li><li>全局配置文件：$PREFIX/etc/npmrc</li><li>npm 内置配置文件 /path/to/npm/npmrc</li></ol><p><code>$PREFIX</code>默认为nodejs的安装路径，可在该路径下新建文件夹etc后添加npmrc文件，设置配置。或在nodejs中自带的npm文件夹下新增npmrc文件。</p><p>常用配置修改如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//prefix = d:\soft\node-js\  //默认设置，npm安装软件的路径node_modules下</span><br><span class="line">prefix = d:\soft\node-js\node_global  //修改后，需设置该环境变量</span><br><span class="line">cache = d:\soft\node-js\node_cache</span><br><span class="line">registry  = https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><p>修改配置文件后配置后通过，<code>npm config ls -l</code>或<code>npm config list</code>检查配置是否生效</p><h4 id="搭建前端服务器"><a href="#搭建前端服务器" class="headerlink" title="搭建前端服务器"></a>搭建前端服务器</h4><p>新建一个保存项目的 client 文件夹，进入文件夹执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express --save-dev</span><br></pre></td></tr></table></figure><p>修改 package.json 文件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;module&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;express&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.18.1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>其中 devDependencies 是<code>npm install --save-dev</code>添加的</li></ul><p>编写 main.js 代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">&#x27;express&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&#x27;./&#x27;</span>))</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">7070</span>)</span><br></pre></td></tr></table></figure><p>执行 js 代码（运行前端服务器）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node main.js</span><br></pre></td></tr></table></figure><h3 id="前端案例"><a href="#前端案例" class="headerlink" title="前端案例"></a>前端案例</h3><ul><li>前端只有静态页面，使用 Express 服务器</li><li>后端使用 Tomcat 服务器，通过 SpringBoot、MyBatis 等框架获取数据库数据</li></ul><h4 id="查找元素"><a href="#查找元素" class="headerlink" title="查找元素"></a>查找元素</h4><ul><li>document.getElementById - 根据 id 值查找一个元素</li><li>[document|元素].querySelector - 根据选择器查找第一个匹配元素</li><li>[document|元素].querySelectorAll - 根据选择器查找所有匹配元素</li></ul><p>例如，下面的 html 代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>学生列表<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;thead&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row bold&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>编号<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tbody&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>18<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>执行</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.title&#x27;</span>); <span class="comment">// 找到 &lt;div class=&quot;title&quot;&gt;学生列表&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><p>执行</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.col&#x27;</span>); <span class="comment">// 找到 &lt;div class=&quot;col&quot;&gt;编号&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><p>执行</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.col&#x27;</span>);  </span><br><span class="line"><span class="comment">//找到的是一个数组对象 NodeList(8) [div.col, div.col, div.col, div.col, div.col, div.col, div.col, div.col]</span></span><br></pre></td></tr></table></figure><p>执行</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> thead = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.thead&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 只在 thead 元素范围内找</span></span><br><span class="line">thead.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.col&#x27;</span>);</span><br><span class="line"><span class="comment">//找到的是一个数组对象 NodeList(4) [div.col, div.col, div.col, div.col]</span></span><br></pre></td></tr></table></figure><p>根据 id 属性查找</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;id值&quot;</span>)</span><br></pre></td></tr></table></figure><p>也可以用 </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#id值&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="修改元素内容"><a href="#修改元素内容" class="headerlink" title="修改元素内容"></a>修改元素内容</h4><ul><li>元素.innerHTML</li><li>元素.textContent</li></ul><p>例如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.title&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;h1&gt;我要写入文字了&lt;/h1&gt;&#x27;</span></span><br></pre></td></tr></table></figure><p>效果</p><ul><li>innerHTML  会解析内容中的标签</li><li>textContext 不会解析内容中的标签</li><li>给 innerHTML 或 textContent 赋值空串，可以实现清空标签内容的效果</li></ul><h4 id="利用模板"><a href="#利用模板" class="headerlink" title="利用模板"></a>利用模板</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>学生列表<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;thead&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row bold&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>编号<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tbody&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;tp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>xx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>xx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>xx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>xx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> array = [</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span>, <span class="attr">age</span>: <span class="number">17</span> &#125;</span></span><br><span class="line"><span class="language-javascript">    ];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> tp = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tp&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> row = tp.<span class="property">content</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> [c1,c2,c3,c4] = row.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.col&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> tbody = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tbody&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span>(<span class="keyword">const</span> &#123;id,name,sex,age&#125; <span class="keyword">of</span> array) &#123;</span></span><br><span class="line"><span class="language-javascript">        c1.<span class="property">textContent</span> = id;</span></span><br><span class="line"><span class="language-javascript">        c2.<span class="property">textContent</span> = name;</span></span><br><span class="line"><span class="language-javascript">        c3.<span class="property">textContent</span> = sex;</span></span><br><span class="line"><span class="language-javascript">        c4.<span class="property">textContent</span> = age;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 复制元素</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> newRow = <span class="variable language_">document</span>.importNode(row, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 建立父子关系，左边父，右边子</span></span></span><br><span class="line"><span class="language-javascript">        tbody.<span class="title function_">appendChild</span>(newRow);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Fetch-API"><a href="#Fetch-API" class="headerlink" title="Fetch API"></a>Fetch API</h4><p>Fetch API 可以用来获取远程数据，它有两种方式接收结果，同步方式与异步方式</p><p>格式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(url, options) <span class="comment">// 返回 Promise</span></span><br></pre></td></tr></table></figure><p>同步方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> 结果 = <span class="keyword">await</span> <span class="title class_">Promise</span></span><br><span class="line"><span class="comment">// 后续代码</span></span><br></pre></td></tr></table></figure><ul><li>await 关键字必须在一个标记了<code>async</code>的function内来使用</li><li>后续代码不会在结果返回前执行</li></ul><p>异步方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span></span><br><span class="line">.<span class="title function_">then</span>(结果 =&gt; &#123; ... &#125;)</span><br><span class="line"><span class="comment">// 后续代码                 </span></span><br></pre></td></tr></table></figure><ul><li>后续代码不必等待结果返回就可以执行</li></ul><p>例：</p><p>在 express 服务器上有 students.json 文件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;sex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;男&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">18</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;sex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;女&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">17</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p>使用fetch api获取这些数据，并展示</p><p>同步方式</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">findStudents</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 获取响应对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;students.json&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 获取响应体, 按json格式转换为js数组</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> array = <span class="keyword">await</span> resp.<span class="title function_">json</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 显示数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> tp = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tp&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> row = tp.<span class="property">content</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> [c1,c2,c3,c4] = row.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.col&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> tbody = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tbody&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span>(<span class="keyword">const</span> &#123;id,name,sex,age&#125; <span class="keyword">of</span> array) &#123;</span></span><br><span class="line"><span class="language-javascript">                c1.<span class="property">textContent</span> = id;</span></span><br><span class="line"><span class="language-javascript">                c2.<span class="property">textContent</span> = name;</span></span><br><span class="line"><span class="language-javascript">                c3.<span class="property">textContent</span> = sex;</span></span><br><span class="line"><span class="language-javascript">                c4.<span class="property">textContent</span> = age;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 复制元素</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> newRow = <span class="variable language_">document</span>.importNode(row, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 建立父子关系</span></span></span><br><span class="line"><span class="language-javascript">                tbody.<span class="title function_">appendChild</span>(newRow);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">findStudents</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>fetch(‘students.json’) 内部会发送请求，但响应结果不能立刻返回，因此 await 就是等待响应结果返回</li><li>其中 resp.json() 也不是立刻能返回结果，它返回的也是 Promise 对象，也要配合 await 取结果</li></ul><p>异步方式</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">fetch</span>(<span class="string">&#x27;students.json&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>( <span class="function"><span class="params">resp</span> =&gt;</span> resp.<span class="title function_">json</span>() )</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>( <span class="function"><span class="params">array</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 显示数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> tp = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tp&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> row = tp.<span class="property">content</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> [c1,c2,c3,c4] = row.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.col&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> tbody = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tbody&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span>(<span class="keyword">const</span> &#123;id,name,sex,age&#125; <span class="keyword">of</span> array) &#123;</span></span><br><span class="line"><span class="language-javascript">                c1.<span class="property">textContent</span> = id;</span></span><br><span class="line"><span class="language-javascript">                c2.<span class="property">textContent</span> = name;</span></span><br><span class="line"><span class="language-javascript">                c3.<span class="property">textContent</span> = sex;</span></span><br><span class="line"><span class="language-javascript">                c4.<span class="property">textContent</span> = age;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 复制元素</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> newRow = <span class="variable language_">document</span>.importNode(row, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 建立父子关系</span></span></span><br><span class="line"><span class="language-javascript">                tbody.<span class="title function_">appendChild</span>(newRow);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">catch</span>( <span class="function"><span class="params">e</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(e) )</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>第一个 then 是在响应返回后，才会调用它里面的箭头函数，箭头函数参数即 resp  响应对象</li><li>第二个 then 是在 json 解析完成后，才会调用它里面的箭头函数，箭头函数参数即解析结果（本例是 array 数组）</li><li>上一个 then 返回的是 Promise 对象时，才能链式调用下一个 then</li></ul><h5 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h5><ul><li>只要协议、主机、端口之一不同，就不同源，例如<ul><li><a href="http://localhost:7070/a">http://localhost:7070/a</a> 和 <a href="https://localhost:7070/b">https://localhost:7070/b</a> 就不同源</li></ul></li><li>同源检查是浏览器的行为，而且只针对 fetch、xhr 请求<ul><li>如果是其它客户端，例如 java http client，postman，它们是不做同源检查的</li><li>通过表单提交、浏览器直接输入 url 地址这些方式发送的请求，也不会做同源检查</li></ul></li><li>更多相关知识请参考<ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS">跨源资源共享（CORS） - HTTP | MDN (mozilla.org)</a></li></ul></li></ul><h6 id="请求响应头解决"><a href="#请求响应头解决" class="headerlink" title="请求响应头解决"></a>请求响应头解决</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/api/student&quot;)</span></span><br><span class="line"><span class="comment">//@CrossOrigin(&quot;http://loaclhsot:7070&quot;)</span></span><br><span class="line"><span class="comment">//@CrossOrigin(originPatterns = &quot;http://loaclhsot:7070&quot;,allowCredentials = &quot;true&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin(originPatterns = &quot;*&quot;,allowCredentials = &quot;true&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">all</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> R.oj(studentService.findAll());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><img src="/2023/01/01/5459/Snipaste_2022-10-25_19-30-11.png" class="" title="image-20220814144040703"><ul><li>fetch请求跨域，会携带一个Origin头，代表【发请求的资源源自何处】，目标通过它就能辨别是否发生跨域<ul><li>例子中：student.html 发送fetch请求，告诉tomcat，我源自localhost:7070</li></ul></li><li>目标资源通过返回Access-Control-Allow-Origin头，告诉浏览器【允许哪些源使用此响应】<ul><li>例子中：tomcat返回fetch响应，告诉浏览器，这个响应允许源自localhost:7070的资源使用</li></ul></li></ul><h6 id="代理解决"><a href="#代理解决" class="headerlink" title="代理解决"></a>代理解决</h6><img src="/2023/01/01/5459/Snipaste_2022-10-25_19-33-31.png" class="" title="image-20220814144040703"><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install http-proxy-middleware --save-dev</span><br></pre></td></tr></table></figure><p>在 express 服务器启动代码中加入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createProxyMiddleware&#125; <span class="keyword">from</span> <span class="string">&#x27;http-proxy-middleware&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api&#x27;</span>, <span class="title function_">createProxyMiddleware</span>(&#123; <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>, <span class="attr">changeOrigin</span>: <span class="literal">true</span> &#125;));</span><br></pre></td></tr></table></figure><p>fetch 代码改为</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;http://localhost:7070/api/students&#x27;</span>)</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/students&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h4><p>单个导出 const、let、function</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>导出全部</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;a,b,c&#125;</span><br></pre></td></tr></table></figure><p>导出 default，只能有一个 default 语句</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> b;</span><br></pre></td></tr></table></figure><p>import 语法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> 语句</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>import 需要遵循 export 的名字，但无需遵循默认导出</li><li>import 需要遵循同源策略，即 html 和被引入的js文件在同一个源</li></ul><p>整个导入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="variable language_">module</span> <span class="keyword">from</span> <span class="string">&#x27;/1.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">module</span>.<span class="property">a</span>)<span class="comment">// 输出10</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">module</span>.<span class="property">b</span>)<span class="comment">// 输出20</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="title function_">c</span>()<span class="comment">// 输出c</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">default</span>              <span class="comment">// 默认</span></span><br></pre></td></tr></table></figure><p>单个导入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;a,c&#125; <span class="keyword">from</span> <span class="string">&#x27;/1.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)<span class="comment">// 输出10</span></span><br><span class="line"><span class="title function_">c</span>()<span class="comment">// 输出c</span></span><br></pre></td></tr></table></figure><p>导入默认</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> x <span class="keyword">from</span> <span class="string">&#x27;/1.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x)<span class="comment">// 输出20</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java高级篇</title>
      <link href="/2022/12/02/61676.html"/>
      <url>/2022/12/02/61676.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java基础篇</title>
      <link href="/2022/12/01/41943.html"/>
      <url>/2022/12/01/41943.html</url>
      
        <content type="html"><![CDATA[<h1 id="Java概述"><a href="#Java概述" class="headerlink" title="Java概述"></a>Java概述</h1><h1 id="Java介绍"><a href="#Java介绍" class="headerlink" title="Java介绍"></a>Java介绍</h1><p>Java是由Sun Microsystems公司于1995年5月推出的Java面向对象程序设计语言和Java平台的总称。由James Gosling和同事们共同研发，并在1995年正式推出。</p><p>后来Sun公司被Oracle（甲骨文）公司收购，Java也随之成为Oracle公司的产品。</p><p>Java分为三个体系：</p><ul><li>JavaSE（J2SE）（Java2 Platform Standard Edition，java平台标准版）</li><li>JavaEE（J2EE）（Java 2 Platform,Enterprise Edition，java平台企业版）</li><li>JavaME（J2ME）（Java 2 Platform Micro Edition，java平台微型版）</li></ul><h2 id="下载和安装"><a href="#下载和安装" class="headerlink" title="下载和安装"></a>下载和安装</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><ul><li>通过<a href="http://www.oracle.com/" title="oracle官方网站">oracle官方网站</a>获取Oracle JDK安装包</li><li>通过第三方网站获取Open JDK安装包，如<a href="https://jdk.java.net/" title="Oracle OpenJDK">Oracle OpenJDK</a></li></ul><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol><li>下载解压版软件，并解压。</li><li>环境变量中新建变量，变量名</li></ol><h3 id="JDK的安装目录介绍"><a href="#JDK的安装目录介绍" class="headerlink" title="JDK的安装目录介绍"></a>JDK的安装目录介绍</h3><table><thead><tr><th align="center">目录名称</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">bin</td><td align="center">该路径下存放了JDK的各种工具命令。javac和java就放在该目录下。</td></tr><tr><td align="center">conf</td><td align="center">该路径下存放了JDK的相关配置文件。</td></tr><tr><td align="center">include</td><td align="center">该路径下存放了一些平台特定的头文件。</td></tr><tr><td align="center">jmods</td><td align="center">该路径下存放了JDK的各种模块。</td></tr><tr><td align="center">legal</td><td align="center">该路径下存放了JDK各模块的授权文档。</td></tr><tr><td align="center">lib</td><td align="center">该路径下存放了JDK工具的一些补充JAR包。</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MongoDB的使用</title>
      <link href="/2022/11/26/63083.html"/>
      <url>/2022/11/26/63083.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> MongoDB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis原理篇</title>
      <link href="/2022/11/24/38894.html"/>
      <url>/2022/11/24/38894.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis高级篇</title>
      <link href="/2022/11/23/35356.html"/>
      <url>/2022/11/23/35356.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis实战篇</title>
      <link href="/2022/11/22/46299.html"/>
      <url>/2022/11/22/46299.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis基础篇</title>
      <link href="/2022/11/21/55591.html"/>
      <url>/2022/11/21/55591.html</url>
      
        <content type="html"><![CDATA[<h1 id="Redis简单介绍"><a href="#Redis简单介绍" class="headerlink" title="Redis简单介绍"></a>Redis简单介绍</h1><p>Redis是一种键值型的NoSql数据库，这里有两个关键字：</p><ul><li>键值型</li><li>NoSql</li></ul><p>其中<strong>键值型</strong>，是指Redis中存储的数据都是以key-value对的形式存储，而value的形式多种多样，可以是字符串、数值、json：</p><img src="/2022/11/21/55591/image-20221101100000001.png" class="" title="键值型数据库"><p>而NoSql则是相对于传统关系型数据库而言，有很大差异的一种数据库。</p><p>对于存储的数据，没有类似Mysql那么严格的约束，比如唯一性，是否可以为null等等，这种松散结构的数据库，称之为NoSQL数据库。</p><h1 id="认识NoSQL"><a href="#认识NoSQL" class="headerlink" title="认识NoSQL"></a>认识NoSQL</h1><p><strong>NoSql</strong>可以翻译做Not Only Sql（不仅仅是SQL），或者是No Sql（非Sql的）数据库。是相对于传统关系型数据库而言，有很大差异的一种特殊的数据库，因此也称之为<strong>非关系型数据库</strong>。</p><h2 id="结构化与非结构化"><a href="#结构化与非结构化" class="headerlink" title="结构化与非结构化"></a>结构化与非结构化</h2><p>传统关系型数据库是结构化数据，每一张表都有严格的约束信息：字段名、字段数据类型、字段约束等等信息，插入的数据必须遵守这些约束。</p><p>而NoSql则对数据库格式没有严格约束，往往形式松散，自由。</p><p>可以是键值型（key-value）、也可以是文档型（Document）、甚至可以是图格式（Graph）。</p><h2 id="关联和非关联"><a href="#关联和非关联" class="headerlink" title="关联和非关联"></a>关联和非关联</h2><p>传统数据库的表与表之间往往存在关联，例如外键。</p><p>而非关系型数据库不存在关联关系，要维护关系要么靠代码中的业务逻辑，要么靠数据之间的耦合。</p><h2 id="查询方式"><a href="#查询方式" class="headerlink" title="查询方式"></a>查询方式</h2><p>传统关系型数据库会基于Sql语句做查询，语法有统一标准；</p><p>而不同的非关系数据库查询语法差异极大，五花八门各种各样。</p><img src="/2022/11/21/55591/image-20221101100100002.png" class="" title="查询方式语句"><h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>传统关系型数据库能满足事务ACID的原则。</p><p>而非关系型数据库往往不支持事务，或者不能严格保证ACID的特性，只能实现基本的一致性。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>除了上述四点以外，在存储方式、扩展性、查询性能上，关系型与非关系型也都有着显著差异，总结如下：</p><img src="/2022/11/21/55591/image-20221101102102032.png" class="" title="总结"><ul><li>存储方式<ul><li>关系型数据库基于磁盘进行存储，会有大量的磁盘IO，对性能有一定影响</li><li>非关系型数据库，他们的操作更多的是依赖于内存来操作，内存的读写速度会非常快，性能自然会好一些</li></ul></li></ul><ul><li>扩展性<ul><li>关系型数据库集群模式一般是主从，主从数据一致，起到数据备份的作用，称为垂直扩展。</li><li>非关系型数据库可以将数据拆分，存储在不同机器上，可以保存海量数据，解决内存大小有限的问题，称为水平扩展。</li><li>关系型数据库因为表之间存在关联关系，如果做水平扩展会给数据查询带来很多麻烦</li></ul></li></ul><hr><h1 id="认识Redis"><a href="#认识Redis" class="headerlink" title="认识Redis"></a>认识Redis</h1><p><a href="https://redis.io/" title="redis官网">Redis</a>诞生于2009年，全称是<strong>Remote  Dictionary Server</strong>远程词典服务器，是一个基于内存的键值型NoSQL数据库。</p><p><strong>特征</strong>：</p><ul><li>键值（key-value）型，value支持多种不同数据结构，功能丰富</li><li>单线程，每个命令具备原子性</li><li>低延迟，速度快（基于内存、IO多路复用、良好的编码）</li><li>支持数据持久化</li><li>支持主从集群、分片集群</li><li>支持多语言客户端</li></ul><hr><h1 id="安装Redis"><a href="#安装Redis" class="headerlink" title="安装Redis"></a>安装Redis</h1><p>Redis官方未提供Windows版本的安装包，且目前大多数应用都是基于Linux服务器来部署项目。因此基于CentOS 7系统来安装Redis。</p><h2 id="依赖库"><a href="#依赖库" class="headerlink" title="依赖库"></a>依赖库</h2><p>Redis是基于C语言编写的，首先需安装Redis所需要的gcc依赖：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc tcl</span><br></pre></td></tr></table></figure><h2 id="解压安装包并编译"><a href="#解压安装包并编译" class="headerlink" title="解压安装包并编译"></a>解压安装包并编译</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压缩</span></span><br><span class="line">tar -xzf redis-7.X.X.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入redis目录</span></span><br><span class="line"><span class="built_in">cd</span> redis-7.X.X</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行编译命令</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>如果没有出错，就表示安装成功。</p><p>默认的安装路径是在 <code>/usr/local/bin</code>目录下：</p><p>该目录已经默认配置到环境变量，因此可在任意目录下运行这些命令。其中：</p><ul><li>redis-cli：是redis提供的命令行客户端</li><li>redis-server：是redis的服务端启动脚本</li><li>redis-sentinel：是redis的哨兵启动脚本</li></ul><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><p>redis的启动方式有很多种，例如：</p><ul><li>默认启动</li><li>指定配置启动</li><li>开机自启</li></ul><h2 id="默认启动"><a href="#默认启动" class="headerlink" title="默认启动"></a>默认启动</h2><p>安装完成后，在任意目录输入<code>redis-server</code>命令即可启动Redis：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server</span><br></pre></td></tr></table></figure><p>这种启动属于<strong>前台启动</strong>，会阻塞整个会话窗口，窗口关闭或者按下<code>CTRL + C</code>则Redis停止。不推荐使用。</p><h2 id="指定配置启动"><a href="#指定配置启动" class="headerlink" title="指定配置启动"></a>指定配置启动</h2><p>若要让Redis以<strong>后台</strong>方式启动，则需修改Redis配置文件，在之前解压的redis安装包下，名字叫<code>redis.conf</code>。</p><p>先将该配置文件备份一份，然后修改redis.conf文件中的一些配置：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 允许访问的地址，默认是127.0.0.1，会导致只能在本地访问。修改为0.0.0.0则可以在任意IP访问，生产环境不要设置为0.0.0.0</span></span><br><span class="line"><span class="attr">bind</span> <span class="string">0.0.0.0</span></span><br><span class="line"><span class="comment"># 守护进程，修改为yes后即可后台运行，宿主机直接启动redis可修改为yes。但使用docker启动redis时，不可修改为yes，否则无法启动docker容器</span></span><br><span class="line"><span class="attr">daemonize</span> <span class="string">yes </span></span><br><span class="line"><span class="comment"># 密码，设置后访问Redis必须输入密码</span></span><br><span class="line"><span class="attr">requirepass</span> <span class="string">root</span></span><br></pre></td></tr></table></figure><p>Redis的其它常见配置：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 监听的端口</span></span><br><span class="line"><span class="attr">port</span> <span class="string">6379</span></span><br><span class="line"><span class="comment"># 工作目录，默认是当前目录，也就是运行redis-server时的命令，日志、持久化等文件会保存在这个目录</span></span><br><span class="line"><span class="attr">dir</span> <span class="string">.</span></span><br><span class="line"><span class="comment"># 数据库数量，设置为1，代表只使用1个库，默认有16个库，编号0~15</span></span><br><span class="line"><span class="attr">databases</span> <span class="string">1</span></span><br><span class="line"><span class="comment"># 设置redis能够使用的最大内存</span></span><br><span class="line"><span class="attr">maxmemory</span> <span class="string">512mb</span></span><br><span class="line"><span class="comment"># 日志文件，默认为空，不记录日志，可以指定日志文件名</span></span><br><span class="line"><span class="attr">logfile</span> <span class="string">&quot;redis.log&quot;</span></span><br></pre></td></tr></table></figure><p>启动Redis：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入redis安装目录 </span></span><br><span class="line"><span class="built_in">cd</span> /usr/local/src/redis-7.x.x</span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line">redis-server redis.conf</span><br></pre></td></tr></table></figure><p>停止服务：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 利用redis-cli来执行shutdown命令，即可停止Redis服务，</span></span><br><span class="line"><span class="comment"># 因为之前配置了密码，因此需要通过 -u 来指定密码</span></span><br><span class="line">redis-cli -u root shutdown</span><br></pre></td></tr></table></figure><h2 id="开机自启"><a href="#开机自启" class="headerlink" title="开机自启"></a>开机自启</h2><p>可通过配置来实现开机自启。</p><p>首先，新建一个系统服务文件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/systemd/system/redis.service</span><br></pre></td></tr></table></figure><p>内容如下：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=redis-server</span><br><span class="line"><span class="attr">After</span>=network.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=forking</span><br><span class="line"><span class="attr">ExecStart</span>=/usr/local/bin/redis-server /usr/local/src/redis-<span class="number">7</span>.x.x/redis.conf</span><br><span class="line"><span class="attr">PrivateTmp</span>=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure><p>然后重载系统服务：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><p>现在，可用下面这组命令来操作redis：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">systemctl start redis</span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line">systemctl stop redis</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">systemctl restart redis</span><br><span class="line"><span class="comment"># 查看状态</span></span><br><span class="line">systemctl status redis</span><br></pre></td></tr></table></figure><p>执行下面的命令，可以让redis开机自启：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> redis</span><br></pre></td></tr></table></figure><h1 id="Redis桌面客户端"><a href="#Redis桌面客户端" class="headerlink" title="Redis桌面客户端"></a>Redis桌面客户端</h1><p>安装完成Redis，即可操作Redis，实现数据的CRUD了。这需要用到Redis客户端，包括：</p><ul><li>命令行客户端</li><li>图形化桌面客户端</li><li>编程客户端</li></ul><h2 id="Redis命令行客户端"><a href="#Redis命令行客户端" class="headerlink" title="Redis命令行客户端"></a>Redis命令行客户端</h2><p>Redis安装完成后就自带了命令行客户端：redis-cli，使用方式如下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli [options] [commonds]</span><br></pre></td></tr></table></figure><p>其中常见的options有：</p><ul><li><code>-h 127.0.0.1</code>：指定要连接的redis节点的IP地址，默认是127.0.0.1</li><li><code>-p 6379</code>：指定要连接的redis节点的端口，默认是6379</li><li><code>-a root</code>：指定redis的访问密码 </li></ul><p>其中的commonds就是Redis的操作命令，例如：</p><ul><li><code>ping</code>：与redis服务端做心跳测试，服务端正常会返回<code>pong</code></li></ul><p>不指定commond时，会进入<code>redis-cli</code>的交互控制台。</p><p>Redis默认有16个仓库，编号从0至15.  通过配置文件可以设置仓库数量，但是不超过16，并且不能自定义仓库名称。</p><p>如果是基于redis-cli连接Redis服务，可以通过select命令来选择数据库：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 选择 0号库</span></span><br><span class="line">select 0</span><br></pre></td></tr></table></figure><h2 id="图形化桌面客户端"><a href="#图形化桌面客户端" class="headerlink" title="图形化桌面客户端"></a>图形化桌面客户端</h2><p>常见的图形化桌面客户端有<a href="https://github.com/uglide/RedisDesktopManager" title="源码">RedisDesktopManager源码</a>、<a href="https://github.com/uglide/RedisDesktopManager" title="windows版">RedisDesktopManager的windows安装包</a>、<a href="https://www.jetbrains.com/datagrip/" title="DataGrip">DataGrip</a>等。</p><hr><h1 id="Redis常见命令"><a href="#Redis常见命令" class="headerlink" title="Redis常见命令"></a>Redis常见命令</h1><h2 id="Redis数据结构介绍"><a href="#Redis数据结构介绍" class="headerlink" title="Redis数据结构介绍"></a>Redis数据结构介绍</h2><p>Redis是一个key-value的数据库，key一般是String类型，不过value的类型多种多样：</p><img src="/2022/11/21/55591/image-20221101102706032.png" class="" title="Redis数据结构之value的类型"><p>Redis将操作不同数据类型的命令做了分组，在<a href="https://redis.io/commands" title="官网">官网</a>可以查看到不同的命令，也可以通过Help命令来帮助去查看命令，如<code>help @generic</code>可查看通用的命令。</p><h2 id="Redis-通用命令"><a href="#Redis-通用命令" class="headerlink" title="Redis 通用命令"></a>Redis 通用命令</h2><p>通用指令是部分数据类型的，都可以使用的指令，常见的有：</p><ul><li>KEYS：查看符合模板的所有key</li><li>DEL：删除一个指定的key</li><li>EXISTS：判断key是否存在</li><li>EXPIRE：给一个key设置有效期，有效期到期时该key会被自动删除，单位以秒计</li><li>TTL：查看一个KEY的剩余有效期</li></ul><p>通过help [command] 可以查看一个命令的具体用法，例如：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询keys命令</span></span><br><span class="line"><span class="built_in">help</span> keys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询所有key，在生产环境下，不推荐使用keys命令，因为key过多的情况下，效率不高</span></span><br><span class="line">keys * </span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询以a开头的key</span></span><br><span class="line">keys a*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除单个给定key（name），返回的是成功删除的key数量</span></span><br><span class="line">del name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除多个给定key（k1 k2 k3 k4），返回的是成功删除的key数量</span></span><br><span class="line">del k1 k2 k3 k4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用于检查给定key（age）是否存在，若key存在返回1，否则返回0</span></span><br><span class="line">exists age</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设定给定key（age）的过期时间为10s，</span></span><br><span class="line"><span class="comment"># 设置成功返回1，当key不存在或者不能为key设置过期时间时返回0。</span></span><br><span class="line">expire age 10</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当给定key（age）不存在时，返回-2</span></span><br><span class="line"><span class="comment"># 当给定key（age）存在但没有设置剩余生存时间时，返回-1。否则，以秒为单位，返回key剩余生存时间</span></span><br><span class="line">ttl age</span><br></pre></td></tr></table></figure><h2 id="Redis命令-String命令"><a href="#Redis命令-String命令" class="headerlink" title="Redis命令-String命令"></a>Redis命令-String命令</h2><p>String类型，也就是字符串类型，是Redis中最简单的存储类型。</p><p>其value是字符串，不过根据字符串的格式不同，又可以分为3类：</p><ul><li>string：普通字符串</li><li>int：整数类型，可以做自增、自减操作</li><li>float：浮点类型，可以做自增、自减操作</li></ul><table><thead><tr><th align="center">key</th><th align="center">value</th></tr></thead><tbody><tr><td align="center">name</td><td align="center">Tom</td></tr><tr><td align="center">age</td><td align="center">14</td></tr><tr><td align="center">score</td><td align="center">99.9</td></tr></tbody></table><p>String的常见命令有：</p><ul><li>SET：添加或者修改已经存在的一个String类型的键值对</li><li>GET：根据key获取String类型的value</li><li>MSET：批量添加多个String类型的键值对</li><li>MGET：根据多个key获取多个String类型的value</li><li>INCR：让一个整型的key自增1</li><li>INCRBY:让一个整型的key自增并指定步长</li><li>INCRBYFLOAT：让一个浮点类型的数字自增并指定步长</li><li>SETNX：添加一个String类型的键值对，前提是这个key不存在，否则不执行</li><li>SETEX：添加一个String类型的键值对，并且指定有效期，以秒为单位</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加</span></span><br><span class="line"><span class="built_in">set</span> name Rose</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取  数字值在Redis中以字符串的形式保存</span></span><br><span class="line">get name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改</span></span><br><span class="line"><span class="built_in">set</span> name Jack</span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量添加</span></span><br><span class="line">MSET k1 v1 k2 v2 k3 v3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回所有(一个或多个)key的值。如果有某个key不存在，那么这个key返回特殊值nil</span></span><br><span class="line">MGET name age k1 k2 k3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自增1</span></span><br><span class="line">incr age</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自增2</span></span><br><span class="line">incrby age 2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以增加负数，相当于减</span></span><br><span class="line">incrby age -1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 相当于incr 负数</span></span><br><span class="line">DECR age</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果key不存在，则添加成功，由于name已经存在，所以lisi的操作失败</span></span><br><span class="line">setnx name lisi</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将值value关联到key，并将key的过期时间设为10s，以秒为单位</span></span><br><span class="line">setex name 10 jack</span><br></pre></td></tr></table></figure><h2 id="Redis命令-Key的层级结构"><a href="#Redis命令-Key的层级结构" class="headerlink" title="Redis命令-Key的层级结构"></a>Redis命令-Key的层级结构</h2><p>Redis没有类似MySQL中的Table的概念，可以通过给key添加前缀加以区分不同类型的key，不过这个前缀不是随便加的，有一定的规范。</p><p>Redis的key允许有多个单词形成层级结构，多个单词之间用<code>:</code>隔开，格式如下：</p><p><strong>项目名:业务名:类型:id</strong></p><p>这个格式并非固定，也可以根据自己的需求来删除或添加词条。</p><p>例如项目名称叫group，有user和product两种不同类型的数据，可以这样定义key：</p><ul><li><p>user相关的key：<strong>group:user:1</strong></p></li><li><p>product相关的key：<strong>group:product:1</strong></p></li></ul><p>如果Value是一个Java对象，例如一个User对象，则可以将对象序列化为JSON字符串后存储：</p><table><thead><tr><th align="center">KEY</th><th align="center">VALUE</th></tr></thead><tbody><tr><td align="center">group:user:1</td><td align="center">{“id”:1, “name”: “Jack”, “age”: 21}</td></tr><tr><td align="center">group:product:1</td><td align="center">{“id”:1, “name”: “小米11”, “price”: 4999}</td></tr></tbody></table><p>一旦redis采用这样的方式存储，那么在可视化界面中，redis会以层级结构来进行存储，更加方便Redis获取数据。</p><h2 id="Redis命令-Hash命令"><a href="#Redis命令-Hash命令" class="headerlink" title="Redis命令-Hash命令"></a>Redis命令-Hash命令</h2><p>Hash类型，也叫散列，其value是一个无序字典，类似于Java中的HashMap结构。</p><p>String结构是将对象序列化为JSON字符串后存储，当需要修改对象某个字段时很不方便：</p><img src="/2022/11/21/55591/image-20221101112402112.png" class="" title="String结构"><p>Hash结构可以将对象中的每个字段独立存储，可以针对单个字段做CRUD：</p><img src="/2022/11/21/55591/image-20221101112501113.png" class="" title="Hash结构"><p><strong>Hash类型的常见命令</strong></p><ul><li>HSET key field value：添加或者修改hash类型key的field的值</li><li>HGET key field：获取一个hash类型key的field的值</li><li>HMSET：批量添加多个hash类型key的field的值</li><li>HMGET：批量获取多个hash类型key的field的值</li><li>HGETALL：获取一个hash类型的key中的所有的field和value</li><li>HKEYS：获取一个hash类型的key中的所有的field</li><li>HINCRBY:让一个hash类型key的字段值自增并指定步长</li><li>HSETNX：添加一个hash类型的key的field值，前提是这个field不存在，否则不执行</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加</span></span><br><span class="line">HSET group:user:3 name Lucy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取  数字值在Redis中以字符串的形式保存</span></span><br><span class="line">HGET group:user:3 name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改</span></span><br><span class="line">HSET group:user:3 name John</span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量添加</span></span><br><span class="line">HMSET group:user:4 name LiLei age 20 sex man</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回哈希表中，一个或多个给定字段的值。如果指定的字段不存在于哈希表，返回一个nil值。</span></span><br><span class="line">HMGET group:user:4 name age sex</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以列表形式返回哈希表的字段及字段值。 若key不存在，返回空列表。</span></span><br><span class="line">HGETALL group:user:4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取哈希表中的所有字段</span></span><br><span class="line">HKEYS group:user:4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取哈希表中所有值</span></span><br><span class="line">HVALS group:user:4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 哈希表中的字段值加上指定增量值。增量也可以为负数，相当于对指定字段进行减法操作。</span></span><br><span class="line">HINCRBY  group:user:4 age 2</span><br><span class="line">HINCRBY  group:user:4 age -2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只有在字段sex不存在时，设置哈希表字段的值。</span></span><br><span class="line">HSETNX group:user:3 sex woman</span><br></pre></td></tr></table></figure><h2 id="Redis命令-List命令"><a href="#Redis命令-List命令" class="headerlink" title="Redis命令-List命令"></a>Redis命令-List命令</h2><p>Redis中的List类型与Java中的LinkedList类似，可以看做是一个双向链表结构。<br>既可以支持正向检索和也可以支持反向检索。</p><p>特征也与LinkedList类似：</p><ul><li>有序</li><li>元素可以重复</li><li>插入和删除快</li><li>查询速度一般</li></ul><p>常用来存储一个有序数据，例如：朋友圈点赞列表，评论列表等。</p><p><strong>List的常见命令有：</strong></p><ul><li>LPUSH key element … ：向列表左侧插入一个或多个元素，返回列表的长度</li><li>LPOP key：移除并返回列表左侧的第一个元素，没有则返回nil</li><li>RPUSH key element … ：向列表右侧插入一个或多个元素，返回列表的长度</li><li>RPOP key：移除并返回列表右侧的第一个元素</li><li>LRANGE key star end：返回一段角标范围内的所有元素，其中0表示列表的第一个元素，1表示列表的第二个元素，以此类推。 也可以使用负数下标，-1表示列表的最后一个元素， -2表示列表的倒数第二个元素，以此类推</li><li>BLPOP和BRPOP：与LPOP和RPOP类似，只不过在没有元素时等待指定时间，而不是直接返回nil</li></ul><img src="/2022/11/21/55591/image-20221101114302095.png" class="" title="List结构"><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加  321456</span></span><br><span class="line">LPUSH <span class="built_in">users</span> 1 2 3  <span class="comment"># 3</span></span><br><span class="line">RPUSH <span class="built_in">users</span> 4 5 6  <span class="comment"># 6</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 移除  2145</span></span><br><span class="line">LPOP <span class="built_in">users</span>  <span class="comment"># &quot;3&quot;</span></span><br><span class="line">RPOP <span class="built_in">users</span>  <span class="comment"># &quot;6&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取 </span></span><br><span class="line">LRANGE <span class="built_in">users</span> 1 2  <span class="comment"># &quot;1&quot; &quot;4&quot;</span></span><br></pre></td></tr></table></figure><h2 id="Redis命令-Set命令"><a href="#Redis命令-Set命令" class="headerlink" title="Redis命令-Set命令"></a>Redis命令-Set命令</h2><p>Redis的Set结构与Java中的HashSet类似，可以看做是一个value为null的HashMap。因为也是一个hash表，因此具备与HashSet类似的特征：</p><ul><li>无序</li><li>元素不可重复</li><li>查找快</li><li>支持交集、并集、差集等功能</li></ul><p><strong>Set类型的常见命令</strong></p><ul><li>SADD key member … ：向set中添加一个或多个元素</li><li>SREM key member … : 移除set中的指定元素</li><li>SCARD key： 返回set中元素的个数</li><li>SISMEMBER key member：判断一个元素是否存在于set中</li><li>SMEMBERS：获取set中的所有元素</li><li>SINTER key1 key2 … ：求key1与key2的交集</li><li>SDIFF key1 key2 … ：求key1与key2的差集</li><li>SUNION key1 key2 ..：求key1和key2的并集</li></ul><img src="/2022/11/21/55591/image-20221101150207165.png" class="" title="Set结构"><p>例如两个集合：s1和s2</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加</span></span><br><span class="line">sadd s1 a b c</span><br><span class="line">sadd s2 b c d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询</span></span><br><span class="line">smembers s1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取数量</span></span><br><span class="line">SCARD s1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 移除</span></span><br><span class="line">srem s1 a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断是否存在</span></span><br><span class="line">SISMEMBER s1 a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 求交集</span></span><br><span class="line">SINTER s1 s2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 求s1与s2的不同</span></span><br><span class="line">SDIFF s1 s2</span><br></pre></td></tr></table></figure><h2 id="Redis命令-SortedSet类型"><a href="#Redis命令-SortedSet类型" class="headerlink" title="Redis命令-SortedSet类型"></a>Redis命令-SortedSet类型</h2><p>Redis的SortedSet是一个可排序的set集合，与Java中的TreeSet有些类似，但底层数据结构却差别很大。<br>SortedSet中的每一个元素都带有一个score属性，可以基于score属性对元素排序，底层的实现是一个跳表（SkipList）加hash表。</p><p>SortedSet具备下列特性：</p><ul><li>可排序</li><li>元素不重复</li><li>查询速度快</li></ul><p>因为SortedSet的可排序特性，经常被用来实现排行榜这样的功能。</p><p>SortedSet的常见命令有：</p><ul><li>ZADD key score member：添加一个或多个元素到sorted set ，如果已经存在则更新其score值</li><li>ZREM key member：删除sorted set中的一个指定元素</li><li>ZSCORE key member : 获取sorted set中的指定元素的score值</li><li>ZRANK key member：获取sorted set 中的指定元素的排名</li><li>ZCARD key：获取sorted set中的元素个数</li><li>ZCOUNT key min max：统计score值在给定范围内的所有元素的个数</li><li>ZINCRBY key increment member：让sorted set中的指定元素自增，步长为指定的increment值</li><li>ZRANGE key min max：按照score排序后，获取指定排名范围内的元素</li><li>ZRANGEBYSCORE key min max：按照score排序后，获取指定score范围内的元素</li><li>ZDIFF.ZINTER.ZUNION：求差集.交集.并集</li></ul><p>注意：所有的排名默认都是升序，如果要降序则在命令的Z后面添加REV即可，例如：</p><ul><li><strong>升序</strong>获取sorted set 中的指定元素的排名：ZRANK key member</li><li><strong>降序</strong>获取sorted set 中的指定元素的排名：ZREVRANK key memeber</li></ul><hr><h1 id="Redis的Java客户端-Jedis"><a href="#Redis的Java客户端-Jedis" class="headerlink" title="Redis的Java客户端-Jedis"></a>Redis的Java客户端-Jedis</h1><p>在<a href="https://redis.io/resources/clients/" title="redis官网客户端">Redis官网</a>中提供了各种语言的客户端</p><p>其中<a href="https://redis.io/resources/clients/#java" title="Java客户端">Java客户端</a>也包含很多：</p><p>标记为:heart:的就是推荐使用的java客户端，包括：</p><ul><li>Jedis和Lettuce：这两个主要是提供了Redis命令对应的API，方便操作Redis，而SpringDataRedis又对这两种做了抽象和封装。</li><li>Redisson：是在Redis基础上实现了分布式的可伸缩的java数据结构，例如Map.Queue等，而且支持跨进程的同步机制：Lock.Semaphore等待，比较适合用来实现特殊的功能需求。</li></ul><h2 id="Jedis入门"><a href="#Jedis入门" class="headerlink" title="Jedis入门"></a>Jedis入门</h2><p>0）创建工程：</p><p>1）引入依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--jedis--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--单元测试--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.jupiter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-jupiter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2）建立连接</p><p>新建一个单元测试类，内容如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Jedis jedis;</span><br><span class="line"></span><br><span class="line"><span class="meta">@BeforeEach</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.建立连接</span></span><br><span class="line">    jedis = <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;192.168.1.101&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">    <span class="comment">// 2.设置密码，若redis服务端设置了密码</span></span><br><span class="line">    jedis.auth(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">    <span class="comment">// 3.选择库</span></span><br><span class="line">    jedis.select(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3）测试：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 存入数据</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> jedis.set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;张三&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;result = &quot;</span> + result);</span><br><span class="line">    <span class="comment">// 获取数据</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> jedis.get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testHash</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 插入hash数据</span></span><br><span class="line">    jedis.hset(<span class="string">&quot;user:1&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;Jack&quot;</span>);</span><br><span class="line">    jedis.hset(<span class="string">&quot;user:1&quot;</span>, <span class="string">&quot;age&quot;</span>, <span class="string">&quot;21&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取</span></span><br><span class="line">    Map&lt;String, String&gt; map = jedis.hgetAll(<span class="string">&quot;user:1&quot;</span>);</span><br><span class="line">    System.out.println(map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4）释放资源</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AfterEach</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">tearDown</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (jedis != <span class="literal">null</span>) &#123;</span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Jedis连接池"><a href="#Jedis连接池" class="headerlink" title="Jedis连接池"></a>Jedis连接池</h2><p>Jedis本身是线程不安全的，并且频繁的创建和销毁连接会有性能损耗，因此推荐使用Jedis连接池代替Jedis的直连方式</p><h3 id="创建Jedis的连接池"><a href="#创建Jedis的连接池" class="headerlink" title="创建Jedis的连接池"></a>创建Jedis的连接池</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisConnectionFacotry</span> &#123;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> JedisPool jedisPool;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">static</span> &#123;</span><br><span class="line">         <span class="comment">//配置连接池</span></span><br><span class="line">         <span class="type">JedisPoolConfig</span> <span class="variable">poolConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPoolConfig</span>();</span><br><span class="line">         poolConfig.setMaxTotal(<span class="number">8</span>);</span><br><span class="line">         poolConfig.setMaxIdle(<span class="number">8</span>);</span><br><span class="line">         poolConfig.setMinIdle(<span class="number">0</span>);</span><br><span class="line">         poolConfig.setMaxWaitMillis(<span class="number">1000</span>);</span><br><span class="line">         <span class="comment">//创建连接池对象（poolConfig,host,port,timeout,password）</span></span><br><span class="line">         jedisPool = <span class="keyword">new</span> <span class="title class_">JedisPool</span>(poolConfig,</span><br><span class="line">                 <span class="string">&quot;192.168.1.101&quot;</span>,<span class="number">6379</span>,<span class="number">1000</span>,<span class="string">&quot;root&quot;</span>);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> Jedis <span class="title function_">getJedis</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="keyword">return</span> jedisPool.getResource();</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>代码说明：</strong></p><ul><li><p>JedisConnectionFacotry：工厂设计模式是实际开发中非常常用的一种设计模式，可以使用工厂，降低耦合，如Spring中的Bean的创建，就用到了工厂设计模式</p></li><li><p>静态代码块：随着类的加载而加载，确保只能执行一次，在加载当前工厂类的时候，就可以执行static的操作完成对连接池的初始化</p></li><li><p>最后提供返回连接池中连接的方法</p></li></ul><h3 id="改造原始代码"><a href="#改造原始代码" class="headerlink" title="改造原始代码"></a>改造原始代码</h3><p><strong>代码说明:</strong></p><ul><li>在完成了使用工厂设计模式来完成代码的编写之后，在获得连接时，就可以通过工厂来获得。而不用直接去new对象，降低耦合，并且使用的还是连接池对象。</li><li>当使用了连接池后，当关闭连接其实并不是关闭，而是将Jedis还回连接池的。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@BeforeEach</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//建立连接</span></span><br><span class="line">    <span class="comment">/*jedis = new Jedis(&quot;127.0.0.1&quot;,6379);*/</span></span><br><span class="line">    jedis = JedisConnectionFacotry.getJedis();</span><br><span class="line">     <span class="comment">//选择库</span></span><br><span class="line">    jedis.select(<span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@AfterEach</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">tearDown</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (jedis != <span class="literal">null</span>) &#123;</span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="Redis的Java客户端-SpringDataRedis"><a href="#Redis的Java客户端-SpringDataRedis" class="headerlink" title="Redis的Java客户端-SpringDataRedis"></a>Redis的Java客户端-SpringDataRedis</h1><p>SpringData是Spring中数据操作的模块，包含对各种数据库的集成，其中对Redis的集成模块就叫做SpringDataRedis。</p><ul><li>提供了对不同Redis客户端的整合（Lettuce和Jedis）</li><li>提供了RedisTemplate统一API来操作Redis</li><li>支持Redis的发布订阅模型</li><li>支持Redis哨兵和Redis集群</li><li>支持基于Lettuce的响应式编程</li><li>支持基于JDK、JSON、字符串、Spring对象的数据序列化及反序列化</li><li>支持基于Redis的JDKCollection实现</li></ul><p><a href="https://spring.io/projects/spring-data-redis" title="SpringDataRedis官网">SpringDataRedis</a>中提供了RedisTemplate工具类，其中封装了各种对Redis的操作。并且将不同数据类型的操作API封装到了不同的类型中：</p><table><thead><tr><th align="center">API</th><th align="center">返回值类型</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">redisTemplate.opsForValue()</td><td align="center">ValueOperations</td><td align="center">操作String类型数据</td></tr><tr><td align="center">redisTemplate.opsForHash()</td><td align="center">HashOperations</td><td align="center">操作Hash类型数据</td></tr><tr><td align="center">redisTemplate.opsForList()</td><td align="center">ListOperations</td><td align="center">操作List类型数据</td></tr><tr><td align="center">redisTemplate.opsForSet()</td><td align="center">SetOperations</td><td align="center">操作Set类型数据</td></tr><tr><td align="center">redisTemplate.opsForZSet()</td><td align="center">ZSetOperations</td><td align="center">操作SortedSet类型数据</td></tr><tr><td align="center">redisTemplate</td><td align="center"></td><td align="center">通用命令</td></tr></tbody></table><h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h2><p>SpringBoot已提供了对SpringDataRedis的支持，使用非常简单</p><h3 id="导入pom坐标"><a href="#导入pom坐标" class="headerlink" title="导入pom坐标"></a>导入pom坐标</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.test<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>redis-demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>redis-demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--redis依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--common-pool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--Jackson依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.101</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">lettuce:</span></span><br><span class="line">      <span class="attr">pool:</span></span><br><span class="line">        <span class="attr">max-active:</span> <span class="number">8</span>  <span class="comment">#最大连接</span></span><br><span class="line">        <span class="attr">max-idle:</span> <span class="number">8</span>   <span class="comment">#最大空闲连接</span></span><br><span class="line">        <span class="attr">min-idle:</span> <span class="number">0</span>   <span class="comment">#最小空闲连接</span></span><br><span class="line">        <span class="attr">max-wait:</span> <span class="string">100ms</span> <span class="comment">#连接等待时间</span></span><br></pre></td></tr></table></figure><h3 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RedisDemoApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 写入一条String数据</span></span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;李四&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取string数据</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">name</span> <span class="operator">=</span> redisTemplate.opsForValue().get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>SpringDataRedis的使用步骤：</p><ul><li>引入spring-boot-starter-data-redis依赖</li><li>application.yml配置Redis信息</li><li>注入RedisTemplate</li></ul><h3 id="序列化实践方案"><a href="#序列化实践方案" class="headerlink" title="序列化实践方案"></a>序列化实践方案</h3><p>RedisTemplate可以接收任意Object作为值写入Redis</p><p>只不过写入前会把Object序列化为字节形式，默认是采用JDK序列化，得到的结果是<code>\x01\x02</code>之类的数据。</p><p>缺点：</p><ul><li>可读性差</li><li>内存占用较大</li></ul><p>RedisTemplate的两种序列化实践方案：</p><ul><li><p>方案一：</p><ul><li>自定义RedisTemplate</li><li>修改RedisTemplate的序列化器为GenericJackson2JsonRedisSerializer</li></ul></li><li><p>方案二：</p><ul><li>使用StringRedisTemplate</li><li>写入Redis时，手动把对象序列化为JSON</li><li>读取Redis时，手动把读取到的JSON反序列化为对象</li></ul></li></ul><h4 id="自定义RedisTemplate"><a href="#自定义RedisTemplate" class="headerlink" title="自定义RedisTemplate"></a>自定义RedisTemplate</h4><p>自定义RedisTemplate的序列化方式，代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory connectionFactory)</span>&#123;</span><br><span class="line">        <span class="comment">// 创建RedisTemplate对象</span></span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 设置连接工厂</span></span><br><span class="line">        template.setConnectionFactory(connectionFactory);</span><br><span class="line">        <span class="comment">// 创建JSON序列化工具</span></span><br><span class="line">        <span class="type">GenericJackson2JsonRedisSerializer</span> <span class="variable">jsonRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericJackson2JsonRedisSerializer</span>();</span><br><span class="line">        <span class="comment">// 设置Key的序列化</span></span><br><span class="line">        template.setKeySerializer(RedisSerializer.string());</span><br><span class="line">        template.setHashKeySerializer(RedisSerializer.string());</span><br><span class="line">        <span class="comment">// 设置Value的序列化</span></span><br><span class="line">        template.setValueSerializer(jsonRedisSerializer);</span><br><span class="line">        template.setHashValueSerializer(jsonRedisSerializer);</span><br><span class="line">        <span class="comment">// 返回</span></span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里采用了JSON序列化来代替默认的JDK序列化方式。</p><p>整体可读性有了很大提升，并且能将Java对象自动的序列化为JSON字符串，并且查询时能自动把JSON反序列化为Java对象。不过，其中记录了序列化时对应的class名称，目的是为了查询时实现自动反序列化。这会带来额外的内存开销。</p><h4 id="StringRedisTemplate"><a href="#StringRedisTemplate" class="headerlink" title="StringRedisTemplate"></a>StringRedisTemplate</h4><p>尽管JSON的序列化方式可以满足需求，但仍存在一些问题，为了在反序列化时知道对象的类型，JSON序列化器会将类的class类型写入json结果中，存入Redis，会带来额外的内存开销。</p><p>为了减少内存的消耗，可采用手动序列化的方式，就是不借助默认的序列化器，而是自己来控制序列化的动作，同时，只采用String的序列化器，这样，在存储value时，就不需要在内存中多存储数据，从而节约内存空间。</p><p>这种用法比较普遍，因此SpringDataRedis提供了RedisTemplate的子类：StringRedisTemplate，它的key和value的序列化方式默认就是String方式。</p><p>省去了自定义RedisTemplate的序列化方式的步骤，而是直接使用：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RedisStringTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 写入一条String数据</span></span><br><span class="line">        stringRedisTemplate.opsForValue().set(<span class="string">&quot;verify:phone:1391230xxxx&quot;</span>, <span class="string">&quot;123.00&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取string数据</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">name</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSaveUser</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">        <span class="comment">// 创建对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">25</span>);</span><br><span class="line">        <span class="comment">// 手动序列化</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> mapper.writeValueAsString(user);</span><br><span class="line">        <span class="comment">// 写入数据</span></span><br><span class="line">        stringRedisTemplate.opsForValue().set(<span class="string">&quot;user:200&quot;</span>, json);</span><br><span class="line">        <span class="comment">// 获取数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">jsonUser</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(<span class="string">&quot;user:200&quot;</span>);</span><br><span class="line">        <span class="comment">// 手动反序列化</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> mapper.readValue(jsonUser, User.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;user1 = &quot;</span> + user1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时再看存储的数据，会发现class数据已经不在了，节约了内存空间</p><h2 id="Hash结构操作"><a href="#Hash结构操作" class="headerlink" title="Hash结构操作"></a>Hash结构操作</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RedisStringTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testHash</span><span class="params">()</span> &#123;</span><br><span class="line">        stringRedisTemplate.opsForHash().put(<span class="string">&quot;user:400&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        stringRedisTemplate.opsForHash().put(<span class="string">&quot;user:400&quot;</span>, <span class="string">&quot;age&quot;</span>, <span class="string">&quot;23&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Map&lt;Object, Object&gt; entries = stringRedisTemplate.opsForHash().entries(<span class="string">&quot;user:400&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;entries = &quot;</span> + entries);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL第三方客户端</title>
      <link href="/2022/11/19/56060.html"/>
      <url>/2022/11/19/56060.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL运维篇</title>
      <link href="/2022/11/18/50880.html"/>
      <url>/2022/11/18/50880.html</url>
      
        <content type="html"><![CDATA[<h1 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h1><h2 id="错误日志"><a href="#错误日志" class="headerlink" title="错误日志"></a>错误日志</h2><p>错误日志是 MySQL 中最重要的日志之一，它记录了当 mysqld 启动和停止时，以及服务器在运行过 程中发生任何严重错误时的相关信息。当数据库出现任何故障导致无法正常使用时，建议首先查看此日 志。 该日志是默认开启的，默认存放目录 /var/log/，默认的日志文件名为 mysqld.log 。查看日志 位置：</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL高级篇</title>
      <link href="/2022/11/17/11645.html"/>
      <url>/2022/11/17/11645.html</url>
      
        <content type="html"><![CDATA[<h1 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h1><p>存储引擎就是存储数据、建立索引、更新/查询数据等技术的实现方式 。</p><p>存储引擎是基于表的，而不是基于库的，所以存储引擎也可被称为表类型。</p><p>可在创建表的时候，来指定选择的存储引擎，若未指定将自动选择默认的存储引擎。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 查询当前数据库支持的存储引擎</span><br><span class="line">show engines;</span><br><span class="line">-- 建表时指定存储引擎</span><br><span class="line">CREATE TABLE 表名(</span><br><span class="line">    字段1 字段1类型 [COMMENT 字段1注释],</span><br><span class="line">    ......</span><br><span class="line">    字段n 字段n类型 [COMMENT 字段n注释]</span><br><span class="line">) ENGINE = INNODB [ COMMENT 表注释 ] ;</span><br></pre></td></tr></table></figure><h2 id="存储引擎特点"><a href="#存储引擎特点" class="headerlink" title="存储引擎特点"></a>存储引擎特点</h2><h3 id="InnoDB"><a href="#InnoDB" class="headerlink" title="InnoDB"></a>InnoDB</h3><p>InnoDB是一种兼顾高可靠性和高性能的通用存储引擎，在MySQL 5.5之后，InnoDB是默认的MySQL存储引擎。</p><p><strong>特点：</strong></p><ul><li>DML操作遵循ACID模型，支持事务；</li><li>行级锁，提高并发访问性能；</li><li>支持外键FOREIGN KEY约束，保证数据的完整性和正确性；</li></ul><p><strong>文件：</strong></p><p><code>xxx.ibd</code>：xxx代表的是表名，innoDB引擎的每张表都会对应这样一个表空间文件，存储该表的表结构（frm-早期的 、sdi-新版的）、数据和索引。</p><p>可通过<code>show variables like &#39;innodb_file_per_table&#39;;</code>查询，若该参数开启（ON），代表InnoDB引擎的表，每一张表都对应一个ibd文件。 </p><p>可以使用mysql提供的一个指令<code>ibd2sdi xxx.ibd文件</code>，通过该指令就可以从ibd文件中提取sdi信息，而sdi数据字典信息中就包含该表的表结构。</p><p><strong>逻辑存储结构：</strong></p><img src="/2022/11/17/11645/Snipaste_2022-11-17_12-11-11.png" class="" title="逻辑存储结构"><p><strong>表空间</strong>：InnoDB存储引擎逻辑结构的最高层，ibd文件其实就是表空间文件，表空间中可包含多个Segment段。</p><p><strong>段</strong>：表空间是由各个段组成的， 常见的段有数据段、索引段、回滚段等。InnoDB中对于段的管理，都是引擎自身完成，不需要人为对其控制，一个段中包含多个区。</p><p><strong>区</strong>：区是表空间的单元结构，每个区的大小为1M。 默认情况下，InnoDB存储引擎页大小为16K， 即一个区中一共有64个连续的页。</p><p><strong>页</strong>：页是组成区的最小单元，页也是InnoDB 存储引擎磁盘管理的最小单元，每个页的大小默认为16KB。为了保证页的连续性，InnoDB存储引擎每次从磁盘申请4-5个区。</p><p><strong>行</strong>：InnoDB 存储引擎是面向行的，即数据是按行进行存放的，在每一行中除了定义表时所指定的字段以外，还包含两个隐藏字段。</p><h3 id="MyISAM"><a href="#MyISAM" class="headerlink" title="MyISAM"></a>MyISAM</h3><p>MyISAM是MySQL早期的默认存储引擎。</p><p><strong>特点：</strong></p><ul><li>不支持事务，不支持外键</li><li>支持表锁，不支持行锁</li><li>访问速度快</li></ul><p><strong>文件：</strong></p><ul><li><p><code>xxx.sdi</code>：存储表结构信息</p></li><li><p><code>xxx.MYD</code>：存储数据</p></li><li><p><code>xxx.MYI</code>：存储索引</p></li></ul><h3 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h3><p>Memory引擎的表数据时存储在内存中的，由于受到硬件或断电问题的影响，只能将这些表作为临时表或缓存使用。</p><p><strong>特点：</strong></p><ul><li>内存存放</li><li>hash索引（默认）</li></ul><p><strong>文件：</strong></p><ul><li><code>xxx.sdi</code>：存储表结构信息</li></ul><h3 id="区别及特点"><a href="#区别及特点" class="headerlink" title="区别及特点"></a>区别及特点</h3><table><thead><tr><th align="center">特点</th><th align="center">InnoDB</th><th align="center">MyISAM</th><th align="center">Memory</th></tr></thead><tbody><tr><td align="center">存储限制</td><td align="center">64TB</td><td align="center">有</td><td align="center">有</td></tr><tr><td align="center">事务安全</td><td align="center">支持</td><td align="center">-</td><td align="center">-</td></tr><tr><td align="center">锁机制</td><td align="center">行锁</td><td align="center">表锁</td><td align="center">表锁</td></tr><tr><td align="center">B+tree索引</td><td align="center">支持</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center">Hash索引</td><td align="center">-</td><td align="center">-</td><td align="center">支持</td></tr><tr><td align="center">全文索引</td><td align="center">支持(5.6版本之后)</td><td align="center">支持</td><td align="center">-</td></tr><tr><td align="center">空间使用</td><td align="center">高</td><td align="center">低</td><td align="center">N/A</td></tr><tr><td align="center">内存使用</td><td align="center">高</td><td align="center">低</td><td align="center">中等</td></tr><tr><td align="center">批量插入速度</td><td align="center">低</td><td align="center">高</td><td align="center">高</td></tr><tr><td align="center">支持外键</td><td align="center">支持</td><td align="center">-</td><td align="center">-</td></tr></tbody></table><h2 id="存储引擎选择"><a href="#存储引擎选择" class="headerlink" title="存储引擎选择"></a>存储引擎选择</h2><p>在选择存储引擎时，应根据应用系统的特点选择合适的存储引擎。对于复杂的应用系统，还可根据实际情况选择多种存储引擎进行组合。</p><ul><li>InnoDB：是Mysql的默认存储引擎，支持事务、外键。如果应用对事务的完整性有比较高的要求，在并发条件下要求数据的一致性，数据操作除了插入和查询之外，还包含很多的更新、删除操作，那么InnoDB存储引擎是比较合适的选择。</li><li>MyISAM：如果应用是以读操作和插入操作为主，只有很少的更新和删除操作，并且对事务的完整性、并发性要求不是很高，那么选择这个存储引擎是非常合适的。</li><li>MEMORY：将所有数据保存在内存中，访问速度快，通常用于临时表及缓存。MEMORY的缺陷就是对表的大小有限制，太大的表无法缓存在内存中，而且无法保障数据的安全性。</li></ul><h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><h2 id="索引概述"><a href="#索引概述" class="headerlink" title="索引概述"></a>索引概述</h2><p>索引（index）是帮助MySQL高效获取数据的数据结构（有序）。在数据之外，数据库系统还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用（指向）数据，这样就可以在这些数据结构上实现高级查找算法，这种数据结构就是索引。</p><p>在无索引情况下，就需要从第一行开始扫描，一直扫描到最后一行，称之为全表扫描，性能很低。</p><p><strong>优点：</strong></p><ul><li>提高数据检索的效率，降低数据库的IO成本</li><li>通过索引列对数据进行排序，降低数据排序的成本，降低CPU的消耗。</li></ul><p><strong>缺点：</strong></p><ul><li>索引列也要占用空间。</li><li>索引大大提高了查询效率，同时却也降低更新表的速度， 如对表进行INSERT、UPDATE、DELETE时，效率降低。</li></ul><h2 id="索引结构"><a href="#索引结构" class="headerlink" title="索引结构"></a>索引结构</h2><p>MySQL的索引是在存储引擎层实现的，不同的存储引擎有不同的索引结构，主要包含以下几种：</p><table><thead><tr><th align="center">索引结构</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">B+Tree索引</td><td align="center">最常见的索引类型，大部分引擎都支持B+树索引</td></tr><tr><td align="center">Hash索引</td><td align="center">底层数据结构是用哈希表实现的，只有精确匹配索引列的查询才有效，不支持范围查询</td></tr><tr><td align="center">R-tree（空间索 引）</td><td align="center">空间索引是MyISAM引擎的一个特殊索引类型，主要用于地理空间数据类型，通常使用较少</td></tr><tr><td align="center">Full-text（全文索引）</td><td align="center">是一种通过建立倒排索引，快速匹配文档的方式。类似于Lucene、Solr、ES</td></tr></tbody></table><p>不同的存储引擎对于索引结构的支持</p><table><thead><tr><th align="center">索引</th><th align="center">InnoDB</th><th align="center">MyISAM</th><th align="center">Memory</th></tr></thead><tbody><tr><td align="center">B+Tree索引</td><td align="center">支持</td><td align="center">支持</td><td align="center">支持</td></tr><tr><td align="center">Hash索引</td><td align="center">不支持</td><td align="center">不支持</td><td align="center">支持</td></tr><tr><td align="center">R-tree（空间索 引）</td><td align="center">不支持</td><td align="center">支持</td><td align="center">不支持</td></tr><tr><td align="center">Full-text（全文索引）</td><td align="center">5.6版本之后支持</td><td align="center">支持</td><td align="center">不支持</td></tr></tbody></table><h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>视图（View）是一种虚拟存在的表。视图中的数据并不在数据库中实际存在，行和列数据来自定义视图的查询中使用的表，并且是在使用视图时动态生成的。 通俗的讲，视图只保存了查询的SQL逻辑，不保存查询结果。所以在创建视图的时候，主要的工作就落在创建这条SQL查询语句上。</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE [OR REPLACE] VIEW 视图名称[(列名列表)] AS SELECT语句 [ WITH [CASCADED | LOCAL ] CHECK OPTION ]</span><br><span class="line">-- 演示</span><br><span class="line">create or replace view stu_v_1 as select id,name from student where id &lt;= 10;</span><br></pre></td></tr></table></figure><h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 查看创建视图语句</span><br><span class="line">SHOW CREATE VIEW 视图名称;</span><br><span class="line"># 查看视图数据</span><br><span class="line">SELECT * FROM 视图名称 ...... ;</span><br><span class="line">-- 演示</span><br><span class="line">show create view stu_v_1;</span><br><span class="line">select * from stu_v_1;</span><br><span class="line">select * from stu_v_1 where id &lt; 3;</span><br></pre></td></tr></table></figure><h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 方式一</span><br><span class="line">CREATE [OR REPLACE] VIEW 视图名称[(列名列表)] AS SELECT语句 [ WITH [ CASCADED | LOCAL ] CHECK OPTION ]</span><br><span class="line"># 方式二</span><br><span class="line">ALTER VIEW 视图名称[(列名列表)] AS SELECT语句 [ WITH [ CASCADED | LOCAL ] CHECK OPTION ]</span><br><span class="line">-- 演示</span><br><span class="line">create or replace view stu_v_1 as select id,name,no from student where id &lt;= 10;</span><br><span class="line">alter view stu_v_1 as select id,name from student where id &lt;= 10;</span><br></pre></td></tr></table></figure><h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW [IF EXISTS] 视图名称 [,视图名称] ...</span><br><span class="line">-- 演示</span><br><span class="line">drop view if exists stu_v_1;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL基础篇</title>
      <link href="/2022/11/16/32326.html"/>
      <url>/2022/11/16/32326.html</url>
      
        <content type="html"><![CDATA[<h1 id="MySQL概述"><a href="#MySQL概述" class="headerlink" title="MySQL概述"></a>MySQL概述</h1><h2 id="数据库相关概念"><a href="#数据库相关概念" class="headerlink" title="数据库相关概念"></a>数据库相关概念</h2><table><thead><tr><th align="center">名称</th><th align="center">全称</th><th align="center">简称</th></tr></thead><tbody><tr><td align="center">数据库</td><td align="center">存储数据的仓库，数据是有组织的进行存储</td><td align="center">DataBase（DB）</td></tr><tr><td align="center">数据库管理系统</td><td align="center">操纵和管理数据库的大型软件</td><td align="center">DataBase Management System (DBMS)</td></tr><tr><td align="center">结构化查询语言</td><td align="center">操作关系型数据库的编程语言，定义了一套操作关系型数据库统一标准</td><td align="center">Structured Query Language (SQL)</td></tr></tbody></table><p>可通过<a href="https://db-engines.com/en/ranking/relational+dbms" title="关系型数据库排行查询">DB-Engines Ranking</a>查询目前主流的关系型数据库管理系统的市场占有率排名，常见的关系型数据库管理系统如下：</p><ul><li>Oracle：大型的收费数据库，Oracle公司产品，价格昂贵。 </li><li>MySQL：开源免费的中小型数据库，后来Sun公司收购了MySQL，而Oracle又收购了Sun公司。 目前Oracle推出了收费版本的MySQL，也提供了免费的社区版本。</li><li>SQL Server：Microsoft公司推出的收费的中型数据库，C#、.net等语言常用。</li><li>PostgreSQL：开源免费的中小型数据库。</li><li>DB2：IBM公司的大型收费数据库产品。</li><li>SQLLite：嵌入式的微型数据库。Android内置的数据库。</li><li>MariaDB：开源免费的中小型数据库。是MySQL数据库的另外一个分支、另外一个衍生产品，与 MySQL数据库有很好的兼容性。</li></ul><h2 id="MySQL数据库"><a href="#MySQL数据库" class="headerlink" title="MySQL数据库"></a>MySQL数据库</h2><p><a href="https://www.mysql.com/" title="MySQL官网">MySQL</a>官方提供了两种不同的版本：</p><ul><li>社区版本（MySQL Community Server）免费，MySQL不提供任何技术支持</li><li>商业版本（MySQL Enterprise Edition）收费，可以使用30天，官方提供技术支持</li></ul><hr><h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h1><p>全称Structured Query Language，结构化查询语言。操作关系型数据库的编程语言，定义了一套操作关系型数据库统一标准 。</p><h2 id="SQL通用语法"><a href="#SQL通用语法" class="headerlink" title="SQL通用语法"></a>SQL通用语法</h2><ol><li>SQL语句可以单行或多行书写，以分号结尾。</li><li>SQL语句可以使用空格/缩进来增强语句的可读性。 </li><li>MySQL数据库的SQL语句不区分大小写，关键字建议使用大写。 </li><li>注释： <ul><li>单行注释：<code>-- 注释内容</code>或<code># 注释内容</code></li><li>多行注释：<code>/* 注释内容 */</code></li></ul></li></ol><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>MySQL中的数据类型有很多，主要分为三类：数值类型、字符串类型、日期时间类型。 </p><h3 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h3><table><thead><tr><th align="center">类型</th><th align="center">大小</th><th align="center">有符号范围</th><th align="center">无符号(UNSIGNED)范围</th><th>描述</th></tr></thead><tbody><tr><td align="center">TINYINT</td><td align="center">1byte</td><td align="center">(-128，127)</td><td align="center">(0，255)</td><td>小整数值</td></tr><tr><td align="center">SMALLINT</td><td align="center">2bytes</td><td align="center">(-32768，32767)</td><td align="center">(0，65535)</td><td>大整数值</td></tr><tr><td align="center">MEDIUMINT</td><td align="center">3bytes</td><td align="center">(-8388608，8388607)</td><td align="center">(0，16777215)</td><td>大整数值</td></tr><tr><td align="center">INT/INTEGER</td><td align="center">4bytes</td><td align="center">(-2147483648， 2147483647)</td><td align="center">(0，4294967295)</td><td>大整数值</td></tr><tr><td align="center">BIGINT</td><td align="center">8bytes</td><td align="center">(-2^63  ，  2^63-1)</td><td align="center">(0，2^64-1)</td><td>极大整数值</td></tr><tr><td align="center">FLOAT</td><td align="center">4bytes</td><td align="center">(-3.402823466 E+38， 3.402823466351 E+38)</td><td align="center">0 和 (1.175494351 E-38，3.402823466 E+38)</td><td>单精度浮点数值</td></tr><tr><td align="center">DOUBLE</td><td align="center">8bytes</td><td align="center">(-1.7976931348623157 E+308， 1.7976931348623157 E+308)</td><td align="center">0 和 (2.2250738585072014 E-308， 1.7976931348623157 E+308)</td><td>双精度浮点数值</td></tr><tr><td align="center">DECIMAL</td><td align="center"></td><td align="center">依赖于M（最大位数，精度）和D（小数点位数，标度）的值</td><td align="center">依赖于M（最大位数，精度）和D（小数点位数，标度）的值</td><td>小数值</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE t2 (</span><br><span class="line">age TINYINT UNSIGNED COMMENT &#x27;年龄&#x27;,  -- 年龄字段，不会出现负数，且人的年龄不会太大</span><br><span class="line">score DOUBLE ( 4, 1 ) COMMENT &#x27;分数&#x27;  # 分数字段，总分100分, 最多出现一位小数</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><table><thead><tr><th align="center">类型</th><th align="center">大小</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">CHAR</td><td align="center">0-255 bytes</td><td align="center">定长字符串(需要指定长度)</td></tr><tr><td align="center">VARCHAR</td><td align="center">0-65535 bytes</td><td align="center">变长字符串(需要指定长度)</td></tr><tr><td align="center">TINYBLOB</td><td align="center">0-255 bytes</td><td align="center">不超过255个字符的二进制数据</td></tr><tr><td align="center">TINYTEXT</td><td align="center">0-255 bytes</td><td align="center">短文本字符串</td></tr><tr><td align="center">BLOB</td><td align="center">0-65 535 bytes</td><td align="center">二进制形式的长文本数据</td></tr><tr><td align="center">TEXT</td><td align="center">0-65 535 bytes</td><td align="center">长文本数据</td></tr><tr><td align="center">MEDIUMBLOB</td><td align="center">0-16 777 215 bytes</td><td align="center">二进制形式的中等长度文本数据</td></tr><tr><td align="center">MEDIUMTEXT</td><td align="center">0-16 777 215 bytes</td><td align="center">中等长度文本数据</td></tr><tr><td align="center">LONGBLOB</td><td align="center">0-4 294 967 295 bytes</td><td align="center">二进制形式的极大文本数据</td></tr><tr><td align="center">LONGTEXT</td><td align="center">0-4 294 967 295 bytes</td><td align="center">极大文本数据</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">char与varchar都可以描述字符串，</span><br><span class="line">char是定长字符串，指定长度多长，就占用多少个字符，和字段值的长度无关</span><br><span class="line">varchar是变长字符串，指定的长度为最大占用长度</span><br><span class="line">相对来说，char的性能会更高些</span><br><span class="line">*/</span><br><span class="line">CREATE TABLE t2 (</span><br><span class="line">username varchar(50),  --  用户名，长度不定, 最长不会超过50</span><br><span class="line">gender char(1),  # 性别，存储的值, 不是男,就是女</span><br><span class="line">phone char(11)  # 手机号，固定长度为11</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="日期时间类型"><a href="#日期时间类型" class="headerlink" title="日期时间类型"></a>日期时间类型</h3><table><thead><tr><th>类型</th><th>大小</th><th>范围</th><th>格式</th><th>描述</th></tr></thead><tbody><tr><td>DATE</td><td>3</td><td>1000-01-01 至 9999-12-31</td><td>YYYY-MM-DD</td><td>日期值</td></tr><tr><td>TIME</td><td>3</td><td>-838:59:59 至 838:59:59</td><td>HH:MM:SS</td><td>时间值或持续时间</td></tr><tr><td>YEAR</td><td>1</td><td>1901 至 2155</td><td>YYYY</td><td>年份值</td></tr><tr><td>DATETIME</td><td>8</td><td>1000-01-01 00:00:00 至 9999-12-31 23:59:59</td><td>YYYY-MM-DD HH:MM:SS</td><td>混合日期和时间值</td></tr><tr><td>TIMESTAMP</td><td>4</td><td>1970-01-01 00:00:01 至 2038-01-19 03:14:07</td><td>YYYY-MM-DD HH:MM:SS</td><td>混合日期和时 间值，时间戳</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE t3 (</span><br><span class="line">birthday date,  --  生日字段</span><br><span class="line">createtime datetime  # 创建时间</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h2><table><thead><tr><th align="center">分类</th><th align="center">全称</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">DDL</td><td align="center">Data Definition Language</td><td align="center">数据定义语言，用来定义数据库对象（数据库、表、字段）</td></tr><tr><td align="center">DML</td><td align="center">Data Manipulation Language</td><td align="center">数据操作语言，用来对数据库表中的数据进行增删改</td></tr><tr><td align="center">DQL</td><td align="center">Data Query Language</td><td align="center">数据查询语言，用来查询数据库中表的记录</td></tr><tr><td align="center">DCL</td><td align="center">Data Control Language</td><td align="center">数据控制语言，用来创建数据库用户、控制数据库的访问权限</td></tr></tbody></table><h3 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h3><h4 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 查询所有数据库</span><br><span class="line">show databases;</span><br><span class="line">-- 查询当前数据库</span><br><span class="line">select database();</span><br><span class="line">-- 创建数据库</span><br><span class="line">create database [if not exists] 数据库名 [default charset 字符集] [collate 排序规则];</span><br><span class="line">-- 删除数据库</span><br><span class="line">drop database [ if exists ] 数据库名;</span><br><span class="line">-- 切换数据库</span><br><span class="line">use 数据库名;</span><br></pre></td></tr></table></figure><h4 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h4><h5 id="查询创建"><a href="#查询创建" class="headerlink" title="查询创建"></a>查询创建</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- 查询当前数据库所有表</span><br><span class="line">show tables;</span><br><span class="line">-- 查看指定表结构</span><br><span class="line">desc 表名;</span><br><span class="line">-- 查询指定表的建表语句</span><br><span class="line">show create table 表名;</span><br><span class="line">-- 创建表结构</span><br><span class="line">CREATE TABLE 表名(</span><br><span class="line">    字段1 字段1类型 [COMMENT 字段1注释],</span><br><span class="line">    字段2 字段2类型 [COMMENT 字段2注释],</span><br><span class="line">    ......</span><br><span class="line">    字段n 字段n类型 [COMMENT 字段n注释]</span><br><span class="line">) [COMMENT 表注释];</span><br></pre></td></tr></table></figure><h5 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 添加字段</span><br><span class="line">ALTER TABLE 表名 ADD 字段名 类型 (长度) [ COMMENT 注释 ] [ 约束 ];</span><br><span class="line">-- 修改数据类型</span><br><span class="line">ALTER TABLE 表名 ADD 字段名 类型 (长度) [ COMMENT 注释 ] [ 约束 ];</span><br><span class="line">-- 修改字段名和字段类型</span><br><span class="line">ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型 (长度) [ COMMENT 注释 ] [ 约束 ];</span><br><span class="line">-- 删除字段</span><br><span class="line">ALTER TABLE 表名 DROP 字段名;</span><br><span class="line">-- 修改表名</span><br><span class="line">ALTER TABLE 表名 RENAME TO 新表名;</span><br></pre></td></tr></table></figure><h5 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 删除表</span><br><span class="line">DROP TABLE [ IF EXISTS ] 表名;</span><br><span class="line">-- 删除指定表, 并重新创建表</span><br><span class="line">TRUNCATE TABLE 表名;</span><br></pre></td></tr></table></figure><h3 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h3><h4 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 插入数据时，指定的字段顺序需与值的顺序是一一对应的，字符串和日期型数据应包含在引号中</span><br><span class="line">-- 给指定字段添加数据</span><br><span class="line">INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...);</span><br><span class="line">-- 给全部字段添加数据</span><br><span class="line">INSERT INTO 表名 VALUES (值1, 值2, ...);</span><br><span class="line">-- 批量添加数据</span><br><span class="line">INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...);</span><br><span class="line">INSERT INTO 表名 VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...);</span><br></pre></td></tr></table></figure><h4 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 修改数据</span><br><span class="line">UPDATE 表名 SET 字段名1 = 值1 , 字段名2 = 值2 , .... [ WHERE 条件 ];</span><br></pre></td></tr></table></figure><h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 删除数据</span><br><span class="line">DELETE FROM 表名 [ WHERE 条件 ];</span><br></pre></td></tr></table></figure><h3 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h3><p>DQL查询语句，语法结构如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">字段列表 </span><br><span class="line">FROM</span><br><span class="line">表名列表 </span><br><span class="line">WHERE</span><br><span class="line">条件列表 </span><br><span class="line">GROUP BY</span><br><span class="line">分组字段列表 </span><br><span class="line">HAVING</span><br><span class="line">分组后条件列表 </span><br><span class="line">ORDER BY</span><br><span class="line">排序字段列表 </span><br><span class="line">LIMIT</span><br><span class="line">分页参数</span><br></pre></td></tr></table></figure><h4 id="基本查询"><a href="#基本查询" class="headerlink" title="基本查询"></a>基本查询</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 查询多个字段</span><br><span class="line">SELECT 字段1, 字段2, 字段3 ... FROM 表名;</span><br><span class="line">-- 查询所有字段</span><br><span class="line">SELECT * FROM 表名;</span><br><span class="line">-- 字段设置别名</span><br><span class="line">SELECT 字段1 [ AS 别名1 ] , 字段2 [ AS 别名2 ] ... FROM 表名;</span><br><span class="line">SELECT 字段1 [ 别名1 ] , 字段2 [ 别名2 ] ... FROM 表名;</span><br><span class="line">-- 去除重复记录</span><br><span class="line">SELECT DISTINCT 字段列表 FROM 表名;</span><br></pre></td></tr></table></figure><h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表名 WHERE 条件列表;</span><br></pre></td></tr></table></figure><p>常用的比较运算符如下</p><table><thead><tr><th align="center">比较运算符</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center"><code>&gt;</code></td><td align="center">大于</td></tr><tr><td align="center"><code>&gt;=</code></td><td align="center">大于等于</td></tr><tr><td align="center"><code>&lt;</code></td><td align="center">小于</td></tr><tr><td align="center"><code>&lt;=</code></td><td align="center">小于等于</td></tr><tr><td align="center"><code>=</code></td><td align="center">等于</td></tr><tr><td align="center"><code>&lt;&gt;</code>或<code> !=</code></td><td align="center">不等于</td></tr><tr><td align="center"><code>BETWEEN ... AND ...</code></td><td align="center">在某个范围之内（含最小、最大值）</td></tr><tr><td align="center"><code>IN(...)</code></td><td align="center">在in之后的列表中的值</td></tr><tr><td align="center"><code>LIKE</code>占位符</td><td align="center">模糊匹配（<code>_</code>匹配单个字符， <code>%</code>匹配任意个字符）</td></tr><tr><td align="center"><code>IS NULL</code></td><td align="center">为空</td></tr><tr><td align="center"><code>IS NOT NULL</code></td><td align="center">不为空</td></tr></tbody></table><p>常用的逻辑运算符如下</p><table><thead><tr><th align="center">逻辑运算符</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center"><code>AND</code>或<code>&amp;&amp;</code></td><td align="center">并且（多个条件同时成立）</td></tr><tr><td align="center"><code>OR</code>或`</td><td align="center"></td></tr><tr><td align="center"><code>NOT</code>或<code> !</code></td><td align="center">非 ， 不是</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- 查询年龄等于18的员工</span><br><span class="line">select * from emp where age = 18;</span><br><span class="line">-- 查询有身份证号的员工信息</span><br><span class="line">select * from emp where idcard is not null;</span><br><span class="line">-- 查询年龄不等于18的员工信息</span><br><span class="line">select * from emp where age &lt;&gt; 18;</span><br><span class="line">-- 查询年龄等于18或30或40的员工信息</span><br><span class="line">select * from emp where age = 18 or age = 30 or age = 40;</span><br><span class="line">select * from emp where age in(18,30,40);</span><br><span class="line">-- 查询姓名为两个字的员工信息</span><br><span class="line">select * from emp where name like &#x27;__&#x27;;</span><br><span class="line">-- 查询身份证号最后一位是X的员工信息</span><br><span class="line">select * from emp where idcard like &#x27;%X&#x27;;</span><br></pre></td></tr></table></figure><h4 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h4><p>将一列数据作为一个整体，进行纵向计算， <strong>NULL值不参与所有聚合函数运算</strong>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 聚合函数(字段列表) FROM 表名;</span><br></pre></td></tr></table></figure><p>常见的聚合函数</p><table><thead><tr><th align="center">函数</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center"><code>count</code></td><td align="center">统计数量</td></tr><tr><td align="center"><code>max</code></td><td align="center">最大值</td></tr><tr><td align="center"><code>min</code></td><td align="center">最小值</td></tr><tr><td align="center"><code>avg</code></td><td align="center">平均值</td></tr><tr><td align="center"><code>sum</code></td><td align="center">求和</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 统计总记录数</span><br><span class="line">select count(*) from emp;</span><br><span class="line">select count(1) from emp;</span><br><span class="line">-- 统计idcard字段不为null的记录数</span><br><span class="line">select count(idcard) from emp; </span><br><span class="line">-- 统计男员工的年龄之和</span><br><span class="line">select sum(age) from emp where sex = &#x27;男&#x27;;</span><br></pre></td></tr></table></figure><h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表名 [WHERE 条件] GROUP BY 分组字段名 [HAVING 分组</span><br><span class="line">后过滤条件];</span><br></pre></td></tr></table></figure><p>where与having区别</p><ul><li>执行时机不同：where是分组之前进行过滤，不满足where条件，不参与分组；而having是分组之后对结果进行过滤。</li><li>判断条件不同：where不能对聚合函数进行判断，而having可以。</li></ul><p>注意事项: </p><ul><li>分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义。</li><li>执行顺序：<strong>where &gt; 聚合函数 &gt; having</strong>。</li><li>支持多字段分组，具体语法为 ：<code>group by columnA,columnB</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 根据性别分组，统计男性员工 和 女性员工的数量</span><br><span class="line">select gender, count(*) from emp group by gender;</span><br><span class="line">-- 查询年龄小于45的员工，并根据工作地址分组，获取员工数量大于等于3的工作地址</span><br><span class="line">select workaddress, count(*) address_count from emp where age &lt; 45 group by</span><br><span class="line">workaddress having address_count &gt;= 3;</span><br><span class="line">-- 统计各个工作地址上班的男性及女性员工的数量</span><br><span class="line">select workaddress, gender, count(*) &#x27;数量&#x27; from emp group by gender,workaddress;</span><br></pre></td></tr></table></figure><h4 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表名 ORDER BY 字段1 排序方式1 , 字段2 排序方式2;</span><br></pre></td></tr></table></figure><p>排序方式：</p><ul><li>ASC：升序（默认值）</li><li>DESC： 降序</li></ul><p>注意事项: </p><ul><li> 如果是升序, 可以不指定排序方式ASC；</li><li>如果是多字段排序，当第一个字段值相同时，才会根据第二个字段进行排序；</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 根据年龄对公司的员工进行升序排序</span><br><span class="line">select * from emp order by age asc;</span><br><span class="line">-- 根据入职时间, 对员工进行降序排序</span><br><span class="line">select * from emp order by entrydate desc;</span><br><span class="line">-- 根据年龄对公司的员工进行升序排序，年龄相同，再按照入职时间进行降序排序</span><br><span class="line">select * from emp order by age asc , entrydate desc;</span><br></pre></td></tr></table></figure><h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表名 LIMIT 起始索引, 查询记录数;</span><br></pre></td></tr></table></figure><p>注意事项: </p><ul><li>起始索引从0开始，<em><em>起始索引 = （查询页码 - 1）</em> 每页显示记录数</em>*。</li><li>分页查询是数据库的方言，不同的数据库有不同的实现，MySQL中是<code>LIMIT</code>。</li><li>如果查询的是第一页数据，起始索引可以省略，直接简写为<code>limit 10</code>。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询第1页员工数据，每页展示10条记录</span><br><span class="line">select * from emp limit 0,10;</span><br><span class="line">-- 查询第2页员工数据，每页展示10条记录，(页码-1)*每页展示记录数</span><br><span class="line">select * from emp limit 10,10;</span><br></pre></td></tr></table></figure><h4 id="执行顺序"><a href="#执行顺序" class="headerlink" title="执行顺序"></a>执行顺序</h4><p>DQL语句的执行顺序为：<strong>from … where … group by … having … select … order by … limit …</strong></p><img src="/2022/11/16/32326/Snipaste_2022-11-16_14-43-02.png" class="" title="执行顺序"><h3 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h3><h4 id="管理用户"><a href="#管理用户" class="headerlink" title="管理用户"></a>管理用户</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 查询用户</span><br><span class="line">-- Host代表当前用户访问的主机，User代表访问该数据库的用户名，MySQL中通过Host和User来标识一个用户。</span><br><span class="line">select * from mysql.user;</span><br><span class="line">-- 创建用户</span><br><span class="line">CREATE USER &#x27;用户名&#x27;@&#x27;主机名&#x27; IDENTIFIED BY &#x27;密码&#x27;;</span><br><span class="line">-- 修改用户密码</span><br><span class="line">ALTER USER &#x27;用户名&#x27;@&#x27;主机名&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;新密码&#x27; ;</span><br><span class="line">-- 删除用户</span><br><span class="line">DROP USER &#x27;用户名&#x27;@&#x27;主机名&#x27; ;</span><br></pre></td></tr></table></figure><h4 id="权限控制"><a href="#权限控制" class="headerlink" title="权限控制"></a>权限控制</h4><p>MySQL中定义了很多种权限，可在<a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html">官网</a>查询。常用的如下：</p><table><thead><tr><th align="center">权限</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">ALL，ALL PRIVILEGES</td><td align="center">所有权限</td></tr><tr><td align="center">SELECT</td><td align="center">查询数据</td></tr><tr><td align="center">INSERT</td><td align="center">插入数据</td></tr><tr><td align="center">UPDATE</td><td align="center">修改数据</td></tr><tr><td align="center">DELETE</td><td align="center">删除数据</td></tr><tr><td align="center">ALTER</td><td align="center">修改表</td></tr></tbody></table><p>注意事项: </p><ul><li>多个权限之间，使用逗号分隔。</li><li>授权时，数据库名和表名可以使用<code>*</code>进行通配，代表所有。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 查询权限</span><br><span class="line">SHOW GRANTS FOR &#x27;用户名&#x27;@&#x27;主机名&#x27; ;</span><br><span class="line">-- 授予权限 </span><br><span class="line">GRANT 权限列表 ON 数据库名.表名 TO &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br><span class="line">-- 撤销权限</span><br><span class="line">REVOKE 权限列表 ON 数据库名.表名 FROM &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure><hr><h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h2><p>MySQL中内置了很多字符串函数，常用的如下：</p><table><thead><tr><th align="center">函数</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>CONCAT(S1,S2,...Sn)</code></td><td align="center">字符串拼接，将S1，S2，… Sn拼接成一个字符串</td></tr><tr><td align="center"><code>LOWER(str)</code></td><td align="center">将字符串str全部转为小写</td></tr><tr><td align="center"><code>UPPER(str)</code></td><td align="center">将字符串str全部转为大写</td></tr><tr><td align="center"><code>LPAD(str,n,pad)</code></td><td align="center">左填充，用字符串pad对str的左边进行填充，达到n个字符串长度</td></tr><tr><td align="center"><code>RPAD(str,n,pad)</code></td><td align="center">右填充，用字符串pad对str的右边进行填充，达到n个字符串长度</td></tr><tr><td align="center"><code>TRIM(str)</code></td><td align="center">去掉字符串头部和尾部的空格</td></tr><tr><td align="center"><code>SUBSTRING(str,start,len)</code></td><td align="center">返回从字符串str从start位置起的len个长度的字符串</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-- 字符串拼接</span><br><span class="line">select concat(&#x27;Hello&#x27; , &#x27; MySQL&#x27;);  #Hello MySQL</span><br><span class="line">-- 全部转小写</span><br><span class="line">select lower(&#x27;Hello&#x27;);  #hello</span><br><span class="line">-- 左填充</span><br><span class="line">select lpad(&#x27;01&#x27;, 5, &#x27;-&#x27;);  #---01</span><br><span class="line">-- 右填充</span><br><span class="line">select rpad(&#x27;01&#x27;, 5, &#x27;-&#x27;);  #01---</span><br><span class="line">-- 去除空格</span><br><span class="line">select trim(&#x27;  Hello MySQL  &#x27;);  #Hello MySQL</span><br><span class="line">-- 截取子字符串</span><br><span class="line">select substring(&#x27;Hello MySQL&#x27;,1,5);  #Hello</span><br><span class="line">-- 工号统一为5位数，不足5位数的全部在前面补0</span><br><span class="line">update emp set workno = lpad(workno, 5, &#x27;0&#x27;);</span><br></pre></td></tr></table></figure><h2 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h2><p>MySQL中内置了很多字符串函数，常用的如下：</p><table><thead><tr><th align="center">函数</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>CEIL(x)</code></td><td align="center">向上取整</td></tr><tr><td align="center"><code>FLOOR(x)</code></td><td align="center">向下取整</td></tr><tr><td align="center"><code>MOD(x,y)</code></td><td align="center">返回x/y的模</td></tr><tr><td align="center"><code>RAND()</code></td><td align="center">返回0~1内的随机数</td></tr><tr><td align="center"><code>ROUND(x,y)</code></td><td align="center">求参数x的四舍五入的值，保留y位小数</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- 向上取整</span><br><span class="line">select ceil(1.1);  #2</span><br><span class="line">-- 向下取整</span><br><span class="line">select floor(1.9);  #1</span><br><span class="line">-- 取模</span><br><span class="line">select mod(7,4);  #3</span><br><span class="line">-- 获取随机数</span><br><span class="line">select rand();  #0.8929360200585201</span><br><span class="line">-- 四舍五入</span><br><span class="line">select round(2.344,2);  #2.34</span><br><span class="line">-- 生成六位数的随机验证码，rand()函数乘以1000000，然后舍弃小数部分，如果长度不足6位，补0</span><br><span class="line">select lpad(round(rand()*1000000 , 0), 6, &#x27;0&#x27;);  #035456</span><br></pre></td></tr></table></figure><h2 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h2><p>常见的日期函数如下：</p><table><thead><tr><th align="center">函数</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>CURDATE()</code></td><td align="center">返回当前日期</td></tr><tr><td align="center"><code>CURTIME()</code></td><td align="center">返回当前时间</td></tr><tr><td align="center"><code>NOW()</code></td><td align="center">返回当前日期和时间</td></tr><tr><td align="center"><code>YEAR(date)</code></td><td align="center">获取指定date的年份</td></tr><tr><td align="center"><code>MONTH(date)</code></td><td align="center">获取指定date的月份</td></tr><tr><td align="center"><code>DAY(date)</code></td><td align="center">获取指定date的日期</td></tr><tr><td align="center"><code>DATE_ADD(date, INTERVAL exprtype)</code></td><td align="center">返回一个日期/时间值加上一个时间间隔expr后的时间值</td></tr><tr><td align="center"><code>DATEDIFF(date1,date2)</code></td><td align="center">返回起始时间date1 和 结束时间date2之间的天数</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- 当前日期</span><br><span class="line">select curdate();  #2022-11-16</span><br><span class="line">-- 当前时间</span><br><span class="line">select floor(1.9);  #16:47:10</span><br><span class="line">-- 当前日期和时间</span><br><span class="line">select now();  #2022-11-16 16:47:22</span><br><span class="line">-- 当前年、月、日</span><br><span class="line">select YEAR(now());  #2022</span><br><span class="line">select MONTH(now());  #11</span><br><span class="line">select DAY(now());  #16</span><br><span class="line">-- 增加指定的时间间隔</span><br><span class="line">select date_add(now(), INTERVAL 70 YEAR );  #2092-11-16 16:49:49</span><br><span class="line">-- 获取两个日期相差的天数</span><br><span class="line">select datediff(&#x27;2022-10-01&#x27;, &#x27;2022-12-01&#x27;);  #-61</span><br><span class="line">-- 查询所有员工的入职天数，并根据入职天数倒序排序。</span><br><span class="line">select name,datediff(curdate(),entrydate) from emp order by entrydays desc;</span><br></pre></td></tr></table></figure><h2 id="流程函数"><a href="#流程函数" class="headerlink" title="流程函数"></a>流程函数</h2><p>流程函数可在SQL语句中实现条件筛选，从而提高语句的效率。</p><table><thead><tr><th align="center">函数</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>IF(value , t , f)</code></td><td align="center">如果value为true，则返回t，否则返回f</td></tr><tr><td align="center"><code>IFNULL(value1 , value2)</code></td><td align="center">如果value1不为空，返回value1，否则返回value2</td></tr><tr><td align="center"><code>CASE WHEN [val1] THEN [res1] ...ELSE [default] END</code></td><td align="center">如果val1为true，返回res1，… 否 则返回default默认值</td></tr><tr><td align="center"><code>CASE [expr] WHEN [val1] THEN [res1] ... ELSE [default] END</code></td><td align="center">如果expr的值等于val1，返回 res1，… 否则返回default默认值</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- if</span><br><span class="line">select if(false, &#x27;Ok&#x27;, &#x27;Error&#x27;);  #Error</span><br><span class="line">-- ifnull</span><br><span class="line">select ifnull(&#x27;Ok&#x27;,&#x27;Default&#x27;)  #Ok</span><br><span class="line">select ifnull(&#x27;&#x27;,&#x27;Default&#x27;);  #</span><br><span class="line">select ifnull(null,&#x27;Default&#x27;);  #Default</span><br><span class="line">-- 查询员工姓名和工作地址 (北京/上海 ----&gt; 一线城市 , 其他 ----&gt; 二线城市)</span><br><span class="line">SELECT NAME,(CASE workaddress WHEN &#x27;北京&#x27; THEN &#x27;一线城市&#x27; WHEN &#x27;上海&#x27; THEN &#x27;一线城市&#x27; ELSE &#x27;二线城市&#x27; END ) AS &#x27;工作地址&#x27; FROM emp;</span><br></pre></td></tr></table></figure><hr><h1 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>概念：约束是作用于表中字段上的规则，用于限制存储在表中的数据。</p><p>目的：保证数据库中数据的正确、有效性和完整性。</p><p>分类:</p><table><thead><tr><th align="center">约束</th><th align="center">描述</th><th align="center">关键字</th></tr></thead><tbody><tr><td align="center">非空约束</td><td align="center">限制该字段的数据不能为null</td><td align="center">NOT NULL</td></tr><tr><td align="center">唯一约束</td><td align="center">保证该字段的所有数据都是唯一、不重复的</td><td align="center">UNIQUE</td></tr><tr><td align="center">主键约束</td><td align="center">主键是一行数据的唯一标识，要求非空且唯一</td><td align="center">PRIMARY KEY</td></tr><tr><td align="center">默认约束</td><td align="center">保存数据时，如果未指定该字段的值，则采用默认值</td><td align="center">DEFAULT</td></tr><tr><td align="center">检查约束</td><td align="center">保证字段值满足某一个条件</td><td align="center">CHECK</td></tr><tr><td align="center">外键约束</td><td align="center">用来让两张表的数据之间建立连接，保证数据的一致性和完整性</td><td align="center">FOREIGN KEY</td></tr></tbody></table><p>创建表时添加约束</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tb_user (</span><br><span class="line">id INT AUTO_INCREMENT PRIMARY KEY COMMENT &#x27;ID唯一标识&#x27;,-- 主键，并且自动增长</span><br><span class="line">NAME VARCHAR ( 10 ) NOT NULL UNIQUE COMMENT &#x27;姓名&#x27;,-- 不为空，并且唯一</span><br><span class="line">age INT CHECK ( age &gt; 0 &amp;&amp; age &lt;= 120 ) COMMENT &#x27;年龄&#x27;,-- 大于0，并且小于等于120</span><br><span class="line">STATUS CHAR ( 1 ) DEFAULT &#x27;1&#x27; COMMENT &#x27;状态&#x27;,-- 如果没有指定该值，默认为1</span><br><span class="line">gender CHAR ( 1 ) COMMENT &#x27;性别&#x27; </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>修改约束</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 modify 字段名 数据类型 not null;  -- 添加非空约束</span><br><span class="line">alter table 表名 modify 字段名 数据类型;  -- 删除非空约束</span><br><span class="line"></span><br><span class="line">alter table 表名 modify 字段名 数据类型 unique;  -- 添加唯一约束</span><br><span class="line">alter table 表名 drop index 字段名;  -- 删除唯一约束</span><br><span class="line"></span><br><span class="line">alter table 表名 add primary key (字段名);  -- 添加主键约束</span><br><span class="line">alter table 表名 drop primary key;  -- 删除主键约束</span><br><span class="line"></span><br><span class="line">alter table 表名 alter 列名 set default 默认值;  -- 添加默认约束</span><br><span class="line">alter table 表名 alter 列名 drop default;  -- 删除默认约束</span><br><span class="line"></span><br><span class="line">alter table 表名 change 列名 新列名 数据类型 auto_increment;  -- 添加自增</span><br><span class="line">alter table 表名 change 列名 新列名 数据类型;  -- 删除自增</span><br></pre></td></tr></table></figure><h2 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h2><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 添加外键</span><br><span class="line">CREATE TABLE 表名(</span><br><span class="line">字段名 数据类型,</span><br><span class="line">...</span><br><span class="line">[CONSTRAINT] [外键名称] FOREIGN KEY (外键字段名) REFERENCES 主表 (主表列名)</span><br><span class="line">);</span><br><span class="line">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名) REFERENCES 主表 (主表列名);</span><br><span class="line">-- 删除外键</span><br><span class="line">ALTER TABLE 表名 DROP FOREIGN KEY 外键名称;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 为emp表的dept_id字段添加外键约束，关联dept表的主键id</span><br><span class="line">alter table emp add constraint fk_emp_dept_id foreign key (dept_id) references dept(id);</span><br><span class="line">-- 删除emp表的外键fk_emp_dept_id</span><br><span class="line">alter table emp drop foreign key fk_emp_dept_id;</span><br></pre></td></tr></table></figure><h3 id="删除-更新行为"><a href="#删除-更新行为" class="headerlink" title="删除/更新行为"></a>删除/更新行为</h3><p>添加外键之后，删除父表数据时产生的约束行为，称为删除/更新行为。具体的删除/更新行为有以下几种：</p><table><thead><tr><th align="center">行为</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">NO ACTION</td><td align="center">父表删除/更新对应记录时，先检查该记录是否有对应外键，若有则不允许删除/更新。默认行为</td></tr><tr><td align="center">RESTRICT</td><td align="center">父表删除/更新对应记录时，先检查该记录是否有对应外键，若有则不允许删除/更新。默认行为</td></tr><tr><td align="center">CASCADE</td><td align="center">父表删除/更新对应记录时，先检查该记录是否有对应外键，若有则也删除/更新外键在子表中的记录。</td></tr><tr><td align="center">SET NULL</td><td align="center">父表删除/更新对应记录时，先检查该记录是否有对应外键，若有则设置子表中该外键值为null（要求该外键允许设置为null）。</td></tr><tr><td align="center">SET DEFAULT</td><td align="center">父表有变更时，子表将外键列设置成一个默认的值 (Innodb不支持)</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- CASCADE</span><br><span class="line">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段) REFERENCES 主表名 (主表字段名) ON UPDATE CASCADE ON DELETE CASCADE;</span><br><span class="line">-- SET NULL</span><br><span class="line">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段) REFERENCES 主表名 (主表字段名) ON UPDATE set null ON DELETE set null ;</span><br></pre></td></tr></table></figure><hr><h1 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h1><h2 id="多表关系"><a href="#多表关系" class="headerlink" title="多表关系"></a>多表关系</h2><table><thead><tr><th align="center">关系</th><th align="center">实现</th><th align="center">案例</th></tr></thead><tbody><tr><td align="center">一对一</td><td align="center">任意一方加入外键，关联另外一方的主键，并设置外键为唯一</td><td align="center">用户与用户详情的关系</td></tr><tr><td align="center">一对多</td><td align="center">多的一方建立外键，指向一的一方的主键</td><td align="center">部门与员工的关系，一个部门对应多个员工，一个员工对应一个部门</td></tr><tr><td align="center">多对多</td><td align="center">建立第三张中间表，中间表至少包含两个外键，分别关联两方主键</td><td align="center">学生与课程的关系，一个学生可以选修多门课程，一门课程也可以供多个学生选择</td></tr></tbody></table><h2 id="多表查询分类"><a href="#多表查询分类" class="headerlink" title="多表查询分类"></a>多表查询分类</h2><ul><li><p>连接查询</p><ul><li>内连接：相当于查询A、B交集部分数据</li><li>外连接：<ul><li>左外连接：查询左表所有数据，以及两张表交集部分数据</li><li>右外连接：查询右表所有数据，以及两张表交集部分数据</li></ul></li><li>自连接：当前表与自身的连接查询，自连接必须使用表别名 </li></ul></li><li><p>子查询</p></li></ul><img src="/2022/11/16/32326/Visual_SQL_JOINS_orig.jpg" class="" title="连接查询分类"><h2 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h2><p>内连接的语法分为两种：隐式内连接、显式内连接。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 隐式内连接</span><br><span class="line">SELECT 字段列表 FROM 表1 , 表2 WHERE 条件 ... ;</span><br><span class="line">-- 显式内连接</span><br><span class="line">SELECT 字段列表 FROM 表1 [ INNER ] JOIN 表2 ON 连接条件 ... ;</span><br><span class="line">-- 查询每一个员工的姓名及关联的部门名称</span><br><span class="line">-- 为表起别名，简化SQL编写，表起别名后，不能再使用表名来指定对应的字段，只能使用别名来指定字段</span><br><span class="line">select e.name,d.name from emp e , dept d where e.dept_id = d.id;</span><br><span class="line">select e.name,d.name from emp e join dept d on e.dept_id = d.id;</span><br><span class="line">-- 查询年龄小于30岁的员工的姓名、职位、部门信息</span><br><span class="line">select e.name , e.job , d.name from emp e inner join dept d on e.dept_id = d.id where e.age &lt; 30;</span><br></pre></td></tr></table></figure><h2 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h2><p>外连接分为两种，分别是：左外连接和右外连接。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 左外连接，相当于查询表1(左表)的所有数据，也包含表1和表2交集部分的数据。</span><br><span class="line">SELECT 字段列表 FROM 表1 LEFT [ OUTER ] JOIN 表2 ON 条件 ... ;</span><br><span class="line">-- 右外连接，相当于查询表2(右表)的所有数据，也包含表1和表2交集部分的数据。</span><br><span class="line">SELECT 字段列表 FROM 表1 RIGHT [ OUTER ] JOIN 表2 ON 条件 ... ;</span><br><span class="line">-- 查询emp表的所有数据, 和对应的部门信息</span><br><span class="line">select e.*, d.name from emp e left outer join dept d on e.dept_id = d.id;</span><br><span class="line">-- 查询dept表的所有数据, 和对应的员工信息</span><br><span class="line">select d.*, e.* from emp e right outer join dept d on e.dept_id = d.id;</span><br></pre></td></tr></table></figure><h2 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h2><h3 id="自连接查询"><a href="#自连接查询" class="headerlink" title="自连接查询"></a>自连接查询</h3><p>自连接查询，即当前表与自身的连接查询，也就是把一张表连接查询多次，关键点在于虚拟化出一张表给一个别名。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 自连接</span><br><span class="line">SELECT 字段列表 FROM 表A 别名A JOIN 表A 别名B ON 条件 ... ;</span><br><span class="line">-- 查询员工及其所属领导的名字</span><br><span class="line">select a.name , b.name from emp a , emp b where a.managerid = b.id;</span><br><span class="line">-- 查询所有员工 emp 及其领导的名字 emp , 如果员工没有领导, 也需要查询出来</span><br><span class="line">select a.name &#x27;员工&#x27;, b.name &#x27;领导&#x27; from emp a left join emp b on a.managerid = b.id;</span><br></pre></td></tr></table></figure><h3 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h3><p>union查询，就是将多次查询的结果合并起来，形成一个新的查询结果集。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表A ...</span><br><span class="line">UNION [ ALL ]</span><br><span class="line">SELECT 字段列表 FROM 表B ....;</span><br></pre></td></tr></table></figure><p>注意：</p><ul><li>对于联合查询的多张表的列数必须保持一致，字段类型也需要保持一致。 </li><li><code>union all</code>会将全部的数据直接合并在一起，<code>union</code>会对合并之后的数据去重。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询薪资低于5000的员工和年龄大于50岁的员工，并去重</span><br><span class="line">select * from emp where salary &lt; 5000</span><br><span class="line">union all</span><br><span class="line">select * from emp where age &gt; 50;</span><br></pre></td></tr></table></figure><h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>SQL语句中嵌套SELECT语句，称为嵌套查询，又称子查询。</p><p>子查询外部的语句可以是<code>INSERT / UPDATE / DELETE / SELECT</code>的任何一个。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM t1 WHERE column1 = ( SELECT column1 FROM t2 );</span><br></pre></td></tr></table></figure><p>根据子查询结果不同，分为：</p><ul><li>标量子查询（子查询结果为单个值）</li><li>列子查询（子查询结果为一列）</li><li>行子查询（子查询结果为一行）</li><li>表子查询（子查询结果为多行多列）</li></ul><p>根据子查询位置，分为：</p><ul><li>WHERE之后</li><li>FROM之后</li><li>SELECT之后</li></ul><h3 id="标量子查询"><a href="#标量子查询" class="headerlink" title="标量子查询"></a>标量子查询</h3><p>子查询返回的结果是单个值（数字、字符串、日期等），最简单的形式，这种子查询称为标量子查询。 </p><p>常用的操作符：<code>= &lt;&gt; &gt; &gt;= &lt; &lt;=</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询&quot;销售部&quot;的所有员工信息</span><br><span class="line">select * from emp where dept_id = (select id from dept where name = &#x27;销售部&#x27;);</span><br><span class="line">-- 查询在&quot;张三&quot;入职之后的员工信息</span><br><span class="line">select * from emp where entrydate &gt; (select entrydate from emp where name = &#x27;张三&#x27;);</span><br></pre></td></tr></table></figure><h3 id="列子查询"><a href="#列子查询" class="headerlink" title="列子查询"></a>列子查询</h3><p>子查询返回的结果是一列（可以是多行），这种子查询称为列子查询。 </p><p>常用的操作符：<code>IN 、NOT IN 、 ANY 、SOME 、 ALL</code></p><table><thead><tr><th align="center">操作符</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><code>IN</code></td><td align="center">在指定的集合范围之内，多选一</td></tr><tr><td align="center"><code>NOT IN</code></td><td align="center">不在指定的集合范围之内</td></tr><tr><td align="center"><code>ANY</code></td><td align="center">子查询返回列表中，有任意一个满足即可</td></tr><tr><td align="center"><code>SOME</code></td><td align="center">与ANY等同，使用SOME的地方都可以使用ANY</td></tr><tr><td align="center"><code>ALL</code></td><td align="center">子查询返回列表的所有值都必须满足</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 查询 &quot;销售部&quot; 和 &quot;市场部&quot; 的所有员工信息</span><br><span class="line">select * from emp where dept_id in (select id from dept where name = &#x27;销售部&#x27; or name = &#x27;市场部&#x27;);</span><br><span class="line">-- 查询比 财务部 所有人工资都高的员工信息</span><br><span class="line">select * from emp where salary &gt; all ( select salary from emp where dept_id = (select id from dept where name = &#x27;财务部&#x27;) );</span><br><span class="line">-- 查询比研发部其中任意一人工资高的员工信息</span><br><span class="line">select * from emp where salary &gt; any ( select salary from emp where dept_id = (select id from dept where name = &#x27;研发部&#x27;) );</span><br></pre></td></tr></table></figure><h3 id="行子查询"><a href="#行子查询" class="headerlink" title="行子查询"></a>行子查询</h3><p>子查询返回的结果是一行（可以是多列），这种子查询称为行子查询。 </p><p>常用的操作符：<code>= 、&lt;&gt; 、IN 、NOT IN</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 查询与 &quot;张三&quot; 的薪资及直属领导相同的员工信息</span><br><span class="line">select * from emp where (salary,managerid) = (select salary, managerid from emp where name = &#x27;张三&#x27;);</span><br></pre></td></tr></table></figure><h3 id="表子查询"><a href="#表子查询" class="headerlink" title="表子查询"></a>表子查询</h3><p>子查询返回的结果是多行多列，这种子查询称为表子查询。 </p><p>常用的操作符：<code>IN</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询与 &quot;张三&quot; , &quot;李四&quot; 的职位和薪资相同的员工信息</span><br><span class="line">select * from emp where (job,salary) in ( select job, salary from emp where name = &#x27;张三&#x27; or name = &#x27;李四&#x27; );</span><br><span class="line">-- 查询入职日期是 &quot;2020-01-01&quot; 之后的员工信息 , 及其部门信息</span><br><span class="line">select e.*, d.* from (select * from emp where entrydate &gt; &#x27;2020-01-01&#x27;) e left join dept d on e.dept_id = d.id ;</span><br></pre></td></tr></table></figure><hr><h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><h2 id="事务简介"><a href="#事务简介" class="headerlink" title="事务简介"></a>事务简介</h2><p>事务是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向系统提交或撤销操作请求，即这些操作要么同时成功，要么同时失败。</p><h2 id="事务操作"><a href="#事务操作" class="headerlink" title="事务操作"></a>事务操作</h2><h3 id="控制事务"><a href="#控制事务" class="headerlink" title="控制事务"></a>控制事务</h3><p><strong>方式一：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 查看/设置事务提交方式</span><br><span class="line">SELECT @@autocommit;</span><br><span class="line">SET @@autocommit = 0;</span><br><span class="line">-- 提交事务</span><br><span class="line">COMMIT;</span><br><span class="line">-- 回滚事务</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure><p>上述的这种方式是修改了事务的自动提交行为，把默认的自动提交修改为了手动提交，此时执行的DML语句不会提交，需要手动的执行commit进行提交。</p><p><strong>方式二：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 开启事务</span><br><span class="line">START TRANSACTION 或 BEGIN ;</span><br><span class="line">-- 提交事务</span><br><span class="line">COMMIT;</span><br><span class="line">-- 回滚事务</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure><h2 id="事务四大特性"><a href="#事务四大特性" class="headerlink" title="事务四大特性"></a>事务四大特性</h2><p>事务的四大特性，简称ACID。</p><ul><li>原子性（Atomicity）：事务是不可分割的最小操作单元，要么全部成功，要么全部失败。</li><li>一致性（Consistency）：事务完成时，必须使所有的数据都保持一致状态。</li><li>隔离性（Isolation）：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立 环境下运行。</li><li>持久性（Durability）：事务一旦提交或回滚，它对数据库中的数据的改变就是永久的。 </li></ul><h2 id="并发事务问题"><a href="#并发事务问题" class="headerlink" title="并发事务问题"></a>并发事务问题</h2><h3 id="赃读"><a href="#赃读" class="headerlink" title="赃读"></a>赃读</h3><p>一个事务读到另外一个事务还没有提交的数据。</p><img src="/2022/11/16/32326/Snipaste_2022-11-16_15-44-02.png" class="" title="赃读"><h3 id="不可重复读"><a href="#不可重复读" class="headerlink" title="不可重复读"></a>不可重复读</h3><p>一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重复读。</p><img src="/2022/11/16/32326/Snipaste_2022-11-16_15-44-03.png" class="" title="不可重复读"><h3 id="幻读"><a href="#幻读" class="headerlink" title="幻读"></a>幻读</h3><p>一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时，又发现这行数据已经存在，好像出现了“幻影”。</p><img src="/2022/11/16/32326/Snipaste_2022-11-16_15-44-05.png" class="" title="幻读"><h2 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h2><p>为了解决并发事务所引发的问题，在数据库中引入了事务隔离级别。主要有以下几种：</p><table><thead><tr><th align="center">隔离级别</th><th align="center">脏读</th><th align="center">不可重复读</th><th align="center">幻读</th></tr></thead><tbody><tr><td align="center"><code>Read uncommitted</code></td><td align="center">√</td><td align="center">√</td><td align="center">√</td></tr><tr><td align="center"><code>Read committed</code></td><td align="center">×</td><td align="center">√</td><td align="center">√</td></tr><tr><td align="center"><code>Repeatable Read</code>(默认)</td><td align="center">×</td><td align="center">×</td><td align="center">√</td></tr><tr><td align="center"><code>Serializable</code></td><td align="center">×</td><td align="center">×</td><td align="center">×</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查看事务隔离级别</span><br><span class="line">SELECT @@TRANSACTION_ISOLATION;</span><br><span class="line">-- 设置事务隔离级别，事务隔离级别越高，数据越安全，但是性能越低。</span><br><span class="line">SET [ SESSION | GLOBAL ] TRANSACTION ISOLATION LEVEL &#123; READ UNCOMMITTED | READ COMMITTED | REPEATABLE READ | SERIALIZABLE &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL安装与配置</title>
      <link href="/2022/11/15/22560.html"/>
      <url>/2022/11/15/22560.html</url>
      
        <content type="html"><![CDATA[<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p>点击下面的链接：<br><a href="https://dev.mysql.com/downloads/" title="MYSQL下载地址">https://dev.mysql.com/downloads/</a></p><p>选择要下载的安装包类型</p><ul><li>MySQL Community Server，压缩包类型</li><li>MySQL Installer for Windows，windows安装包类型</li></ul><p>本文档以<strong>压缩包类型</strong>进行介绍</p><p>选择和<strong>系统位数</strong>相对应的版本，点击右边的<code>Download</code>，此时会进到另一个页面，不用理会上面的登录和注册按钮，直接点击<code>No thanks, just start my download.</code>即可下载。</p><hr><h1 id="安装-解压"><a href="#安装-解压" class="headerlink" title="安装(解压)"></a>安装(解压)</h1><p>下载完成后得到的是压缩包文件，将其解压，就可得到MySQL的软件本体(就是一个文件夹)，可以把它放在想安装的位置。</p><hr><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><h2 id="添加环境变量"><a href="#添加环境变量" class="headerlink" title="添加环境变量"></a>添加环境变量</h2><p>环境变量中有很多选项，这里只用到<code>Path</code>这个参数。</p><p>在<code>系统变量</code>中新建<code>MYSQL_HOME</code>变量名，变量值为解压后的文件夹路径。</p><p>在<code>系统变量</code>中找到并<strong>双击</strong><code>Path</code>，添加变量值<code>%MYSQL_HOME%\bin</code>。</p><p>最后点击确定。</p><p><strong>验证是否添加成功</strong></p><p>选择<code>命令提示符(管理员)</code>，在终端中输入<code>mysql</code>，回车。<br>如果提示<code>Can&#39;t connect to MySQL server on &#39;localhost&#39;</code>则证明添加成功；<br>如果提示<code>mysql不是内部或外部命令，也不是可运行的程序或批处理文件</code>则表示添加失败，需重新检查步骤并重试。</p><hr><h2 id="新建配置文件"><a href="#新建配置文件" class="headerlink" title="新建配置文件"></a>新建配置文件</h2><p>新建一个文本文件，内容如下：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 5.X</span></span><br><span class="line"><span class="section">[mysql]</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8</span><br><span class="line"></span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">character-set-server</span>=utf8</span><br><span class="line"><span class="attr">default-storage-engine</span>=INNODB</span><br><span class="line"><span class="attr">sql_mode</span>=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.X</span></span><br><span class="line"><span class="section">[mysql]</span></span><br><span class="line"><span class="attr">default-character-set</span>=UTF8MB4</span><br><span class="line"></span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line"><span class="attr">character-set-server</span>=UTF8MB4</span><br><span class="line"><span class="attr">default-storage-engine</span>=INNODB</span><br><span class="line"><span class="comment">#datadir=d:/soft/mysql-8.0.31-winx64/mysql_data  # 可指定数据库文件存放位置，默认在安装包内</span></span><br><span class="line"><span class="attr">sql_mode</span>=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION</span><br></pre></td></tr></table></figure><p>将上面的文本文件另存为文件名叫<code>my.ini</code>，存放的路径为MySQL的<code>根目录</code>。</p><hr><h2 id="初始化MySQL"><a href="#初始化MySQL" class="headerlink" title="初始化MySQL"></a>初始化MySQL</h2><p>在终端中输入<code>mysqld --initialize-insecure</code>，回车，稍微等待一会，如果没有出现报错信息则证明data目录初始化没有问题，此时再查看MySQL目录下已经有data目录生成。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize # 该命令会生成一个随机密码。密码保存在Mysql日志文件中，搜索temporary password。</span><br><span class="line">mysqld --initialize-insecure # 可以不生成随机密码，设置数据库空密码。</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">以上任选一种即可，但第2种方式，需将sql_mode中NO_AUTO_CREATE_USER删除</span></span><br></pre></td></tr></table></figure><hr><h2 id="注册MySQL服务"><a href="#注册MySQL服务" class="headerlink" title="注册MySQL服务"></a>注册MySQL服务</h2><p>在终端中输入<code>mysqld -install</code>，回车。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld -install</span><br></pre></td></tr></table></figure><p>现在计算机上已经安装好了MySQL服务，可通过<code>services.msc</code>管理服务。</p><hr><h2 id="启动MySQL服务"><a href="#启动MySQL服务" class="headerlink" title="启动MySQL服务"></a>启动MySQL服务</h2><p>在终端中输入<code>net start mysql</code>，回车。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net start mysql  // 启动mysql服务</span><br><span class="line">    </span><br><span class="line">net stop mysql  // 停止mysql服务</span><br></pre></td></tr></table></figure><hr><h2 id="修改默认账户密码"><a href="#修改默认账户密码" class="headerlink" title="修改默认账户密码"></a>修改默认账户密码</h2><p>在终端中输入<code>mysqladmin -u用户名 -p随机密码 password 新密码</code>，这里的<code>随机密码</code>就是指在data目录中后缀名为err的文件中查找password发现的随机登录密码，即可修改密码。</p><p>也可在登录mysql后修改密码。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin -u用户名 -p旧密码 password 新密码</span><br><span class="line"></span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;root&#x27;;</span><br><span class="line">SET PASSWORD FOR root@localhost = &#x27;root&#x27;;</span><br><span class="line">alter user user() identified by &#x27;root&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">UPDATE mysql.user set authentication_string = PASSWORD (&quot;rootpwd) WHERE User = &quot;root&quot; and Host=&quot;localhost&quot;;  # mysql 8已失效</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><hr><h3 id="允许远程登录"><a href="#允许远程登录" class="headerlink" title="允许远程登录"></a>允许远程登录</h3><p>默认情况下Mysql中所有的用户都只能本机访问，可通过以下两种途径修改</p><ul><li>把需要远程访问的用户的host字段值改成%。</li><li>新增一个用户，host字段值为%，赋予所有权限。</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置远程登录（8前）</span></span><br><span class="line">grant all privileges on *.* to &#x27;root&#x27;@&#x27;%&#x27; identified by &#x27;root&#x27; with grant option;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置远程登录（8后）</span></span><br><span class="line">CREATE USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;root&#x27;; </span><br><span class="line">GRANT ALL ON *.* TO &#x27;root&#x27;@&#x27;%&#x27;; </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;root&#x27;</span>; 使用mysql8默认加密方式</span></span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;root&#x27;; # 使用mysql_native_password加密方式</span><br></pre></td></tr></table></figure><hr><h1 id="登录MySQL"><a href="#登录MySQL" class="headerlink" title="登录MySQL"></a>登录MySQL</h1><p>在终端中输入，<code>mysql -uroot -proot</code>，回车，出现下图且左下角为<code>mysql&gt;</code>，则登录成功。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -proot</span><br></pre></td></tr></table></figure><p>退出mysql：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br><span class="line">quit</span><br></pre></td></tr></table></figure><p>登录参数：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u用户名 -p密码 -h要连接的mysql服务器的ip地址(默认127.0.0.1) -P端口号(默认3306)</span><br></pre></td></tr></table></figure><hr><h1 id="卸载MySQL"><a href="#卸载MySQL" class="headerlink" title="卸载MySQL"></a>卸载MySQL</h1><ol><li>关闭服务，在终端中输入如下命令</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net stop mysql</span><br></pre></td></tr></table></figure><ol start="2"><li>删除服务，在终端中输入如下命令</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld -remove mysql</span><br></pre></td></tr></table></figure><ol start="3"><li>最后删除MySQL目录及相关的环境变量</li></ol>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客搭建及主题配置</title>
      <link href="/2022/10/26/56377.html"/>
      <url>/2022/10/26/56377.html</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo博客"><a href="#Hexo博客" class="headerlink" title="Hexo博客"></a>Hexo博客</h1><p><a href="https://hexo.io/zh-cn/" title="Hexo博客中文网站">Hexo</a>是一个快速、简洁且高效的博客框架。Hexo 使用Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p><p>快速使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line">cd blog</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><h2 id="Hexo的安装"><a href="#Hexo的安装" class="headerlink" title="Hexo的安装"></a>Hexo的安装</h2><p>安装Hexo相当简单，只需要先安装下列应用程序即可：</p><ul><li>Node.js (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本)</li><li>Git</li></ul><p>所有必备的应用程序安装完成后，即可使用npm安装 Hexo。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h2 id="Hexo的建站"><a href="#Hexo的建站" class="headerlink" title="Hexo的建站"></a>Hexo的建站</h2><p>安装 Hexo 完成后，执行下列命令，Hexo 将会在指定文件夹中新建所需要的文件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br><span class="line">cd &lt;folder&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>新建完成后，指定文件夹的目录如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure><p>目录及文件说明：</p><ul><li><code>_config.yml</code>：网站的配置信息，可在此配置大部分的参数。</li><li><code>package.json</code>：应用程序的信息。</li><li><code>scaffolds</code>：模版文件夹。新建文章时，Hexo会根据scaffold来建立文件。</li><li><code>source</code>：资源文件夹是存放用户资源的地方。除 <code>_posts</code>文件夹之外，开头命名为<code>_</code>的文件或文件夹和隐藏的文件将会被忽略。</li><li><code>themes</code>：主题文件夹。</li></ul><h2 id="Hexo的常用配置"><a href="#Hexo的常用配置" class="headerlink" title="Hexo的常用配置"></a>Hexo的常用配置</h2><p>可在<code> _config.yml</code>中修改大部分的配置。</p><h3 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h3><table><thead><tr><th align="center">参数</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">title</td><td align="center">网站标题</td></tr><tr><td align="center">subtitle</td><td align="center">网站副标题</td></tr><tr><td align="center">description</td><td align="center">网站描述</td></tr><tr><td align="center">keywords</td><td align="center">网站的关键词。支持多个关键词</td></tr><tr><td align="center">author</td><td align="center">作者名字</td></tr><tr><td align="center">language</td><td align="center">网站使用的语言。对于简体中文用户来说，建议设置为<code>zh-CN</code></td></tr><tr><td align="center">timezone</td><td align="center">网站时区。一般的，对于中国大陆地区可以使用 <code>Asia/Shanghai</code></td></tr></tbody></table><h3 id="网址"><a href="#网址" class="headerlink" title="网址"></a>网址</h3><table><thead><tr><th align="center">参数</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">url</td><td align="center">网址</td></tr><tr><td align="center">permalink</td><td align="center">文章的永久链接格式</td></tr></tbody></table><h3 id="文章"><a href="#文章" class="headerlink" title="文章"></a>文章</h3><table><thead><tr><th align="center">参数</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">post_asset_folder</td><td align="center">启动资源文件夹</td></tr></tbody></table><h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><table><thead><tr><th align="center">参数</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">theme</td><td align="center">当前主题名称。值为false时禁用主题</td></tr><tr><td align="center">deploy</td><td align="center">部署部分的设置</td></tr></tbody></table><h2 id="Hexo的常用命令"><a href="#Hexo的常用命令" class="headerlink" title="Hexo的常用命令"></a>Hexo的常用命令</h2><h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><p>新建一个网站。如果没有设置 folder ，Hexo 默认在目前的文件夹建立网站。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init [folder]</span><br></pre></td></tr></table></figure><h3 id="new"><a href="#new" class="headerlink" title="new"></a>new</h3><p>新建一篇文章。如果没有设置<code>layout</code>的话，默认使用<code> _config.yml</code>中的<code>default_layout</code>参数代替。如果标题包含空格的话，需使用引号括起来。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">以下命令会创建一个`<span class="built_in">source</span>/about/me.md`文件，同时标题为 <span class="string">&quot;About me&quot;</span></span></span><br><span class="line">hexo new page --path about/me &quot;About me&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">可简写为</span></span><br><span class="line">hexo new -p about/me &quot;About me&quot;</span><br></pre></td></tr></table></figure><h3 id="generate"><a href="#generate" class="headerlink" title="generate"></a>generate</h3><p>生成静态文件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">命令可简写为</span></span><br><span class="line">hexo g</span><br></pre></td></tr></table></figure><h3 id="server"><a href="#server" class="headerlink" title="server"></a>server</h3><p>启动服务器。默认情况下，访问网址为：<code>http://localhost:4000/</code>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重设端口</span></span><br><span class="line">hexo server -p 端口号</span><br></pre></td></tr></table></figure><h3 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h3><p>部署网站。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">命令可简写为</span></span><br><span class="line">hexo d</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">部署之前预先生成静态文件</span></span><br><span class="line">hexo d -g</span><br></pre></td></tr></table></figure><h3 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h3><p>清除缓存文件 (db.json) 和已生成的静态文件 (public)。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">命令可简写为</span></span><br><span class="line">hexo cl</span><br></pre></td></tr></table></figure><h3 id="组合命令"><a href="#组合命令" class="headerlink" title="组合命令"></a>组合命令</h3><p>一行命令执行多条语句。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">hexo cl &amp;&amp; hexo g &amp;&amp; hexo s</span><br><span class="line"></span><br><span class="line">hexo clean &amp;&amp; hexo g -d</span><br></pre></td></tr></table></figure><h2 id="Hexo的常用插件"><a href="#Hexo的常用插件" class="headerlink" title="Hexo的常用插件"></a>Hexo的常用插件</h2><h3 id="hexo-abbrlink"><a href="#hexo-abbrlink" class="headerlink" title="hexo-abbrlink"></a>hexo-abbrlink</h3><p><a href="https://github.com/rozbo/hexo-abbrlink" title="hexo-abbrlink地址">hexo-abbrlink</a>，用于根据文档标题和数据生成永久唯一链接。</p><p>在<code>_config.yml</code>中修改相关设置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:abbrlink.html</span>  <span class="comment">#此处可以自己设置:abbrlink/，也可以直接使用 /:abbrlink.html</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">  <span class="attr">alg:</span> <span class="string">crc16</span>   <span class="comment">#算法：crc16(default) and crc32</span></span><br><span class="line">  <span class="attr">rep:</span> <span class="string">dec</span>     <span class="comment">#进制：dec(default) and hex</span></span><br></pre></td></tr></table></figure><h3 id="hexo-image-link"><a href="#hexo-image-link" class="headerlink" title="hexo-image-link"></a>hexo-image-link</h3><p><a href="https://github.com/cocowool/hexo-image-link" title="hexo-image-link地址">hexo-image-link</a>启用 hexo 后，将Markdown语法的图片路径转换为asset_img的方式，使图片能够在使用typora编辑和hexo预览发布时都能正常显示。</p><p>需在<code>_config.yml</code>配置文件中开启资源文件夹。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="hexo-deployer-git"><a href="#hexo-deployer-git" class="headerlink" title="hexo-deployer-git"></a>hexo-deployer-git</h3><p><a href="https://github.com/hexojs/hexo-deployer-git" title="hexo-deployer-git地址">hexo-deployer-git</a>适用于Hexo的git deployer插件。</p><p>需在<code>_config.yml</code>配置文件配置部署路径。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">github仓库地址</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure><hr><h1 id="Butterfly主题"><a href="#Butterfly主题" class="headerlink" title="Butterfly主题"></a>Butterfly主题</h1><h2 id="主题安装"><a href="#主题安装" class="headerlink" title="主题安装"></a>主题安装</h2><h3 id="npm安装Butterfly主题"><a href="#npm安装Butterfly主题" class="headerlink" title="npm安装Butterfly主题"></a>npm安装Butterfly主题</h3><p>在Hexo根目录下，通过 npm 安装并不会在 themes 里生成主题文件夹，而是在 node_modules 里生成</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-theme-butterfly</span><br></pre></td></tr></table></figure><h3 id="npm升级Butterfly主题"><a href="#npm升级Butterfly主题" class="headerlink" title="npm升级Butterfly主题"></a>npm升级Butterfly主题</h3><p>在Hexo根目录下，运行<code>npm update hexo-theme-butterfly</code>。</p><h2 id="主题启用"><a href="#主题启用" class="headerlink" title="主题启用"></a>主题启用</h2><p>修改Hexo根目录下的<code>_config.yml</code>，把主题改为butterfly</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure><p>若未安装 pug 以及 stylus 的渲染器，还需下载安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><h2 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h2><p>在hexo的根目录创建一个文件<code>_config.butterfly.yml</code>，并把主题目录的<code>_config.yml</code>内容复制到<code>_config.butterfly.yml</code>去。（注意: 复制的是主题的<code>_config.yml</code>，而不是hexo的<code>_config.yml</code>）。</p><p>注意：</p><ul><li>不要把主题目录的<code>_config.yml</code>删掉</li><li>以后只需要在<code>_config.butterfly.yml</code>进行配置即可</li></ul><hr><h1 id="优化使用"><a href="#优化使用" class="headerlink" title="优化使用"></a>优化使用</h1><h2 id="私有博客自动构建推送至另一个仓库"><a href="#私有博客自动构建推送至另一个仓库" class="headerlink" title="私有博客自动构建推送至另一个仓库"></a>私有博客自动构建推送至另一个仓库</h2><h3 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h3><ul><li>不想公开Hexo代码，或者有一些暂时不方便公开的内容，只想将静态页面（文字，图片，网站主题所用的各个样式和脚本）部署到 github page 。</li><li>用私有仓库写博客，通过GitHub Actions持续集成服务，自动构建推送到 GitHub 个人主页仓库 {用户名}.github.io</li></ul><h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><h4 id="建立仓库"><a href="#建立仓库" class="headerlink" title="建立仓库"></a>建立仓库</h4><p>私有仓库，Hexo代码仓库<br>公开仓库，个人主页仓库 {用户名}.github.io</p><h4 id="为仓库设置访问密钥"><a href="#为仓库设置访问密钥" class="headerlink" title="为仓库设置访问密钥"></a>为仓库设置访问密钥</h4><p>在本地电脑终端中输入以下命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -f hexo-deploy-key -C &quot;yourname.github.io&quot;</span><br></pre></td></tr></table></figure><p>然后在<code>C:\Users\Administrator\.ssh</code>文件夹下获得文件<code>hexo-deploy-key</code>和<code>hexo-deploy-key.pub</code>。</p><h4 id="上传密钥"><a href="#上传密钥" class="headerlink" title="上传密钥"></a>上传密钥</h4><h5 id="上传私钥"><a href="#上传私钥" class="headerlink" title="上传私钥"></a>上传私钥</h5><p>在github中的私有仓库进行如下操作：</p><p><code>Settings</code> → <code>Secrets and variables</code> → <code>Actions</code> → 点击<code>new repository secret</code>新建仓库密钥</p><img src="/2022/10/26/56377/image-202210241805509.png" class="" title="上传私钥步骤"><p>名字任意，但要与之后的workflow文件夹中文件内容对应，如使用<code>HEXO_DEPLOY_PRI</code></p><p>Secrets内容为<code>hexo-deploy-key</code>文件内的所有内容</p><h5 id="上传公钥"><a href="#上传公钥" class="headerlink" title="上传公钥"></a>上传公钥</h5><p>公钥被上传的仓库代表着要被部署的仓库，github 不支持同一个（部署）公钥上传至多个仓库</p><p>将公钥上传到要部署的公开仓库中</p><p><code>Settings</code> → <code>Deploy keys</code> → 点击<code>add deploy key</code>添加部署公钥</p><img src="/2022/10/26/56377/image-202210241821509.png" class="" title="上传公钥步骤"><p>标题名字任意，如<code>HEXO_DEPLOY_PUB</code></p><p>key内容为<code>github-deploy-key.pub</code>文件内的所有内容</p><p>记得勾选<code>Allow write access</code>允许写入权限</p><p>然后<code>Add key</code>添加key，输入GitHub账户密码</p><h4 id="配置-GitHub-Actions"><a href="#配置-GitHub-Actions" class="headerlink" title="配置 GitHub Actions"></a>配置 GitHub Actions</h4><p>在代码仓库中的.github/workflow 添加<code>hexo-ci.yml</code>文件，然后将以下内容放进该文件中。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">HEXO</span> <span class="string">CI</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span> <span class="comment"># default branch</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">strategy:</span></span><br><span class="line">      <span class="attr">matrix:</span></span><br><span class="line">        <span class="attr">node-version:</span> [<span class="number">18</span>]</span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    </span><br><span class="line">      <span class="comment"># 设置服务器时区为东八区</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">time</span> <span class="string">zone</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">sudo</span> <span class="string">timedatectl</span> <span class="string">set-timezone</span> <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line">        </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v1</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">Node.js</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.node-version</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.node-version</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Configuration</span> <span class="string">environment</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">HEXO_DEPLOY_PRI:</span> <span class="string">$&#123;&#123;secrets.HEXO_DEPLOY_PRI&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          mkdir -p ~/.ssh/</span></span><br><span class="line"><span class="string">          echo &quot;$HEXO_DEPLOY_PRI&quot; &gt; ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          chmod 600 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string">          git config --global user.email &quot;wenwenmidgard@gmail.com&quot;</span></span><br><span class="line"><span class="string">          git config --global user.name &quot;FloweryMidgard&quot;</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          npm i -g hexo-cli</span></span><br><span class="line"><span class="string">          npm i</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">hexo</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">hexo</span> <span class="string">clean</span> <span class="string">&amp;&amp;</span> <span class="string">hexo</span> <span class="string">generate</span> <span class="string">&amp;&amp;</span> <span class="string">hexo</span> <span class="string">deploy</span></span><br></pre></td></tr></table></figure><h2 id="限制对版本更新打开的拉取请求数"><a href="#限制对版本更新打开的拉取请求数" class="headerlink" title="限制对版本更新打开的拉取请求数"></a>限制对版本更新打开的拉取请求数</h2><p>修改dependabot.yml，限制对版本更新打开的拉取请求数</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">open-pull-requests-limit:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>维保措施及培训服务方案</title>
      <link href="/2022/10/26/52643.html"/>
      <url>/2022/10/26/52643.html</url>
      
        <content type="html"><![CDATA[<h1 id="维保措施及培训服务方案"><a href="#维保措施及培训服务方案" class="headerlink" title="维保措施及培训服务方案"></a>维保措施及培训服务方案</h1><h2 id="售后服务方案"><a href="#售后服务方案" class="headerlink" title="售后服务方案"></a>售后服务方案</h2><p>为了确保本项目的长期稳定运行，提供高效、可靠的售后服务至关重要。以下是针对该项目的详细:</p><h3 id="售后服务内容"><a href="#售后服务内容" class="headerlink" title="售后服务内容"></a>售后服务内容</h3><ul><li>技术支持服务：</li></ul><p>设立24小时技术支持热线，提供电话、邮件、远程桌面等多种支持方式；</p><p>期对系统进行巡检，预防潜在问题，确保系统稳定运行；</p><p>对于系统故障，提供快速响应服务，确保在最短时间内恢复系统正常运行；</p><p>根据用户需求，提供系统升级、补丁安装等服务。</p><ul><li>系统优化服务：</li></ul><p>根据用户反馈和实际需求，对系统进行持续优化，提升系统性能；</p><p>定期对系统进行性能评估，提供性能优化建议；</p><p>协助用户进行业务流程梳理，优化系统配置，提高工作效率。</p><ul><li>培训服务：</li></ul><p>提供系统操作培训，确保用户熟练掌握系统各项功能；</p><p>针对新入职员工或岗位变动员工，提供定制化培训服务；</p><p>定期举办系统使用技巧分享会，提升用户操作水平。</p><ul><li>沟通机制建设：</li></ul><p>建立项目服务微信群或QQ群，方便用户与售后团队实时沟通；</p><p>定期召开项目服务例会，总结项目进展及存在的问题，并制定解决方案；</p><p>设立专门的服务热线和邮箱作为用户请求的主要入口，收集用户反馈，持续改进服务质量。</p><p>每月提供服务报告，总结服务请求的处理情况和系统的运行状态。</p><ul><li>售后维护工具与资源：</li></ul><p>提供专业的系统维护工具，以便快速定位和解决问题。</p><p>提供完整的用户手册、操作指南和维护文档。</p><h3 id="售后服务流程"><a href="#售后服务流程" class="headerlink" title="售后服务流程"></a>售后服务流程</h3><p>1、用户提交问题或需求：用户可通过电话、邮件、支持热线等方式向售后团队提交问题或需求；</p><p>2、问题或需求确认：售后团队在接到问题或需求后，与用户进行确认，确保问题或需求明确无误；</p><p>3、制定解决方案：售后团队根据问题或需求制定相应的解决方案；</p><p>4、实施解决方案：售后团队按照解决方案实施操作，确保问题得到解决或需求得到满足；</p><p>5、用户确认及反馈：用户对解决方案实施结果进行确认，并向售后团队反馈意见或建议；</p><p>6、持续改进：售后团队根据用户反馈持续改进服务质量。</p>]]></content>
      
      
      <categories>
          
          <category> product </category>
          
      </categories>
      
      
        <tags>
            
            <tag> product </tag>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown高级语法</title>
      <link href="/2022/10/24/42170.html"/>
      <url>/2022/10/24/42170.html</url>
      
        <content type="html"><![CDATA[<h1 id="任务列表"><a href="#任务列表" class="headerlink" title="任务列表"></a>任务列表</h1><p>To-do任务列表是一种很常见的时间管理工具，它适用于工作计划、个人生活以及家庭学习。Markdown的To-Do List的内容是由无序列表，复选框，图标几种功能的组合。</p><p>在Markdown文件中，在 <code>无序列表 -,+,* </code>后面使用 <code>中括号 [ ]</code>声明复选框。在中括号中写入 <code>x</code>，便可实现选中效果。</p><div class="tabs" id="任务列表"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#任务列表-1">实例源码</button></li><li class="tab"><button type="button" data-href="#任务列表-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="任务列表-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> [ ] Java</span><br><span class="line"><span class="bullet">-</span> [x] Php</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="任务列表-2"><ul><li><input disabled="" type="checkbox"> Java</li><li><input checked="" disabled="" type="checkbox"> Php</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h1 id="特殊符号"><a href="#特殊符号" class="headerlink" title="特殊符号"></a>特殊符号</h1><p>Markdown允许使用反斜杠，将有特殊含义的字符体现在文本之中。例如，当希望在一个单词周围增加<code>星号*</code>时，（默认会被转化成 HTML 的 <code>&lt;em&gt;</code> 标签），可以通过在符号前面插入反斜杠将其转义。</p><div class="tabs" id="特殊符号"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#特殊符号-1">实例源码</button></li><li class="tab"><button type="button" data-href="#特殊符号-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="特殊符号-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">如果不使用转义字符，以下算式将不能按预期输出  </span><br><span class="line">2<span class="emphasis">*3*</span>4=24  </span><br><span class="line">以上算式的正确写法为：  </span><br><span class="line">2\<span class="emphasis">*3\*</span>4=24  </span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="特殊符号-2"><p>如果不使用转义字符，以下算式将不能按预期输出<br>2<em>3</em>4=24<br>以上算式的正确写法为：<br>2*3*4=24  </p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>Markdown 中提供了对以下特殊字符的转义支持。</p><table><thead><tr><th align="center">特殊符号</th><th align="center">中文名称</th><th align="center">默认语法</th></tr></thead><tbody><tr><td align="center">\</td><td align="center">反斜杠</td><td align="center">转义符号，需要与其他特殊符号连用</td></tr><tr><td align="center">`</td><td align="center">反引号</td><td align="center">用于定义行内代码、代码块</td></tr><tr><td align="center">*</td><td align="center">星号</td><td align="center">用于定义无序列表、强调、分割线</td></tr><tr><td align="center">_</td><td align="center">下划线</td><td align="center">用于定义强调、分割线</td></tr><tr><td align="center">{</td><td align="center">大括号</td><td align="center">用于定义公式</td></tr><tr><td align="center">[</td><td align="center">中括号</td><td align="center">用于定义超链接、图片</td></tr><tr><td align="center">(</td><td align="center">小括号</td><td align="center">用于定义超链接、图片</td></tr><tr><td align="center">#</td><td align="center">井号</td><td align="center">用于定义标题、粗体字</td></tr><tr><td align="center">+</td><td align="center">加号</td><td align="center">用于定义无序列表、分割线</td></tr><tr><td align="center">-</td><td align="center">减号</td><td align="center">用于定义无序列表、分割线</td></tr><tr><td align="center">.</td><td align="center">点号</td><td align="center">用于定义有序列表</td></tr><tr><td align="center">!</td><td align="center">叹号</td><td align="center">用于定义超链接、图片</td></tr></tbody></table><hr><h1 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h1><p>Markdown的注释可以通过三种方法实现：第一是通过html的 <code>&lt;!-- --&gt; </code>标记；第二可以通过样式隐藏段落内容，即<code> &lt;div style=&quot;display:none&quot;&gt;</code>；第三是通过Markdown自身的解析原理实现。</p><h2 id="使用原生-HTML-注释语法"><a href="#使用原生-HTML-注释语法" class="headerlink" title="使用原生 HTML 注释语法"></a>使用原生 HTML 注释语法</h2><p>此种方法被注释的内容是不被渲染输出的。</p><div class="tabs" id="使用原生html注释"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#使用原生html注释-1">实例源码</button></li><li class="tab"><button type="button" data-href="#使用原生html注释-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="使用原生html注释-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 这是一段被注释掉的文字 --&gt;</span><br><span class="line"></span><br><span class="line">这是一段没有被注释的文字</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="使用原生html注释-2"><!-- 这是一段被注释掉的文字 --><p>这是一段没有被注释的文字</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h2 id="使用-HTML-样式实现隐藏"><a href="#使用-HTML-样式实现隐藏" class="headerlink" title="使用 HTML 样式实现隐藏"></a>使用 HTML 样式实现隐藏</h2><p>这种方式原则上并不是注释，而是将内容隐藏，已达到注释效果。</p><div class="tabs" id="使用-html-样式注释"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#使用-html-样式注释-1">实例源码</button></li><li class="tab"><button type="button" data-href="#使用-html-样式注释-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="使用-html-样式注释-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display:none&quot;</span>&gt;</span></span></span><br><span class="line">这是一段被注释掉的文字</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">这是一段没有被注释的文字</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="使用-html-样式注释-2"><div style="display:none">这是一段被注释掉的文字</div><p>这是一段没有被注释的文字</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h2 id="通过Markdown自身解析"><a href="#通过Markdown自身解析" class="headerlink" title="通过Markdown自身解析"></a>通过Markdown自身解析</h2><p>这种方法是利用了Markdown自身的语法，在超链接的内容中通过<code>中括号 []</code>的方式定义全局超链接，而这种方式声明的内容不会被渲染成文字内容输出，因此达到了注释的效果。</p><div class="tabs" id="通过-markdown-自身注释"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#通过-markdown-自身注释-1">实例源码</button></li><li class="tab"><button type="button" data-href="#通过-markdown-自身注释-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="通过-markdown-自身注释-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">//</span>]: <span class="link">(这是一段被注释掉的文字)</span></span><br><span class="line"></span><br><span class="line">这是一段没有被注释的文字</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="通过-markdown-自身注释-2"><p>这是一段没有被注释的文字</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h1 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h1><p>表格通常作为一种布局形式，用于结构化的数据展示。Markdown表格包含三个部分：表头、分割线、数据。</p><p>在分割线上使用 <code>:</code>可以定义列内容的对齐方式。</p><div class="tabs" id="表格"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#表格-1">实例源码</button></li><li class="tab"><button type="button" data-href="#表格-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="表格-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|左对齐|居中对齐|右对齐|</span><br><span class="line">|:--|:--:|--:|</span><br><span class="line">|1|张三|17岁|</span><br><span class="line">|2|李四|18岁|</span><br><span class="line">|3|王五|19岁|</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="表格-2"><table><thead><tr><th align="left">左对齐</th><th align="center">居中对齐</th><th align="right">右对齐</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">张三</td><td align="right">17岁</td></tr><tr><td align="left">2</td><td align="center">李四</td><td align="right">18岁</td></tr><tr><td align="left">3</td><td align="center">王五</td><td align="right">19岁</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h1 id="脚注尾注"><a href="#脚注尾注" class="headerlink" title="脚注尾注"></a>脚注尾注</h1><p>脚注和尾注都是对文章的补充说明。</p><p>脚注通常与被注释内容出现在同一页，并位于该页面的最下方，一般用来解释专有名词、数据来源等。</p><div class="tabs" id="脚注尾注"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#脚注尾注-1">实例源码</button></li><li class="tab"><button type="button" data-href="#脚注尾注-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="脚注尾注-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">**《出师表》（节选）**</span></span><br><span class="line"></span><br><span class="line">先帝[^注释1]创业[^注释2]未半而中道[^注释3]崩殂[^注释4]，</span><br><span class="line"></span><br><span class="line">[<span class="symbol">^注释1</span>]: <span class="link">先帝：指汉昭烈帝刘备。先，尊称死去的人。</span></span><br><span class="line">[<span class="symbol">^注释2</span>]: <span class="link">创：开创，创立；业：统一天下的大业。</span></span><br><span class="line">[<span class="symbol">^注释3</span>]: <span class="link">中道：中途。</span></span><br><span class="line">[<span class="symbol">^注释4</span>]: <span class="link">崩殂（cú）：死。崩，古时指皇帝死亡。殂，死亡。</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="脚注尾注-2"><p><strong>《出师表》（节选）</strong></p><p>先帝<a href="%E5%85%88%E5%B8%9D%EF%BC%9A%E6%8C%87%E6%B1%89%E6%98%AD%E7%83%88%E5%B8%9D%E5%88%98%E5%A4%87%E3%80%82%E5%85%88%EF%BC%8C%E5%B0%8A%E7%A7%B0%E6%AD%BB%E5%8E%BB%E7%9A%84%E4%BA%BA%E3%80%82">^注释1</a>创业<a href="%E5%88%9B%EF%BC%9A%E5%BC%80%E5%88%9B%EF%BC%8C%E5%88%9B%E7%AB%8B%EF%BC%9B%E4%B8%9A%EF%BC%9A%E7%BB%9F%E4%B8%80%E5%A4%A9%E4%B8%8B%E7%9A%84%E5%A4%A7%E4%B8%9A%E3%80%82">^注释2</a>未半而中道<a href="%E4%B8%AD%E9%81%93%EF%BC%9A%E4%B8%AD%E9%80%94%E3%80%82">^注释3</a>崩殂<a href="%E5%B4%A9%E6%AE%82%EF%BC%88c%C3%BA%EF%BC%89%EF%BC%9A%E6%AD%BB%E3%80%82%E5%B4%A9%EF%BC%8C%E5%8F%A4%E6%97%B6%E6%8C%87%E7%9A%87%E5%B8%9D%E6%AD%BB%E4%BA%A1%E3%80%82%E6%AE%82%EF%BC%8C%E6%AD%BB%E4%BA%A1%E3%80%82">^注释4</a>，</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown基本语法</title>
      <link href="/2022/10/24/18133.html"/>
      <url>/2022/10/24/18133.html</url>
      
        <content type="html"><![CDATA[<h1 id="MarkDown介绍"><a href="#MarkDown介绍" class="headerlink" title="MarkDown介绍"></a>MarkDown介绍</h1><p>Markdown是一种轻量级的标记语言，可用于将格式设置元素添加到纯文本文档中。Markdown 由John Gruber于2004年创建，如今已成为世界上最受欢迎的标记语言之一。</p><hr><h1 id="多级标题"><a href="#多级标题" class="headerlink" title="多级标题"></a>多级标题</h1><h2 id="使用-号标记"><a href="#使用-号标记" class="headerlink" title="使用#号标记"></a>使用#号标记</h2><p>使用**#<strong>号可表示1-6级标题，一级标题对应一个</strong>#<strong>号，二级标题对应两个</strong>#**号，以此类推。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"><span class="section">## 二级标题</span></span><br><span class="line"><span class="section">### 三级标题</span></span><br><span class="line"><span class="section">#### 四级标题</span></span><br><span class="line"><span class="section">##### 五级标题</span></span><br><span class="line"><span class="section">###### 六级标题</span></span><br></pre></td></tr></table></figure><hr><h2 id="使用-和-标记一级和二级标题"><a href="#使用-和-标记一级和二级标题" class="headerlink" title="使用=和-标记一级和二级标题"></a>使用=和-标记一级和二级标题</h2><p>在文本下方的行上，添加任意数量的<code>=</code>字符表示标题级别1，任意数量的<code>-</code>字符表示标题级别2。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">我展示的是一级标题</span></span><br><span class="line"><span class="section">=================</span></span><br><span class="line"></span><br><span class="line"><span class="section">我展示的是二级标题</span></span><br><span class="line"><span class="section">---------</span></span><br></pre></td></tr></table></figure><hr><h1 id="段落"><a href="#段落" class="headerlink" title="段落"></a>段落</h1><p>Markdown段落没有特殊的格式，直接编写文字就好，<strong>段落的换行是使用两个以上空格加上回车</strong>。当然也可以在段落后面使用一个空行来表示重新开始一个段落。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">This is the first line.  </span><br><span class="line">And this is the second line.</span><br><span class="line"></span><br><span class="line">And this is the third line.</span><br></pre></td></tr></table></figure><hr><h1 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h1><h2 id="粗体"><a href="#粗体" class="headerlink" title="粗体"></a>粗体</h2><p>要加粗文本，在单词或短语的前后添加两个星号或下划线。要加粗一个单词的中部以强调，在字母周围添加两个星号，且各空格之间不加空格</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">I just love <span class="strong">**bold text**</span>.</span><br><span class="line">I just love <span class="strong">__bold text__</span>.</span><br><span class="line">Love<span class="strong">**is**</span>bold</span><br></pre></td></tr></table></figure><hr><h2 id="斜体"><a href="#斜体" class="headerlink" title="斜体"></a>斜体</h2><p>要斜体文本，在单词或短语的前后添加一个星号或下划线。要斜体突出单词的中间部分，在字母周围添加一个星号，中间不要带空格。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Italicized text is the <span class="emphasis">*cat&#x27;s meow*</span>.</span><br><span class="line">Italicized text is the <span class="emphasis">_cat&#x27;s meow_</span>.</span><br><span class="line">A<span class="emphasis">*cat*</span>meow</span><br></pre></td></tr></table></figure><hr><h2 id="粗体和斜体"><a href="#粗体和斜体" class="headerlink" title="粗体和斜体"></a>粗体和斜体</h2><p>要同时突出显示带有粗体和斜体的文本，请在单词或短语的前后添加三个星号或下划线。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">__<span class="emphasis">_粗斜体文本_</span>__</span></span><br><span class="line"><span class="strong">__<span class="emphasis">_粗斜体文本_</span>__</span></span><br></pre></td></tr></table></figure><hr><h1 id="块引用"><a href="#块引用" class="headerlink" title="块引用"></a>块引用</h1><p>Markdown 块引用是在段落开头使用<code>&gt;</code>符号 ，然后后面紧跟一个空格符号。块引用可以包含多个段落，只要在块引用内增加由块引用符号开启的空行即可。块引用可以包含其他Markdown格式的元素，支持类似于加粗、代码块、列表、表格等。</p><div class="tabs" id="块引用"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#块引用-1">实例源码</button></li><li class="tab"><button type="button" data-href="#块引用-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="块引用-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt; 最<span class="strong">**外层**</span></span></span><br><span class="line"><span class="quote">&gt; &gt; 一层嵌套1</span></span><br><span class="line"><span class="quote">&gt;</span></span><br><span class="line"><span class="quote">&gt; &gt; 一层嵌套2</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt; &gt; 二层嵌套</span></span><br><span class="line"><span class="quote">&gt;</span></span><br><span class="line"><span class="quote">&gt; 返回到最外层</span></span><br><span class="line"><span class="quote">&gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;&gt;&gt;&gt;&gt;&gt; 直接的七层块引用</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="块引用-2"><blockquote><p>最<strong>外层</strong></p><blockquote><p>一层嵌套1</p></blockquote><blockquote><p>一层嵌套2</p><blockquote><p>二层嵌套</p></blockquote></blockquote><p>返回到最外层</p><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>直接的七层块引用</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h1 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h1><p>Markdown支持有序和无序两种列表，无序列表可以通过<code>*,+,-</code>三种方式定义无序列表，有序列表通过<code>数字. </code>的形式定义有序列表。要在保留列表连续性的同时在列表中添加另一个元素，将该元素缩进四个空格或一个制表符。</p><h2 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h2><p>通过 <code>*、+、-</code>三种方式定义的无序列表，这三种方式的发布后的效果一样，都会被转换<code>&lt;ul&gt;&lt;li&gt;&lt;/li&gt;&lt;/ul&gt;</code>。</p><div class="tabs" id="无序列表"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#无序列表-1">实例源码</button></li><li class="tab"><button type="button" data-href="#无序列表-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="无序列表-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">使用星号生成无序列表</span><br><span class="line"></span><br><span class="line"><span class="bullet">*</span> 项目1</span><br><span class="line"><span class="bullet">*</span> 项目2</span><br><span class="line"><span class="bullet">*</span> 项目3</span><br><span class="line"></span><br><span class="line">使用加号生成无序列表</span><br><span class="line"></span><br><span class="line"><span class="bullet">+</span> 项目1</span><br><span class="line"><span class="bullet">+</span> 项目2</span><br><span class="line"><span class="bullet">+</span> 项目3</span><br><span class="line"></span><br><span class="line">使用减号生成无序列表</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 项目1</span><br><span class="line"><span class="bullet">-</span> 项目2</span><br><span class="line"><span class="bullet">-</span> 项目3</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="无序列表-2"><p>使用星号生成无序列表</p><ul><li>项目1</li><li>项目2</li><li>项目3</li></ul><p>使用加号生成无序列表</p><ul><li>项目1</li><li>项目2</li><li>项目3</li></ul><p>使用减号生成无序列表</p><ul><li>项目1</li><li>项目2</li><li>项目3</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h2 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h2><p>通过<code>数字.  </code>的形式定义有序列表，有序列表在发布后会被转化为<code>&lt;ol&gt;&lt;li&gt;&lt;/li&gt;&lt;/ol&gt;</code>。</p><div class="tabs" id="有序列表"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#有序列表-1">实例源码</button></li><li class="tab"><button type="button" data-href="#有序列表-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="有序列表-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">使用数字实现有序列表</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 项目1</span><br><span class="line"><span class="bullet">2.</span> 项目2</span><br><span class="line"><span class="bullet">3.</span> 项目3</span><br><span class="line"></span><br><span class="line">源码中的数字与渲染后的数字并不一一对应，但可以决定列表的开始序号</span><br><span class="line"></span><br><span class="line">例如，让Markdown渲染器自动安排序号：</span><br><span class="line"></span><br><span class="line"><span class="bullet">0.</span> 项目1</span><br><span class="line"><span class="bullet">0.</span> 项目2</span><br><span class="line"><span class="bullet">0.</span> 项目3</span><br><span class="line"></span><br><span class="line">让有序列表以“2”开头：</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> 项目1</span><br><span class="line"><span class="bullet">1.</span> 项目2</span><br><span class="line"><span class="bullet">0.</span> 项目3</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="有序列表-2"><p>使用数字实现有序列表</p><ol><li>项目1</li><li>项目2</li><li>项目3</li></ol><p>源码中的数字与渲染后的数字并不一一对应，但可以决定列表的开始序号</p><p>例如，让Markdown渲染器自动安排序号：</p><ol start="0"><li>项目1</li><li>项目2</li><li>项目3</li></ol><p>让有序列表以“2”开头：</p><ol start="2"><li>项目1</li><li>项目2</li><li>项目3</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><h2 id="行内代码"><a href="#行内代码" class="headerlink" title="行内代码"></a>行内代码</h2><p>行内代码用一对 <code>反引号` </code>符号将需要转换的文字内容包括起来，它让我们方便地在行内编辑带有特殊字符的文字内容。如果表示为代码的文字包含一个或多个反引号，可以通过将代码的文字括在 一对<code>双反引号` </code> 中来对其进行转义。</p><div class="tabs" id="行内代码"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#行内代码-1">实例源码</button></li><li class="tab"><button type="button" data-href="#行内代码-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="行内代码-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">行内的 html 代码：<span class="code">`&lt;head&gt;&lt;title&gt;网页标题&lt;/title&gt;&lt;/head&gt;`</span></span><br><span class="line"></span><br><span class="line">行内的 json 代码：<span class="code">`var json = &#123;key: value&#125;;`</span></span><br><span class="line"></span><br><span class="line">这段代码里包含反引号 <span class="code">``select `</span>state<span class="code">` from user;`</span>`</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="行内代码-2"><p>行内的 html 代码：<code>&lt;head&gt;&lt;title&gt;网页标题&lt;/title&gt;&lt;/head&gt;</code></p><p>行内的 json 代码：<code>var json = {key: value};</code></p><p>这段代码里包含反引号 <code>select `state` from user;</code></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h2 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h2><p>在 Markdown 文件中，在行首添加 4 个连续的空格或者一个制表符（Tab 键），可将行内容定义为代码块。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pubic static void main(String[] args) &#123;</span><br><span class="line"><span class="code">    System.out.println(&quot;Hello world&quot;);</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code"></span></span><br></pre></td></tr></table></figure><hr><h2 id="围栅代码块"><a href="#围栅代码块" class="headerlink" title="围栅代码块"></a>围栅代码块</h2><p>代码块的另一种定义方式是以三个连续的 <code>反引号`</code>作为开始行和结束行。在这种方式下，还可以声明代码的高亮样式，方法是在首行反引号后面加入源代码语言的标记，比如：javascript、Markdown、json、java、c++、sql 等。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pubic <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;Hello world&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="水平线"><a href="#水平线" class="headerlink" title="水平线"></a>水平线</h1><p>通过输入三个或更多的<code>减号 -</code>、<code>星号*</code>、<code>下划线_</code>的方式创建一条相当于 HTML 语法中 <code>&lt;hr/&gt;</code> 一样的分隔线。这三个符号之间可以包含空格。建议在文章中都是用<code>下划线 _</code>，作为换行的输入，这样避免语义错误，同时与 Word 的方式更加接近。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">使用「星号」作为分割线</span><br><span class="line"></span><br><span class="line"><span class="strong">___</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">使用「减号」作为分割线</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">__</span>_</span><br><span class="line"></span><br><span class="line">使用「下划线」作为分割线</span><br><span class="line"><span class="strong">__<span class="emphasis">_</span></span></span><br></pre></td></tr></table></figure><hr><h1 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h1><p>要创建链接，将链接文本括在方括号（例如[label]）中，然后用一对紧跟中括号的小括号描述目标链接，小括号内不仅可以包含链接的地址，也可以用引号 “ “设定链接的标题。当一个超链接在文章中反复出现时，可以使用全局声明的形式，减少文章编写的工作量，可以通过变量来设置一个链接，变量赋值在文档末尾进行。</p><div class="tabs" id="链接"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#链接-1">实例源码</button></li><li class="tab"><button type="button" data-href="#链接-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="链接-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">声明超链接</span><br><span class="line"></span><br><span class="line">一对中括号就可以将文字转换为超链接，如: [<span class="string">北京</span>](<span class="link"></span>)，[<span class="string">上海</span>](<span class="link"></span>)，[<span class="string">广州</span>](<span class="link"></span>)，[<span class="string">深圳</span>](<span class="link"></span>)</span><br><span class="line"></span><br><span class="line">声明超链接的细节</span><br><span class="line"></span><br><span class="line">点击下面的连接将跳转到[<span class="string">我的博客</span>](<span class="link">https://wenwenmidgard.github.io &#x27;博客&#x27;</span>)个人博客页面</span><br><span class="line"></span><br><span class="line">全局声明超链接</span><br><span class="line"></span><br><span class="line">欢迎访问[<span class="string">我的博客</span>][<span class="symbol">blog</span>]页面，[<span class="string">我的博客</span>][<span class="symbol">blog</span>]欢迎。</span><br><span class="line"></span><br><span class="line">[<span class="symbol">blog</span>]: <span class="link">https://wenwenmidgard.github.io</span></span><br><span class="line"></span><br><span class="line">简写的全局声明超链接</span><br><span class="line"></span><br><span class="line">欢迎访问[<span class="string">博客</span>][<span class="symbol"></span>]页面，[<span class="string">博客</span>][<span class="symbol"></span>]欢迎。</span><br><span class="line"></span><br><span class="line">[<span class="symbol">博客</span>]: <span class="link">https://wenwenmidgard.github.io</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="链接-2"><p>声明超链接</p><p>一对中括号就可以将文字转换为超链接，如: <a href="">北京</a>，<a href="">上海</a>，<a href="">广州</a>，<a href="">深圳</a></p><p>声明超链接的细节</p><p>点击下面的连接将跳转到<a href="https://wenwenmidgard.github.io/" title="博客">我的博客</a>个人博客页面。</p><p>全局声明超链接</p><p>欢迎访问<a href="https://wenwenmidgard.github.io/">我的博客</a>页面，<a href="https://wenwenmidgard.github.io/">我的博客</a>欢迎。</p><p>简写的全局声明超链接</p><p>欢迎访问<a href="https://wenwenmidgard.github.io/">博客</a>页面，<a href="https://wenwenmidgard.github.io/">博客</a>欢迎。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h1 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h1><p>在Markdown文件中，使用 <code>![alt 属性文本](图片地址 &quot;可选标题&quot;)</code> 的形式定义图片。当一张图片在文章中反复出现时，可以使用全局声明的形式，减少文章编写的工作量。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">插入图片</span><br><span class="line"></span><br><span class="line">![<span class="string">替换文字内容</span>](<span class="link">图片URL或URI &quot;这是一张图片&quot;</span>)</span><br><span class="line"></span><br><span class="line">链接图片链接</span><br><span class="line"></span><br><span class="line">[<span class="string">![替换文字内容</span>](<span class="link">图片URL或URI &quot;这是一张图片&quot;</span>)](<span class="link">网址</span>)</span><br><span class="line"></span><br><span class="line">使用全局声明方式插入图片</span><br><span class="line"></span><br><span class="line">![][img1]</span><br><span class="line">![][img2]</span><br><span class="line">![][img1]</span><br><span class="line">![][img2]</span><br><span class="line"></span><br><span class="line">[<span class="symbol">img1</span>]: <span class="link">图片URL或URI &quot;这是一张图片1&quot;</span></span><br><span class="line">[<span class="symbol">img2</span>]: <span class="link">图片URL或URI &quot;这是一张图片2&quot;</span></span><br></pre></td></tr></table></figure><hr><h1 id="辅助线"><a href="#辅助线" class="headerlink" title="辅助线"></a>辅助线</h1><p>辅助线是文字格式的一种，常见形式如下划线和中划线，下划线可用于圈出文字中需要注意的部分，删除线可用于表示文字中已经失效的内容。</p><h2 id="中划线"><a href="#中划线" class="headerlink" title="中划线"></a>中划线</h2><p>Markdown 语法里的辅助线包含中划线（删除线）一种形式，中划线使用波浪线 <code>~</code>来描述。</p><div class="tabs" id="中划线"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#中划线-1">实例源码</button></li><li class="tab"><button type="button" data-href="#中划线-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="中划线-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">这是一个删除线</span><br><span class="line"></span><br><span class="line">~~这是一条删除线~~</span><br><span class="line"></span><br><span class="line">当删除线内部紧跟 &quot;空格&quot; 时，删除线效果会失效。</span><br><span class="line"></span><br><span class="line">~~有效的删除线~~</span><br><span class="line"></span><br><span class="line">~~失效的删除线 ~~</span><br><span class="line"></span><br><span class="line">~~ 失效的删除线 ~~</span><br><span class="line"></span><br><span class="line">~~ 失效的删除线~~</span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="中划线-2"><p>这是一个删除线</p><p><del>这是一条删除线</del></p><p>当删除线内部紧跟 “空格” 时，删除线效果会失效。</p><p><del>有效的删除线</del></p><p>~~失效的删除线 ~~</p><p>~~ 失效的删除线 ~~</p><p>~~ 失效的删除线~~</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h2 id="下划线"><a href="#下划线" class="headerlink" title="下划线"></a>下划线</h2><p>Markdown 的原生语法没有定义 “下划线” ，因为 “下划线” 效果容易和 “超链接” 相混淆。如果需要在文章中添加下划线，需要使用 HTML 标签，下划线可以通过 HTML 的 <code>&lt;u&gt; 、&lt;ins&gt;</code>标签来实现。</p><div class="tabs" id="下划线"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#下划线-1">实例源码</button></li><li class="tab"><button type="button" data-href="#下划线-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="下划线-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">下划线使用 html 语法的 ins 标签实现</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ins</span>&gt;</span></span>这是一个下划线<span class="language-xml"><span class="tag">&lt;/<span class="name">ins</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">下划线使用 html 语法的 u 标签实现</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">u</span>&gt;</span></span>带下划线文本<span class="language-xml"><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="下划线-2"><p>下划线使用 html 语法的 ins 标签实现</p><p><ins>这是一个下划线</ins></p><p>下划线使用 html 语法的 u 标签实现</p><p><u>带下划线文本</u></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>关于</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<h1 id="联系方式"><a href="#联系方式" class="headerlink" title="联系方式"></a>联系方式</h1><ul><li>手机：<code>139********</code></li><li>Email：<a href="mailto:&#119;&#101;&#110;&#x77;&#101;&#110;&#x6d;&#x69;&#x64;&#x67;&#97;&#x72;&#x64;&#x40;&#103;&#x6d;&#97;&#x69;&#x6c;&#46;&#99;&#x6f;&#x6d;">&#119;&#101;&#110;&#x77;&#101;&#110;&#x6d;&#x69;&#x64;&#x67;&#97;&#x72;&#x64;&#x40;&#103;&#x6d;&#97;&#x69;&#x6c;&#46;&#99;&#x6f;&#x6d;</a></li><li>QQ/微信号：<code>15936****</code></li></ul><hr><h1 id="个人信息"><a href="#个人信息" class="headerlink" title="个人信息"></a>个人信息</h1><ul><li><p>midXXX/男/1995</p></li><li><p>本科/XXX大学计算机科学与技术专业</p></li><li><p>工作年限：5年</p></li><li><p>技术博客：<a href="https://wenwenmidgard.github.io/">https://wenwenmidgard.github.io</a></p></li><li><p>Github：<a href="https://github.com/wenwenmidgard">https://github.com/wenwenmidgard</a> </p></li><li><p>期望职位：开发工程师</p></li><li><p>期望薪资：税前月薪15k~20k，特别喜欢的公司可例外</p></li><li><p>期望城市：中国</p></li></ul><hr><h1 id="工作经历"><a href="#工作经历" class="headerlink" title="工作经历"></a>工作经历</h1><h2 id="C公司-（-2021年6月-2022年8月-）"><a href="#C公司-（-2021年6月-2022年8月-）" class="headerlink" title="C公司 （ 2021年6月 ~ 2022年8月 ）"></a>C公司 （ 2021年6月 ~ 2022年8月 ）</h2><h3 id="A项目"><a href="#A项目" class="headerlink" title="A项目"></a>A项目</h3><p>我在此项目负责了哪些工作，分别在哪些地方做得出色/和别人不一样/成长快，这个项目中，我最困难的问题是什么，我采取了什么措施，最后结果如何。这个项目中，我最自豪的技术细节是什么，为什么，实施前和实施后的数据对比如何，同事和领导对此的反应如何。</p><h3 id="B项目"><a href="#B项目" class="headerlink" title="B项目"></a>B项目</h3><p>我在此项目负责了哪些工作，分别在哪些地方做得出色/和别人不一样/成长快，这个项目中，我最困难的问题是什么，我采取了什么措施，最后结果如何。这个项目中，我最自豪的技术细节是什么，为什么，实施前和实施后的数据对比如何，同事和领导对此的反应如何。</p><h3 id="C项目"><a href="#C项目" class="headerlink" title="C项目"></a>C项目</h3><p>（每个公司写2~3个核心项目就好了，如果你有非常大量的项目，那么按分类进行合并，每一类选一个典型写出来。其他的一笔带过即可。）</p><h2 id="B公司-（-2019年4月-2021年6月-）"><a href="#B公司-（-2019年4月-2021年6月-）" class="headerlink" title="B公司 （ 2019年4月 ~ 2021年6月 ）"></a>B公司 （ 2019年4月 ~ 2021年6月 ）</h2><h3 id="A项目-1"><a href="#A项目-1" class="headerlink" title="A项目"></a>A项目</h3><p>我在此项目负责了哪些工作，分别在哪些地方做得出色/和别人不一样/成长快，这个项目中，我最困难的问题是什么，我采取了什么措施，最后结果如何。这个项目中，我最自豪的技术细节是什么，为什么，实施前和实施后的数据对比如何，同事和领导对此的反应如何。</p><h3 id="B项目-1"><a href="#B项目-1" class="headerlink" title="B项目"></a>B项目</h3><p>我在此项目负责了哪些工作，分别在哪些地方做得出色/和别人不一样/成长快，这个项目中，我最困难的问题是什么，我采取了什么措施，最后结果如何。这个项目中，我最自豪的技术细节是什么，为什么，实施前和实施后的数据对比如何，同事和领导对此的反应如何。</p><h3 id="C项目-1"><a href="#C项目-1" class="headerlink" title="C项目"></a>C项目</h3><p>（每个公司写2~3个核心项目就好了，如果你有非常大量的项目，那么按分类进行合并，每一类选一个典型写出来。其他的一笔带过即可。）</p><h2 id="A公司-（-2018年1月-2018年8月-）"><a href="#A公司-（-2018年1月-2018年8月-）" class="headerlink" title="A公司 （ 2018年1月 ~ 2018年8月 ）"></a>A公司 （ 2018年1月 ~ 2018年8月 ）</h2><h3 id="A项目-2"><a href="#A项目-2" class="headerlink" title="A项目"></a>A项目</h3><p>我在此项目负责了哪些工作，分别在哪些地方做得出色/和别人不一样/成长快，这个项目中，我最困难的问题是什么，我采取了什么措施，最后结果如何。这个项目中，我最自豪的技术细节是什么，为什么，实施前和实施后的数据对比如何，同事和领导对此的反应如何。</p><h3 id="B项目-2"><a href="#B项目-2" class="headerlink" title="B项目"></a>B项目</h3><p>我在此项目负责了哪些工作，分别在哪些地方做得出色/和别人不一样/成长快，这个项目中，我最困难的问题是什么，我采取了什么措施，最后结果如何。这个项目中，我最自豪的技术细节是什么，为什么，实施前和实施后的数据对比如何，同事和领导对此的反应如何。</p><h3 id="C项目-2"><a href="#C项目-2" class="headerlink" title="C项目"></a>C项目</h3><p>（每个公司写2~3个核心项目就好了，如果你有非常大量的项目，那么按分类进行合并，每一类选一个典型写出来。其他的一笔带过即可。）</p><hr><h1 id="开源项目和作品"><a href="#开源项目和作品" class="headerlink" title="开源项目和作品"></a>开源项目和作品</h1><p>（这一段用于放置工作以外的、可证明你的能力的材料）</p><h2 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h2><ul><li><a href="https://github.com/yourname/projectname">AAA</a>：项目的简要说明，Star和Fork数多的可以注明</li><li><a href="https://github.com/yourname/projectname">BBB</a>：项目的简要说明，Star和Fork数多的可以注明</li></ul><h2 id="技术文章"><a href="#技术文章" class="headerlink" title="技术文章"></a>技术文章</h2><ul><li><a href="https://wenwenmidgard.github.io/">BBB</a></li><li><a href="https://wenwenmidgard.github.io/">AAA(翻译文章)</a> （ <code>好的翻译文章可以侧证你对英文技术文档的阅读能力</code>）</li></ul><h2 id="演讲和讲义"><a href="#演讲和讲义" class="headerlink" title="演讲和讲义"></a>演讲和讲义</h2><ul><li>2019架构师大会演讲：<a href="https://wenwenmidgard.github.io/">AAA</a></li><li>9月公司内部分享：<a href="https://wenwenmidgard.github.io/">BBB</a></li></ul><hr><h1 id="技能清单"><a href="#技能清单" class="headerlink" title="技能清单"></a>技能清单</h1><ul><li>前端语言：HTML、CSS、JavaScript</li><li>前端框架：jQuery、Node.js、Vue.js、elementUI、React</li><li>数据库：MySQL、MongoDB、Redis</li><li>后端语言：Java、Python</li><li>后端框架：Eureka、Nacos、SSM、MyBatis-Plus、RabbitMQ、ElasticSearch、SpringCloud、Feign、Spring Cache、Spring Boot、Spring Security、OAuth 2/JWT、Sentinel</li><li>版本管理、文档和自动化部署工具：Svn、Git、Swagger、Jenkins、Docker</li><li>单元测试：JUnit、Jmeter</li><li>计算机能力：Windows、Linux、办公软件、Photoshop</li><li>语言能力：CET-4</li></ul><hr><h1 id="自我评价"><a href="#自我评价" class="headerlink" title="自我评价"></a>自我评价</h1><ol><li>有软件开发实习及维护经历，熟悉开发流程和维护过程。</li><li>具备良好的沟通能力和团队协作能力，有团队精神、能快速融入新的团队。</li><li>工作态度认真，能认真完成上级安排的任务，认真对待甲方安排的工作。</li><li>良好的自主学习能力，习惯制定学习计划，勤于学习，不断提高自身能力。</li></ol><hr>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>分类</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>标签</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
